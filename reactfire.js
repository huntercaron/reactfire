var CU=Object.create;var wg=Object.defineProperty;var AU=Object.getOwnPropertyDescriptor;var kU=Object.getOwnPropertyNames;var RU=Object.getPrototypeOf,NU=Object.prototype.hasOwnProperty;var Rr=e=>wg(e,"__esModule",{value:!0});var Le=(e,t)=>()=>(e&&(t=e(e=0)),t);var Bf=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var OU=(e,t,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of kU(t))!NU.call(e,r)&&r!=="default"&&wg(e,r,{get:()=>t[r],enumerable:!(n=AU(t,r))||n.enumerable});return e},Qu=e=>OU(Rr(wg(e!=null?CU(RU(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var gS=Bf((MY,Gf)=>{var $T,JT,ZT,eS,tS,nS,rS,iS,oS,qf,Eg,sS,aS,uS,Qs,cS,lS,fS,hS,pS,dS,vS,mS,Wf;(function(e){var t=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(r){e(n(t,n(r)))}):typeof Gf=="object"&&typeof Gf.exports=="object"?e(n(t,n(Gf.exports))):e(n(t));function n(r,i){return r!==t&&(typeof Object.create=="function"?Object.defineProperty(r,"__esModule",{value:!0}):r.__esModule=!0),function(s,a){return r[s]=i?i(s,a):a}}})(function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])};$T=function(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(r,i);function s(){this.constructor=r}r.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)},JT=Object.assign||function(r){for(var i,s=1,a=arguments.length;s<a;s++){i=arguments[s];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(r[c]=i[c])}return r},ZT=function(r,i){var s={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&i.indexOf(a)<0&&(s[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(r);c<a.length;c++)i.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(r,a[c])&&(s[a[c]]=r[a[c]]);return s},eS=function(r,i,s,a){var c=arguments.length,l=c<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(r,i,s,a);else for(var d=r.length-1;d>=0;d--)(h=r[d])&&(l=(c<3?h(l):c>3?h(i,s,l):h(i,s))||l);return c>3&&l&&Object.defineProperty(i,s,l),l},tS=function(r,i){return function(s,a){i(s,a,r)}},nS=function(r,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,i)},rS=function(r,i,s,a){function c(l){return l instanceof s?l:new s(function(h){h(l)})}return new(s||(s=Promise))(function(l,h){function d(_){try{m(a.next(_))}catch(w){h(w)}}function g(_){try{m(a.throw(_))}catch(w){h(w)}}function m(_){_.done?l(_.value):c(_.value).then(d,g)}m((a=a.apply(r,i||[])).next())})},iS=function(r,i){var s={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,c,l,h;return h={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function d(m){return function(_){return g([m,_])}}function g(m){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,c&&(l=m[0]&2?c.return:m[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,m[1])).done)return l;switch(c=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return s.label++,{value:m[1],done:!1};case 5:s.label++,c=m[1],m=[0];continue;case 7:m=s.ops.pop(),s.trys.pop();continue;default:if(l=s.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){s=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){s.label=m[1];break}if(m[0]===6&&s.label<l[1]){s.label=l[1],l=m;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(m);break}l[2]&&s.ops.pop(),s.trys.pop();continue}m=i.call(r,s)}catch(_){m=[6,_],c=0}finally{a=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},oS=function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&Wf(i,r,s)},Wf=Object.create?function(r,i,s,a){a===void 0&&(a=s),Object.defineProperty(r,a,{enumerable:!0,get:function(){return i[s]}})}:function(r,i,s,a){a===void 0&&(a=s),r[a]=i[s]},qf=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&r[i],a=0;if(s)return s.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&a>=r.length&&(r=void 0),{value:r&&r[a++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Eg=function(r,i){var s=typeof Symbol=="function"&&r[Symbol.iterator];if(!s)return r;var a=s.call(r),c,l=[],h;try{for(;(i===void 0||i-- >0)&&!(c=a.next()).done;)l.push(c.value)}catch(d){h={error:d}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(h)throw h.error}}return l},sS=function(){for(var r=[],i=0;i<arguments.length;i++)r=r.concat(Eg(arguments[i]));return r},aS=function(){for(var r=0,i=0,s=arguments.length;i<s;i++)r+=arguments[i].length;for(var a=Array(r),c=0,i=0;i<s;i++)for(var l=arguments[i],h=0,d=l.length;h<d;h++,c++)a[c]=l[h];return a},uS=function(r,i){for(var s=0,a=i.length,c=r.length;s<a;s++,c++)r[c]=i[s];return r},Qs=function(r){return this instanceof Qs?(this.v=r,this):new Qs(r)},cS=function(r,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(r,i||[]),c,l=[];return c={},h("next"),h("throw"),h("return"),c[Symbol.asyncIterator]=function(){return this},c;function h(E){a[E]&&(c[E]=function(T){return new Promise(function(S,R){l.push([E,T,S,R])>1||d(E,T)})})}function d(E,T){try{g(a[E](T))}catch(S){w(l[0][3],S)}}function g(E){E.value instanceof Qs?Promise.resolve(E.value.v).then(m,_):w(l[0][2],E)}function m(E){d("next",E)}function _(E){d("throw",E)}function w(E,T){E(T),l.shift(),l.length&&d(l[0][0],l[0][1])}},lS=function(r){var i,s;return i={},a("next"),a("throw",function(c){throw c}),a("return"),i[Symbol.iterator]=function(){return this},i;function a(c,l){i[c]=r[c]?function(h){return(s=!s)?{value:Qs(r[c](h)),done:c==="return"}:l?l(h):h}:l}},fS=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r[Symbol.asyncIterator],s;return i?i.call(r):(r=typeof qf=="function"?qf(r):r[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(l){s[l]=r[l]&&function(h){return new Promise(function(d,g){h=r[l](h),c(d,g,h.done,h.value)})}}function c(l,h,d,g){Promise.resolve(g).then(function(m){l({value:m,done:d})},h)}},hS=function(r,i){return Object.defineProperty?Object.defineProperty(r,"raw",{value:i}):r.raw=i,r};var n=Object.create?function(r,i){Object.defineProperty(r,"default",{enumerable:!0,value:i})}:function(r,i){r.default=i};pS=function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var s in r)s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)&&Wf(i,r,s);return n(i,r),i},dS=function(r){return r&&r.__esModule?r:{default:r}},vS=function(r,i){if(!i.has(r))throw new TypeError("attempted to get private field on non-instance");return i.get(r)},mS=function(r,i,s){if(!i.has(r))throw new TypeError("attempted to set private field on non-instance");return i.set(r,s),s},e("__extends",$T),e("__assign",JT),e("__rest",ZT),e("__decorate",eS),e("__param",tS),e("__metadata",nS),e("__awaiter",rS),e("__generator",iS),e("__exportStar",oS),e("__createBinding",Wf),e("__values",qf),e("__read",Eg),e("__spread",sS),e("__spreadArrays",aS),e("__spreadArray",uS),e("__await",Qs),e("__asyncGenerator",cS),e("__asyncDelegator",lS),e("__asyncValues",fS),e("__makeTemplateObject",hS),e("__importStar",pS),e("__importDefault",dS),e("__classPrivateFieldGet",vS),e("__classPrivateFieldSet",mS)})});var EC=Bf((a9,vh)=>{var nC,rC,iC,oC,sC,aC,uC,cC,lC,ph,jg,fC,hC,pC,ta,dC,vC,mC,gC,yC,_C,bC,wC,dh;(function(e){var t=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(r){e(n(t,n(r)))}):typeof vh=="object"&&typeof vh.exports=="object"?e(n(t,n(vh.exports))):e(n(t));function n(r,i){return r!==t&&(typeof Object.create=="function"?Object.defineProperty(r,"__esModule",{value:!0}):r.__esModule=!0),function(s,a){return r[s]=i?i(s,a):a}}})(function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])};nC=function(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(r,i);function s(){this.constructor=r}r.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)},rC=Object.assign||function(r){for(var i,s=1,a=arguments.length;s<a;s++){i=arguments[s];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(r[c]=i[c])}return r},iC=function(r,i){var s={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&i.indexOf(a)<0&&(s[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(r);c<a.length;c++)i.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(r,a[c])&&(s[a[c]]=r[a[c]]);return s},oC=function(r,i,s,a){var c=arguments.length,l=c<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(r,i,s,a);else for(var d=r.length-1;d>=0;d--)(h=r[d])&&(l=(c<3?h(l):c>3?h(i,s,l):h(i,s))||l);return c>3&&l&&Object.defineProperty(i,s,l),l},sC=function(r,i){return function(s,a){i(s,a,r)}},aC=function(r,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,i)},uC=function(r,i,s,a){function c(l){return l instanceof s?l:new s(function(h){h(l)})}return new(s||(s=Promise))(function(l,h){function d(_){try{m(a.next(_))}catch(w){h(w)}}function g(_){try{m(a.throw(_))}catch(w){h(w)}}function m(_){_.done?l(_.value):c(_.value).then(d,g)}m((a=a.apply(r,i||[])).next())})},cC=function(r,i){var s={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,c,l,h;return h={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function d(m){return function(_){return g([m,_])}}function g(m){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,c&&(l=m[0]&2?c.return:m[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,m[1])).done)return l;switch(c=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return s.label++,{value:m[1],done:!1};case 5:s.label++,c=m[1],m=[0];continue;case 7:m=s.ops.pop(),s.trys.pop();continue;default:if(l=s.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){s=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){s.label=m[1];break}if(m[0]===6&&s.label<l[1]){s.label=l[1],l=m;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(m);break}l[2]&&s.ops.pop(),s.trys.pop();continue}m=i.call(r,s)}catch(_){m=[6,_],c=0}finally{a=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},lC=function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&dh(i,r,s)},dh=Object.create?function(r,i,s,a){a===void 0&&(a=s),Object.defineProperty(r,a,{enumerable:!0,get:function(){return i[s]}})}:function(r,i,s,a){a===void 0&&(a=s),r[a]=i[s]},ph=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&r[i],a=0;if(s)return s.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&a>=r.length&&(r=void 0),{value:r&&r[a++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},jg=function(r,i){var s=typeof Symbol=="function"&&r[Symbol.iterator];if(!s)return r;var a=s.call(r),c,l=[],h;try{for(;(i===void 0||i-- >0)&&!(c=a.next()).done;)l.push(c.value)}catch(d){h={error:d}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(h)throw h.error}}return l},fC=function(){for(var r=[],i=0;i<arguments.length;i++)r=r.concat(jg(arguments[i]));return r},hC=function(){for(var r=0,i=0,s=arguments.length;i<s;i++)r+=arguments[i].length;for(var a=Array(r),c=0,i=0;i<s;i++)for(var l=arguments[i],h=0,d=l.length;h<d;h++,c++)a[c]=l[h];return a},pC=function(r,i,s){if(s||arguments.length===2)for(var a=0,c=i.length,l;a<c;a++)(l||!(a in i))&&(l||(l=Array.prototype.slice.call(i,0,a)),l[a]=i[a]);return r.concat(l||i)},ta=function(r){return this instanceof ta?(this.v=r,this):new ta(r)},dC=function(r,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(r,i||[]),c,l=[];return c={},h("next"),h("throw"),h("return"),c[Symbol.asyncIterator]=function(){return this},c;function h(E){a[E]&&(c[E]=function(T){return new Promise(function(S,R){l.push([E,T,S,R])>1||d(E,T)})})}function d(E,T){try{g(a[E](T))}catch(S){w(l[0][3],S)}}function g(E){E.value instanceof ta?Promise.resolve(E.value.v).then(m,_):w(l[0][2],E)}function m(E){d("next",E)}function _(E){d("throw",E)}function w(E,T){E(T),l.shift(),l.length&&d(l[0][0],l[0][1])}},vC=function(r){var i,s;return i={},a("next"),a("throw",function(c){throw c}),a("return"),i[Symbol.iterator]=function(){return this},i;function a(c,l){i[c]=r[c]?function(h){return(s=!s)?{value:ta(r[c](h)),done:c==="return"}:l?l(h):h}:l}},mC=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r[Symbol.asyncIterator],s;return i?i.call(r):(r=typeof ph=="function"?ph(r):r[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(l){s[l]=r[l]&&function(h){return new Promise(function(d,g){h=r[l](h),c(d,g,h.done,h.value)})}}function c(l,h,d,g){Promise.resolve(g).then(function(m){l({value:m,done:d})},h)}},gC=function(r,i){return Object.defineProperty?Object.defineProperty(r,"raw",{value:i}):r.raw=i,r};var n=Object.create?function(r,i){Object.defineProperty(r,"default",{enumerable:!0,value:i})}:function(r,i){r.default=i};yC=function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var s in r)s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)&&dh(i,r,s);return n(i,r),i},_C=function(r){return r&&r.__esModule?r:{default:r}},bC=function(r,i,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?r!==i||!a:!i.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(r):a?a.value:i.get(r)},wC=function(r,i,s,a,c){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?r!==i||!c:!i.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?c.call(r,s):c?c.value=s:i.set(r,s),s},e("__extends",nC),e("__assign",rC),e("__rest",iC),e("__decorate",oC),e("__param",sC),e("__metadata",aC),e("__awaiter",uC),e("__generator",cC),e("__exportStar",lC),e("__createBinding",dh),e("__values",ph),e("__read",jg),e("__spread",fC),e("__spreadArrays",hC),e("__spreadArray",pC),e("__await",ta),e("__asyncGenerator",dC),e("__asyncDelegator",vC),e("__asyncValues",mC),e("__makeTemplateObject",gC),e("__importStar",yC),e("__importDefault",_C),e("__classPrivateFieldGet",bC),e("__classPrivateFieldSet",wC)})});var IC,W,Ee,u9,c9,l9,f9,A,C,h9,p9,Xe,nt,d9,v9,oe,m9,g9,y9,_9,b9,w9,E9,I9,T9,yn=Le(()=>{IC=Qu(EC()),{__extends:W,__assign:Ee,__rest:u9,__decorate:c9,__param:l9,__metadata:f9,__awaiter:A,__generator:C,__exportStar:h9,__createBinding:p9,__values:Xe,__read:nt,__spread:d9,__spreadArrays:v9,__spreadArray:oe,__await:m9,__asyncGenerator:g9,__asyncDelegator:y9,__asyncValues:_9,__makeTemplateObject:b9,__importStar:w9,__importDefault:E9,__classPrivateFieldGet:I9,__classPrivateFieldSet:T9}=IC.default});function mh(e){return ra(void 0,e)}function ra(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)!t.hasOwnProperty(r)||!HU(r)||(e[r]=ra(e[r],t[r]));return e}function HU(e){return e!=="__proto__"}function gh(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Ee({iss:"https://securetoken.google.com/"+r,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),c="";return[na.encodeString(JSON.stringify(n),!1),na.encodeString(JSON.stringify(a),!1),c].join(".")}function Ri(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nc(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ri())}function AC(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(e){return!1}}function kC(){return typeof self=="object"&&self.self===self}function rc(){var e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function yh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RC(){return Ri().indexOf("Electron/")>=0}function NC(){var e=Ri();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function OC(){return Ri().indexOf("MSAppHost/")>=0}function lr(){return Vg.NODE_CLIENT===!0||Vg.NODE_ADMIN===!0}function ic(){return"indexedDB"in self&&indexedDB!=null}function oc(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(s){t(s)}})}function Bg(){return!(!navigator||!navigator.cookieEnabled)}function QU(e,t){return e.replace(YU,function(n,r){var i=t[r];return i!=null?String(i):"<"+r+"?>"})}function ia(e){return JSON.parse(e)}function it(e){return JSON.stringify(e)}function Yt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ni(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function _h(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function sc(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function LC(e){for(var t=[],n=function(l,h){Array.isArray(h)?h.forEach(function(d){t.push(encodeURIComponent(l)+"="+encodeURIComponent(d))}):t.push(encodeURIComponent(l)+"="+encodeURIComponent(h))},r=0,i=Object.entries(e);r<i.length;r++){var s=i[r],a=s[0],c=s[1];n(a,c)}return t.length?"&"+t.join("&"):""}function FC(e,t){var n=new XU(e,t);return n.subscribe.bind(n)}function $U(e,t){if(typeof e!="object"||e===null)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&typeof e[i]=="function")return!0}return!1}function qg(){}function Xt(e,t){return e+" failed: "+t+" argument "}function ht(e,t,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(Xt(e,t)+"must be a valid function.")}function Wg(e,t,n,r){if(!(r&&!n)&&(typeof n!="object"||n===null))throw new Error(Xt(e,t)+"must be a valid context object.")}function uc(e,t,n){t===void 0&&(t=JU),n===void 0&&(n=ZU);var r=t*Math.pow(n,e),i=Math.round(tj*r*(Math.random()-.5)*2);return Math.min(ej,r+i)}function se(e){return e&&e._delegate?e._delegate:e}var Vg,V,Mo,TC,KU,na,SC,CC,Dt,zU,Or,_n,YU,xC,PC,DC,MC,XU,ne,UC,ac,JU,ZU,ej,tj,Vn=Le(()=>{yn();Vg={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};V=function(e,t){if(!e)throw Mo(t)},Mo=function(e){return new Error("Firebase Database ("+Vg.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};TC=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},KU=function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){var s=e[n++],a=e[n++],c=e[n++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{var s=e[n++],a=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return t.join("")},na={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var s=e[i],a=i+1<e.length,c=a?e[i+1]:0,l=i+2<e.length,h=l?e[i+2]:0,d=s>>2,g=(s&3)<<4|c>>4,m=(c&15)<<2|h>>6,_=h&63;l||(_=64,a||(m=64)),r.push(n[d],n[g],n[m],n[_])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(TC(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):KU(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var s=n[e.charAt(i++)],a=i<e.length,c=a?n[e.charAt(i)]:0;++i;var l=i<e.length,h=l?n[e.charAt(i)]:64;++i;var d=i<e.length,g=d?n[e.charAt(i)]:64;if(++i,s==null||c==null||h==null||g==null)throw Error();var m=s<<2|c>>4;if(r.push(m),h!==64){var _=c<<4&240|h>>2;if(r.push(_),g!==64){var w=h<<6&192|g;r.push(w)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},SC=function(e){var t=TC(e);return na.encodeByteArray(t,!0)},CC=function(e){try{return na.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};Dt=function(){function e(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){t.resolve=n,t.reject=r})}return e.prototype.wrapCallback=function(t){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof t=="function"&&(n.promise.catch(function(){}),t.length===1?t(r):t(r,i))}},e}();zU="FirebaseError",Or=function(e){W(t,e);function t(n,r,i){var s=e.call(this,r)||this;return s.code=n,s.customData=i,s.name=zU,Object.setPrototypeOf(s,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,_n.prototype.create),s}return t}(Error),_n=function(){function e(t,n,r){this.service=t,this.serviceName=n,this.errors=r}return e.prototype.create=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n[0]||{},s=this.service+"/"+t,a=this.errors[t],c=a?QU(a,i):"Error",l=this.serviceName+": "+c+" ("+s+").",h=new Or(s,l,i);return h},e}();YU=/\{\$([^}]+)}/g;xC=function(e){var t={},n={},r={},i="";try{var s=e.split(".");t=ia(CC(s[0])||""),n=ia(CC(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(a){}return{header:t,claims:n,data:r,signature:i}},PC=function(e){var t=xC(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},DC=function(e){var t=xC(e).claims;return typeof t=="object"&&t.admin===!0};MC=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,n){n||(n=0);var r=this.W_;if(typeof t=="string")for(var i=0;i<16;i++)r[i]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(var i=0;i<16;i++)r[i]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(var i=16;i<80;i++){var s=r[i-3]^r[i-8]^r[i-14]^r[i-16];r[i]=(s<<1|s>>>31)&4294967295}for(var a=this.chain_[0],c=this.chain_[1],l=this.chain_[2],h=this.chain_[3],d=this.chain_[4],g,m,i=0;i<80;i++){i<40?i<20?(g=h^c&(l^h),m=1518500249):(g=c^l^h,m=1859775393):i<60?(g=c&l|h&(c|l),m=2400959708):(g=c^l^h,m=3395469782);var s=(a<<5|a>>>27)+g+d+m+r[i]&4294967295;d=h,h=l,l=(c<<30|c>>>2)&4294967295,c=a,a=s}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295},e.prototype.update=function(t,n){if(t!=null){n===void 0&&(n=t.length);for(var r=n-this.blockSize,i=0,s=this.buf_,a=this.inbuf_;i<n;){if(a===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(s[a]=t.charCodeAt(i),++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}else for(;i<n;)if(s[a]=t[i],++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}this.inbuf_=a,this.total_+=n}},e.prototype.digest=function(){var t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);for(var i=0,r=0;r<5;r++)for(var s=24;s>=0;s-=8)t[i]=this.chain_[r]>>s&255,++i;return t},e}();XU=function(){function e(t,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(i){r.error(i)})}return e.prototype.next=function(t){this.forEachObserver(function(n){n.next(t)})},e.prototype.error=function(t){this.forEachObserver(function(n){n.error(t)}),this.close(t)},e.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},e.prototype.subscribe=function(t,n,r){var i=this,s;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");$U(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:r},s.next===void 0&&(s.next=qg),s.error===void 0&&(s.error=qg),s.complete===void 0&&(s.complete=qg);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?s.error(i.finalError):s.complete()}catch(c){}}),this.observers.push(s),a},e.prototype.unsubscribeOne=function(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},e.prototype.forEachObserver=function(t){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,t)},e.prototype.sendOne=function(t,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[t]!==void 0)try{n(r.observers[t])}catch(i){typeof console!="undefined"&&console.error&&console.error(i)}})},e.prototype.close=function(t){var n=this;this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},e}();ne=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=n===0?"none":"no more than "+n),i){var s=e+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(s)}};UC=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,V(r<e.length,"Surrogate pair missing trail surrogate.");var a=e.charCodeAt(r)-56320;i=65536+(s<<10)+a}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},ac=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};JU=1e3,ZU=2,ej=4*60*60*1e3,tj=.5;});function nj(e){return e===oa?void 0:e}function rj(e){return e.instantiationMode==="EAGER"}var qe,oa,Gg,bh,fr=Le(()=>{yn();Vn();qe=function(){function e(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},e.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},e.prototype.setServiceProps=function(t){return this.serviceProps=t,this},e.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},e}();oa="[DEFAULT]";Gg=function(){function e(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(t){var n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){var r=new Dt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(s){}}return this.instancesDeferred.get(n).promise},e.prototype.getImmediate=function(t){var n,r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error("Service "+this.name+" is not available")}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(t){var n,r;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,!!this.shouldAutoInitialize()){if(rj(t))try{this.getOrInitializeService({instanceIdentifier:oa})}catch(g){}try{for(var i=Xe(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=nt(s.value,2),c=a[0],l=a[1],h=this.normalizeInstanceIdentifier(c);try{var d=this.getOrInitializeService({instanceIdentifier:h});l.resolve(d)}catch(g){}}}catch(g){n={error:g}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}},e.prototype.clearInstance=function(t){t===void 0&&(t=oa),this.instancesDeferred.delete(t),this.instances.delete(t)},e.prototype.delete=function(){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(oe(oe([],nt(t.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))),nt(t.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()}))))];case 1:return n.sent(),[2]}})})},e.prototype.isComponentSet=function(){return this.component!=null},e.prototype.isInitialized=function(t){return t===void 0&&(t=oa),this.instances.has(t)},e.prototype.initialize=function(t){var n,r;t===void 0&&(t={});var i=t.options,s=i===void 0?{}:i,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:a,options:s});try{for(var l=Xe(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var d=nt(h.value,2),g=d[0],m=d[1],_=this.normalizeInstanceIdentifier(g);a===_&&m.resolve(c)}}catch(w){n={error:w}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return this.invokeOnInitCallbacks(c,a),c},e.prototype.onInit=function(t,n){var r,i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);var a=this.instances.get(i);return a&&t(a,i),function(){s.delete(t)}},e.prototype.invokeOnInitCallbacks=function(t,n){var r,i,s=this.onInitCallbacks.get(n);if(!!s)try{for(var a=Xe(s),c=a.next();!c.done;c=a.next()){var l=c.value;try{l(t,n)}catch(h){}}}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},e.prototype.getOrInitializeService=function(t){var n=t.instanceIdentifier,r=t.options,i=r===void 0?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:nj(n),options:i}),this.instances.set(n,s),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(a){}return s||null},e.prototype.normalizeInstanceIdentifier=function(t){return t===void 0&&(t=oa),this.component?this.component.multipleInstances?t:oa:t},e.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},e}();bh=function(){function e(t){this.name=t,this.providers=new Map}return e.prototype.addComponent=function(t){var n=this.getProvider(t.name);if(n.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);n.setComponent(t)},e.prototype.addOrOverwriteComponent=function(t){var n=this.getProvider(t.name);n.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},e.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var n=new Gg(t,this);return this.providers.set(t,n),n},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()});function hr(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],a=0,c=s.length;a<c;a++,i++)r[i]=s[a];return r}function VC(e){Kg.forEach(function(t){t.setLogLevel(e)})}function BC(e,t){for(var n=function(a){var c=null;t&&t.level&&(c=jC[t.level]),e===null?a.userLogHandler=null:a.userLogHandler=function(l,h){for(var d=[],g=2;g<arguments.length;g++)d[g-2]=arguments[g];var m=d.map(function(_){if(_==null)return null;if(typeof _=="string")return _;if(typeof _=="number"||typeof _=="boolean")return _.toString();if(_ instanceof Error)return _.message;try{return JSON.stringify(_)}catch(w){return null}}).filter(function(_){return _}).join(" ");h>=(c??l.logLevel)&&e({level:le[h].toLowerCase(),message:m,args:d,type:l.name})}},r=0,i=Kg;r<i.length;r++){var s=i[r];n(s)}}var Fo,Kg,le,jC,ij,oj,sj,Bn,Oi=Le(()=>{Kg=[];(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(le||(le={}));jC={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},ij=le.INFO,oj=(Fo={},Fo[le.DEBUG]="log",Fo[le.VERBOSE]="log",Fo[le.INFO]="info",Fo[le.WARN]="warn",Fo[le.ERROR]="error",Fo),sj=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=new Date().toISOString(),s=oj[t];if(s)console[s].apply(console,hr(["["+i+"]  "+e.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}},Bn=function(){function e(t){this.name=t,this._logLevel=ij,this._logHandler=sj,this._userLogHandler=null,Kg.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in le))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(t){this._logLevel=typeof t=="string"?jC[t]:t},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,hr([this,le.DEBUG],t)),this._logHandler.apply(this,hr([this,le.DEBUG],t))},e.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,hr([this,le.VERBOSE],t)),this._logHandler.apply(this,hr([this,le.VERBOSE],t))},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,hr([this,le.INFO],t)),this._logHandler.apply(this,hr([this,le.INFO],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,hr([this,le.WARN],t)),this._logHandler.apply(this,hr([this,le.WARN],t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,hr([this,le.ERROR],t)),this._logHandler.apply(this,hr([this,le.ERROR],t))},e}()});function Ij(e){var t={},n=new Map,r={__esModule:!0,initializeApp:a,app:s,registerVersion:h,setLogLevel:VC,onLog:d,apps:null,SDK_VERSION:Ej,INTERNAL:{registerComponent:l,removeApp:i,components:n,useAsService:g}};r.default=r,Object.defineProperty(r,"apps",{get:c});function i(m){delete t[m]}function s(m){if(m=m||wh,!Yt(t,m))throw sa.create("no-app",{appName:m});return t[m]}s.App=e;function a(m,_){if(_===void 0&&(_={}),typeof _!="object"||_===null){var w=_;_={name:w}}var E=_;E.name===void 0&&(E.name=wh);var T=E.name;if(typeof T!="string"||!T)throw sa.create("bad-app-name",{appName:String(T)});if(Yt(t,T))throw sa.create("duplicate-app",{appName:T});var S=new e(m,E,r);return t[T]=S,S}function c(){return Object.keys(t).map(function(m){return t[m]})}function l(m){var _=m.name;if(n.has(_))return aa.debug("There were multiple attempts to register component "+_+"."),m.type==="PUBLIC"?r[_]:null;if(n.set(_,m),m.type==="PUBLIC"){var w=function(R){if(R===void 0&&(R=s()),typeof R[_]!="function")throw sa.create("invalid-app-argument",{appName:_});return R[_]()};m.serviceProps!==void 0&&ra(w,m.serviceProps),r[_]=w,e.prototype[_]=function(){for(var R=[],O=0;O<arguments.length;O++)R[O]=arguments[O];var U=this._getService.bind(this,_);return U.apply(this,m.multipleInstances?R:[])}}for(var E=0,T=Object.keys(t);E<T.length;E++){var S=T[E];t[S]._addComponent(m)}return m.type==="PUBLIC"?r[_]:null}function h(m,_,w){var E,T=(E=wj[m])!==null&&E!==void 0?E:m;w&&(T+="-"+w);var S=T.match(/\s|\//),R=_.match(/\s|\//);if(S||R){var O=['Unable to register library "'+T+'" with version "'+_+'":'];S&&O.push('library name "'+T+'" contains illegal characters (whitespace or "/")'),S&&R&&O.push("and"),R&&O.push('version name "'+_+'" contains illegal characters (whitespace or "/")'),aa.warn(O.join(" "));return}l(new qe(T+"-version",function(){return{library:T,version:_}},"VERSION"))}function d(m,_){if(m!==null&&typeof m!="function")throw sa.create("invalid-log-argument");BC(m,_)}function g(m,_){if(_==="serverAuth")return null;var w=_;return w}return r}function WC(){var e=Ij(Eh);e.INTERNAL=Ee(Ee({},e.INTERNAL),{createFirebaseNamespace:WC,extendNamespace:t,createSubscribe:FC,ErrorFactory:_n,deepExtend:ra});function t(n){ra(e,n)}return e}function Sj(e){var t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}function Cj(e,t){e.INTERNAL.registerComponent(new qe("platform-logger",function(n){return new Tj(n)},"PRIVATE")),e.registerVersion(qC,uj,t),e.registerVersion("fire-js","")}var xi,aj,sa,qC,uj,cj,lj,fj,hj,pj,dj,vj,mj,gj,yj,_j,bj,Lt,wh,wj,aa,Eh,Ej,Hg,Tj,zg,Aj,GC,K,Cn=Le(()=>{yn();Vn();fr();Oi();aj=(xi={},xi["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",xi["bad-app-name"]="Illegal App name: '{$appName}",xi["duplicate-app"]="Firebase App named '{$appName}' already exists",xi["app-deleted"]="Firebase App named '{$appName}' already deleted",xi["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",xi["invalid-log-argument"]="First argument to `onLog` must be null or a function.",xi),sa=new _n("app","Firebase",aj),qC="@firebase/app",uj="0.6.27",cj="@firebase/analytics",lj="@firebase/app-check",fj="@firebase/auth",hj="@firebase/database",pj="@firebase/functions",dj="@firebase/installations",vj="@firebase/messaging",mj="@firebase/performance",gj="@firebase/remote-config",yj="@firebase/storage",_j="@firebase/firestore",bj="firebase-wrapper";wh="[DEFAULT]",wj=(Lt={},Lt[qC]="fire-core",Lt[cj]="fire-analytics",Lt[lj]="fire-app-check",Lt[fj]="fire-auth",Lt[hj]="fire-rtdb",Lt[pj]="fire-fn",Lt[dj]="fire-iid",Lt[vj]="fire-fcm",Lt[mj]="fire-perf",Lt[gj]="fire-rc",Lt[yj]="fire-gcs",Lt[_j]="fire-fst",Lt["fire-js"]="fire-js",Lt[bj]="fire-js-all",Lt);aa=new Bn("@firebase/app");Eh=function(){function e(t,n,r){var i=this;this.firebase_=r,this.isDeleted_=!1,this.name_=n.name,this.automaticDataCollectionEnabled_=n.automaticDataCollectionEnabled||!1,this.options_=mh(t),this.container=new bh(n.name),this._addComponent(new qe("app",function(){return i},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(s){return i._addComponent(s)})}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var t=this;return new Promise(function(n){t.checkDestroyed_(),n()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(n){return n.delete()}))}).then(function(){t.isDeleted_=!0})},e.prototype._getService=function(t,n){var r;n===void 0&&(n=wh),this.checkDestroyed_();var i=this.container.getProvider(t);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})},e.prototype._removeServiceInstance=function(t,n){n===void 0&&(n=wh),this.container.getProvider(t).clearInstance(n)},e.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(n){aa.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,n)}},e.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw sa.create("app-deleted",{appName:this.name_})},e}();Eh.prototype.name&&Eh.prototype.options||Eh.prototype.delete||console.log("dc");Ej="8.6.8";Hg=WC();Tj=function(){function e(t){this.container=t}return e.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map(function(n){if(Sj(n)){var r=n.getImmediate();return r.library+"/"+r.version}else return null}).filter(function(n){return n}).join(" ")},e}();kC()&&self.firebase!==void 0&&(aa.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `),zg=self.firebase.SDK_VERSION,zg&&zg.indexOf("LITE")>=0&&aa.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `));Aj=Hg.initializeApp;Hg.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return AC()&&aa.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/@rollup/plugin-node-resolve
      `),Aj.apply(void 0,e)};GC=Hg;Cj(GC);K=GC});var hA=Bf((V9,Sh)=>{var HC,zC,QC,YC,XC,$C,JC,ZC,eA,Ih,Qg,tA,nA,rA,ua,iA,oA,sA,aA,uA,cA,lA,fA,Th;(function(e){var t=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(r){e(n(t,n(r)))}):typeof Sh=="object"&&typeof Sh.exports=="object"?e(n(t,n(Sh.exports))):e(n(t));function n(r,i){return r!==t&&(typeof Object.create=="function"?Object.defineProperty(r,"__esModule",{value:!0}):r.__esModule=!0),function(s,a){return r[s]=i?i(s,a):a}}})(function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])};HC=function(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(r,i);function s(){this.constructor=r}r.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)},zC=Object.assign||function(r){for(var i,s=1,a=arguments.length;s<a;s++){i=arguments[s];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(r[c]=i[c])}return r},QC=function(r,i){var s={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&i.indexOf(a)<0&&(s[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(r);c<a.length;c++)i.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(r,a[c])&&(s[a[c]]=r[a[c]]);return s},YC=function(r,i,s,a){var c=arguments.length,l=c<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(r,i,s,a);else for(var d=r.length-1;d>=0;d--)(h=r[d])&&(l=(c<3?h(l):c>3?h(i,s,l):h(i,s))||l);return c>3&&l&&Object.defineProperty(i,s,l),l},XC=function(r,i){return function(s,a){i(s,a,r)}},$C=function(r,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,i)},JC=function(r,i,s,a){function c(l){return l instanceof s?l:new s(function(h){h(l)})}return new(s||(s=Promise))(function(l,h){function d(_){try{m(a.next(_))}catch(w){h(w)}}function g(_){try{m(a.throw(_))}catch(w){h(w)}}function m(_){_.done?l(_.value):c(_.value).then(d,g)}m((a=a.apply(r,i||[])).next())})},ZC=function(r,i){var s={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,c,l,h;return h={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function d(m){return function(_){return g([m,_])}}function g(m){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,c&&(l=m[0]&2?c.return:m[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,m[1])).done)return l;switch(c=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return s.label++,{value:m[1],done:!1};case 5:s.label++,c=m[1],m=[0];continue;case 7:m=s.ops.pop(),s.trys.pop();continue;default:if(l=s.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){s=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){s.label=m[1];break}if(m[0]===6&&s.label<l[1]){s.label=l[1],l=m;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(m);break}l[2]&&s.ops.pop(),s.trys.pop();continue}m=i.call(r,s)}catch(_){m=[6,_],c=0}finally{a=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},eA=function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&Th(i,r,s)},Th=Object.create?function(r,i,s,a){a===void 0&&(a=s),Object.defineProperty(r,a,{enumerable:!0,get:function(){return i[s]}})}:function(r,i,s,a){a===void 0&&(a=s),r[a]=i[s]},Ih=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&r[i],a=0;if(s)return s.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&a>=r.length&&(r=void 0),{value:r&&r[a++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Qg=function(r,i){var s=typeof Symbol=="function"&&r[Symbol.iterator];if(!s)return r;var a=s.call(r),c,l=[],h;try{for(;(i===void 0||i-- >0)&&!(c=a.next()).done;)l.push(c.value)}catch(d){h={error:d}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(h)throw h.error}}return l},tA=function(){for(var r=[],i=0;i<arguments.length;i++)r=r.concat(Qg(arguments[i]));return r},nA=function(){for(var r=0,i=0,s=arguments.length;i<s;i++)r+=arguments[i].length;for(var a=Array(r),c=0,i=0;i<s;i++)for(var l=arguments[i],h=0,d=l.length;h<d;h++,c++)a[c]=l[h];return a},rA=function(r,i){for(var s=0,a=i.length,c=r.length;s<a;s++,c++)r[c]=i[s];return r},ua=function(r){return this instanceof ua?(this.v=r,this):new ua(r)},iA=function(r,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(r,i||[]),c,l=[];return c={},h("next"),h("throw"),h("return"),c[Symbol.asyncIterator]=function(){return this},c;function h(E){a[E]&&(c[E]=function(T){return new Promise(function(S,R){l.push([E,T,S,R])>1||d(E,T)})})}function d(E,T){try{g(a[E](T))}catch(S){w(l[0][3],S)}}function g(E){E.value instanceof ua?Promise.resolve(E.value.v).then(m,_):w(l[0][2],E)}function m(E){d("next",E)}function _(E){d("throw",E)}function w(E,T){E(T),l.shift(),l.length&&d(l[0][0],l[0][1])}},oA=function(r){var i,s;return i={},a("next"),a("throw",function(c){throw c}),a("return"),i[Symbol.iterator]=function(){return this},i;function a(c,l){i[c]=r[c]?function(h){return(s=!s)?{value:ua(r[c](h)),done:c==="return"}:l?l(h):h}:l}},sA=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r[Symbol.asyncIterator],s;return i?i.call(r):(r=typeof Ih=="function"?Ih(r):r[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(l){s[l]=r[l]&&function(h){return new Promise(function(d,g){h=r[l](h),c(d,g,h.done,h.value)})}}function c(l,h,d,g){Promise.resolve(g).then(function(m){l({value:m,done:d})},h)}},aA=function(r,i){return Object.defineProperty?Object.defineProperty(r,"raw",{value:i}):r.raw=i,r};var n=Object.create?function(r,i){Object.defineProperty(r,"default",{enumerable:!0,value:i})}:function(r,i){r.default=i};uA=function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var s in r)s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)&&Th(i,r,s);return n(i,r),i},cA=function(r){return r&&r.__esModule?r:{default:r}},lA=function(r,i){if(!i.has(r))throw new TypeError("attempted to get private field on non-instance");return i.get(r)},fA=function(r,i,s){if(!i.has(r))throw new TypeError("attempted to set private field on non-instance");return i.set(r,s),s},e("__extends",HC),e("__assign",zC),e("__rest",QC),e("__decorate",YC),e("__param",XC),e("__metadata",$C),e("__awaiter",JC),e("__generator",ZC),e("__exportStar",eA),e("__createBinding",Th),e("__values",Ih),e("__read",Qg),e("__spread",tA),e("__spreadArrays",nA),e("__spreadArray",rA),e("__await",ua),e("__asyncGenerator",iA),e("__asyncDelegator",oA),e("__asyncValues",sA),e("__makeTemplateObject",aA),e("__importStar",uA),e("__importDefault",cA),e("__classPrivateFieldGet",lA),e("__classPrivateFieldSet",fA)})});function wA(e){Zg=e}function pt(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function zj(e,t){var n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}function Zj(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function UA(e,t,n){V(typeof t=="string","typeof type must == string"),V(typeof n=="object","typeof params must == object");var r;if(t===MA)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===FA)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);Zj(e)&&(n.ns=e.namespace);var i=[];return pt(n,function(s,a){i.push(s+"="+a)}),r+i.join("&")}function uy(e){var t=e.toString();return sy[t]||(sy[t]=new eV),sy[t]}function tV(e,t){var n=e.toString();return ay[n]||(ay[n]=t()),ay[n]}function Te(){return new Ce("")}function he(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Pi(e){return e.pieces_.length-e.pieceNum_}function Pe(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Ce(e.pieces_,t)}function fy(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function SV(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function gc(e,t){return t===void 0&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function rk(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Ce(t,0)}function We(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Ce)for(var r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else for(var i=t.split("/"),r=0;r<i.length;r++)i[r].length>0&&n.push(i[r]);return new Ce(n,0)}function pe(e){return e.pieceNum_>=e.pieces_.length}function Jt(e,t){var n=he(e),r=he(t);if(n===null)return t;if(n===r)return Jt(Pe(e),Pe(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function CV(e,t){for(var n=gc(e,0),r=gc(t,0),i=0;i<n.length&&i<r.length;i++){var s=Vo(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function hy(e,t){if(Pi(e)!==Pi(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function qn(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Pi(e)>Pi(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}function kV(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=ac(t),ik(e)}function RV(e){var t=e.parts_.pop();e.byteLength_-=ac(t),e.parts_.length>0&&(e.byteLength_-=1)}function ik(e){if(e.byteLength_>nk)throw new Error(e.errorPrefix_+"has a key path longer than "+nk+" bytes ("+e.byteLength_+").");if(e.parts_.length>tk)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+tk+") or object contains a cycle "+qo(e))}function qo(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}function FV(e,t){return Vo(e.name,t.name)}function py(e,t){return Vo(e,t)}function UV(e){dy=e}function jV(e){fk=e}function VV(e){hk=e}function ze(e,t){if(t===void 0&&(t=null),e===null)return ce.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),V(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){var n=e;return new ha(n,ze(t))}if(!(e instanceof Array)&&KV){var r=[],i=!1,s=e;if(pt(s,function(h,d){if(h.substring(0,1)!=="."){var g=ze(d);g.isEmpty()||(i=i||!g.getPriority().isEmpty(),r.push(new ye(h,g)))}}),r.length===0)return ce.EMPTY_NODE;var a=xh(r,FV,function(h){return h.name},py);if(i){var c=xh(r,Ue.getCompare());return new ce(a,ze(t),new Ph({".priority":c},{".priority":Ue}))}else return new ce(a,ze(t),Ph.Default)}else{var l=ce.EMPTY_NODE;return pt(e,function(h,d){if(Yt(e,h)&&h.substring(0,1)!=="."){var g=ze(d);(g.isLeafNode()||!g.isEmpty())&&(l=l.updateImmediateChild(h,g))}}),l.updatePriority(ze(t))}}function gk(e){return{type:"value",snapshotNode:e}}function va(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function wc(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ec(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function QV(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}function XV(e){return e.loadsAllData()?new _y(e.getIndex()):e.hasLimit()?new YV(e):new yk(e)}function $V(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}function JV(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}function by(e,t,n){var r=e.copy();return r.startSet_=!0,t===void 0&&(t=null),r.indexStartValue_=t,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function ZV(e,t,n){var r;if(e.index_===Dr)typeof t=="string"&&(t=vk(t)),r=by(e,t,n);else{var i=void 0;n==null?i=Pr:i=vk(n),r=by(e,t,i)}return r.startAfterSet_=!0,r}function wy(e,t,n){var r=e.copy();return r.endSet_=!0,t===void 0&&(t=null),r.indexEndValue_=t,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function e4(e,t,n){var r,i;return e.index_===Dr?(typeof t=="string"&&(t=mk(t)),i=wy(e,t,n)):(n==null?r=ei:r=mk(n),i=wy(e,t,r)),i.endBeforeSet_=!0,i}function Dh(e,t){var n=e.copy();return n.index_=t,n}function bk(e){var t={};if(e.isDefault())return t;var n;return e.index_===Ue?n="$priority":e.index_===gy?n="$value":e.index_===Dr?n="$key":(V(e.index_ instanceof my,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=it(n),e.startSet_&&(t.startAt=it(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+it(e.indexStartName_))),e.endSet_&&(t.endAt=it(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+it(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function wk(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==Ue&&(t.i=e.index_.toString()),t}function Lh(){return{value:null,children:new Map}}function ma(e,t,n){if(pe(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{var r=he(t);e.children.has(r)||e.children.set(r,Lh());var i=e.children.get(r);t=Pe(t),ma(i,t,n)}}function Ey(e,t){if(pe(t))return e.value=null,e.children.clear(),!0;if(e.value!==null){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(Ue,function(s,a){ma(e,new Ce(s),a)}),Ey(e,t)}else if(e.children.size>0){var r=he(t);if(t=Pe(t),e.children.has(r)){var i=Ey(e.children.get(r),t);i&&e.children.delete(r)}return e.children.size===0}else return!0}function Iy(e,t,n){e.value!==null?n(t,e.value):r4(e,function(r,i){var s=new Ce(t.toString()+"/"+r);Iy(i,s,n)})}function r4(e,t){e.children.forEach(function(n,r){t(r,n)})}function a4(e,t){e.statsToReport_[t]=!0}function Ty(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Sy(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Cy(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}function l4(e,t,n,r){var i=[],s=[];return t.forEach(function(a){a.type==="child_changed"&&e.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&s.push(QV(a.childName,a.snapshotNode))}),Ic(e,i,"child_removed",t,r,n),Ic(e,i,"child_added",t,r,n),Ic(e,i,"child_moved",s,r,n),Ic(e,i,"child_changed",t,r,n),Ic(e,i,"value",t,r,n),i}function Ic(e,t,n,r,i,s){var a=r.filter(function(c){return c.type===n});a.sort(function(c,l){return h4(e,c,l)}),a.forEach(function(c){var l=f4(e,c,s);i.forEach(function(h){h.respondsTo(c.type)&&t.push(h.createEvent(l,e.query_))})})}function f4(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function h4(e,t,n){if(t.childName==null||n.childName==null)throw Mo("Should only compare child_ events.");var r=new ye(t.childName,t.snapshotNode),i=new ye(n.childName,n.snapshotNode);return e.index_.compare(r,i)}function Fh(e,t){return{eventCache:e,serverCache:t}}function Tc(e,t,n,r){return Fh(new Di(t,n,r),e.serverCache)}function Sk(e,t,n,r){return Fh(e.eventCache,new Di(t,n,r))}function Uh(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Go(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}function Sc(e,t,n){if(pe(t))return new ni(new An(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){var i=r.path,s=r.value,a=Jt(i,t);return s=s.updateChild(a,n),new ni(e.writeTree_.set(i,s))}else{var c=new An(n),l=e.writeTree_.setTree(t,c);return new ni(l)}}function Ry(e,t,n){var r=e;return pt(n,function(i,s){r=Sc(r,We(t,i),s)}),r}function Ck(e,t){if(pe(t))return ni.empty();var n=e.writeTree_.setTree(t,new An(null));return new ni(n)}function Ny(e,t){return Ko(e,t)!=null}function Ko(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(Jt(n.path,t)):null}function Ak(e){var t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ue,function(r,i){t.push(new ye(r,i))}):e.writeTree_.children.inorderTraversal(function(r,i){i.value!=null&&t.push(new ye(r,i.value))}),t}function Li(e,t){if(pe(t))return e;var n=Ko(e,t);return n!=null?new ni(new An(n)):new ni(e.writeTree_.subtree(t))}function Oy(e){return e.writeTree_.isEmpty()}function ga(e,t){return kk(Te(),e.writeTree_,t)}function kk(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal(function(i,s){i===".priority"?(V(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=kk(We(e,i),s,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(We(e,".priority"),r)),n}function jh(e,t){return Pk(t,e)}function d4(e,t,n,r,i){V(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Sc(e.visibleWrites,t,n)),e.lastWriteId=r}function v4(e,t,n,r){V(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Ry(e.visibleWrites,t,n),e.lastWriteId=r}function m4(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function g4(e,t){var n=e.allWrites.findIndex(function(h){return h.writeId===t});V(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=e.allWrites.length-1;i&&a>=0;){var c=e.allWrites[a];c.visible&&(a>=n&&y4(c,r.path)?i=!1:qn(r.path,c.path)&&(s=!0)),a--}if(i){if(s)return _4(e),!0;if(r.snap)e.visibleWrites=Ck(e.visibleWrites,r.path);else{var l=r.children;pt(l,function(h){e.visibleWrites=Ck(e.visibleWrites,We(r.path,h))})}return!0}else return!1}function y4(e,t){if(e.snap)return qn(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&qn(We(e.path,n),t))return!0;return!1}function _4(e){e.visibleWrites=Rk(e.allWrites,b4,Te()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function b4(e){return e.visible}function Rk(e,t,n){for(var r=ni.empty(),i=0;i<e.length;++i){var s=e[i];if(t(s)){var a=s.path,c=void 0;if(s.snap)qn(n,a)?(c=Jt(n,a),r=Sc(r,c,s.snap)):qn(a,n)&&(c=Jt(a,n),r=Sc(r,Te(),s.snap.getChild(c)));else if(s.children){if(qn(n,a))c=Jt(n,a),r=Ry(r,c,s.children);else if(qn(a,n))if(c=Jt(a,n),pe(c))r=Ry(r,Te(),s.children);else{var l=Ni(s.children,he(c));if(l){var h=l.getChild(Pe(c));r=Sc(r,Te(),h)}}}else throw Mo("WriteRecord should have .snap or .children")}}return r}function Nk(e,t,n,r,i){if(!r&&!i){var s=Ko(e.visibleWrites,t);if(s!=null)return s;var a=Li(e.visibleWrites,t);if(Oy(a))return n;if(n==null&&!Ny(a,Te()))return null;var c=n||ce.EMPTY_NODE;return ga(a,c)}else{var l=Li(e.visibleWrites,t);if(!i&&Oy(l))return n;if(!i&&n==null&&!Ny(l,Te()))return null;var h=function(m){return(m.visible||i)&&(!r||!~r.indexOf(m.writeId))&&(qn(m.path,t)||qn(t,m.path))},d=Rk(e.allWrites,h,t),c=n||ce.EMPTY_NODE;return ga(d,c)}}function w4(e,t,n){var r=ce.EMPTY_NODE,i=Ko(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Ue,function(c,l){r=r.updateImmediateChild(c,l)}),r;if(n){var s=Li(e.visibleWrites,t);return n.forEachChild(Ue,function(c,l){var h=ga(Li(s,new Ce(c)),l);r=r.updateImmediateChild(c,h)}),Ak(s).forEach(function(c){r=r.updateImmediateChild(c.name,c.node)}),r}else{var a=Li(e.visibleWrites,t);return Ak(a).forEach(function(c){r=r.updateImmediateChild(c.name,c.node)}),r}}function E4(e,t,n,r,i){V(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=We(t,n);if(Ny(e.visibleWrites,s))return null;var a=Li(e.visibleWrites,s);return Oy(a)?i.getChild(n):ga(a,i.getChild(n))}function I4(e,t,n,r){var i=We(t,n),s=Ko(e.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){var a=Li(e.visibleWrites,i);return ga(a,r.getNode().getImmediateChild(n))}else return null}function T4(e,t){return Ko(e.visibleWrites,t)}function S4(e,t,n,r,i,s,a){var c,l=Li(e.visibleWrites,t),h=Ko(l,Te());if(h!=null)c=h;else if(n!=null)c=ga(l,n);else return[];if(c=c.withIndex(a),!c.isEmpty()&&!c.isLeafNode()){for(var d=[],g=a.getCompare(),m=s?c.getReverseIteratorFrom(r,a):c.getIteratorFrom(r,a),_=m.getNext();_&&d.length<i;)g(_,r)!==0&&d.push(_),_=m.getNext();return d}else return[]}function C4(){return{visibleWrites:ni.empty(),allWrites:[],lastWriteId:-1}}function Vh(e,t,n,r){return Nk(e.writeTree,e.treePath,t,n,r)}function xy(e,t){return w4(e.writeTree,e.treePath,t)}function Ok(e,t,n,r){return E4(e.writeTree,e.treePath,t,n,r)}function Bh(e,t){return T4(e.writeTree,We(e.treePath,t))}function A4(e,t,n,r,i,s){return S4(e.writeTree,e.treePath,t,n,r,i,s)}function Py(e,t,n){return I4(e.writeTree,e.treePath,t,n)}function xk(e,t){return Pk(We(e.treePath,t),e.writeTree)}function Pk(e,t){return{treePath:e,writeTree:t}}function N4(e){return{filter:e}}function O4(e,t){V(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),V(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function x4(e,t,n,r,i){var s=new k4,a,c;if(n.type===dr.OVERWRITE){var l=n;l.source.fromUser?a=Ly(e,t,l.path,l.snap,r,i,s):(V(l.source.fromServer,"Unknown source."),c=l.source.tagged||t.serverCache.isFiltered()&&!pe(l.path),a=qh(e,t,l.path,l.snap,r,i,c,s))}else if(n.type===dr.MERGE){var h=n;h.source.fromUser?a=D4(e,t,h.path,h.children,r,i,s):(V(h.source.fromServer,"Unknown source."),c=h.source.tagged||t.serverCache.isFiltered(),a=My(e,t,h.path,h.children,r,i,c,s))}else if(n.type===dr.ACK_USER_WRITE){var d=n;d.revert?a=F4(e,t,d.path,r,i,s):a=L4(e,t,d.path,d.affectedTree,r,i,s)}else if(n.type===dr.LISTEN_COMPLETE)a=M4(e,t,n.path,r,s);else throw Mo("Unknown operation type: "+n.type);var g=s.getChanges();return P4(t,a,g),{viewCache:a,changes:g}}function P4(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Uh(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(gk(Uh(t)))}}function Lk(e,t,n,r,i,s){var a=t.eventCache;if(Bh(r,n)!=null)return t;var c=void 0,l=void 0;if(pe(n))if(V(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var h=Go(t),d=h instanceof ce?h:ce.EMPTY_NODE,g=xy(r,d);c=e.filter.updateFullNode(t.eventCache.getNode(),g,s)}else{var m=Vh(r,Go(t));c=e.filter.updateFullNode(t.eventCache.getNode(),m,s)}else{var _=he(n);if(_===".priority"){V(Pi(n)===1,"Can't have a priority with additional path components");var w=a.getNode();l=t.serverCache.getNode();var E=Ok(r,n,w,l);E!=null?c=e.filter.updatePriority(w,E):c=a.getNode()}else{var T=Pe(n),S=void 0;if(a.isCompleteForChild(_)){l=t.serverCache.getNode();var R=Ok(r,n,a.getNode(),l);R!=null?S=a.getNode().getImmediateChild(_).updateChild(T,R):S=a.getNode().getImmediateChild(_)}else S=Py(r,_,t.serverCache);S!=null?c=e.filter.updateChild(a.getNode(),_,S,T,i,s):c=a.getNode()}}return Tc(t,c,a.isFullyInitialized()||pe(n),e.filter.filtersNodes())}function qh(e,t,n,r,i,s,a,c){var l=t.serverCache,h,d=a?e.filter:e.filter.getIndexedFilter();if(pe(n))h=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){var g=l.getNode().updateChild(n,r);h=d.updateFullNode(l.getNode(),g,null)}else{var m=he(n);if(!l.isCompleteForPath(n)&&Pi(n)>1)return t;var _=Pe(n),w=l.getNode().getImmediateChild(m),E=w.updateChild(_,r);m===".priority"?h=d.updatePriority(l.getNode(),E):h=d.updateChild(l.getNode(),m,E,_,Dk,null)}var T=Sk(t,h,l.isFullyInitialized()||pe(n),d.filtersNodes()),S=new Dy(i,T,s);return Lk(e,T,n,i,S,c)}function Ly(e,t,n,r,i,s,a){var c=t.eventCache,l,h,d=new Dy(i,t,s);if(pe(n))h=e.filter.updateFullNode(t.eventCache.getNode(),r,a),l=Tc(t,h,!0,e.filter.filtersNodes());else{var g=he(n);if(g===".priority")h=e.filter.updatePriority(t.eventCache.getNode(),r),l=Tc(t,h,c.isFullyInitialized(),c.isFiltered());else{var m=Pe(n),_=c.getNode().getImmediateChild(g),w=void 0;if(pe(m))w=r;else{var E=d.getCompleteChild(g);E!=null?fy(m)===".priority"&&E.getChild(rk(m)).isEmpty()?w=E:w=E.updateChild(m,r):w=ce.EMPTY_NODE}if(_.equals(w))l=t;else{var T=e.filter.updateChild(c.getNode(),g,w,m,d,a);l=Tc(t,T,c.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function Mk(e,t){return e.eventCache.isCompleteForChild(t)}function D4(e,t,n,r,i,s,a){var c=t;return r.foreach(function(l,h){var d=We(n,l);Mk(t,he(d))&&(c=Ly(e,c,d,h,i,s,a))}),r.foreach(function(l,h){var d=We(n,l);Mk(t,he(d))||(c=Ly(e,c,d,h,i,s,a))}),c}function Fk(e,t,n){return n.foreach(function(r,i){t=t.updateChild(r,i)}),t}function My(e,t,n,r,i,s,a,c){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var l=t,h;pe(n)?h=r:h=new An(null).setTree(n,r);var d=t.serverCache.getNode();return h.children.inorderTraversal(function(g,m){if(d.hasChild(g)){var _=t.serverCache.getNode().getImmediateChild(g),w=Fk(e,_,m);l=qh(e,l,new Ce(g),w,i,s,a,c)}}),h.children.inorderTraversal(function(g,m){var _=!t.serverCache.isCompleteForChild(g)&&m.value===void 0;if(!d.hasChild(g)&&!_){var w=t.serverCache.getNode().getImmediateChild(g),E=Fk(e,w,m);l=qh(e,l,new Ce(g),E,i,s,a,c)}}),l}function L4(e,t,n,r,i,s,a){if(Bh(i,n)!=null)return t;var c=t.serverCache.isFiltered(),l=t.serverCache;if(r.value!=null){if(pe(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return qh(e,t,n,l.getNode().getChild(n),i,s,c,a);if(pe(n)){var h=new An(null);return l.getNode().forEachChild(Dr,function(g,m){h=h.set(new Ce(g),m)}),My(e,t,n,h,i,s,c,a)}else return t}else{var d=new An(null);return r.foreach(function(g,m){var _=We(n,g);l.isCompleteForPath(_)&&(d=d.set(g,l.getNode().getChild(_)))}),My(e,t,n,d,i,s,c,a)}}function M4(e,t,n,r,i){var s=t.serverCache,a=Sk(t,s.getNode(),s.isFullyInitialized()||pe(n),s.isFiltered());return Lk(e,a,n,r,Dk,i)}function F4(e,t,n,r,i,s){var a;if(Bh(r,n)!=null)return t;var c=new Dy(r,t,i),l=t.eventCache.getNode(),h=void 0;if(pe(n)||he(n)===".priority"){var d=void 0;if(t.serverCache.isFullyInitialized())d=Vh(r,Go(t));else{var g=t.serverCache.getNode();V(g instanceof ce,"serverChildren would be complete if leaf node"),d=xy(r,g)}d=d,h=e.filter.updateFullNode(l,d,s)}else{var m=he(n),_=Py(r,m,t.serverCache);_==null&&t.serverCache.isCompleteForChild(m)&&(_=l.getImmediateChild(m)),_!=null?h=e.filter.updateChild(l,m,_,Pe(n),c,s):t.eventCache.getNode().hasChild(m)?h=e.filter.updateChild(l,m,ce.EMPTY_NODE,Pe(n),c,s):h=l,h.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=Vh(r,Go(t)),a.isLeafNode()&&(h=e.filter.updateFullNode(h,a,s)))}return a=t.serverCache.isFullyInitialized()||Bh(r,Te())!=null,Tc(t,h,a,e.filter.filtersNodes())}function j4(e){return e.viewCache_.serverCache.getNode()}function V4(e){return Uh(e.viewCache_)}function B4(e,t){var n=Go(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!pe(t)&&!n.getImmediateChild(he(t)).isEmpty())?n.getChild(t):null}function Uk(e){return e.eventRegistrations_.length===0}function q4(e,t){e.eventRegistrations_.push(t)}function jk(e,t,n){var r=[];if(n){V(t==null,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach(function(l){var h=l.createCancelEvent(n,i);h&&r.push(h)})}if(t){for(var s=[],a=0;a<e.eventRegistrations_.length;++a){var c=e.eventRegistrations_[a];if(!c.matches(t))s.push(c);else if(t.hasAnyCallback()){s=s.concat(e.eventRegistrations_.slice(a+1));break}}e.eventRegistrations_=s}else e.eventRegistrations_=[];return r}function Vk(e,t,n,r){t.type===dr.MERGE&&t.source.queryId!==null&&(V(Go(e.viewCache_),"We should always have a full cache before handling merges"),V(Uh(e.viewCache_),"Missing event cache, even though we have a server cache"));var i=e.viewCache_,s=x4(e.processor_,i,t,n,r);return O4(e.processor_,s.viewCache),V(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Bk(e,s.changes,s.viewCache.eventCache.getNode(),null)}function W4(e,t){var n=e.viewCache_.eventCache,r=[];if(!n.getNode().isLeafNode()){var i=n.getNode();i.forEachChild(Ue,function(s,a){r.push(va(s,a))})}return n.isFullyInitialized()&&r.push(gk(n.getNode())),Bk(e,r,n.getNode(),t)}function Bk(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return l4(e.eventGenerator_,t,n,i)}function G4(e){V(!Wh,"__referenceConstructor has already been defined"),Wh=e}function K4(){return V(Wh,"Reference.ts has not been loaded"),Wh}function H4(e){return e.views.size===0}function Fy(e,t,n,r){var i,s,a=t.source.queryId;if(a!==null){var c=e.views.get(a);return V(c!=null,"SyncTree gave us an op for an invalid query."),Vk(c,t,n,r)}else{var l=[];try{for(var h=Xe(e.views.values()),d=h.next();!d.done;d=h.next()){var c=d.value;l=l.concat(Vk(c,t,n,r))}}catch(g){i={error:g}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return l}}function Wk(e,t,n,r,i){var s=t._queryIdentifier,a=e.views.get(s);if(!a){var c=Vh(n,i?r:null),l=!1;c?l=!0:r instanceof ce?(c=xy(n,r),l=!1):(c=ce.EMPTY_NODE,l=!1);var h=Fh(new Di(c,l,!1),new Di(r,i,!1));return new U4(t,h)}return a}function z4(e,t,n,r,i,s){var a=Wk(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),q4(a,n),W4(a,n)}function Q4(e,t,n,r){var i,s,a=t._queryIdentifier,c=[],l=[],h=Fi(e);if(a==="default")try{for(var d=Xe(e.views.entries()),g=d.next();!g.done;g=d.next()){var m=nt(g.value,2),_=m[0],w=m[1];l=l.concat(jk(w,n,r)),Uk(w)&&(e.views.delete(_),w.query._queryParams.loadsAllData()||c.push(w.query))}}catch(E){i={error:E}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}else{var w=e.views.get(a);w&&(l=l.concat(jk(w,n,r)),Uk(w)&&(e.views.delete(a),w.query._queryParams.loadsAllData()||c.push(w.query)))}return h&&!Fi(e)&&c.push(new(K4())(t._repo,t._path)),{removed:c,events:l}}function Gk(e){var t,n,r=[];try{for(var i=Xe(e.views.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function Mi(e,t){var n,r,i=null;try{for(var s=Xe(e.views.values()),a=s.next();!a.done;a=s.next()){var c=a.value;i=i||B4(c,t)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function Kk(e,t){var n=t._queryParams;if(n.loadsAllData())return Gh(e);var r=t._queryIdentifier;return e.views.get(r)}function Hk(e,t){return Kk(e,t)!=null}function Fi(e){return Gh(e)!=null}function Gh(e){var t,n;try{for(var r=Xe(e.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;if(s.query._queryParams.loadsAllData())return s}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null}function Y4(e){V(!Kh,"__referenceConstructor has already been defined"),Kh=e}function X4(){return V(Kh,"Reference.ts has not been loaded"),Kh}function Uy(e,t,n,r,i){return d4(e.pendingWriteTree_,t,n,r,i),i?ya(e,new Mh(Ty(),t,n)):[]}function J4(e,t,n,r){v4(e.pendingWriteTree_,t,n,r);var i=An.fromObject(n);return ya(e,new Ay(Ty(),t,i))}function Ui(e,t,n){n===void 0&&(n=!1);var r=m4(e.pendingWriteTree_,t),i=g4(e.pendingWriteTree_,t);if(i){var s=new An(null);return r.snap!=null?s=s.set(Te(),!0):pt(r.children,function(a){s=s.set(new Ce(a),!0)}),ya(e,new u4(r.path,s,n))}else return[]}function Cc(e,t,n){return ya(e,new Mh(Sy(),t,n))}function Z4(e,t,n){var r=An.fromObject(n);return ya(e,new Ay(Sy(),t,r))}function eB(e,t){return ya(e,new Tk(Sy(),t))}function tB(e,t,n){var r=Vy(e,n);if(r){var i=By(r),s=i.path,a=i.queryId,c=Jt(s,t),l=new Tk(Cy(a),c);return qy(e,s,l)}else return[]}function jy(e,t,n,r){var i=t._path,s=e.syncPointTree_.get(i),a=[];if(s&&(t._queryIdentifier==="default"||Hk(s,t))){var c=Q4(s,t,n,r);H4(s)&&(e.syncPointTree_=e.syncPointTree_.remove(i));var l=c.removed;a=c.events;var h=l.findIndex(function(R){return R._queryParams.loadsAllData()})!==-1,d=e.syncPointTree_.findOnPath(i,function(R,O){return Fi(O)});if(h&&!d){var g=e.syncPointTree_.subtree(i);if(!g.isEmpty())for(var m=oB(g),_=0;_<m.length;++_){var w=m[_],E=w.query,T=$k(e,w);e.listenProvider_.startListening(Ac(E),zh(e,E),T.hashFn,T.onComplete)}}if(!d&&l.length>0&&!r)if(h){var S=null;e.listenProvider_.stopListening(Ac(t),S)}else l.forEach(function(R){var O=e.queryToTagMap.get(Qh(R));e.listenProvider_.stopListening(Ac(R),O)});sB(e,l)}return a}function nB(e,t,n,r){var i=Vy(e,r);if(i!=null){var s=By(i),a=s.path,c=s.queryId,l=Jt(a,t),h=new Mh(Cy(c),l,n);return qy(e,a,h)}else return[]}function rB(e,t,n,r){var i=Vy(e,r);if(i){var s=By(i),a=s.path,c=s.queryId,l=Jt(a,t),h=An.fromObject(n),d=new Ay(Cy(c),l,h);return qy(e,a,d)}else return[]}function Qk(e,t,n){var r=t._path,i=null,s=!1;e.syncPointTree_.foreachOnPath(r,function(E,T){var S=Jt(E,r);i=i||Mi(T,S),s=s||Fi(T)});var a=e.syncPointTree_.get(r);a?(s=s||Fi(a),i=i||Mi(a,Te())):(a=new qk,e.syncPointTree_=e.syncPointTree_.set(r,a));var c;if(i!=null)c=!0;else{c=!1,i=ce.EMPTY_NODE;var l=e.syncPointTree_.subtree(r);l.foreachChild(function(E,T){var S=Mi(T,Te());S&&(i=i.updateImmediateChild(E,S))})}var h=Hk(a,t);if(!h&&!t._queryParams.loadsAllData()){var d=Qh(t);V(!e.queryToTagMap.has(d),"View does not exist, but we have a tag");var g=aB();e.queryToTagMap.set(d,g),e.tagToQueryMap.set(g,d)}var m=jh(e.pendingWriteTree_,r),_=z4(a,t,n,m,i,c);if(!h&&!s){var w=Kk(a,t);_=_.concat(uB(e,t,w))}return _}function Hh(e,t,n){var r=!0,i=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,function(a,c){var l=Jt(a,t),h=Mi(c,l);if(h)return h});return Nk(i,t,s,n,r)}function iB(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,function(h,d){var g=Jt(h,n);r=r||Mi(d,g)});var i=e.syncPointTree_.get(n);i?r=r||Mi(i,Te()):(i=new qk,e.syncPointTree_=e.syncPointTree_.set(n,i));var s=r!=null,a=s?new Di(r,!0,!1):null,c=jh(e.pendingWriteTree_,t._path),l=Wk(i,t,c,s?a.getNode():ce.EMPTY_NODE,s);return V4(l)}function ya(e,t){return Yk(t,e.syncPointTree_,null,jh(e.pendingWriteTree_,Te()))}function Yk(e,t,n,r){if(pe(e.path))return Xk(e,t,n,r);var i=t.get(Te());n==null&&i!=null&&(n=Mi(i,Te()));var s=[],a=he(e.path),c=e.operationForChild(a),l=t.children.get(a);if(l&&c){var h=n?n.getImmediateChild(a):null,d=xk(r,a);s=s.concat(Yk(c,l,h,d))}return i&&(s=s.concat(Fy(i,e,r,n))),s}function Xk(e,t,n,r){var i=t.get(Te());n==null&&i!=null&&(n=Mi(i,Te()));var s=[];return t.children.inorderTraversal(function(a,c){var l=n?n.getImmediateChild(a):null,h=xk(r,a),d=e.operationForChild(a);d&&(s=s.concat(Xk(d,c,l,h)))}),i&&(s=s.concat(Fy(i,e,r,n))),s}function $k(e,t){var n=t.query,r=zh(e,n);return{hashFn:function(){var i=j4(t)||ce.EMPTY_NODE;return i.hash()},onComplete:function(i){if(i==="ok")return r?tB(e,n._path,r):eB(e,n._path);var s=zj(i,n);return jy(e,n,null,s)}}}function zh(e,t){var n=Qh(t);return e.queryToTagMap.get(n)}function Qh(e){return e._path.toString()+"$"+e._queryIdentifier}function Vy(e,t){return e.tagToQueryMap.get(t)}function By(e){var t=e.indexOf("$");return V(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Ce(e.substr(0,t))}}function qy(e,t,n){var r=e.syncPointTree_.get(t);V(r,"Missing sync point for query tag that we're tracking");var i=jh(e.pendingWriteTree_,t);return Fy(r,n,i,null)}function oB(e){return e.fold(function(t,n,r){if(n&&Fi(n)){var i=Gh(n);return[i]}else{var s=[];return n&&(s=Gk(n)),pt(r,function(a,c){s=s.concat(c)}),s}})}function Ac(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(X4())(e._repo,e._path):e}function sB(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=Qh(r),s=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(s)}}}function aB(){return $4++}function uB(e,t,n){var r=t._path,i=zh(e,t),s=$k(e,n),a=e.listenProvider_.startListening(Ac(t),i,s.hashFn,s.onComplete),c=e.syncPointTree_.subtree(r);if(i)V(!Fi(c.value),"If we're adding a query, it shouldn't be shadowed");else for(var l=c.fold(function(g,m,_){if(!pe(g)&&m&&Fi(m))return[Gh(m).query];var w=[];return m&&(w=w.concat(Gk(m).map(function(E){return E.query}))),pt(_,function(E,T){w=w.concat(T)}),w}),h=0;h<l.length;++h){var d=l[h];e.listenProvider_.stopListening(Ac(d),zh(e,d))}return a}function Gy(e,t,n){var r=e.getPriority().val(),i=Jk(r,t.getImmediateChild(".priority"),n),s;if(e.isLeafNode()){var a=e,c=Jk(a.getValue(),t,n);return c!==a.getValue()||i!==a.getPriority().val()?new ha(c,ze(i)):e}else{var l=e;return s=l,i!==l.getPriority().val()&&(s=s.updatePriority(new ha(i))),l.forEachChild(Ue,function(h,d){var g=Gy(d,t.getImmediateChild(h),n);g!==d&&(s=s.updateImmediateChild(h,g))}),s}}function Yh(e,t){for(var n=t instanceof Ce?t:new Ce(t),r=e,i=he(n);i!==null;){var s=Ni(r.node.children,i)||{children:{},childCount:0};r=new Ky(i,r,s),n=Pe(n),i=he(n)}return r}function Ho(e){return e.node.value}function Hy(e,t){e.node.value=t,zy(e)}function eR(e){return e.node.childCount>0}function dB(e){return Ho(e)===void 0&&!eR(e)}function Xh(e,t){pt(e.node.children,function(n,r){t(new Ky(n,e,r))})}function tR(e,t,n,r){n&&!r&&t(e),Xh(e,function(i){tR(i,t,!0,r)}),n&&r&&t(e)}function vB(e,t,n){for(var r=n?e:e.parent;r!==null;){if(t(r))return!0;r=r.parent}return!1}function kc(e){return new Ce(e.parent===null?e.name:kc(e.parent)+"/"+e.name)}function zy(e){e.parent!==null&&mB(e.parent,e.name,e)}function mB(e,t,n){var r=dB(n),i=Yt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,zy(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,zy(e))}function Jh(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],s=i.getPath();n!==null&&!hy(s,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function Xy(e,t,n){Jh(e,n),oR(e,function(r){return hy(r,t)})}function Gn(e,t,n){Jh(e,n),oR(e,function(r){return qn(r,t)||qn(t,r)})}function oR(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i){var s=i.path;t(s)?(SB(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function SB(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(n!==null){e.events[t]=null;var r=n.getEventRunner();jo&&bt("event: "+n.toString()),fa(r)}}}function kB(e,t,n){if(e.stats_=uy(e.repoInfo_),e.forceRestClient_||Yj())e.server_=new t4(e.repoInfo_,function(r,i,s,a){uR(e,r,i,s,a)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(function(){return cR(e,!0)},0);else{if(typeof n!="undefined"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{it(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Wo(e.repoInfo_,t,function(r,i,s,a){uR(e,r,i,s,a)},function(r){cR(e,r)},function(r){NB(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(function(r){e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(function(r){e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=tV(e.repoInfo_,function(){return new s4(e.stats_,e.server_)}),e.infoData_=new n4,e.infoSyncTree_=new zk({startListening:function(r,i,s,a){var c=[],l=e.infoData_.getNode(r._path);return l.isEmpty()||(c=Cc(e.infoSyncTree_,r._path,l),setTimeout(function(){a("ok")},0)),c},stopListening:function(){}}),$y(e,"connected",!1),e.serverSyncTree_=new zk({startListening:function(r,i,s,a){return e.server_.listen(r,s,i,function(c,l){var h=a(c,l);Gn(e.eventQueue_,r._path,h)}),[]},stopListening:function(r,i){e.server_.unlisten(r,i)}})}function aR(e){var t=e.infoData_.getNode(new Ce(".info/serverTimeOffset")),n=t.val()||0;return new Date().getTime()+n}function Pc(e){return fB({timestamp:aR(e)})}function uR(e,t,n,r,i){e.dataUpdateCount++;var s=new Ce(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var a=[];if(i)if(r){var c=sc(n,function(m){return ze(m)});a=rB(e.serverSyncTree_,s,c,i)}else{var l=ze(n);a=nB(e.serverSyncTree_,s,l,i)}else if(r){var h=sc(n,function(m){return ze(m)});a=Z4(e.serverSyncTree_,s,h)}else{var d=ze(n);a=Cc(e.serverSyncTree_,s,d)}var g=s;a.length>0&&(g=ba(e,s)),Gn(e.eventQueue_,g,a)}function RB(e,t){e.interceptServerDataCallback_=t}function cR(e,t){$y(e,"connected",t),t===!1&&PB(e)}function NB(e,t){pt(t,function(n,r){$y(e,n,r)})}function $y(e,t,n){var r=new Ce("/.info/"+t),i=ze(n);e.infoData_.updateSnapshot(r,i);var s=Cc(e.infoSyncTree_,r,i);Gn(e.eventQueue_,r,s)}function Zh(e){return e.nextWriteId_++}function OB(e,t){var n=iB(e.serverSyncTree_,t);return n!=null?Promise.resolve(n):e.server_.get(t).then(function(r){var i=ze(r).withIndex(t._queryParams.getIndex()),s=Cc(e.serverSyncTree_,t._path,i);return Xy(e.eventQueue_,t._path,s),Promise.resolve(i)},function(r){return _a(e,"get for query "+it(t)+" failed: "+r),Promise.reject(new Error(r))})}function Jy(e,t,n,r,i){_a(e,"set",{path:t.toString(),value:n,priority:r});var s=Pc(e),a=ze(n,r),c=Hh(e.serverSyncTree_,t),l=Wy(a,c,s),h=Zh(e),d=Uy(e.serverSyncTree_,t,l,h,!0);Jh(e.eventQueue_,d),e.server_.put(t.toString(),a.val(!0),function(m,_){var w=m==="ok";w||St("set at "+t+" failed: "+m);var E=Ui(e.serverSyncTree_,h,!w);Gn(e.eventQueue_,t,E),ji(e,i,m,_)});var g=t_(e,t);ba(e,g),Gn(e.eventQueue_,g,[])}function xB(e,t,n,r){_a(e,"update",{path:t.toString(),value:n});var i=!0,s=Pc(e),a={};if(pt(n,function(h,d){i=!1,a[h]=Zk(We(t,h),ze(d),e.serverSyncTree_,s)}),i)bt("update() called with empty data.  Don't do anything."),ji(e,r,"ok",void 0);else{var c=Zh(e),l=J4(e.serverSyncTree_,t,a,c);Jh(e.eventQueue_,l),e.server_.merge(t.toString(),n,function(h,d){var g=h==="ok";g||St("update at "+t+" failed: "+h);var m=Ui(e.serverSyncTree_,c,!g),_=m.length>0?ba(e,t):t;Gn(e.eventQueue_,_,m),ji(e,r,h,d)}),pt(n,function(h){var d=t_(e,We(t,h));ba(e,d)}),Gn(e.eventQueue_,t,[])}}function PB(e){_a(e,"onDisconnectEvents");var t=Pc(e),n=Lh();Iy(e.onDisconnect_,Te(),function(i,s){var a=Zk(i,s,e.serverSyncTree_,t);ma(n,i,a)});var r=[];Iy(n,Te(),function(i,s){r=r.concat(Cc(e.serverSyncTree_,i,s));var a=t_(e,i);ba(e,a)}),e.onDisconnect_=Lh(),Gn(e.eventQueue_,Te(),r)}function DB(e,t,n){e.server_.onDisconnectCancel(t.toString(),function(r,i){r==="ok"&&Ey(e.onDisconnect_,t),ji(e,n,r,i)})}function lR(e,t,n,r){var i=ze(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),function(s,a){s==="ok"&&ma(e.onDisconnect_,t,i),ji(e,r,s,a)})}function LB(e,t,n,r,i){var s=ze(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),function(a,c){a==="ok"&&ma(e.onDisconnect_,t,s),ji(e,i,a,c)})}function MB(e,t,n,r){if(_h(n)){bt("onDisconnect().update() called with empty data.  Don't do anything."),ji(e,r,"ok",void 0);return}e.server_.onDisconnectMerge(t.toString(),n,function(i,s){i==="ok"&&pt(n,function(a,c){var l=ze(c);ma(e.onDisconnect_,We(t,a),l)}),ji(e,r,i,s)})}function FB(e,t,n){var r;he(t._path)===".info"?r=Qk(e.infoSyncTree_,t,n):r=Qk(e.serverSyncTree_,t,n),Xy(e.eventQueue_,t._path,r)}function Zy(e,t,n){var r;he(t._path)===".info"?r=jy(e.infoSyncTree_,t,n):r=jy(e.serverSyncTree_,t,n),Xy(e.eventQueue_,t._path,r)}function fR(e){e.persistentConnection_&&e.persistentConnection_.interrupt(sR)}function UB(e){e.persistentConnection_&&e.persistentConnection_.resume(sR)}function jB(e,t){if(t===void 0&&(t=!1),typeof console!="undefined"){var n;t?(e.statsListener_||(e.statsListener_=new Ek(e.stats_)),n=e.statsListener_.get()):n=e.stats_.get();var r=Object.keys(n).reduce(function(i,s){return Math.max(s.length,i)},0);pt(n,function(i,s){for(var a=i,c=i.length;c<r+2;c++)a+=" ";console.log(a+s)})}}function VB(e,t){e.stats_.incrementCounter(t),a4(e.statsReporter_,t)}function _a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),bt.apply(void 0,oe([r],nt(t)))}function ji(e,t,n,r){t&&fa(function(){if(n==="ok")t(null);else{var i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);var a=new Error(s);a.code=i,t(a)}})}function BB(e,t,n,r,i,s){_a(e,"transaction on "+t);var a={path:t,update:n,onComplete:r,status:null,order:IA(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=e_(e,t,void 0);a.currentInputSnapshot=c;var l=a.update(c.val());if(l===void 0)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{Nc("transaction failed: Data returned ",l,a.path),a.status=0;var h=Yh(e.transactionQueueTree_,t),d=Ho(h)||[];d.push(a),Hy(h,d);var g=void 0;if(typeof l=="object"&&l!==null&&Yt(l,".priority"))g=Ni(l,".priority"),V(Rc(g),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var m=Hh(e.serverSyncTree_,t)||ce.EMPTY_NODE;g=m.getPriority().val()}var _=Pc(e),w=ze(l,g),E=Wy(w,c,_);a.currentOutputSnapshotRaw=w,a.currentOutputSnapshotResolved=E,a.currentWriteId=Zh(e);var T=Uy(e.serverSyncTree_,t,E,a.currentWriteId,a.applyLocally);Gn(e.eventQueue_,t,T),ep(e,e.transactionQueueTree_)}}function e_(e,t,n){return Hh(e.serverSyncTree_,t,n)||ce.EMPTY_NODE}function ep(e,t){if(t===void 0&&(t=e.transactionQueueTree_),t||tp(e,t),Ho(t)){var n=pR(e,t);V(n.length>0,"Sending zero length transaction queue");var r=n.every(function(i){return i.status===0});r&&qB(e,kc(t),n)}else eR(t)&&Xh(t,function(i){ep(e,i)})}function qB(e,t,n){for(var r=n.map(function(m){return m.currentWriteId}),i=e_(e,t,r),s=i,a=i.hash(),c=0;c<n.length;c++){var l=n[c];V(l.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;var h=Jt(t,l.path);s=s.updateChild(h,l.currentOutputSnapshotRaw)}var d=s.val(!0),g=t;e.server_.put(g.toString(),d,function(m){_a(e,"transaction put response",{path:g.toString(),status:m});var _=[];if(m==="ok"){for(var w=[],E=function(S){n[S].status=2,_=_.concat(Ui(e.serverSyncTree_,n[S].currentWriteId)),n[S].onComplete&&w.push(function(){return n[S].onComplete(null,!0,n[S].currentOutputSnapshotResolved)}),n[S].unwatcher()},T=0;T<n.length;T++)E(T);tp(e,Yh(e.transactionQueueTree_,t)),ep(e,e.transactionQueueTree_),Gn(e.eventQueue_,t,_);for(var T=0;T<w.length;T++)fa(w[T])}else{if(m==="datastale")for(var T=0;T<n.length;T++)n[T].status===3?n[T].status=4:n[T].status=0;else{St("transaction at "+g.toString()+" failed: "+m);for(var T=0;T<n.length;T++)n[T].status=4,n[T].abortReason=m}ba(e,t)}},a)}function ba(e,t){var n=hR(e,t),r=kc(n),i=pR(e,n);return WB(e,i,r),r}function WB(e,t,n){if(t.length!==0){for(var r=[],i=[],s=t.filter(function(h){return h.status===0}),a=s.map(function(h){return h.currentWriteId}),c=function(h){var d=t[h],g=Jt(n,d.path),m=!1,_;if(V(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)m=!0,_=d.abortReason,i=i.concat(Ui(e.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=CB)m=!0,_="maxretry",i=i.concat(Ui(e.serverSyncTree_,d.currentWriteId,!0));else{var w=e_(e,d.path,a);d.currentInputSnapshot=w;var E=t[h].update(w.val());if(E!==void 0){Nc("transaction failed: Data returned ",E,d.path);var T=ze(E),S=typeof E=="object"&&E!=null&&Yt(E,".priority");S||(T=T.updatePriority(w.getPriority()));var R=d.currentWriteId,O=Pc(e),U=Wy(T,w,O);d.currentOutputSnapshotRaw=T,d.currentOutputSnapshotResolved=U,d.currentWriteId=Zh(e),a.splice(a.indexOf(R),1),i=i.concat(Uy(e.serverSyncTree_,d.path,U,d.currentWriteId,d.applyLocally)),i=i.concat(Ui(e.serverSyncTree_,R,!0))}else m=!0,_="nodata",i=i.concat(Ui(e.serverSyncTree_,d.currentWriteId,!0))}Gn(e.eventQueue_,n,i),i=[],m&&(t[h].status=2,function(L){setTimeout(L,Math.floor(0))}(t[h].unwatcher),t[h].onComplete&&(_==="nodata"?r.push(function(){return t[h].onComplete(null,!1,t[h].currentInputSnapshot)}):r.push(function(){return t[h].onComplete(new Error(_),!1,null)})))},l=0;l<t.length;l++)c(l);tp(e,e.transactionQueueTree_);for(var l=0;l<r.length;l++)fa(r[l]);ep(e,e.transactionQueueTree_)}}function hR(e,t){var n,r=e.transactionQueueTree_;for(n=he(t);n!==null&&Ho(r)===void 0;)r=Yh(r,n),t=Pe(t),n=he(t);return r}function pR(e,t){var n=[];return dR(e,t,n),n.sort(function(r,i){return r.order-i.order}),n}function dR(e,t,n){var r=Ho(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Xh(t,function(s){dR(e,s,n)})}function tp(e,t){var n=Ho(t);if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Hy(t,n.length>0?n:void 0)}Xh(t,function(s){tp(e,s)})}function t_(e,t){var n=kc(hR(e,t)),r=Yh(e.transactionQueueTree_,t);return vB(r,function(i){n_(e,i)}),n_(e,r),tR(r,function(i){n_(e,i)}),n}function n_(e,t){var n=Ho(t);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(V(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(V(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Ui(e.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Hy(t,void 0):n.length=s+1,Gn(e.eventQueue_,kc(t),i);for(var a=0;a<r.length;a++)fa(r[a])}}function GB(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(s){}t+="/"+i}return t}function KB(e){var t,n,r={};e.charAt(0)==="?"&&(e=e.substring(1));try{for(var i=Xe(e.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value;if(a.length!==0){var c=a.split("=");c.length===2?r[decodeURIComponent(c[0])]=decodeURIComponent(c[1]):St("Invalid query segment '"+a+"' in query '"+e+"'")}}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function np(e,t){if(e._orderByCalled===!0)throw new Error(t+": You can't combine multiple orderBy calls.")}function Vi(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Dr){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){var s=e.getIndexStartName();if(s!==ei)throw new Error(r);if(typeof t!="string")throw new Error(i)}if(e.hasEnd()){var a=e.getIndexEndName();if(a!==Pr)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(e.getIndex()===Ue){if(t!=null&&!Rc(t)||n!=null&&!Rc(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(V(e.getIndex()instanceof my||e.getIndex()===gy,"unknown index type."),t!=null&&typeof t=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function rp(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}function yR(e,t){return e=se(e),e._checkNotDeleted("ref"),t!==void 0?zo(e._root,t):e._root}function _R(e,t){e=se(e),e._checkNotDeleted("refFromURL");var n=r_(t,e._repo.repoInfo_.nodeAdmin);iR("refFromURL",n);var r=n.repoInfo;return!e._repo.repoInfo_.isCustomHost()&&r.host!==e._repo.repoInfo_.host&&xr("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),yR(e,n.path.toString())}function zo(e,t){return e=se(e),he(e._path)===null?EB("child","path",t,!1):xc("child","path",t,!1),new Mr(e._repo,We(e._path,t))}function QB(e,t){e=se(e),Wn("push",e._path),Lr("push",t,e._path,!0);var n=aR(e._repo),r=zV(n),i=zo(e,r),s=zo(e,r),a;return t!=null?a=i_(s,t).then(function(){return s}):a=Promise.resolve(s),i.then=a.then.bind(a),i.catch=a.then.bind(a,void 0),i}function YB(e){return Wn("remove",e._path),i_(e,null)}function i_(e,t){e=se(e),Wn("set",e._path),Lr("set",t,e._path,!1);var n=new Dt;return Jy(e._repo,e._path,t,null,n.wrapCallback(function(){})),n.promise}function XB(e,t){e=se(e),Wn("setPriority",e._path),Yy("setPriority",t,!1);var n=new Dt;return Jy(e._repo,We(e._path,".priority"),t,null,n.wrapCallback(function(){})),n.promise}function $B(e,t,n){if(Wn("setWithPriority",e._path),Lr("setWithPriority",t,e._path,!1),Yy("setWithPriority",n,!1),e.key===".length"||e.key===".keys")throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new Dt;return Jy(e._repo,e._path,t,n,r.wrapCallback(function(){})),r.promise}function JB(e,t){rR("update",t,e._path,!1);var n=new Dt;return xB(e._repo,e._path,t,n.wrapCallback(function(){})),n.promise}function ZB(e){return e=se(e),OB(e._repo,e).then(function(t){return new ip(t,new Mr(e._repo,e._path),e._queryParams.getIndex())})}function Dc(e,t,n,r,i){var s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){var a=n,c=function(d,g){Zy(e._repo,e,h),a(d,g)};c.userCallback=n.userCallback,c.context=n.context,n=c}var l=new gR(n,s||void 0),h=t==="value"?new bR(l):new wR(t,l);return FB(e._repo,e,h),function(){return Zy(e._repo,e,h)}}function o_(e,t,n,r){return Dc(e,"value",t,n,r)}function ER(e,t,n,r){return Dc(e,"child_added",t,n,r)}function IR(e,t,n,r){return Dc(e,"child_changed",t,n,r)}function TR(e,t,n,r){return Dc(e,"child_moved",t,n,r)}function SR(e,t,n,r){return Dc(e,"child_removed",t,n,r)}function CR(e,t,n){var r=null,i=n?new gR(n):null;t==="value"?r=new bR(i):t&&(r=new wR(t,i)),Zy(e._repo,e,r)}function eq(e,t){return Oc("endAt","key",t,!0),new AR(e,t)}function nq(e,t){return Oc("endBefore","key",t,!0),new tq(e,t)}function rq(e,t){return e===void 0&&(e=null),Oc("startAt","key",t,!0),new kR(e,t)}function oq(e,t){return Oc("startAfter","key",t,!0),new iq(e,t)}function aq(e){if(typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new sq(e)}function cq(e){if(typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new uq(e)}function fq(e){if(e==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(e==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(e==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return xc("orderByChild","path",e,!1),new lq(e)}function pq(){return new hq}function vq(){return new dq}function gq(){return new mq}function _q(e,t){return Oc("equalTo","key",t,!0),new yq(e,t)}function mr(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=se(e);try{for(var a=Xe(r),c=a.next();!c.done;c=a.next()){var l=c.value;s=l._apply(s)}}catch(h){t={error:h}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return s}function wq(e,t,n,r){e.repoInfo_=new oy(t+":"+n,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function NR(e,t,n,r,i){var s=r||e.options.databaseURL;s===void 0&&(e.options.projectId||xr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bt("Using default host for project ",e.options.projectId),s=e.options.projectId+"-default-rtdb.firebaseio.com");var a=r_(s,i),c=a.repoInfo,l,h=void 0;typeof process!="undefined"&&(h=process.env[bq]),h?(l=!0,s="http://"+h+"?ns="+c.namespace,a=r_(s,i),c=a.repoInfo):l=!a.repoInfo.secure;var d=i&&l?new vc(vc.OWNER):new $j(e.name,e.options,t);iR("Invalid Firebase Database URL",a),pe(a.path)||xr("Database URL must point to the root of a Firebase Database (not including a child path).");var g=Iq(c,e,d,new Xj(e.name,n));return new Sq(g,e)}function Eq(e,t){var n=s_[t];(!n||n[e.key]!==e)&&xr("Database "+t+"("+e.repoInfo_+") has already been deleted."),fR(e),delete n[e.key]}function Iq(e,t,n,r){var i=s_[t.name];i||(i={},s_[t.name]=i);var s=i[e.toURLString()];return s&&xr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new AB(e,RR,n,r),i[e.toURLString()]=s,s}function Tq(e){RR=e}function Cq(e,t,n,r){r===void 0&&(r={}),e=se(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&xr("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,s=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&xr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new vc(vc.OWNER);else if(r.mockUserToken){var a=gh(r.mockUserToken,e.app.options.projectId);s=new vc(a)}wq(i,t,n,s)}function Aq(e){e=se(e),e._checkNotDeleted("goOffline"),fR(e._repo)}function kq(e){e=se(e),e._checkNotDeleted("goOnline"),UB(e._repo)}function Nq(){return Rq}function Oq(e){return{".sv":{increment:e}}}function Pq(e,t,n){var r;if(e=se(e),Wn("Reference.transaction",e._path),e.key===".length"||e.key===".keys")throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=(r=n==null?void 0:n.applyLocally)!==null&&r!==void 0?r:!0,s=new Dt,a=function(l,h,d){var g=null;l?s.reject(l):(g=new ip(d,new Mr(e._repo,e._path),Ue),s.resolve(new xq(h,g)))},c=o_(e,function(){});return BB(e._repo,e._path,t,a,c,i),s.promise}function Gq(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,s=e.namespace,a=e.nodeAdmin,c=a===void 0?!1:a;wA(r);var l=new Gg("auth-internal",new bh("database-standalone"));return l.setComponent(new qe("auth-internal",function(){return i},"PRIVATE")),{instance:new op(NR(t,l,void 0,n,c),t),namespace:s}}function e3(e){wA(e.SDK_VERSION);var t=e.INTERNAL.registerComponent(new qe("database",function(n,r){var i=r.instanceIdentifier,s=n.getProvider("app").getImmediate(),a=n.getProvider("auth-internal"),c=n.getProvider("app-check-internal");return new op(NR(s,a,c,i),s)},"PUBLIC").setServiceProps({Reference:Qo,Query:OR,Database:op,DataSnapshot:Lc,enableLogging:CA,INTERNAL:Kq,ServerValue:Zq,TEST_ACCESS:Jq}).setMultipleInstances(!0));e.registerVersion(Uj,jj),lr()&&(module.exports=t)}var Uj,jj,Zg,Vj,Bj,EA,Uo,ey,la,IA,TA,fc,jo,SA,CA,bt,hc,ty,xr,St,qj,Ch,Wj,ei,Pr,Vo,Gj,pc,ny,AA,kA,Kj,Hj,Qj,RA,ry,Ah,fa,Yj,dc,Xj,$j,vc,kh,NA,OA,xA,PA,DA,LA,Jj,iy,MA,FA,oy,eV,sy,ay,nV,jA,rV,iV,oV,VA,BA,qA,sV,aV,uV,cV,lV,WA,GA,fV,hV,pV,cy,dV,vV,mV,mc,Bo,gV,yV,_V,bV,wV,ly,KA,EV,HA,IV,zA,QA,YA,XA,TV,$A,JA,ZA,ek,tk,nk,Ce,AV,NV,yc,OV,xV,ok,PV,DV,LV,sk,Wo,ye,Rh,Nh,ak,Dr,Oh,pr,MV,ti,dy,uk,ck,lk,ha,fk,hk,BV,Ue,qV,WV,xh,vy,pa,Ph,_c,ce,GV,bc,KV,my,HV,gy,da,yy,pk,dk,zV,vk,mk,_y,yk,YV,_k,t4,n4,Ek,Ik,i4,o4,s4,dr,u4,Tk,Mh,Ay,Di,c4,ky,p4,An,ni,k4,R4,Dk,Dy,U4,Wh,qk,Kh,$4,zk,cB,lB,fB,Jk,hB,pB,Zk,Wy,Ky,gB,yB,Qy,$h,nR,_B,Rc,Lr,Nc,bB,rR,Yy,wB,Oc,xc,EB,Wn,iR,IB,TB,sR,CB,AB,r_,HB,vR,mR,gR,zB,Kn,Mr,ip,bR,wR,vr,AR,tq,kR,iq,sq,uq,lq,hq,dq,mq,yq,bq,s_,RR,Sq,Rq,xq,Dq,Lq,Lc,OR,Qo,op,Mq,Fq,Uq,jq,Vq,Bq,qq,Wq,Kq,Hq,zq,Qq,Yq,Xq,$q,Jq,Zq,xR=Le(()=>{Cn();fr();Vn();yn();Oi();Uj="@firebase/database",jj="0.10.5";Zg="";Vj=function(){function e(t){this.domStorage_=t,this.prefix_="firebase:"}return e.prototype.set=function(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),it(n))},e.prototype.get=function(t){var n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:ia(n)},e.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},e.prototype.prefixedName_=function(t){return this.prefix_+t},e.prototype.toString=function(){return this.domStorage_.toString()},e}();Bj=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n},e.prototype.get=function(t){return Yt(this.cache_,t)?this.cache_[t]:null},e.prototype.remove=function(t){delete this.cache_[t]},e}();EA=function(e){try{if(typeof window!="undefined"&&typeof window[e]!="undefined"){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Vj(t)}}catch(n){}return new Bj},Uo=EA("localStorage"),ey=EA("sessionStorage");la=new Bn("@firebase/database"),IA=function(){var e=1;return function(){return e++}}(),TA=function(e){var t=UC(e),n=new MC;n.update(t);var r=n.digest();return na.encodeByteArray(r)},fc=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++){var i=e[r];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?n+=fc.apply(null,i):typeof i=="object"?n+=it(i):n+=i,n+=" "}return n},jo=null,SA=!0,CA=function(e,t){V(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(la.logLevel=le.VERBOSE,jo=la.log.bind(la),t&&ey.set("logging_enabled",!0)):typeof e=="function"?jo=e:(jo=null,ey.remove("logging_enabled"))},bt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(SA===!0&&(SA=!1,jo===null&&ey.get("logging_enabled")===!0&&CA(!0)),jo){var n=fc.apply(null,e);jo(n)}},hc=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];bt.apply(void 0,oe([e],nt(t)))}},ty=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+fc.apply(void 0,oe([],nt(e)));la.error(n)},xr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+fc.apply(void 0,oe([],nt(e)));throw la.error(n),new Error(n)},St=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+fc.apply(void 0,oe([],nt(e)));la.warn(n)},qj=function(){typeof window!="undefined"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&St("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ch=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Wj=function(e){if(lr()||document.readyState==="complete")e();else{var t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ei="[MIN_NAME]",Pr="[MAX_NAME]",Vo=function(e,t){if(e===t)return 0;if(e===ei||t===Pr)return-1;if(t===ei||e===Pr)return 1;var n=Ah(e),r=Ah(t);return n!==null?r!==null?n-r==0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1},Gj=function(e,t){return e===t?0:e<t?-1:1},pc=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+it(t))},ny=function(e){if(typeof e!="object"||e===null)return it(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)i!==0&&(r+=","),r+=it(t[i]),r+=":",r+=ny(e[t[i]]);return r+="}",r},AA=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};kA=function(e){V(!Ch(e),"Invalid JSON number");var t=11,n=52,r=(1<<t-1)-1,i,s,a,c,l;e===0?(s=0,a=0,i=1/e==-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(e)/Math.LN2),r),s=c+r,a=Math.round(e*Math.pow(2,n-c)-Math.pow(2,n))):(s=0,a=Math.round(e/Math.pow(2,1-r-n))));var h=[];for(l=n;l;l-=1)h.push(a%2?1:0),a=Math.floor(a/2);for(l=t;l;l-=1)h.push(s%2?1:0),s=Math.floor(s/2);h.push(i?1:0),h.reverse();var d=h.join(""),g="";for(l=0;l<64;l+=8){var m=parseInt(d.substr(l,8),2).toString(16);m.length===1&&(m="0"+m),g=g+m}return g.toLowerCase()},Kj=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Hj=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};Qj=new RegExp("^-?(0*)\\d{1,10}$"),RA=-2147483648,ry=2147483647,Ah=function(e){if(Qj.test(e)){var t=Number(e);if(t>=RA&&t<=ry)return t}return null},fa=function(e){try{e()}catch(t){setTimeout(function(){var n=t.stack||"";throw St("Exception was thrown by user callback.",n),t},Math.floor(0))}},Yj=function(){var e=typeof window=="object"&&window.navigator&&window.navigator.userAgent||"";return e.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},dc=function(e,t){var n=setTimeout(e,t);return typeof n=="object"&&n.unref&&n.unref(),n};Xj=function(){function e(t,n){var r=this;this.appName_=t,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(function(i){return r.appCheck=i})}return e.prototype.getToken=function(t){var n=this;return this.appCheck?this.appCheck.getToken(t):new Promise(function(r,i){setTimeout(function(){n.appCheck?n.getToken(t).then(r,i):r(null)},0)})},e.prototype.addTokenChangeListener=function(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(function(r){return r.addTokenListener(t)})},e.prototype.notifyForInvalidToken=function(){St('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},e}();$j=function(){function e(t,n,r){var i=this;this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(function(s){return i.auth_=s})}return e.prototype.getToken=function(t){var n=this;return this.auth_?this.auth_.getToken(t).catch(function(r){return r&&r.code==="auth/token-not-initialized"?(bt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)}):new Promise(function(r,i){setTimeout(function(){n.auth_?n.getToken(t).then(r,i):r(null)},0)})},e.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(function(n){return n.addAuthTokenListener(t)})},e.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(n){return n.removeAuthTokenListener(t)})},e.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',St(t)},e}(),vc=function(){function e(t){this.accessToken=t}return e.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},e.prototype.addTokenChangeListener=function(t){t(this.accessToken)},e.prototype.removeTokenChangeListener=function(t){},e.prototype.notifyForInvalidToken=function(){},e.OWNER="owner",e}();kh="5",NA="v",OA="s",xA="r",PA="f",DA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,LA="ls",Jj="p",iy="ac",MA="websocket",FA="long_polling";oy=function(){function e(t,n,r,i,s,a,c){s===void 0&&(s=!1),a===void 0&&(a=""),c===void 0&&(c=!1),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Uo.get("host:"+t)||this._host}return e.prototype.isCacheableHost=function(){return this.internalHost.substr(0,2)==="s-"},e.prototype.isCustomHost=function(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Uo.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},e.prototype.toURLString=function(){var t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+n},e}();eV=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(t,n){n===void 0&&(n=1),Yt(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n},e.prototype.get=function(){return mh(this.counters_)},e}();sy={},ay={};nV=function(){function e(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(t,n){var r=this;this.pendingResponses[t]=n;for(var i=function(){var c=s.pendingResponses[s.currentResponseNum];delete s.pendingResponses[s.currentResponseNum];for(var l=function(d){c[d]&&fa(function(){r.onMessage_(c[d])})},h=0;h<c.length;++h)l(h);if(s.currentResponseNum===s.closeAfterResponse)return s.onClose&&(s.onClose(),s.onClose=null),"break";s.currentResponseNum++},s=this;this.pendingResponses[this.currentResponseNum];){var a=i();if(a==="break")break}},e}();jA="start",rV="close",iV="pLPCommand",oV="pRTLPCB",VA="id",BA="pw",qA="ser",sV="cb",aV="seg",uV="ts",cV="d",lV="dframe",WA=1870,GA=30,fV=WA-GA,hV=25e3,pV=3e4,cy=function(){function e(t,n,r,i,s,a,c){var l=this;this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=a,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hc(t),this.stats_=uy(n),this.urlFn=function(h){return l.appCheckToken&&(h[iy]=l.appCheckToken),UA(n,FA,h)}}return e.prototype.open=function(t,n){var r=this;this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new nV(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){r.log_("Timed out trying to connect."),r.onClosed_(),r.connectTimeoutTimer_=null},Math.floor(pV)),Wj(function(){if(!r.isClosed_){r.scriptTagHolder=new dV(function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var l=nt(a,5),h=l[0],d=l[1],g=l[2],m=l[3],_=l[4];if(r.incrementIncomingBytes_(a),!!r.scriptTagHolder)if(r.connectTimeoutTimer_&&(clearTimeout(r.connectTimeoutTimer_),r.connectTimeoutTimer_=null),r.everConnected_=!0,h===jA)r.id=d,r.password=g;else if(h===rV)d?(r.scriptTagHolder.sendNewPolls=!1,r.myPacketOrderer.closeAfter(d,function(){r.onClosed_()})):r.onClosed_();else throw new Error("Unrecognized command received: "+h)},function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var l=nt(a,2),h=l[0],d=l[1];r.incrementIncomingBytes_(a),r.myPacketOrderer.handleResponse(h,d)},function(){r.onClosed_()},r.urlFn);var i={};i[jA]="t",i[qA]=Math.floor(Math.random()*1e8),r.scriptTagHolder.uniqueCallbackIdentifier&&(i[sV]=r.scriptTagHolder.uniqueCallbackIdentifier),i[NA]=kh,r.transportSessionId&&(i[OA]=r.transportSessionId),r.lastSessionId&&(i[LA]=r.lastSessionId),r.applicationId&&(i[Jj]=r.applicationId),r.appCheckToken&&(i[iy]=r.appCheckToken),typeof location!="undefined"&&location.hostname&&DA.test(location.hostname)&&(i[xA]=PA);var s=r.urlFn(i);r.log_("Connecting via long-poll to "+s),r.scriptTagHolder.addTag(s,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return lr()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document!="undefined"&&document.createElement!=null&&!Kj()&&!Hj()},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(t){var n=it(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);for(var r=SC(n),i=AA(r,fV),s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(t,n){if(!lr()){this.myDisconnFrame=document.createElement("iframe");var r={};r[lV]="t",r[VA]=t,r[BA]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(t){var n=it(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)},e}(),dV=function(){function e(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,lr())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=IA(),window[iV+this.uniqueCallbackIdentifier]=t,window[oV+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var s="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,"javascript:".length)==="javascript:"){var a=document.domain;s='<script>document.domain="'+a+'";<\/script>'}var c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(l){bt("frame writing exception"),l.stack&&bt(l.stack),bt(l)}}}return e.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{var n=t.contentWindow.document;n||bt("No IE domain setting required")}catch(i){var r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},e.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){t.myIFrame!==null&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var n=this.onDisconnect;n&&(this.onDisconnect=null,n())},e.prototype.startLongPoll=function(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t[VA]=this.myID,t[BA]=this.myPW,t[qA]=this.currentSerial;for(var n=this.urlFn(t),r="",i=0;this.pendingSegs.length>0;){var s=this.pendingSegs[0];if(s.d.length+GA+r.length<=WA){var a=this.pendingSegs.shift();r=r+"&"+aV+i+"="+a.seg+"&"+uV+i+"="+a.ts+"&"+cV+i+"="+a.d,i++}else break}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1},e.prototype.enqueueSegment=function(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(t,n){var r=this;this.outstandingRequests.add(n);var i=function(){r.outstandingRequests.delete(n),r.newRequest_()},s=setTimeout(i,Math.floor(hV)),a=function(){clearTimeout(s),i()};this.addTag(t,a)},e.prototype.addTag=function(t,n){var r=this;lr()?this.doNodeLongPoll(t,n):setTimeout(function(){try{if(!r.sendNewPolls)return;var i=r.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){var s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=function(){bt("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(i)}catch(s){}},Math.floor(1))},e}();vV=16384,mV=45e3,mc=null;typeof MozWebSocket!="undefined"?mc=MozWebSocket:typeof WebSocket!="undefined"&&(mc=WebSocket);Bo=function(){function e(t,n,r,i,s,a,c){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hc(this.connId),this.stats_=uy(n),this.connURL=e.connectionURL_(n,a,c,i),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(t,n,r,i){var s={};return s[NA]=kh,!lr()&&typeof location!="undefined"&&location.hostname&&DA.test(location.hostname)&&(s[xA]=PA),n&&(s[OA]=n),r&&(s[LA]=r),i&&(s[iy]=i),UA(t,MA,s)},e.prototype.open=function(t,n){var r=this;this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Uo.set("previous_websocket_failure",!0);try{if(lr()){var i=this.nodeAdmin?"AdminNode":"Node",s={headers:{"User-Agent":"Firebase/"+kh+"/"+Zg+"/"+process.platform+"/"+i,"X-Firebase-GMPID":this.applicationId||""}};this.nodeAdmin?s.headers.Authorization=this.authToken||"":s.headers["X-Firebase-AppCheck"]=this.appCheckToken||"";var a=process.env,c=this.connURL.indexOf("wss://")===0?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;c&&(s.proxy={origin:c}),this.mySock=new mc(this.connURL,[],s)}else{var s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new mc(this.connURL,[],s)}}catch(h){this.log_("Error instantiating WebSocket.");var l=h.message||h.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(h){r.handleIncomingFrame(h)},this.mySock.onerror=function(h){r.log_("WebSocket error.  Closing connection.");var d=h.message||h.data;d&&r.log_(d),r.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if(typeof navigator!="undefined"&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&mc!==null&&!e.forceDisallow_},e.previouslyFailed=function(){return Uo.isInMemoryStorage||Uo.get("previous_websocket_failure")===!0},e.prototype.markConnectionHealthy=function(){Uo.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var n=this.frames.join("");this.frames=null;var r=ia(n);this.onMessage(r)}},e.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},e.prototype.extractFrameCount_=function(t){if(V(this.frames===null,"We already have a frame buffer"),t.length<=6){var n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t},e.prototype.handleIncomingFrame=function(t){if(this.mySock!==null){var n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{var r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}},e.prototype.send=function(t){this.resetKeepAlive();var n=it(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);var r=AA(n,vV);r.length>1&&this.sendString_(String(r.length));for(var i=0;i<r.length;i++)this.sendString_(r[i])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(mV))},e.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}();gV=function(){function e(t){this.initTransports_(t)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[cy,Bo]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=Bo&&Bo.isAvailable(),s=i&&!Bo.previouslyFailed();if(t.webSocketOnly&&(i||St("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Bo];else{var a=this.transports_=[];try{for(var c=Xe(e.ALL_TRANSPORTS),l=c.next();!l.done;l=c.next()){var h=l.value;h&&h.isAvailable()&&a.push(h)}}catch(d){n={error:d}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}();yV=6e4,_V=5e3,bV=10*1024,wV=100*1024,ly="t",KA="d",EV="s",HA="r",IV="e",zA="o",QA="a",YA="n",XA="p",TV="h",$A=function(){function e(t,n,r,i,s,a,c,l,h,d){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=a,this.onReady_=c,this.onDisconnect_=l,this.onKill_=h,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hc("c:"+this.id+":"),this.transportManager_=new gV(n),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var t=this,n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(r,i)},Math.floor(0));var s=n.healthyTimeout||0;s>0&&(this.healthyTimeout_=dc(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>wV?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>bV?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(s)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(t){var n=this;return function(r){t===n.conn_?n.onConnectionLost_(r):t===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},e.prototype.connReceiver_=function(t){var n=this;return function(r){n.state_!==2&&(t===n.rx_?n.onPrimaryMessageReceived_(r):t===n.secondaryConn_?n.onSecondaryMessageReceived_(r):n.log_("message on old connection"))}},e.prototype.sendRequest=function(t){var n={t:"d",d:t};this.sendData_(n)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(t){if(ly in t){var n=t[ly];n===QA?this.upgradeIfSecondaryHealthy_():n===HA?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===zA&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(t){var n=pc("t",t),r=pc("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:XA,d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:QA,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:YA,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(t){var n=pc("t",t),r=pc("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)},e.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(t){var n=pc(ly,t);if(KA in t){var r=t[KA];if(n===TV)this.onHandshake_(r);else if(n===YA){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===EV?this.onConnectionShutdown_(r):n===HA?this.onReset_(r):n===IV?ty("Server Error: "+r):n===zA?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ty("Unknown control packet command: "+n)}},e.prototype.onHandshake_=function(t){var n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),kh!==r&&St("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},e.prototype.startUpgrade_=function(t){var n=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,i),dc(function(){n.secondaryConn_&&(n.log_("Timed out trying to upgrade."),n.secondaryConn_.close())},Math.floor(yV))},e.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(t,n){var r=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):dc(function(){r.sendPingOnPrimaryIfNecessary_()},Math.floor(_V))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:XA,d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()},e.prototype.onConnectionLost_=function(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Uo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()},e.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)},e.prototype.close=function(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}();JA=function(){function e(){}return e.prototype.put=function(t,n,r,i){},e.prototype.merge=function(t,n,r,i){},e.prototype.refreshAuthToken=function(t){},e.prototype.refreshAppCheckToken=function(t){},e.prototype.onDisconnectPut=function(t,n,r){},e.prototype.onDisconnectMerge=function(t,n,r){},e.prototype.onDisconnectCancel=function(t,n){},e.prototype.reportStats=function(t){},e}();ZA=function(){function e(t){this.allowedEvents_=t,this.listeners_={},V(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(Array.isArray(this.listeners_[t]))for(var i=oe([],nt(this.listeners_[t])),s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)},e.prototype.on=function(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});var i=this.getInitialEvent(t);i&&n.apply(r,i)},e.prototype.off=function(t,n,r){this.validateEventType_(t);for(var i=this.listeners_[t]||[],s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}},e.prototype.validateEventType_=function(t){V(this.allowedEvents_.find(function(n){return n===t}),"Unknown event: "+t)},e}();ek=function(e){W(t,e);function t(){var n=e.call(this,["online"])||this;return n.online_=!0,typeof window!="undefined"&&typeof window.addEventListener!="undefined"&&!nc()&&(window.addEventListener("online",function(){n.online_||(n.online_=!0,n.trigger("online",!0))},!1),window.addEventListener("offline",function(){n.online_&&(n.online_=!1,n.trigger("online",!1))},!1)),n}return t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(n){return V(n==="online","Unknown event type: "+n),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(ZA);tk=32,nk=768,Ce=function(){function e(t,n){if(n===void 0){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return e.prototype.toString=function(){for(var t="",n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"},e}();AV=function(){function e(t,n){this.errorPrefix_=n,this.parts_=gc(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=ac(this.parts_[r]);ik(this)}return e}();NV=function(e){W(t,e);function t(){var n=e.call(this,["visible"])||this,r,i;return typeof document!="undefined"&&typeof document.addEventListener!="undefined"&&(typeof document.hidden!="undefined"?(i="visibilitychange",r="hidden"):typeof document.mozHidden!="undefined"?(i="mozvisibilitychange",r="mozHidden"):typeof document.msHidden!="undefined"?(i="msvisibilitychange",r="msHidden"):typeof document.webkitHidden!="undefined"&&(i="webkitvisibilitychange",r="webkitHidden")),n.visible_=!0,i&&document.addEventListener(i,function(){var s=!document[r];s!==n.visible_&&(n.visible_=s,n.trigger("visible",s))},!1),n}return t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(n){return V(n==="visible","Unknown event type: "+n),[this.visible_]},t}(ZA);yc=1e3,OV=60*5*1e3,xV=3*1e3,ok=30*1e3,PV=1.3,DV=3e4,LV="server_kill",sk=3,Wo=function(e){W(t,e);function t(n,r,i,s,a,c,l,h){var d=e.call(this)||this;if(d.repoInfo_=n,d.applicationId_=r,d.onDataUpdate_=i,d.onConnectStatus_=s,d.onServerInfoUpdate_=a,d.authTokenProvider_=c,d.appCheckTokenProvider_=l,d.authOverride_=h,d.id=t.nextPersistentConnectionId_++,d.log_=hc("p:"+d.id+":"),d.interruptReasons_={},d.listens=new Map,d.outstandingPuts_=[],d.outstandingGets_=[],d.outstandingPutCount_=0,d.outstandingGetCount_=0,d.onDisconnectRequestQueue_=[],d.connected_=!1,d.reconnectDelay_=yc,d.maxReconnectDelay_=OV,d.securityDebugCallback_=null,d.lastSessionId=null,d.establishConnectionTimer_=null,d.visible_=!1,d.requestCBHash_={},d.requestNumber_=0,d.realtime_=null,d.authToken_=null,d.appCheckToken_=null,d.forceTokenRefresh_=!1,d.invalidAuthTokenCount_=0,d.invalidAppCheckTokenCount_=0,d.firstConnection_=!0,d.lastConnectionAttemptTime_=null,d.lastConnectionEstablishedTime_=null,h&&!lr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return NV.getInstance().on("visible",d.onVisible_,d),n.host.indexOf("fblocal")===-1&&ek.getInstance().on("online",d.onOnline_,d),d}return t.prototype.sendRequest=function(n,r,i){var s=++this.requestNumber_,a={r:s,a:n,b:r};this.log_(it(a)),V(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),i&&(this.requestCBHash_[s]=i)},t.prototype.get=function(n){var r=this;this.initConnection_();var i=new Dt,s={p:n._path.toString(),q:n._queryObject},a={action:"g",request:s,onComplete:function(l){var h=l.d;l.s==="ok"?(r.onDataUpdate_(s.p,h,!1,null),i.resolve(h)):i.reject(h)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;var c=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var l=r.outstandingGets_[c];l===void 0||a!==l||(delete r.outstandingGets_[c],r.outstandingGetCount_--,r.outstandingGetCount_===0&&(r.outstandingGets_=[]),r.log_("get "+c+" timed out on connection"),i.reject(new Error("Client is offline.")))},xV),this.connected_&&this.sendGet_(c),i.promise},t.prototype.listen=function(n,r,i,s){this.initConnection_();var a=n._queryIdentifier,c=n._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),V(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),V(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");var l={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(c).set(a,l),this.connected_&&this.sendListen_(l)},t.prototype.sendGet_=function(n){var r=this,i=this.outstandingGets_[n];this.sendRequest("g",i.request,function(s){delete r.outstandingGets_[n],r.outstandingGetCount_--,r.outstandingGetCount_===0&&(r.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})},t.prototype.sendListen_=function(n){var r=this,i=n.query,s=i._path.toString(),a=i._queryIdentifier;this.log_("Listen on "+s+" for "+a);var c={p:s},l="q";n.tag&&(c.q=i._queryObject,c.t=n.tag),c.h=n.hashFn(),this.sendRequest(l,c,function(h){var d=h.d,g=h.s;t.warnOnListenWarnings_(d,i);var m=r.listens.get(s)&&r.listens.get(s).get(a);m===n&&(r.log_("listen response",h),g!=="ok"&&r.removeListen_(s,a),n.onComplete&&n.onComplete(g,d))})},t.warnOnListenWarnings_=function(n,r){if(n&&typeof n=="object"&&Yt(n,"w")){var i=Ni(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){var s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',a=r._path.toString();St("Using an unspecified index. Your data will be downloaded and "+("filtered on the client. Consider adding "+s+" at ")+(a+" to your security rules for better performance."))}}},t.prototype.refreshAuthToken=function(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(n)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(n){var r=n&&n.length===40;(r||DC(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ok)},t.prototype.refreshAppCheckToken=function(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},t.prototype.tryAuth=function(){var n=this;if(this.connected_&&this.authToken_){var r=this.authToken_,i=PC(r)?"auth":"gauth",s={cred:r};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(i,s,function(a){var c=a.s,l=a.d||"error";n.authToken_===r&&(c==="ok"?n.invalidAuthTokenCount_=0:n.onAuthRevoked_(c,l))})}},t.prototype.tryAppCheck=function(){var n=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(r){var i=r.s,s=r.d||"error";i==="ok"?n.invalidAppCheckTokenCount_=0:n.onAppCheckRevoked_(i,s)})},t.prototype.unlisten=function(n,r){var i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),V(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");var a=this.removeListen_(i,s);a&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)},t.prototype.sendUnlisten_=function(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);var a={p:n},c="n";s&&(a.q=i,a.t=s),this.sendRequest(c,a)},t.prototype.onDisconnectPut=function(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})},t.prototype.onDisconnectMerge=function(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})},t.prototype.onDisconnectCancel=function(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})},t.prototype.sendOnDisconnect_=function(n,r,i,s){var a={p:r,d:i};this.log_("onDisconnect "+n,a),this.sendRequest(n,a,function(c){s&&setTimeout(function(){s(c.s,c.d)},Math.floor(0))})},t.prototype.put=function(n,r,i,s){this.putInternal("p",n,r,i,s)},t.prototype.merge=function(n,r,i,s){this.putInternal("m",n,r,i,s)},t.prototype.putInternal=function(n,r,i,s,a){this.initConnection_();var c={p:r,d:i};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:n,request:c,onComplete:s}),this.outstandingPutCount_++;var l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)},t.prototype.sendPut_=function(n){var r=this,i=this.outstandingPuts_[n].action,s=this.outstandingPuts_[n].request,a=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,s,function(c){r.log_(i+" response",c),delete r.outstandingPuts_[n],r.outstandingPutCount_--,r.outstandingPutCount_===0&&(r.outstandingPuts_=[]),a&&a(c.s,c.d)})},t.prototype.reportStats=function(n){var r=this;if(this.connected_){var i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,function(s){var a=s.s;if(a!=="ok"){var c=s.d;r.log_("reportStats","Error sending stats: "+c)}})}},t.prototype.onDataMessage_=function(n){if("r"in n){this.log_("from server: "+it(n));var r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}},t.prototype.onDataPush_=function(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):ty("Unrecognized action received from server: "+it(n)+`
Are you using the latest client?`)},t.prototype.onReady_=function(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(n){var r=this;V(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){r.establishConnectionTimer_=null,r.establishConnection_()},Math.floor(n))},t.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},t.prototype.onVisible_=function(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=yc,this.realtime_||this.scheduleConnect_(0)),this.visible_=n},t.prototype.onOnline_=function(n){n?(this.log_("Browser went online."),this.reconnectDelay_=yc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(!this.visible_)this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime();else if(this.lastConnectionEstablishedTime_){var n=new Date().getTime()-this.lastConnectionEstablishedTime_;n>DV&&(this.reconnectDelay_=yc),this.lastConnectionEstablishedTime_=null}var r=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-r);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*PV)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){return A(this,void 0,void 0,function(){var n,r,i,s,a,c,l,h,d,g,m,_,w,E,T=this;return C(this,function(S){switch(S.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null,n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,a=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())},d=function(R){V(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(R)},this.realtime_={close:h,sendRequest:d},g=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,S.label=1;case 1:return S.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)])];case 2:return m=nt.apply(void 0,[S.sent(),2]),_=m[0],w=m[1],c?bt("getToken() completed but was canceled"):(bt("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=w&&w.token,l=new $A(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,function(R){St(R+" ("+T.repoInfo_.toString()+")"),T.interrupt(LV)},a)),[3,4];case 3:return E=S.sent(),this.log_("Failed to get token: "+E),c||(this.repoInfo_.nodeAdmin&&St(E),h()),[3,4];case 4:return[2]}})})},t.prototype.interrupt=function(n){bt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(n){bt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],_h(this.interruptReasons_)&&(this.reconnectDelay_=yc,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(n){var r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})},t.prototype.cancelSentTransactions_=function(){for(var n=0;n<this.outstandingPuts_.length;n++){var r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(n,r){var i;r?i=r.map(function(a){return ny(a)}).join("$"):i="default";var s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")},t.prototype.removeListen_=function(n,r){var i=new Ce(n).toString(),s;if(this.listens.has(i)){var a=this.listens.get(i);s=a.get(r),a.delete(r),a.size===0&&this.listens.delete(i)}else s=void 0;return s},t.prototype.onAuthRevoked_=function(n,r){bt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=sk&&(this.reconnectDelay_=ok,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onAppCheckRevoked_=function(n,r){bt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=sk&&this.appCheckTokenProvider_.notifyForInvalidToken())},t.prototype.onSecurityDebugPacket_=function(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))},t.prototype.restoreState_=function(){var n,r,i,s;this.tryAuth(),this.tryAppCheck();try{for(var a=Xe(this.listens.values()),c=a.next();!c.done;c=a.next()){var l=c.value;try{for(var h=(i=void 0,Xe(l.values())),d=h.next();!d.done;d=h.next()){var g=d.value;this.sendListen_(g)}}catch(w){i={error:w}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}}}catch(w){n={error:w}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}for(var m=0;m<this.outstandingPuts_.length;m++)this.outstandingPuts_[m]&&this.sendPut_(m);for(;this.onDisconnectRequestQueue_.length;){var _=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(_.action,_.pathString,_.data,_.onComplete)}for(var m=0;m<this.outstandingGets_.length;m++)this.outstandingGets_[m]&&this.sendGet_(m)},t.prototype.sendConnectStats_=function(){var n={},r="js";lr()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Zg.replace(/\./g,"-")]=1,nc()?n["framework.cordova"]=1:yh()&&(n["framework.reactnative"]=1),this.reportStats(n)},t.prototype.shouldReconnect_=function(){var n=ek.getInstance().currentlyOnline();return _h(this.interruptReasons_)&&n},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(JA);ye=function(){function e(t,n){this.name=t,this.node=n}return e.Wrap=function(t,n){return new e(t,n)},e}();Rh=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(t,n){var r=new ye(ei,t),i=new ye(ei,n);return this.compare(r,i)!==0},e.prototype.minPost=function(){return ye.MIN},e}();ak=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return Nh},set:function(n){Nh=n},enumerable:!1,configurable:!0}),t.prototype.compare=function(n,r){return Vo(n.name,r.name)},t.prototype.isDefinedOn=function(n){throw Mo("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(n,r){return!1},t.prototype.minPost=function(){return ye.MIN},t.prototype.maxPost=function(){return new ye(Pr,Nh)},t.prototype.makePost=function(n,r){return V(typeof n=="string","KeyIndex indexValue must always be a string."),new ye(n,Nh)},t.prototype.toString=function(){return".key"},t}(Rh),Dr=new ak;Oh=function(){function e(t,n,r,i,s){s===void 0&&(s=null),this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];for(var a=1;!t.isEmpty();)if(t=t,a=n?r(t.key,n):1,i&&(a*=-1),a<0)this.isReverse_?t=t.left:t=t.right;else if(a===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}return e.prototype.getNext=function(){if(this.nodeStack_.length===0)return null;var t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(this.nodeStack_.length===0)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},e}(),pr=function(){function e(t,n,r,i,s){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??ti.EMPTY_NODE,this.right=s??ti.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,s){return new e(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(t,n,r){var i=this,s=r(t,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return ti.EMPTY_NODE;var t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()},e.prototype.remove=function(t,n){var r,i;if(r=this,n(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(t,r.key)===0){if(r.right.isEmpty())return ti.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},e.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t},e.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),MV=function(){function e(){}return e.prototype.copy=function(t,n,r,i,s){return this},e.prototype.insert=function(t,n,r){return new pr(t,n,null)},e.prototype.remove=function(t,n){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(t){return!1},e.prototype.reverseTraversal=function(t){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),ti=function(){function e(t,n){n===void 0&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,pr.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,pr.BLACK,null,null))},e.prototype.get=function(t){for(var n,r=this.root_;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null},e.prototype.getPredecessorKey=function(t){for(var n,r=this.root_,i=null;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},e.prototype.getIterator=function(t){return new Oh(this.root_,null,this.comparator_,!1,t)},e.prototype.getIteratorFrom=function(t,n){return new Oh(this.root_,t,this.comparator_,!1,n)},e.prototype.getReverseIteratorFrom=function(t,n){return new Oh(this.root_,t,this.comparator_,!0,n)},e.prototype.getReverseIterator=function(t){return new Oh(this.root_,null,this.comparator_,!0,t)},e.EMPTY_NODE=new MV,e}();uk=function(e){return typeof e=="number"?"number:"+kA(e):"string:"+e},ck=function(e){if(e.isLeafNode()){var t=e.val();V(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Yt(t,".sv"),"Priority must be a string or number.")}else V(e===dy||e.isEmpty(),"priority of unexpected type.");V(e===dy||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};ha=function(){function e(t,n){n===void 0&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,V(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ck(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return lk},set:function(t){lk=t},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return t===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return pe(t)?this:he(t)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(t,n){return null},e.prototype.updateImmediateChild=function(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=he(t);return r===null?n:n.isEmpty()&&r!==".priority"?this:(V(r!==".priority"||Pi(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Pe(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(t,n){return!1},e.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(this.lazyHash_===null){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+uk(this.priorityNode_.val())+":");var n=typeof this.value_;t+=n+":",n==="number"?t+=kA(this.value_):t+=this.value_,this.lazyHash_=TA(t)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(V(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),s=e.VALUE_TYPE_ORDER.indexOf(r);return V(i>=0,"Unknown leaf type: "+n),V(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();BV=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.compare=function(n,r){var i=n.node.getPriority(),s=r.node.getPriority(),a=i.compareTo(s);return a===0?Vo(n.name,r.name):a},t.prototype.isDefinedOn=function(n){return!n.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(n,r){return!n.getPriority().equals(r.getPriority())},t.prototype.minPost=function(){return ye.MIN},t.prototype.maxPost=function(){return new ye(Pr,new ha("[PRIORITY-POST]",hk))},t.prototype.makePost=function(n,r){var i=fk(n);return new ye(r,new ha("[PRIORITY-POST]",i))},t.prototype.toString=function(){return".priority"},t}(Rh),Ue=new BV;qV=Math.log(2),WV=function(){function e(t){var n=function(s){return parseInt(Math.log(s)/qV,10)},r=function(s){return parseInt(Array(s+1).join("1"),2)};this.count=n(t+1),this.current_=this.count-1;var i=r(this.count);this.bits_=t+1&i}return e.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},e}(),xh=function(e,t,n,r){e.sort(t);var i=function(l,h){var d=h-l,g,m;if(d===0)return null;if(d===1)return g=e[l],m=n?n(g):g,new pr(m,g.node,pr.BLACK,null,null);var _=parseInt(d/2,10)+l,w=i(l,_),E=i(_+1,h);return g=e[_],m=n?n(g):g,new pr(m,g.node,pr.BLACK,w,E)},s=function(l){for(var h=null,d=null,g=e.length,m=function(S,R){var O=g-S,U=g;g-=S;var L=i(O+1,U),P=e[O],ue=n?n(P):P;_(new pr(ue,P.node,R,null,L))},_=function(S){h?(h.left=S,h=S):(d=S,h=S)},w=0;w<l.count;++w){var E=l.nextBitIsOne(),T=Math.pow(2,l.count-(w+1));E?m(T,pr.BLACK):(m(T,pr.BLACK),m(T,pr.RED))}return d},a=new WV(e.length),c=s(a);return new ti(r||t,c)};pa={},Ph=function(){function e(t,n){this.indexes_=t,this.indexSet_=n}return Object.defineProperty(e,"Default",{get:function(){return V(pa&&Ue,"ChildrenNode.ts has not been loaded"),vy=vy||new e({".priority":pa},{".priority":Ue}),vy},enumerable:!1,configurable:!0}),e.prototype.get=function(t){var n=Ni(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof ti?n:null},e.prototype.hasIndex=function(t){return Yt(this.indexSet_,t.toString())},e.prototype.addIndex=function(t,n){V(t!==Dr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],i=!1,s=n.getIterator(ye.Wrap),a=s.getNext();a;)i=i||t.isDefinedOn(a.node),r.push(a),a=s.getNext();var c;i?c=xh(r,t.getCompare()):c=pa;var l=t.toString(),h=Ee({},this.indexSet_);h[l]=t;var d=Ee({},this.indexes_);return d[l]=c,new e(d,h)},e.prototype.addToIndexes=function(t,n){var r=this,i=sc(this.indexes_,function(s,a){var c=Ni(r.indexSet_,a);if(V(c,"Missing index implementation for "+a),s===pa)if(c.isDefinedOn(t.node)){for(var l=[],h=n.getIterator(ye.Wrap),d=h.getNext();d;)d.name!==t.name&&l.push(d),d=h.getNext();return l.push(t),xh(l,c.getCompare())}else return pa;else{var g=n.get(t.name),m=s;return g&&(m=m.remove(new ye(t.name,g))),m.insert(t,t.node)}});return new e(i,this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){var r=sc(this.indexes_,function(i){if(i===pa)return i;var s=n.get(t.name);return s?i.remove(new ye(t.name,s)):i});return new e(r,this.indexSet_)},e}();ce=function(){function e(t,n,r){this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&ck(this.priorityNode_),this.children_.isEmpty()&&V(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return _c||(_c=new e(new ti(py),null,Ph.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||_c},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(t){if(t===".priority")return this.getPriority();var n=this.children_.get(t);return n===null?_c:n},e.prototype.getChild=function(t){var n=he(t);return n===null?this:this.getImmediateChild(n).getChild(Pe(t))},e.prototype.hasChild=function(t){return this.children_.get(t)!==null},e.prototype.updateImmediateChild=function(t,n){if(V(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);var r=new ye(t,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?_c:this.priorityNode_;return new e(i,a,s)},e.prototype.updateChild=function(t,n){var r=he(t);if(r===null)return n;V(he(t)!==".priority"||Pi(t)===1,".priority must be the last token in a path");var i=this.getImmediateChild(r).updateChild(Pe(t),n);return this.updateImmediateChild(r,i)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,s=!0;if(this.forEachChild(Ue,function(l,h){n[l]=h.val(t),r++,s&&e.INTEGER_REGEXP_.test(l)?i=Math.max(i,Number(l)):s=!1}),!t&&s&&i<2*r){var a=[];for(var c in n)a[c]=n[c];return a}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(this.lazyHash_===null){var t="";this.getPriority().isEmpty()||(t+="priority:"+uk(this.getPriority().val())+":"),this.forEachChild(Ue,function(n,r){var i=r.hash();i!==""&&(t+=":"+n+":"+i)}),this.lazyHash_=t===""?"":TA(t)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(t,n,r){var i=this.resolveIndex_(r);if(i){var s=i.getPredecessorKey(new ye(t,n));return s?s.name:null}else return this.children_.getPredecessorKey(t)},e.prototype.getFirstChildName=function(t){var n=this.resolveIndex_(t);if(n){var r=n.minKey();return r&&r.name}else return this.children_.minKey()},e.prototype.getFirstChild=function(t){var n=this.getFirstChildName(t);return n?new ye(n,this.children_.get(n)):null},e.prototype.getLastChildName=function(t){var n=this.resolveIndex_(t);if(n){var r=n.maxKey();return r&&r.name}else return this.children_.maxKey()},e.prototype.getLastChild=function(t){var n=this.getLastChildName(t);return n?new ye(n,this.children_.get(n)):null},e.prototype.forEachChild=function(t,n){var r=this.resolveIndex_(t);return r?r.inorderTraversal(function(i){return n(i.name,i.node)}):this.children_.inorderTraversal(n)},e.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},e.prototype.getIteratorFrom=function(t,n){var r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(t,function(a){return a});for(var i=this.children_.getIteratorFrom(t.name,ye.Wrap),s=i.peek();s!=null&&n.compare(s,t)<0;)i.getNext(),s=i.peek();return i},e.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},e.prototype.getReverseIteratorFrom=function(t,n){var r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(t,function(a){return a});for(var i=this.children_.getReverseIteratorFrom(t.name,ye.Wrap),s=i.peek();s!=null&&n.compare(s,t)>0;)i.getNext(),s=i.peek();return i},e.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===bc?-1:0},e.prototype.withIndex=function(t){if(t===Dr||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(t){return t===Dr||this.indexMap_.hasIndex(t)},e.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){for(var r=this.getIterator(Ue),i=n.getIterator(Ue),s=r.getNext(),a=i.getNext();s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=i.getNext()}return s===null&&a===null}else return!1;else return!1},e.prototype.resolveIndex_=function(t){return t===Dr?null:this.indexMap_.get(t.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),GV=function(e){W(t,e);function t(){return e.call(this,new ti(py),ce.EMPTY_NODE,Ph.Default)||this}return t.prototype.compareTo=function(n){return n===this?0:1},t.prototype.equals=function(n){return n===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(n){return ce.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(ce),bc=new GV;Object.defineProperties(ye,{MIN:{value:new ye(ei,ce.EMPTY_NODE)},MAX:{value:new ye(Pr,bc)}});ak.__EMPTY_NODE=ce.EMPTY_NODE;ha.__childrenNodeConstructor=ce;UV(bc);VV(bc);KV=!0;jV(ze);my=function(e){W(t,e);function t(n){var r=e.call(this)||this;return r.indexPath_=n,V(!pe(n)&&he(n)!==".priority","Can't create PathIndex with empty path or .priority key"),r}return t.prototype.extractChild=function(n){return n.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(n){return!n.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(n,r){var i=this.extractChild(n.node),s=this.extractChild(r.node),a=i.compareTo(s);return a===0?Vo(n.name,r.name):a},t.prototype.makePost=function(n,r){var i=ze(n),s=ce.EMPTY_NODE.updateChild(this.indexPath_,i);return new ye(r,s)},t.prototype.maxPost=function(){var n=ce.EMPTY_NODE.updateChild(this.indexPath_,bc);return new ye(Pr,n)},t.prototype.toString=function(){return gc(this.indexPath_,0).join("/")},t}(Rh);HV=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.compare=function(n,r){var i=n.node.compareTo(r.node);return i===0?Vo(n.name,r.name):i},t.prototype.isDefinedOn=function(n){return!0},t.prototype.indexedValueChanged=function(n,r){return!n.equals(r)},t.prototype.minPost=function(){return ye.MIN},t.prototype.maxPost=function(){return ye.MAX},t.prototype.makePost=function(n,r){var i=ze(n);return new ye(r,i)},t.prototype.toString=function(){return".value"},t}(Rh),gy=new HV;da="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",yy="-",pk="z",dk=786,zV=function(){var e=0,t=[];return function(n){var r=n===e;e=n;var i,s=new Array(8);for(i=7;i>=0;i--)s[i]=da.charAt(n%64),n=Math.floor(n/64);V(n===0,"Cannot push at time == 0");var a=s.join("");if(r){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)a+=da.charAt(t[i]);return V(a.length===20,"nextPushId: Length should be 20."),a}}(),vk=function(e){if(e===""+ry)return yy;var t=Ah(e);if(t!=null)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<dk)return n.push(yy),n.join("");for(var i=n.length-1;i>=0&&n[i]===pk;)i--;if(i===-1)return Pr;var s=n[i],a=da.charAt(da.indexOf(s)+1);return n[i]=a,n.slice(0,i+1).join("")},mk=function(e){if(e===""+RA)return ei;var t=Ah(e);if(t!=null)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return n[n.length-1]===yy?n.length===1?""+ry:(delete n[n.length-1],n.join("")):(n[n.length-1]=da.charAt(da.indexOf(n[n.length-1])-1),n.join("")+pk.repeat(dk-n.length))};_y=function(){function e(t){this.index_=t}return e.prototype.updateChild=function(t,n,r,i,s,a){V(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var c=t.getImmediateChild(n);return c.getChild(i).equals(r.getChild(i))&&c.isEmpty()===r.isEmpty()||(a!=null&&(r.isEmpty()?t.hasChild(n)?a.trackChildChange(wc(n,c)):V(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?a.trackChildChange(va(n,r)):a.trackChildChange(Ec(n,r,c))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)},e.prototype.updateFullNode=function(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(Ue,function(i,s){n.hasChild(i)||r.trackChildChange(wc(i,s))}),n.isLeafNode()||n.forEachChild(Ue,function(i,s){if(t.hasChild(i)){var a=t.getImmediateChild(i);a.equals(s)||r.trackChildChange(Ec(i,s,a))}else r.trackChildChange(va(i,s))})),n.withIndex(this.index_)},e.prototype.updatePriority=function(t,n){return t.isEmpty()?ce.EMPTY_NODE:t.updatePriority(n)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}();yk=function(){function e(t){this.indexedFilter_=new _y(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},e.prototype.updateChild=function(t,n,r,i,s,a){return this.matches(new ye(n,r))||(r=ce.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,s,a)},e.prototype.updateFullNode=function(t,n,r){n.isLeafNode()&&(n=ce.EMPTY_NODE);var i=n.withIndex(this.index_);i=i.updatePriority(ce.EMPTY_NODE);var s=this;return n.forEachChild(Ue,function(a,c){s.matches(new ye(a,c))||(i=i.updateImmediateChild(a,ce.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)},e.prototype.updatePriority=function(t,n){return t},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(t){if(t.hasStart()){var n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()},e.getEndPost_=function(t){if(t.hasEnd()){var n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()},e}();YV=function(){function e(t){this.rangedFilter_=new yk(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return e.prototype.updateChild=function(t,n,r,i,s,a){return this.rangedFilter_.matches(new ye(n,r))||(r=ce.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,s,a):this.fullLimitUpdateChild_(t,n,r,s,a)},e.prototype.updateFullNode=function(t,n,r){var i;if(n.isLeafNode()||n.isEmpty())i=ce.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=ce.EMPTY_NODE.withIndex(this.index_);var s=void 0;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;s.hasNext()&&a<this.limit_;){var c=s.getNext(),l=void 0;if(this.reverse_?l=this.index_.compare(this.rangedFilter_.getStartPost(),c)<=0:l=this.index_.compare(c,this.rangedFilter_.getEndPost())<=0,l)i=i.updateImmediateChild(c.name,c.node),a++;else break}}else{i=n.withIndex(this.index_),i=i.updatePriority(ce.EMPTY_NODE);var h=void 0,d=void 0,g=void 0,s=void 0;if(this.reverse_){s=i.getReverseIterator(this.index_),h=this.rangedFilter_.getEndPost(),d=this.rangedFilter_.getStartPost();var m=this.index_.getCompare();g=function(T,S){return m(S,T)}}else s=i.getIterator(this.index_),h=this.rangedFilter_.getStartPost(),d=this.rangedFilter_.getEndPost(),g=this.index_.getCompare();for(var a=0,_=!1;s.hasNext();){var c=s.getNext();!_&&g(h,c)<=0&&(_=!0);var l=_&&a<this.limit_&&g(c,d)<=0;l?a++:i=i.updateImmediateChild(c.name,ce.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)},e.prototype.updatePriority=function(t,n){return t},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(t,n,r,i,s){var a;if(this.reverse_){var c=this.index_.getCompare();a=function(R,O){return c(O,R)}}else a=this.index_.getCompare();var l=t;V(l.numChildren()===this.limit_,"");var h=new ye(n,r),d=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),g=this.rangedFilter_.matches(h);if(l.hasChild(n)){for(var m=l.getImmediateChild(n),_=i.getChildAfterChild(this.index_,d,this.reverse_);_!=null&&(_.name===n||l.hasChild(_.name));)_=i.getChildAfterChild(this.index_,_,this.reverse_);var w=_==null?1:a(_,h),E=g&&!r.isEmpty()&&w>=0;if(E)return s!=null&&s.trackChildChange(Ec(n,r,m)),l.updateImmediateChild(n,r);s!=null&&s.trackChildChange(wc(n,m));var T=l.updateImmediateChild(n,ce.EMPTY_NODE),S=_!=null&&this.rangedFilter_.matches(_);return S?(s!=null&&s.trackChildChange(va(_.name,_.node)),T.updateImmediateChild(_.name,_.node)):T}else return r.isEmpty()?t:g&&a(d,h)>=0?(s!=null&&(s.trackChildChange(wc(d.name,d.node)),s.trackChildChange(va(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(d.name,ce.EMPTY_NODE)):t},e}();_k=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ue}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"},e.prototype.getIndexStartValue=function(){return V(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return V(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ei},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return V(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return V(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Pr},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&this.viewFrom_!==""},e.prototype.getLimit=function(){return V(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ue},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();t4=function(e){W(t,e);function t(n,r,i,s){var a=e.call(this)||this;return a.repoInfo_=n,a.onDataUpdate_=r,a.authTokenProvider_=i,a.appCheckTokenProvider_=s,a.log_=hc("p:rest:"),a.listens_={},a}return t.prototype.reportStats=function(n){throw new Error("Method not implemented.")},t.getListenId_=function(n,r){return r!==void 0?"tag$"+r:(V(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())},t.prototype.listen=function(n,r,i,s){var a=this,c=n._path.toString();this.log_("Listen called for "+c+" "+n._queryIdentifier);var l=t.getListenId_(n,i),h={};this.listens_[l]=h;var d=bk(n._queryParams);this.restRequest_(c+".json",d,function(g,m){var _=m;if(g===404&&(_=null,g=null),g===null&&a.onDataUpdate_(c,_,!1,i),Ni(a.listens_,l)===h){var w;g?g===401?w="permission_denied":w="rest_error:"+g:w="ok",s(w,null)}})},t.prototype.unlisten=function(n,r){var i=t.getListenId_(n,r);delete this.listens_[i]},t.prototype.get=function(n){var r=this,i=bk(n._queryParams),s=n._path.toString(),a=new Dt;return this.restRequest_(s+".json",i,function(c,l){var h=l;c===404&&(h=null,c=null),c===null?(r.onDataUpdate_(s,h,!1,null),a.resolve(h)):a.reject(new Error(h))}),a.promise},t.prototype.refreshAuthToken=function(n){},t.prototype.restRequest_=function(n,r,i){var s=this;return r===void 0&&(r={}),r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(a){var c=nt(a,2),l=c[0],h=c[1];l&&l.accessToken&&(r.auth=l.accessToken),h&&h.token&&(r.ac=h.token);var d=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+n+"?ns="+s.repoInfo_.namespace+LC(r);s.log_("Sending REST request for "+d);var g=new XMLHttpRequest;g.onreadystatechange=function(){if(i&&g.readyState===4){s.log_("REST Response for "+d+" received. status:",g.status,"response:",g.responseText);var m=null;if(g.status>=200&&g.status<300){try{m=ia(g.responseText)}catch(_){St("Failed to parse JSON response for "+d+": "+g.responseText)}i(null,m)}else g.status!==401&&g.status!==404&&St("Got unsuccessful REST response for "+d+" Status: "+g.status),i(g.status);i=null}},g.open("GET",d,!0),g.send()})},t}(JA);n4=function(){function e(){this.rootNode_=ce.EMPTY_NODE}return e.prototype.getNode=function(t){return this.rootNode_.getChild(t)},e.prototype.updateSnapshot=function(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)},e}();Ek=function(){function e(t){this.collection_=t,this.last_=null}return e.prototype.get=function(){var t=this.collection_.get(),n=Ee({},t);return this.last_&&pt(this.last_,function(r,i){n[r]=n[r]-i}),this.last_=t,n},e}();Ik=10*1e3,i4=30*1e3,o4=5*60*1e3,s4=function(){function e(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Ek(t);var r=Ik+(i4-Ik)*Math.random();dc(this.reportStats_.bind(this),Math.floor(r))}return e.prototype.reportStats_=function(){var t=this,n=this.statsListener_.get(),r={},i=!1;pt(n,function(s,a){a>0&&Yt(t.statsToReport_,s)&&(r[s]=a,i=!0)}),i&&this.server_.reportStats(r),dc(this.reportStats_.bind(this),Math.floor(Math.random()*2*o4))},e}();(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(dr||(dr={}));u4=function(){function e(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=dr.ACK_USER_WRITE,this.source=Ty()}return e.prototype.operationForChild=function(t){if(pe(this.path)){if(this.affectedTree.value!=null)return V(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Ce(t));return new e(Te(),n,this.revert)}else return V(he(this.path)===t,"operationForChild called for unrelated child."),new e(Pe(this.path),this.affectedTree,this.revert)},e}();Tk=function(){function e(t,n){this.source=t,this.path=n,this.type=dr.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return pe(this.path)?new e(this.source,Te()):new e(this.source,Pe(this.path))},e}();Mh=function(){function e(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=dr.OVERWRITE}return e.prototype.operationForChild=function(t){return pe(this.path)?new e(this.source,Te(),this.snap.getImmediateChild(t)):new e(this.source,Pe(this.path),this.snap)},e}();Ay=function(){function e(t,n,r){this.source=t,this.path=n,this.children=r,this.type=dr.MERGE}return e.prototype.operationForChild=function(t){if(pe(this.path)){var n=this.children.subtree(new Ce(t));return n.isEmpty()?null:n.value?new Mh(this.source,Te(),n.value):new e(this.source,Te(),n)}else return V(he(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Pe(this.path),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}();Di=function(){function e(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(t){if(pe(t))return this.isFullyInitialized()&&!this.filtered_;var n=he(t);return this.isCompleteForChild(n)},e.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},e.prototype.getNode=function(){return this.node_},e}();c4=function(){function e(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}return e}();p4=function(){return ky||(ky=new ti(Gj)),ky},An=function(){function e(t,n){n===void 0&&(n=p4()),this.value=t,this.children=n}return e.fromObject=function(t){var n=new e(null);return pt(t,function(r,i){n=n.set(new Ce(r),i)}),n},e.prototype.isEmpty=function(){return this.value===null&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(t,n){if(this.value!=null&&n(this.value))return{path:Te(),value:this.value};if(pe(t))return null;var r=he(t),i=this.children.get(r);if(i!==null){var s=i.findRootMostMatchingPathAndValue(Pe(t),n);if(s!=null){var a=We(new Ce(r),s.path);return{path:a,value:s.value}}else return null}else return null},e.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},e.prototype.subtree=function(t){if(pe(t))return this;var n=he(t),r=this.children.get(n);return r!==null?r.subtree(Pe(t)):new e(null)},e.prototype.set=function(t,n){if(pe(t))return new e(n,this.children);var r=he(t),i=this.children.get(r)||new e(null),s=i.set(Pe(t),n),a=this.children.insert(r,s);return new e(this.value,a)},e.prototype.remove=function(t){if(pe(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=he(t),r=this.children.get(n);if(r){var i=r.remove(Pe(t)),s=void 0;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new e(null):new e(this.value,s)}else return this},e.prototype.get=function(t){if(pe(t))return this.value;var n=he(t),r=this.children.get(n);return r?r.get(Pe(t)):null},e.prototype.setTree=function(t,n){if(pe(t))return n;var r=he(t),i=this.children.get(r)||new e(null),s=i.setTree(Pe(t),n),a=void 0;return s.isEmpty()?a=this.children.remove(r):a=this.children.insert(r,s),new e(this.value,a)},e.prototype.fold=function(t){return this.fold_(Te(),t)},e.prototype.fold_=function(t,n){var r={};return this.children.inorderTraversal(function(i,s){r[i]=s.fold_(We(t,i),n)}),n(t,this.value,r)},e.prototype.findOnPath=function(t,n){return this.findOnPath_(t,Te(),n)},e.prototype.findOnPath_=function(t,n,r){var i=this.value?r(n,this.value):!1;if(i)return i;if(pe(t))return null;var s=he(t),a=this.children.get(s);return a?a.findOnPath_(Pe(t),We(n,s),r):null},e.prototype.foreachOnPath=function(t,n){return this.foreachOnPath_(t,Te(),n)},e.prototype.foreachOnPath_=function(t,n,r){if(pe(t))return this;this.value&&r(n,this.value);var i=he(t),s=this.children.get(i);return s?s.foreachOnPath_(Pe(t),We(n,i),r):new e(null)},e.prototype.foreach=function(t){this.foreach_(Te(),t)},e.prototype.foreach_=function(t,n){this.children.inorderTraversal(function(r,i){i.foreach_(We(t,r),n)}),this.value&&n(t,this.value)},e.prototype.foreachChild=function(t){this.children.inorderTraversal(function(n,r){r.value&&t(n,r.value)})},e}();ni=function(){function e(t){this.writeTree_=t}return e.empty=function(){return new e(new An(null))},e}();k4=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(t){var n=t.type,r=t.childName;V(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),V(r!==".priority","Only non-priority child changes can be tracked.");var i=this.changeMap.get(r);if(i){var s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Ec(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,wc(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,va(r,t.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Ec(r,t.snapshotNode,i.oldSnap));else throw Mo("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}();R4=function(){function e(){}return e.prototype.getCompleteChild=function(t){return null},e.prototype.getChildAfterChild=function(t,n,r){return null},e}(),Dk=new R4,Dy=function(){function e(t,n,r){r===void 0&&(r=null),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return e.prototype.getCompleteChild=function(t){var n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);var r=this.optCompleteServerCache_!=null?new Di(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Py(this.writes_,t,r)},e.prototype.getChildAfterChild=function(t,n,r){var i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Go(this.viewCache_),s=A4(this.writes_,i,n,1,r,t);return s.length===0?null:s[0]},e}();U4=function(){function e(t,n){this.query_=t,this.eventRegistrations_=[];var r=this.query_._queryParams,i=new _y(r.getIndex()),s=XV(r);this.processor_=N4(s);var a=n.serverCache,c=n.eventCache,l=i.updateFullNode(ce.EMPTY_NODE,a.getNode(),null),h=s.updateFullNode(ce.EMPTY_NODE,c.getNode(),null),d=new Di(l,a.isFullyInitialized(),i.filtersNodes()),g=new Di(h,c.isFullyInitialized(),s.filtersNodes());this.viewCache_=Fh(g,d),this.eventGenerator_=new c4(this.query_)}return Object.defineProperty(e.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),e}();qk=function(){function e(){this.views=new Map}return e}();$4=1,zk=function(){function e(t){this.listenProvider_=t,this.syncPointTree_=new An(null),this.pendingWriteTree_=C4(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return e}();cB=function(){function e(t){this.node_=t}return e.prototype.getImmediateChild=function(t){var n=this.node_.getImmediateChild(t);return new e(n)},e.prototype.node=function(){return this.node_},e}(),lB=function(){function e(t,n){this.syncTree_=t,this.path_=n}return e.prototype.getImmediateChild=function(t){var n=We(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return Hh(this.syncTree_,this.path_)},e}(),fB=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},Jk=function(e,t,n){if(!e||typeof e!="object")return e;if(V(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return hB(e[".sv"],t,n);if(typeof e[".sv"]=="object")return pB(e[".sv"],t);V(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},hB=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:V(!1,"Unexpected server value: "+e)}},pB=function(e,t,n){e.hasOwnProperty("increment")||V(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;typeof r!="number"&&V(!1,"Unexpected increment value: "+r);var i=t.node();if(V(i!==null&&typeof i!="undefined","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i,a=s.getValue();return typeof a!="number"?r:a+r},Zk=function(e,t,n,r){return Gy(t,new lB(n,e),r)},Wy=function(e,t,n){return Gy(e,new cB(t),n)};Ky=function(){function e(t,n,r){t===void 0&&(t=""),n===void 0&&(n=null),r===void 0&&(r={children:{},childCount:0}),this.name=t,this.parent=n,this.node=r}return e}();gB=/[\[\].#$\/\u0000-\u001F\u007F]/,yB=/[\[\].#$\u0000-\u001F\u007F]/,Qy=10*1024*1024,$h=function(e){return typeof e=="string"&&e.length!==0&&!gB.test(e)},nR=function(e){return typeof e=="string"&&e.length!==0&&!yB.test(e)},_B=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),nR(e)},Rc=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Ch(e)||e&&typeof e=="object"&&Yt(e,".sv")},Lr=function(e,t,n,r){r&&t===void 0||Nc(Xt(e,"value"),t,n)},Nc=function(e,t,n){var r=n instanceof Ce?new AV(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+qo(r));if(typeof t=="function")throw new Error(e+"contains a function "+qo(r)+" with contents = "+t.toString());if(Ch(t))throw new Error(e+"contains "+t.toString()+" "+qo(r));if(typeof t=="string"&&t.length>Qy/3&&ac(t)>Qy)throw new Error(e+"contains a string greater than "+Qy+" utf8 bytes "+qo(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){var i=!1,s=!1;if(pt(t,function(a,c){if(a===".value")i=!0;else if(a!==".priority"&&a!==".sv"&&(s=!0,!$h(a)))throw new Error(e+" contains an invalid key ("+a+") "+qo(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);kV(r,a),Nc(e,c,r),RV(r)}),i&&s)throw new Error(e+' contains ".value" child '+qo(r)+" in addition to actual children.")}},bB=function(e,t){var n,r;for(n=0;n<t.length;n++){r=t[n];for(var i=gc(r),s=0;s<i.length;s++)if(!(i[s]===".priority"&&s===i.length-1)){if(!$h(i[s]))throw new Error(e+"contains an invalid key ("+i[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(CV);var a=null;for(n=0;n<t.length;n++){if(r=t[n],a!==null&&qn(a,r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}},rR=function(e,t,n,r){if(!(r&&t===void 0)){var i=Xt(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var s=[];pt(t,function(a,c){var l=new Ce(a);if(Nc(i,c,We(n,l)),fy(l)===".priority"&&!Rc(c))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),bB(i,s)}},Yy=function(e,t,n){if(!(n&&t===void 0)){if(Ch(t))throw new Error(Xt(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Rc(t))throw new Error(Xt(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},wB=function(e,t,n){if(!(n&&t===void 0))switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Xt(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Oc=function(e,t,n,r){if(!(r&&n===void 0)&&!$h(n))throw new Error(Xt(e,t)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},xc=function(e,t,n,r){if(!(r&&n===void 0)&&!nR(n))throw new Error(Xt(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},EB=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),xc(e,t,n,r)},Wn=function(e,t){if(he(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},iR=function(e,t){var n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!$h(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!_B(n))throw new Error(Xt(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)},IB=function(e,t,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(Xt(e,t)+"must be a boolean.")};TB=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e}();sR="repo_interrupt",CB=25,AB=function(){function e(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new TB,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Lh(),this.transactionQueueTree_=new Ky,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e}();r_=function(e,t){var n=HB(e),r=n.namespace;n.domain==="firebase.com"&&xr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&xr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||qj();var i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new oy(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new Ce(n.pathString)}},HB=function(e){var t="",n="",r="",i="",s="",a=!0,c="https",l=443;if(typeof e=="string"){var h=e.indexOf("//");h>=0&&(c=e.substring(0,h-1),e=e.substring(h+2));var d=e.indexOf("/");d===-1&&(d=e.length);var g=e.indexOf("?");g===-1&&(g=e.length),t=e.substring(0,Math.min(d,g)),d<g&&(i=GB(e.substring(d,g)));var m=KB(e.substring(Math.min(e.length,g)));h=t.indexOf(":"),h>=0?(a=c==="https"||c==="wss",l=parseInt(t.substring(h+1),10)):h=t.length;var _=t.slice(0,h);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{var w=t.indexOf(".");r=t.substring(0,w).toLowerCase(),n=t.substring(w+1),s=r}"ns"in m&&(s=m.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:a,scheme:c,pathString:i,namespace:s}};vR=function(){function e(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return e.prototype.getPath=function(){var t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+it(this.snapshot.exportVal())},e}(),mR=function(){function e(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}();gR=function(){function e(t,n){this.snapshotCallback=t,this.cancelCallback=n}return e.prototype.onValue=function(t,n){this.snapshotCallback.call(null,t,n)},e.prototype.onCancel=function(t){return V(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(e.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),e.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},e}();zB=function(){function e(t,n){this._repo=t,this._path=n}return e.prototype.cancel=function(){var t=new Dt;return DB(this._repo,this._path,t.wrapCallback(function(){})),t.promise},e.prototype.remove=function(){Wn("OnDisconnect.remove",this._path);var t=new Dt;return lR(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},e.prototype.set=function(t){Wn("OnDisconnect.set",this._path),Lr("OnDisconnect.set",t,this._path,!1);var n=new Dt;return lR(this._repo,this._path,t,n.wrapCallback(function(){})),n.promise},e.prototype.setWithPriority=function(t,n){Wn("OnDisconnect.setWithPriority",this._path),Lr("OnDisconnect.setWithPriority",t,this._path,!1),Yy("OnDisconnect.setWithPriority",n,!1);var r=new Dt;return LB(this._repo,this._path,t,n,r.wrapCallback(function(){})),r.promise},e.prototype.update=function(t){Wn("OnDisconnect.update",this._path),rR("OnDisconnect.update",t,this._path,!1);var n=new Dt;return MB(this._repo,this._path,t,n.wrapCallback(function(){})),n.promise},e}();Kn=function(){function e(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return Object.defineProperty(e.prototype,"key",{get:function(){return pe(this._path)?null:fy(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Mr(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryIdentifier",{get:function(){var t=wk(this._queryParams),n=ny(t);return n==="{}"?"default":n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryObject",{get:function(){return wk(this._queryParams)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(t=se(t),!(t instanceof e))return!1;var n=this._repo===t._repo,r=hy(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i},e.prototype.toJSON=function(){return this.toString()},e.prototype.toString=function(){return this._repo.toString()+SV(this._path)},e}();Mr=function(e){W(t,e);function t(n,r){return e.call(this,n,r,new _k,!1)||this}return Object.defineProperty(t.prototype,"parent",{get:function(){var n=rk(this._path);return n===null?null:new t(this._repo,n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){for(var n=this;n.parent!==null;)n=n.parent;return n},enumerable:!1,configurable:!0}),t}(Kn),ip=function(){function e(t,n,r){this._node=t,this.ref=n,this._index=r}return Object.defineProperty(e.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),e.prototype.child=function(t){var n=new Ce(t),r=zo(this.ref,t);return new e(this._node.getChild(n),r,Ue)},e.prototype.exists=function(){return!this._node.isEmpty()},e.prototype.exportVal=function(){return this._node.val(!0)},e.prototype.forEach=function(t){var n=this;if(this._node.isLeafNode())return!1;var r=this._node;return!!r.forEachChild(this._index,function(i,s){return t(new e(s,zo(n.ref,i),Ue))})},e.prototype.hasChild=function(t){var n=new Ce(t);return!this._node.getChild(n).isEmpty()},e.prototype.hasChildren=function(){return this._node.isLeafNode()?!1:!this._node.isEmpty()},e.prototype.toJSON=function(){return this.exportVal()},e.prototype.val=function(){return this._node.val()},e}();bR=function(){function e(t){this.callbackContext=t}return e.prototype.respondsTo=function(t){return t==="value"},e.prototype.createEvent=function(t,n){var r=n._queryParams.getIndex();return new vR("value",this,new ip(t.snapshotNode,new Mr(n._repo,n._path),r))},e.prototype.getEventRunner=function(t){var n=this;return t.getEventType()==="cancel"?function(){return n.callbackContext.onCancel(t.error)}:function(){return n.callbackContext.onValue(t.snapshot,null)}},e.prototype.createCancelEvent=function(t,n){return this.callbackContext.hasCancelCallback?new mR(this,t,n):null},e.prototype.matches=function(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1},e.prototype.hasAnyCallback=function(){return this.callbackContext!==null},e}(),wR=function(){function e(t,n){this.eventType=t,this.callbackContext=n}return e.prototype.respondsTo=function(t){var n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n},e.prototype.createCancelEvent=function(t,n){return this.callbackContext.hasCancelCallback?new mR(this,t,n):null},e.prototype.createEvent=function(t,n){V(t.childName!=null,"Child events should have a childName.");var r=zo(new Mr(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new vR(t.type,this,new ip(t.snapshotNode,r,i),t.prevName)},e.prototype.getEventRunner=function(t){var n=this;return t.getEventType()==="cancel"?function(){return n.callbackContext.onCancel(t.error)}:function(){return n.callbackContext.onValue(t.snapshot,t.prevName)}},e.prototype.matches=function(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1},e.prototype.hasAnyCallback=function(){return!!this.callbackContext},e}();vr=function(){function e(){}return e}(),AR=function(e){W(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){Lr("endAt",this._value,n._path,!0);var r=wy(n._queryParams,this._value,this._key);if(rp(r),Vi(r),n._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Kn(n._repo,n._path,r,n._orderByCalled)},t}(vr);tq=function(e){W(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){Lr("endBefore",this._value,n._path,!1);var r=e4(n._queryParams,this._value,this._key);if(rp(r),Vi(r),n._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Kn(n._repo,n._path,r,n._orderByCalled)},t}(vr);kR=function(e){W(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){Lr("startAt",this._value,n._path,!0);var r=by(n._queryParams,this._value,this._key);if(rp(r),Vi(r),n._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Kn(n._repo,n._path,r,n._orderByCalled)},t}(vr);iq=function(e){W(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){Lr("startAfter",this._value,n._path,!1);var r=ZV(n._queryParams,this._value,this._key);if(rp(r),Vi(r),n._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Kn(n._repo,n._path,r,n._orderByCalled)},t}(vr);sq=function(e){W(t,e);function t(n){var r=e.call(this)||this;return r._limit=n,r}return t.prototype._apply=function(n){if(n._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Kn(n._repo,n._path,$V(n._queryParams,this._limit),n._orderByCalled)},t}(vr);uq=function(e){W(t,e);function t(n){var r=e.call(this)||this;return r._limit=n,r}return t.prototype._apply=function(n){if(n._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Kn(n._repo,n._path,JV(n._queryParams,this._limit),n._orderByCalled)},t}(vr);lq=function(e){W(t,e);function t(n){var r=e.call(this)||this;return r._path=n,r}return t.prototype._apply=function(n){np(n,"orderByChild");var r=new Ce(this._path);if(pe(r))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var i=new my(r),s=Dh(n._queryParams,i);return Vi(s),new Kn(n._repo,n._path,s,!0)},t}(vr);hq=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype._apply=function(n){np(n,"orderByKey");var r=Dh(n._queryParams,Dr);return Vi(r),new Kn(n._repo,n._path,r,!0)},t}(vr);dq=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype._apply=function(n){np(n,"orderByPriority");var r=Dh(n._queryParams,Ue);return Vi(r),new Kn(n._repo,n._path,r,!0)},t}(vr);mq=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype._apply=function(n){np(n,"orderByValue");var r=Dh(n._queryParams,gy);return Vi(r),new Kn(n._repo,n._path,r,!0)},t}(vr);yq=function(e){W(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){if(Lr("equalTo",this._value,n._path,!1),n._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(n._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new AR(this._value,this._key)._apply(new kR(this._value,this._key)._apply(n))},t}(vr);G4(Mr);Y4(Mr);bq="FIREBASE_DATABASE_EMULATOR_HOST",s_={},RR=!1;Sq=function(){function e(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return Object.defineProperty(e.prototype,"_repo",{get:function(){return this._instanceStarted||(kB(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Mr(this._repo,Te())),this._rootInternal},enumerable:!1,configurable:!0}),e.prototype._delete=function(){return this._checkNotDeleted("delete"),Eq(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null,Promise.resolve()},e.prototype._checkNotDeleted=function(t){this._rootInternal===null&&xr("Cannot call "+t+" on a deleted database.")},e}();Rq={".sv":"timestamp"};xq=function(){function e(t,n){this.committed=t,this.snapshot=n}return e.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();Dq=function(){function e(t){this._delegate=t}return e.prototype.cancel=function(t){ne("OnDisconnect.cancel",0,1,arguments.length),ht("OnDisconnect.cancel","onComplete",t,!0);var n=this._delegate.cancel();return t&&n.then(function(){return t(null)},function(r){return t(r)}),n},e.prototype.remove=function(t){ne("OnDisconnect.remove",0,1,arguments.length),ht("OnDisconnect.remove","onComplete",t,!0);var n=this._delegate.remove();return t&&n.then(function(){return t(null)},function(r){return t(r)}),n},e.prototype.set=function(t,n){ne("OnDisconnect.set",1,2,arguments.length),ht("OnDisconnect.set","onComplete",n,!0);var r=this._delegate.set(t);return n&&r.then(function(){return n(null)},function(i){return n(i)}),r},e.prototype.setWithPriority=function(t,n,r){ne("OnDisconnect.setWithPriority",2,3,arguments.length),ht("OnDisconnect.setWithPriority","onComplete",r,!0);var i=this._delegate.setWithPriority(t,n);return r&&i.then(function(){return r(null)},function(s){return r(s)}),i},e.prototype.update=function(t,n){if(ne("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var r={},i=0;i<t.length;++i)r[""+i]=t[i];t=r,St("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("OnDisconnect.update","onComplete",n,!0);var s=this._delegate.update(t);return n&&s.then(function(){return n(null)},function(a){return n(a)}),s},e}();Lq=function(){function e(t,n){this.committed=t,this.snapshot=n}return e.prototype.toJSON=function(){return ne("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();Lc=function(){function e(t,n){this._database=t,this._delegate=n}return e.prototype.val=function(){return ne("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},e.prototype.exportVal=function(){return ne("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},e.prototype.toJSON=function(){return ne("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.exists=function(){return ne("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},e.prototype.child=function(t){return ne("DataSnapshot.child",0,1,arguments.length),t=String(t),xc("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))},e.prototype.hasChild=function(t){return ne("DataSnapshot.hasChild",1,1,arguments.length),xc("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},e.prototype.getPriority=function(){return ne("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},e.prototype.forEach=function(t){var n=this;return ne("DataSnapshot.forEach",1,1,arguments.length),ht("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(function(r){return t(new e(n._database,r))})},e.prototype.hasChildren=function(){return ne("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(e.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return ne("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},e.prototype.getRef=function(){return ne("DataSnapshot.ref",0,0,arguments.length),new Qo(this._database,this._delegate.ref)},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),OR=function(){function e(t,n){this.database=t,this._delegate=n}return e.prototype.on=function(t,n,r,i){var s=this,a;ne("Query.on",2,4,arguments.length),ht("Query.on","callback",n,!1);var c=e.getCancelAndContextArgs_("Query.on",r,i),l=function(d,g){n.call(c.context,new Lc(s.database,d),g)};l.userCallback=n,l.context=c.context;var h=(a=c.cancel)===null||a===void 0?void 0:a.bind(c.context);switch(t){case"value":return o_(this._delegate,l,h),n;case"child_added":return ER(this._delegate,l,h),n;case"child_removed":return SR(this._delegate,l,h),n;case"child_changed":return IR(this._delegate,l,h),n;case"child_moved":return TR(this._delegate,l,h),n;default:throw new Error(Xt("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},e.prototype.off=function(t,n,r){if(ne("Query.off",0,3,arguments.length),wB("Query.off",t,!0),ht("Query.off","callback",n,!0),Wg("Query.off","context",r,!0),n){var i=function(){};i.userCallback=n,i.context=r,CR(this._delegate,t,i)}else CR(this._delegate,t)},e.prototype.get=function(){var t=this;return ZB(this._delegate).then(function(n){return new Lc(t.database,n)})},e.prototype.once=function(t,n,r,i){var s=this;ne("Query.once",1,4,arguments.length),ht("Query.once","callback",n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,i),c=new Dt,l=function(d,g){var m=new Lc(s.database,d);n&&n.call(a.context,m,g),c.resolve(m)};l.userCallback=n,l.context=a.context;var h=function(d){a.cancel&&a.cancel.call(a.context,d),c.reject(d)};switch(t){case"value":o_(this._delegate,l,h,{onlyOnce:!0});break;case"child_added":ER(this._delegate,l,h,{onlyOnce:!0});break;case"child_removed":SR(this._delegate,l,h,{onlyOnce:!0});break;case"child_changed":IR(this._delegate,l,h,{onlyOnce:!0});break;case"child_moved":TR(this._delegate,l,h,{onlyOnce:!0});break;default:throw new Error(Xt("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise},e.prototype.limitToFirst=function(t){return ne("Query.limitToFirst",1,1,arguments.length),new e(this.database,mr(this._delegate,aq(t)))},e.prototype.limitToLast=function(t){return ne("Query.limitToLast",1,1,arguments.length),new e(this.database,mr(this._delegate,cq(t)))},e.prototype.orderByChild=function(t){return ne("Query.orderByChild",1,1,arguments.length),new e(this.database,mr(this._delegate,fq(t)))},e.prototype.orderByKey=function(){return ne("Query.orderByKey",0,0,arguments.length),new e(this.database,mr(this._delegate,pq()))},e.prototype.orderByPriority=function(){return ne("Query.orderByPriority",0,0,arguments.length),new e(this.database,mr(this._delegate,vq()))},e.prototype.orderByValue=function(){return ne("Query.orderByValue",0,0,arguments.length),new e(this.database,mr(this._delegate,gq()))},e.prototype.startAt=function(t,n){return t===void 0&&(t=null),ne("Query.startAt",0,2,arguments.length),new e(this.database,mr(this._delegate,rq(t,n)))},e.prototype.startAfter=function(t,n){return t===void 0&&(t=null),ne("Query.startAfter",0,2,arguments.length),new e(this.database,mr(this._delegate,oq(t,n)))},e.prototype.endAt=function(t,n){return t===void 0&&(t=null),ne("Query.endAt",0,2,arguments.length),new e(this.database,mr(this._delegate,eq(t,n)))},e.prototype.endBefore=function(t,n){return t===void 0&&(t=null),ne("Query.endBefore",0,2,arguments.length),new e(this.database,mr(this._delegate,nq(t,n)))},e.prototype.equalTo=function(t,n){return ne("Query.equalTo",1,2,arguments.length),new e(this.database,mr(this._delegate,_q(t,n)))},e.prototype.toString=function(){return ne("Query.toString",0,0,arguments.length),this._delegate.toString()},e.prototype.toJSON=function(){return ne("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.isEqual=function(t){if(ne("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)},e.getCancelAndContextArgs_=function(t,n,r){var i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,ht(t,"cancel",i.cancel,!0),i.context=r,Wg(t,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(Xt(t,"cancelOrContext")+" must either be a cancel callback or a context object.");return i},Object.defineProperty(e.prototype,"ref",{get:function(){return new Qo(this.database,new Mr(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),e}(),Qo=function(e){W(t,e);function t(n,r){var i=e.call(this,n,new Kn(r._repo,r._path,new _k,!1))||this;return i.database=n,i._delegate=r,i}return t.prototype.getKey=function(){return ne("Reference.key",0,0,arguments.length),this._delegate.key},t.prototype.child=function(n){return ne("Reference.child",1,1,arguments.length),typeof n=="number"&&(n=String(n)),new t(this.database,zo(this._delegate,n))},t.prototype.getParent=function(){ne("Reference.parent",0,0,arguments.length);var n=this._delegate.parent;return n?new t(this.database,n):null},t.prototype.getRoot=function(){return ne("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)},t.prototype.set=function(n,r){ne("Reference.set",1,2,arguments.length),ht("Reference.set","onComplete",r,!0);var i=i_(this._delegate,n);return r&&i.then(function(){return r(null)},function(s){return r(s)}),i},t.prototype.update=function(n,r){if(ne("Reference.update",1,2,arguments.length),Array.isArray(n)){for(var i={},s=0;s<n.length;++s)i[""+s]=n[s];n=i,St("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Wn("Reference.update",this._delegate._path),ht("Reference.update","onComplete",r,!0);var a=JB(this._delegate,n);return r&&a.then(function(){return r(null)},function(c){return r(c)}),a},t.prototype.setWithPriority=function(n,r,i){ne("Reference.setWithPriority",2,3,arguments.length),ht("Reference.setWithPriority","onComplete",i,!0);var s=$B(this._delegate,n,r);return i&&s.then(function(){return i(null)},function(a){return i(a)}),s},t.prototype.remove=function(n){ne("Reference.remove",0,1,arguments.length),ht("Reference.remove","onComplete",n,!0);var r=YB(this._delegate);return n&&r.then(function(){return n(null)},function(i){return n(i)}),r},t.prototype.transaction=function(n,r,i){var s=this;ne("Reference.transaction",1,3,arguments.length),ht("Reference.transaction","transactionUpdate",n,!1),ht("Reference.transaction","onComplete",r,!0),IB("Reference.transaction","applyLocally",i,!0);var a=Pq(this._delegate,n,{applyLocally:i}).then(function(c){return new Lq(c.committed,new Lc(s.database,c.snapshot))});return r&&a.then(function(c){return r(null,c.committed,c.snapshot)},function(c){return r(c,!1,null)}),a},t.prototype.setPriority=function(n,r){ne("Reference.setPriority",1,2,arguments.length),ht("Reference.setPriority","onComplete",r,!0);var i=XB(this._delegate,n);return r&&i.then(function(){return r(null)},function(s){return r(s)}),i},t.prototype.push=function(n,r){var i=this;ne("Reference.push",0,2,arguments.length),ht("Reference.push","onComplete",r,!0);var s=QB(this._delegate,n),a=s.then(function(l){return new t(i.database,l)});r&&a.then(function(){return r(null)},function(l){return r(l)});var c=new t(this.database,s);return c.then=a.then.bind(a),c.catch=a.catch.bind(a,void 0),c},t.prototype.onDisconnect=function(){return Wn("Reference.onDisconnect",this._delegate._path),new Dq(new zB(this._delegate._repo,this._delegate._path))},Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(OR);op=function(){function e(t,n){var r=this;this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()}}}return e.prototype.useEmulator=function(t,n,r){r===void 0&&(r={}),Cq(this._delegate,t,n,r)},e.prototype.ref=function(t){if(ne("database.ref",0,1,arguments.length),t instanceof Qo){var n=_R(this._delegate,t.toString());return new Qo(this,n)}else{var n=yR(this._delegate,t);return new Qo(this,n)}},e.prototype.refFromURL=function(t){var n="database.refFromURL";ne(n,1,1,arguments.length);var r=_R(this._delegate,t);return new Qo(this,r)},e.prototype.goOffline=function(){return ne("database.goOffline",0,0,arguments.length),Aq(this._delegate)},e.prototype.goOnline=function(){return ne("database.goOnline",0,0,arguments.length),kq(this._delegate)},e.ServerValue={TIMESTAMP:Nq(),increment:function(t){return Oq(t)}},e}();Mq=function(){Bo.forceDisallow(),cy.forceAllow()},Fq=function(){cy.forceDisallow()},Uq=function(){return Bo.isAvailable()},jq=function(e,t){var n=e._delegate._repo.persistentConnection_;n.securityDebugCallback_=t},Vq=function(e,t){jB(e._delegate._repo,t)},Bq=function(e,t){VB(e._delegate._repo,t)},qq=function(e){return e._delegate._repo.dataUpdateCount},Wq=function(e,t){return RB(e._delegate._repo,t)};Kq=Object.freeze({__proto__:null,forceLongPolling:Mq,forceWebSockets:Fq,isWebSocketsAvailable:Uq,setSecurityDebugCallback:jq,stats:Vq,statsIncrementCounter:Bq,dataUpdateCount:qq,interceptServerData:Wq,initStandalone:Gq});Hq=Wo;Wo.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Wo.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};zq=$A,Qq=function(e){var t=Wo.prototype.put;return Wo.prototype.put=function(n,r,i,s){s!==void 0&&(s=e()),t.call(this,n,r,i,s)},function(){Wo.prototype.put=t}},Yq=oy,Xq=function(e){return e._delegate._queryIdentifier},$q=function(e){Tq(e)},Jq=Object.freeze({__proto__:null,DataConnection:Hq,RealTimeConnection:zq,hijackHash:Qq,ConnectionTarget:Yq,queryIdentifier:Xq,forceRestClient:$q});Zq=op.ServerValue;e3(K)});var PR={};Rr(PR);var a_=Le(()=>{xR()});var u_=Bf((sp,DR)=>{(function(e,t){typeof sp=="object"&&typeof DR!="undefined"?t(sp):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.idb={}))})(sp,function(e){"use strict";function t(S){return Array.prototype.slice.call(S)}function n(S){return new Promise(function(R,O){S.onsuccess=function(){R(S.result)},S.onerror=function(){O(S.error)}})}function r(S,R,O){var U,L=new Promise(function(P,ue){U=S[R].apply(S,O),n(U).then(P,ue)});return L.request=U,L}function i(S,R,O){var U=r(S,R,O);return U.then(function(L){if(!!L)return new d(L,U.request)})}function s(S,R,O){O.forEach(function(U){Object.defineProperty(S.prototype,U,{get:function(){return this[R][U]},set:function(L){this[R][U]=L}})})}function a(S,R,O,U){U.forEach(function(L){L in O.prototype&&(S.prototype[L]=function(){return r(this[R],L,arguments)})})}function c(S,R,O,U){U.forEach(function(L){L in O.prototype&&(S.prototype[L]=function(){return this[R][L].apply(this[R],arguments)})})}function l(S,R,O,U){U.forEach(function(L){L in O.prototype&&(S.prototype[L]=function(){return i(this[R],L,arguments)})})}function h(S){this._index=S}s(h,"_index",["name","keyPath","multiEntry","unique"]),a(h,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),l(h,"_index",IDBIndex,["openCursor","openKeyCursor"]);function d(S,R){this._cursor=S,this._request=R}s(d,"_cursor",["direction","key","primaryKey","value"]),a(d,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(S){S in IDBCursor.prototype&&(d.prototype[S]=function(){var R=this,O=arguments;return Promise.resolve().then(function(){return R._cursor[S].apply(R._cursor,O),n(R._request).then(function(U){if(!!U)return new d(U,R._request)})})})});function g(S){this._store=S}g.prototype.createIndex=function(){return new h(this._store.createIndex.apply(this._store,arguments))},g.prototype.index=function(){return new h(this._store.index.apply(this._store,arguments))},s(g,"_store",["name","keyPath","indexNames","autoIncrement"]),a(g,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),l(g,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),c(g,"_store",IDBObjectStore,["deleteIndex"]);function m(S){this._tx=S,this.complete=new Promise(function(R,O){S.oncomplete=function(){R()},S.onerror=function(){O(S.error)},S.onabort=function(){O(S.error)}})}m.prototype.objectStore=function(){return new g(this._tx.objectStore.apply(this._tx,arguments))},s(m,"_tx",["objectStoreNames","mode"]),c(m,"_tx",IDBTransaction,["abort"]);function _(S,R,O){this._db=S,this.oldVersion=R,this.transaction=new m(O)}_.prototype.createObjectStore=function(){return new g(this._db.createObjectStore.apply(this._db,arguments))},s(_,"_db",["name","version","objectStoreNames"]),c(_,"_db",IDBDatabase,["deleteObjectStore","close"]);function w(S){this._db=S}w.prototype.transaction=function(){return new m(this._db.transaction.apply(this._db,arguments))},s(w,"_db",["name","version","objectStoreNames"]),c(w,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(S){[g,h].forEach(function(R){S in R.prototype&&(R.prototype[S.replace("open","iterate")]=function(){var O=t(arguments),U=O[O.length-1],L=this._store||this._index,P=L[S].apply(L,O.slice(0,-1));P.onsuccess=function(){U(P.result)}})})}),[h,g].forEach(function(S){S.prototype.getAll||(S.prototype.getAll=function(R,O){var U=this,L=[];return new Promise(function(P){U.iterateCursor(R,function(ue){if(!ue){P(L);return}if(L.push(ue.value),O!==void 0&&L.length==O){P(L);return}ue.continue()})})})});function E(S,R,O){var U=r(indexedDB,"open",[S,R]),L=U.request;return L&&(L.onupgradeneeded=function(P){O&&O(new _(L.result,P.oldVersion,L.transaction))}),U.then(function(P){return new w(P)})}function T(S){return r(indexedDB,"deleteDatabase",[S])}e.openDb=E,e.deleteDb=T,Object.defineProperty(e,"__esModule",{value:!0})})});function VR(e){return e instanceof Or&&e.code.includes("request-failed")}function c_(e){var t=e.projectId;return n3+"/projects/"+t+"/installations"}function BR(e){return{token:e.token,requestStatus:2,expiresIn:a3(e.expiresIn),creationTime:Date.now()}}function l_(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,ri.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}})})}function qR(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function WR(e,t){var n=t.refreshToken,r=qR(e);return r.append("Authorization",u3(n)),r}function f_(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return t=n.sent(),t.status>=500&&t.status<600?[2,e()]:[2,t]}})})}function a3(e){return Number(e.replace("s","000"))}function u3(e){return jR+" "+e}function c3(e,t){var n=t.fid;return A(this,void 0,void 0,function(){var r,i,s,a,c,l,h;return C(this,function(d){switch(d.label){case 0:return r=c_(e),i=qR(e),s={fid:n,authVersion:jR,appId:e.appId,sdkVersion:UR},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,f_(function(){return fetch(r,a)})];case 1:return c=d.sent(),c.ok?[4,c.json()]:[3,3];case 2:return l=d.sent(),h={fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:BR(l.authToken)},[2,h];case 3:return[4,l_("Create Installation",c)];case 4:throw d.sent()}})})}function GR(e){return new Promise(function(t){setTimeout(t,e)})}function l3(e){var t=btoa(String.fromCharCode.apply(String,oe([],nt(e))));return t.replace(/\+/g,"-").replace(/\//g,"_")}function h3(){try{var e=new Uint8Array(17),t=self.crypto||self.msCrypto;t.getRandomValues(e),e[0]=112+e[0]%16;var n=p3(e);return f3.test(n)?n:h_}catch(r){return h_}}function p3(e){var t=l3(e);return t.substr(0,22)}function wa(e){return e.appName+"!"+e.appId}function KR(e,t){var n=wa(e);HR(n,t),m3(n,t)}function d3(e,t){zR();var n=wa(e),r=Ea.get(n);r||(r=new Set,Ea.set(n,r)),r.add(t)}function v3(e,t){var n=wa(e),r=Ea.get(n);!r||(r.delete(t),r.size===0&&Ea.delete(n),QR())}function HR(e,t){var n,r,i=Ea.get(e);if(!!i)try{for(var s=Xe(i),a=s.next();!a.done;a=s.next()){var c=a.value;c(t)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}function m3(e,t){var n=zR();n&&n.postMessage({key:e,fid:t}),QR()}function zR(){return!Yo&&"BroadcastChannel"in self&&(Yo=new BroadcastChannel("[Firebase] FID Change"),Yo.onmessage=function(e){HR(e.data.key,e.data.fid)}),Yo}function QR(){Ea.size===0&&Yo&&(Yo.close(),Yo=null)}function d_(){return p_||(p_=(0,LR.openDb)(g3,y3,function(e){switch(e.oldVersion){case 0:e.createObjectStore(Xo)}})),p_}function ap(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,a;return C(this,function(c){switch(c.label){case 0:return n=wa(e),[4,d_()];case 1:return r=c.sent(),i=r.transaction(Xo,"readwrite"),s=i.objectStore(Xo),[4,s.get(n)];case 2:return a=c.sent(),[4,s.put(t,n)];case 3:return c.sent(),[4,i.complete];case 4:return c.sent(),(!a||a.fid!==t.fid)&&KR(e,t.fid),[2,t]}})})}function v_(e){return A(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:return t=wa(e),[4,d_()];case 1:return n=i.sent(),r=n.transaction(Xo,"readwrite"),[4,r.objectStore(Xo).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function Mc(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,a,c;return C(this,function(l){switch(l.label){case 0:return n=wa(e),[4,d_()];case 1:return r=l.sent(),i=r.transaction(Xo,"readwrite"),s=i.objectStore(Xo),[4,s.get(n)];case 2:return a=l.sent(),c=t(a),c!==void 0?[3,4]:[4,s.delete(n)];case 3:return l.sent(),[3,6];case 4:return[4,s.put(c,n)];case 5:l.sent(),l.label=6;case 6:return[4,i.complete];case 7:return l.sent(),c&&(!a||a.fid!==c.fid)&&KR(e,c.fid),[2,c]}})})}function m_(e){return A(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:return[4,Mc(e,function(s){var a=_3(s),c=b3(e,a);return t=c.registrationPromise,c.installationEntry})];case 1:return n=i.sent(),n.fid!==h_?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}})})}function _3(e){var t=e||{fid:h3(),registrationStatus:0};return XR(t)}function b3(e,t){if(t.registrationStatus===0){if(!navigator.onLine){var n=Promise.reject(ri.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=w3(e,r);return{installationEntry:r,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:E3(e)}:{installationEntry:t}}function w3(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,c3(e,t)];case 1:return n=i.sent(),[2,ap(e,n)];case 2:return r=i.sent(),VR(r)&&r.customData.serverCode===409?[4,v_(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,ap(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}function E3(e){return A(this,void 0,void 0,function(){var t,n,r,i;return C(this,function(s){switch(s.label){case 0:return[4,YR(e)];case 1:t=s.sent(),s.label=2;case 2:return t.registrationStatus!==1?[3,5]:[4,GR(100)];case 3:return s.sent(),[4,YR(e)];case 4:return t=s.sent(),[3,2];case 5:return t.registrationStatus!==0?[3,7]:[4,m_(e)];case 6:return n=s.sent(),r=n.installationEntry,i=n.registrationPromise,i?[2,i]:[2,r];case 7:return[2,t]}})})}function YR(e){return Mc(e,function(t){if(!t)throw ri.create("installation-not-found");return XR(t)})}function XR(e){return I3(e)?{fid:e.fid,registrationStatus:0}:e}function I3(e){return e.registrationStatus===1&&e.registrationTime+FR<Date.now()}function T3(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return A(this,void 0,void 0,function(){var i,s,a,c,l,h,d,g;return C(this,function(m){switch(m.label){case 0:return i=S3(n,t),s=WR(n,t),a=r.getImmediate({optional:!0}),a&&s.append("x-firebase-client",a.getPlatformInfoString()),c={installation:{sdkVersion:UR}},l={method:"POST",headers:s,body:JSON.stringify(c)},[4,f_(function(){return fetch(i,l)})];case 1:return h=m.sent(),h.ok?[4,h.json()]:[3,3];case 2:return d=m.sent(),g=BR(d),[2,g];case 3:return[4,l_("Generate Auth Token",h)];case 4:throw m.sent()}})})}function S3(e,t){var n=t.fid;return c_(e)+"/"+n+"/authTokens:generate"}function g_(e,t){return t===void 0&&(t=!1),A(this,void 0,void 0,function(){var n,r,i,s;return C(this,function(a){switch(a.label){case 0:return[4,Mc(e.appConfig,function(c){if(!JR(c))throw ri.create("not-registered");var l=c.authToken;if(!t&&k3(l))return c;if(l.requestStatus===1)return n=C3(e,t),c;if(!navigator.onLine)throw ri.create("app-offline");var h=N3(c);return n=A3(e,h),h})];case 1:return r=a.sent(),n?[4,n]:[3,3];case 2:return s=a.sent(),[3,4];case 3:s=r.authToken,a.label=4;case 4:return i=s,[2,i]}})})}function C3(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return[4,$R(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return n.authToken.requestStatus!==1?[3,5]:[4,GR(100)];case 3:return i.sent(),[4,$R(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return r=n.authToken,r.requestStatus===0?[2,g_(e,t)]:[2,r]}})})}function $R(e){return Mc(e,function(t){if(!JR(t))throw ri.create("not-registered");var n=t.authToken;return O3(n)?Ee(Ee({},t),{authToken:{requestStatus:0}}):t})}function A3(e,t){return A(this,void 0,void 0,function(){var n,r,i,r;return C(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,8]),[4,T3(e,t)];case 1:return n=s.sent(),r=Ee(Ee({},t),{authToken:n}),[4,ap(e.appConfig,r)];case 2:return s.sent(),[2,n];case 3:return i=s.sent(),VR(i)&&(i.customData.serverCode===401||i.customData.serverCode===404)?[4,v_(e.appConfig)]:[3,5];case 4:return s.sent(),[3,7];case 5:return r=Ee(Ee({},t),{authToken:{requestStatus:0}}),[4,ap(e.appConfig,r)];case 6:s.sent(),s.label=7;case 7:throw i;case 8:return[2]}})})}function JR(e){return e!==void 0&&e.registrationStatus===2}function k3(e){return e.requestStatus===2&&!R3(e)}function R3(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+r3}function N3(e){var t={requestStatus:1,requestTime:Date.now()};return Ee(Ee({},e),{authToken:t})}function O3(e){return e.requestStatus===1&&e.requestTime+FR<Date.now()}function x3(e){return A(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:return[4,m_(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,r=t.registrationPromise,r?r.catch(console.error):g_(e).catch(console.error),[2,n.fid]}})})}function P3(e,t){return t===void 0&&(t=!1),A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,D3(e.appConfig)];case 1:return r.sent(),[4,g_(e,t)];case 2:return n=r.sent(),[2,n.token]}})})}function D3(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return[4,m_(e)];case 1:return t=n.sent().registrationPromise,t?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function L3(e,t){return A(this,void 0,void 0,function(){var n,r,i,s;return C(this,function(a){switch(a.label){case 0:return n=M3(e,t),r=WR(e,t),i={method:"DELETE",headers:r},[4,f_(function(){return fetch(n,i)})];case 1:return s=a.sent(),s.ok?[3,3]:[4,l_("Delete Installation",s)];case 2:throw a.sent();case 3:return[2]}})})}function M3(e,t){var n=t.fid;return c_(e)+"/"+n}function F3(e){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return t=e.appConfig,[4,Mc(t,function(i){if(!(i&&i.registrationStatus===0))return i})];case 1:if(n=r.sent(),!n)return[3,6];if(n.registrationStatus!==1)return[3,2];throw ri.create("delete-pending-registration");case 2:if(n.registrationStatus!==2)return[3,6];if(navigator.onLine)return[3,3];throw ri.create("app-offline");case 3:return[4,L3(t,n)];case 4:return r.sent(),[4,v_(t)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}function U3(e,t){var n=e.appConfig;return d3(n,t),function(){v3(n,t)}}function j3(e){var t,n;if(!e||!e.options)throw y_("App Configuration");if(!e.name)throw y_("App Name");var r=["projectId","apiKey","appId"];try{for(var i=Xe(r),s=i.next();!s.done;s=i.next()){var a=s.value;if(!e.options[a])throw y_(a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function y_(e){return ri.create("missing-app-config-values",{valueName:e})}function V3(e){var t="installations";e.INTERNAL.registerComponent(new qe(t,function(n){var r=n.getProvider("app").getImmediate(),i=j3(r),s=n.getProvider("platform-logger"),a={appConfig:i,platformLoggerProvider:s},c={app:r,getId:function(){return x3(a)},getToken:function(l){return P3(a,l)},delete:function(){return F3(a)},onIdChange:function(l){return U3(a,l)}};return c},"PUBLIC")),e.registerVersion(t3,MR)}var LR,t3,MR,FR,UR,jR,n3,r3,i3,o3,Bi,s3,ri,f3,h_,Ea,Yo,g3,y3,Xo,p_,Fc=Le(()=>{Cn();fr();yn();Vn();LR=Qu(u_()),t3="@firebase/installations",MR="0.4.29";FR=1e4,UR="w:"+MR,jR="FIS_v2",n3="https://firebaseinstallations.googleapis.com/v1",r3=60*60*1e3,i3="installations",o3="Installations";s3=(Bi={},Bi["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Bi["not-registered"]="Firebase Installation is not registered.",Bi["installation-not-found"]="Firebase Installation not found.",Bi["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Bi["app-offline"]="Could not process request. Application offline.",Bi["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Bi),ri=new _n(i3,o3,s3);f3=/^[cdef][\w-]{21}$/,h_="";Ea=new Map;Yo=null;g3="firebase-installations-database",y3=1,Xo="firebase-installations-store",p_=null;V3(K)});function K3(e,t,n,r,i){return A(this,void 0,void 0,function(){var s,a;return C(this,function(c){switch(c.label){case 0:return i&&i.global?(e(Mt.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:s=c.sent(),a=Ee(Ee({},r),{send_to:s}),e(Mt.EVENT,n,a),c.label=3;case 3:return[2]}})})}function H3(e,t,n,r){return A(this,void 0,void 0,function(){var i;return C(this,function(s){switch(s.label){case 0:return r&&r.global?(e(Mt.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=s.sent(),e(Mt.CONFIG,i,{update:!0,screen_name:n}),s.label=3;case 3:return[2]}})})}function z3(e,t,n,r){return A(this,void 0,void 0,function(){var i;return C(this,function(s){switch(s.label){case 0:return r&&r.global?(e(Mt.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=s.sent(),e(Mt.CONFIG,i,{update:!0,user_id:n}),s.label=3;case 3:return[2]}})})}function Q3(e,t,n,r){return A(this,void 0,void 0,function(){var i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:if(!(r&&r.global))return[3,1];for(i={},s=0,a=Object.keys(n);s<a.length;s++)c=a[s],i["user_properties."+c]=n[c];return e(Mt.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:l=h.sent(),e(Mt.CONFIG,l,{update:!0,user_properties:n}),h.label=3;case 3:return[2]}})})}function Y3(e,t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}})})}function X3(e,t){var n=document.createElement("script");n.src=ZR+"?l="+e+"&id="+t,n.async=!0,document.head.appendChild(n)}function $3(e){var t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function J3(e,t,n,r,i,s){return A(this,void 0,void 0,function(){var a,c,l,h;return C(this,function(d){switch(d.label){case 0:a=r[i],d.label=1;case 1:return d.trys.push([1,7,,8]),a?[4,t[a]]:[3,3];case 2:return d.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return c=d.sent(),l=c.find(function(g){return g.measurementId===i}),l?[4,t[l.appId]]:[3,6];case 5:d.sent(),d.label=6;case 6:return[3,8];case 7:return h=d.sent(),Ct.error(h),[3,8];case 8:return e(Mt.CONFIG,i,s),[2]}})})}function Z3(e,t,n,r,i){return A(this,void 0,void 0,function(){var s,a,c,l,h,d,g,m,_;return C(this,function(w){switch(w.label){case 0:return w.trys.push([0,4,,5]),s=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(c=w.sent(),l=function(E){var T=c.find(function(R){return R.measurementId===E}),S=T&&t[T.appId];if(S)s.push(S);else return s=[],"break"},h=0,d=a;h<d.length&&(g=d[h],m=l(g),m!=="break");h++);w.label=2;case 2:return s.length===0&&(s=Object.values(t)),[4,Promise.all(s)];case 3:return w.sent(),e(Mt.EVENT,r,i||{}),[3,5];case 4:return _=w.sent(),Ct.error(_),[3,5];case 5:return[2]}})})}function eW(e,t,n,r){function i(s,a,c){return A(this,void 0,void 0,function(){var l;return C(this,function(h){switch(h.label){case 0:return h.trys.push([0,6,,7]),s!==Mt.EVENT?[3,2]:[4,Z3(e,t,n,a,c)];case 1:return h.sent(),[3,5];case 2:return s!==Mt.CONFIG?[3,4]:[4,J3(e,t,n,r,a,c)];case 3:return h.sent(),[3,5];case 4:e(Mt.SET,a),h.label=5;case 5:return[3,7];case 6:return l=h.sent(),Ct.error(l),[3,7];case 7:return[2]}})})}return i}function tW(e,t,n,r,i){var s=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=eW(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}function nW(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(ZR))return r}return null}function aW(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function uW(e){var t;return A(this,void 0,void 0,function(){var n,r,i,s,a,c,l,h;return C(this,function(d){switch(d.label){case 0:return n=e.appId,r=e.apiKey,i={method:"GET",headers:aW(r)},s=G3.replace("{app-id}",n),[4,fetch(s,i)];case 1:if(a=d.sent(),!(a.status!==200&&a.status!==304))return[3,6];c="",d.label=2;case 2:return d.trys.push([2,4,,5]),[4,a.json()];case 3:return l=d.sent(),((t=l.error)===null||t===void 0?void 0:t.message)&&(c=l.error.message),[3,5];case 4:return h=d.sent(),[3,5];case 5:throw Hn.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c});case 6:return[2,a.json()]}})})}function cW(e,t,n){return t===void 0&&(t=eN),A(this,void 0,void 0,function(){var r,i,s,a,c,l,h=this;return C(this,function(d){if(r=e.options,i=r.appId,s=r.apiKey,a=r.measurementId,!i)throw Hn.create("no-app-id");if(!s){if(a)return[2,{measurementId:a,appId:i}];throw Hn.create("no-api-key")}return c=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new hW,setTimeout(function(){return A(h,void 0,void 0,function(){return C(this,function(g){return l.abort(),[2]})})},n!==void 0?n:W3),[2,tN({appId:i,apiKey:s,measurementId:a},c,l,t)]})})}function tN(e,t,n,r){var i=t.throttleEndTimeMillis,s=t.backoffCount;return r===void 0&&(r=eN),A(this,void 0,void 0,function(){var a,c,l,h,d,g,m;return C(this,function(_){switch(_.label){case 0:a=e.appId,c=e.measurementId,_.label=1;case 1:return _.trys.push([1,3,,4]),[4,lW(n,i)];case 2:return _.sent(),[3,4];case 3:if(l=_.sent(),c)return Ct.warn("Timed out fetching this Firebase app's measurement ID from the server."+(" Falling back to the measurement ID "+c)+(' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]")),[2,{appId:a,measurementId:c}];throw l;case 4:return _.trys.push([4,6,,7]),[4,uW(e)];case 5:return h=_.sent(),r.deleteThrottleMetadata(a),[2,h];case 6:if(d=_.sent(),!fW(d)){if(r.deleteThrottleMetadata(a),c)return Ct.warn("Failed to fetch this Firebase app's measurement ID from the server."+(" Falling back to the measurement ID "+c)+(' provided in the "measurementId" field in the local Firebase config. ['+d.message+"]")),[2,{appId:a,measurementId:c}];throw d}return g=Number(d.customData.httpStatus)===503?uc(s,r.intervalMillis,iW):uc(s,r.intervalMillis),m={throttleEndTimeMillis:Date.now()+g,backoffCount:s+1},r.setThrottleMetadata(a,m),Ct.debug("Calling attemptFetch again in "+g+" millis"),[2,tN(e,m,n,r)];case 7:return[2]}})})}function lW(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(function(){clearTimeout(s),r(Hn.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function fW(e){if(!(e instanceof Or)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}function pW(){return A(this,void 0,void 0,function(){var e;return C(this,function(t){switch(t.label){case 0:return ic()?[3,1]:(Ct.warn(Hn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,oc()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),Ct.warn(Hn.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}function dW(e,t,n,r,i,s){return A(this,void 0,void 0,function(){var a,c,l,h,d,g,m;return C(this,function(_){switch(_.label){case 0:return a=cW(e),a.then(function(w){n[w.measurementId]=w.appId,e.options.measurementId&&w.measurementId!==e.options.measurementId&&Ct.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+")"+(" does not match the measurement ID fetched from the server ("+w.measurementId+").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(w){return Ct.error(w)}),t.push(a),c=pW().then(function(w){if(w)return r.getId()}),[4,Promise.all([a,c])];case 1:return l=_.sent(),h=l[0],d=l[1],nW()||X3(s,h.measurementId),i("js",new Date),g=(m={},m[q3]="firebase",m.update=!0,m),d!=null&&(g[B3]=d),i(Mt.CONFIG,h.measurementId,g),[2,h.measurementId]}})})}function vW(e){if(b_)throw Hn.create("already-initialized");e.dataLayerName&&(up=e.dataLayerName),e.gtagName&&(iN=e.gtagName)}function mW(){var e=[];if(rc()&&e.push("This is a browser extension environment."),Bg()||e.push("Cookies are not available."),e.length>0){var t=e.map(function(r,i){return"("+(i+1)+") "+r}).join(" "),n=Hn.create("invalid-analytics-context",{errorInfo:t});Ct.warn(n.message)}}function gW(e,t){mW();var n=e.options.appId;if(!n)throw Hn.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)Ct.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+(" measurement ID for this Firebase app. Falling back to the measurement ID "+e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.');else throw Hn.create("no-api-key");if(ii[n]!=null)throw Hn.create("already-exists",{id:n});if(!b_){$3(up);var r=tW(ii,nN,rN,up,iN),i=r.wrappedGtag,s=r.gtagCore;Uc=i,oN=s,b_=!0}ii[n]=dW(e,nN,rN,t,oN,up);var a={app:e,logEvent:function(c,l,h){K3(Uc,ii[n],c,l,h).catch(function(d){return Ct.error(d)})},setCurrentScreen:function(c,l){H3(Uc,ii[n],c,l).catch(function(h){return Ct.error(h)})},setUserId:function(c,l){z3(Uc,ii[n],c,l).catch(function(h){return Ct.error(h)})},setUserProperties:function(c,l){Q3(Uc,ii[n],c,l).catch(function(h){return Ct.error(h)})},setAnalyticsCollectionEnabled:function(c){Y3(ii[n],c).catch(function(l){return Ct.error(l)})},INTERNAL:{delete:function(){return delete ii[n],Promise.resolve()}}};return a}function bW(e){e.INTERNAL.registerComponent(new qe(sN,function(n){var r=n.getProvider("app").getImmediate(),i=n.getProvider("installations").getImmediate();return gW(r,i)},"PUBLIC").setServiceProps({settings:vW,EventName:__,isSupported:wW})),e.INTERNAL.registerComponent(new qe("analytics-internal",t,"PRIVATE")),e.registerVersion(yW,_W);function t(n){try{var r=n.getProvider(sN).getImmediate();return{logEvent:r.logEvent}}catch(i){throw Hn.create("interop-component-reg-failed",{reason:i})}}}function wW(){return A(this,void 0,void 0,function(){var e,t;return C(this,function(n){switch(n.label){case 0:if(rc())return[2,!1];if(!Bg())return[2,!1];if(!ic())return[2,!1];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,oc()];case 2:return e=n.sent(),[2,e];case 3:return t=n.sent(),[2,!1];case 4:return[2]}})})}var B3,q3,W3,G3,ZR,Mt,__,Ct,gr,rW,Hn,iW,oW,sW,eN,hW,ii,nN,rN,up,iN,oN,Uc,b_,yW,_W,sN,aN=Le(()=>{yn();Cn();Fc();Oi();Vn();fr();B3="firebase_id",q3="origin",W3=60*1e3,G3="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ZR="https://www.googletagmanager.com/gtag/js";(function(e){e.EVENT="event",e.SET="set",e.CONFIG="config"})(Mt||(Mt={}));(function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"})(__||(__={}));Ct=new Bn("@firebase/analytics");rW=(gr={},gr["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",gr["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",gr["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",gr["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",gr["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",gr["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",gr["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",gr["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',gr["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',gr),Hn=new _n("analytics","Analytics",rW);iW=30,oW=1e3,sW=function(){function e(t,n){t===void 0&&(t={}),n===void 0&&(n=oW),this.throttleMetadata=t,this.intervalMillis=n}return e.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},e.prototype.setThrottleMetadata=function(t,n){this.throttleMetadata[t]=n},e.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},e}(),eN=new sW;hW=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(t){this.listeners.push(t)},e.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},e}();ii={},nN=[],rN={},up="dataLayer",iN="gtag",b_=!1;yW="@firebase/analytics",_W="0.6.13",sN="analytics";bW(K)});var uN={};Rr(uN);var cN=Le(()=>{aN()});var lN=Le(()=>{Cn();(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,f){o!=Array.prototype&&o!=Object.prototype&&(o[u]=f.value)};function n(o){o=[typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global,o];for(var u=0;u<o.length;++u){var f=o[u];if(f&&f.Math==Math)return f}return globalThis}var r=n(this);function i(o,u){if(u){var f=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var v=o[p];v in f||(f[v]={}),f=f[v]}o=o[o.length-1],p=f[o],u=u(p),u!=p&&u!=null&&t(f,o,{configurable:!0,writable:!0,value:u})}}function s(o){var u=0;return function(){return u<o.length?{done:!1,value:o[u++]}:{done:!0}}}function a(o){var u=typeof Symbol!="undefined"&&Symbol.iterator&&o[Symbol.iterator];return u?u.call(o):{next:s(o)}}i("Promise",function(o){function u(b){this.b=0,this.c=void 0,this.a=[];var I=this.f();try{b(I.resolve,I.reject)}catch(x){I.reject(x)}}function f(){this.a=null}function p(b){return b instanceof u?b:new u(function(I){I(b)})}if(o)return o;f.prototype.b=function(b){if(this.a==null){this.a=[];var I=this;this.c(function(){I.g()})}this.a.push(b)};var v=r.setTimeout;f.prototype.c=function(b){v(b,0)},f.prototype.g=function(){for(;this.a&&this.a.length;){var b=this.a;this.a=[];for(var I=0;I<b.length;++I){var x=b[I];b[I]=null;try{x()}catch(M){this.f(M)}}}this.a=null},f.prototype.f=function(b){this.c(function(){throw b})},u.prototype.f=function(){function b(M){return function(ie){x||(x=!0,M.call(I,ie))}}var I=this,x=!1;return{resolve:b(this.m),reject:b(this.g)}},u.prototype.m=function(b){if(b===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof u)this.s(b);else{e:switch(typeof b){case"object":var I=b!=null;break e;case"function":I=!0;break e;default:I=!1}I?this.v(b):this.h(b)}},u.prototype.v=function(b){var I=void 0;try{I=b.then}catch(x){this.g(x);return}typeof I=="function"?this.u(I,b):this.h(b)},u.prototype.g=function(b){this.i(2,b)},u.prototype.h=function(b){this.i(1,b)},u.prototype.i=function(b,I){if(this.b!=0)throw Error("Cannot settle("+b+", "+I+"): Promise already settled in state"+this.b);this.b=b,this.c=I,this.l()},u.prototype.l=function(){if(this.a!=null){for(var b=0;b<this.a.length;++b)y.b(this.a[b]);this.a=null}};var y=new f;return u.prototype.s=function(b){var I=this.f();b.Ra(I.resolve,I.reject)},u.prototype.u=function(b,I){var x=this.f();try{b.call(I,x.resolve,x.reject)}catch(M){x.reject(M)}},u.prototype.then=function(b,I){function x(Ie,_t){return typeof Ie=="function"?function(Jr){try{M(Ie(Jr))}catch(bg){ie(bg)}}:_t}var M,ie,Re=new u(function(Ie,_t){M=Ie,ie=_t});return this.Ra(x(b,M),x(I,ie)),Re},u.prototype.catch=function(b){return this.then(void 0,b)},u.prototype.Ra=function(b,I){function x(){switch(M.b){case 1:b(M.c);break;case 2:I(M.c);break;default:throw Error("Unexpected state: "+M.b)}}var M=this;this.a==null?y.b(x):this.a.push(x)},u.resolve=p,u.reject=function(b){return new u(function(I,x){x(b)})},u.race=function(b){return new u(function(I,x){for(var M=a(b),ie=M.next();!ie.done;ie=M.next())p(ie.value).Ra(I,x)})},u.all=function(b){var I=a(b),x=I.next();return x.done?p([]):new u(function(M,ie){function Re(Jr){return function(bg){Ie[Jr]=bg,_t--,_t==0&&M(Ie)}}var Ie=[],_t=0;do Ie.push(void 0),_t++,p(x.value).Ra(Re(Ie.length-1),ie),x=I.next();while(!x.done)})},u});var c=c||{},l=this||self,h=/^[\w+/_-]+[=]{0,2}$/,d=null;function g(o){return(o=o.querySelector&&o.querySelector("script[nonce]"))&&(o=o.nonce||o.getAttribute("nonce"))&&h.test(o)?o:""}function m(){}function _(o){var u=typeof o;return u!="object"?u:o?Array.isArray(o)?"array":u:"null"}function w(o){var u=_(o);return u=="array"||u=="object"&&typeof o.length=="number"}function E(o){return _(o)=="function"}function T(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function S(o){return Object.prototype.hasOwnProperty.call(o,R)&&o[R]||(o[R]=++O)}var R="closure_uid_"+(1e9*Math.random()>>>0),O=0;function U(o,u,f){return o.call.apply(o.bind,arguments)}function L(o,u,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var v=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(v,p),o.apply(u,v)}}return function(){return o.apply(u,arguments)}}function P(o,u,f){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?P=U:P=L,P.apply(null,arguments)}function ue(o,u){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}var Je=Date.now;function X(o,u){function f(){}f.prototype=u.prototype,o.bb=u.prototype,o.prototype=new f,o.prototype.constructor=o}function Jn(o){return o}function k(o,u,f){this.code=uo+o,this.message=u||fu[o]||"",this.a=f||null}X(k,Error),k.prototype.w=function(){var o={code:this.code,message:this.message};return this.a&&(o.serverResponse=this.a),o},k.prototype.toJSON=function(){return this.w()};function lu(o){var u=o&&o.code;return u?new k(u.substring(uo.length),o.message,o.serverResponse):null}var uo="auth/",fu={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},co={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function Kr(o){for(var u in co)if(co[u].id===o)return o=co[u],{firebaseEndpoint:o.Ua,secureTokenEndpoint:o.$a,identityPlatformEndpoint:o.Xa};return null}var mi;mi=Kr("__EID__")?"__EID__":void 0;function B(o){if(!o)return!1;try{return!!o.$goog_Thenable}catch(u){return!1}}function D(o){if(Error.captureStackTrace)Error.captureStackTrace(this,D);else{var u=Error().stack;u&&(this.stack=u)}o&&(this.message=String(o))}X(D,Error),D.prototype.name="CustomError";function H(o,u){o=o.split("%s");for(var f="",p=o.length-1,v=0;v<p;v++)f+=o[v]+(v<u.length?u[v]:"%s");D.call(this,f+o[p])}X(H,D),H.prototype.name="AssertionError";function te(o,u){throw new H("Failure"+(o?": "+o:""),Array.prototype.slice.call(arguments,1))}function ee(o,u){this.c=o,this.f=u,this.b=0,this.a=null}ee.prototype.get=function(){if(0<this.b){this.b--;var o=this.a;this.a=o.next,o.next=null}else o=this.c();return o};function Ke(o,u){o.f(u),100>o.b&&(o.b++,u.next=o.a,o.a=u)}function Et(){this.b=this.a=null}var It=new ee(function(){return new yt},function(o){o.reset()});Et.prototype.add=function(o,u){var f=It.get();f.set(o,u),this.b?this.b.next=f:this.a=f,this.b=f};function hn(){var o=D0,u=null;return o.a&&(u=o.a,o.a=o.a.next,o.a||(o.b=null),u.next=null),u}function yt(){this.next=this.b=this.a=null}yt.prototype.set=function(o,u){this.a=o,this.b=u,this.next=null},yt.prototype.reset=function(){this.next=this.b=this.a=null};var Is=Array.prototype.indexOf?function(o,u){return Array.prototype.indexOf.call(o,u,void 0)}:function(o,u){if(typeof o=="string")return typeof u!="string"||u.length!=1?-1:o.indexOf(u,0);for(var f=0;f<o.length;f++)if(f in o&&o[f]===u)return f;return-1},ke=Array.prototype.forEach?function(o,u,f){Array.prototype.forEach.call(o,u,f)}:function(o,u,f){for(var p=o.length,v=typeof o=="string"?o.split(""):o,y=0;y<p;y++)y in v&&u.call(f,v[y],y,o)};function Hr(o,u){for(var f=typeof o=="string"?o.split(""):o,p=o.length-1;0<=p;--p)p in f&&u.call(void 0,f[p],p,o)}var TL=Array.prototype.filter?function(o,u){return Array.prototype.filter.call(o,u,void 0)}:function(o,u){for(var f=o.length,p=[],v=0,y=typeof o=="string"?o.split(""):o,b=0;b<f;b++)if(b in y){var I=y[b];u.call(void 0,I,b,o)&&(p[v++]=I)}return p},Fl=Array.prototype.map?function(o,u){return Array.prototype.map.call(o,u,void 0)}:function(o,u){for(var f=o.length,p=Array(f),v=typeof o=="string"?o.split(""):o,y=0;y<f;y++)y in v&&(p[y]=u.call(void 0,v[y],y,o));return p},SL=Array.prototype.some?function(o,u){return Array.prototype.some.call(o,u,void 0)}:function(o,u){for(var f=o.length,p=typeof o=="string"?o.split(""):o,v=0;v<f;v++)if(v in p&&u.call(void 0,p[v],v,o))return!0;return!1};function CL(o){e:{for(var u=oF,f=o.length,p=typeof o=="string"?o.split(""):o,v=0;v<f;v++)if(v in p&&u.call(void 0,p[v],v,o)){u=v;break e}u=-1}return 0>u?null:typeof o=="string"?o.charAt(u):o[u]}function zr(o,u){return 0<=Is(o,u)}function Ul(o,u){u=Is(o,u);var f;return(f=0<=u)&&Array.prototype.splice.call(o,u,1),f}function Zn(o,u){var f=0;Hr(o,function(p,v){u.call(void 0,p,v,o)&&Array.prototype.splice.call(o,v,1).length==1&&f++})}function Gd(o){return Array.prototype.concat.apply([],arguments)}function lo(o){var u=o.length;if(0<u){for(var f=Array(u),p=0;p<u;p++)f[p]=o[p];return f}return[]}var c0=String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]},AL=/&/g,kL=/</g,RL=/>/g,NL=/"/g,OL=/'/g,xL=/\x00/g,PL=/[\x00&<>"']/;function De(o,u){return o.indexOf(u)!=-1}function Kd(o,u){return o<u?-1:o>u?1:0}var Ts;e:{var l0=l.navigator;if(l0){var f0=l0.userAgent;if(f0){Ts=f0;break e}}Ts=""}function lt(o){return De(Ts,o)}function h0(o,u){for(var f in o)u.call(void 0,o[f],f,o)}function fo(o){for(var u in o)return!1;return!0}function gi(o){var u={},f;for(f in o)u[f]=o[f];return u}var p0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pn(o,u){for(var f,p,v=1;v<arguments.length;v++){p=arguments[v];for(f in p)o[f]=p[f];for(var y=0;y<p0.length;y++)f=p0[y],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function d0(o,u){e:{try{var f=o&&o.ownerDocument,p=f&&(f.defaultView||f.parentWindow);if(p=p||l,p.Element&&p.Location){var v=p;break e}}catch(b){}v=null}if(v&&typeof v[u]!="undefined"&&(!o||!(o instanceof v[u])&&(o instanceof v.Location||o instanceof v.Element))){if(T(o))try{var y=o.constructor.displayName||o.constructor.name||Object.prototype.toString.call(o)}catch(b){y="<object could not be stringified>"}else y=o===void 0?"undefined":o===null?"null":typeof o;te("Argument is not a %s (or a non-Element, non-Location mock); got: %s",u,y)}}function wr(o,u){this.a=o===jl&&u||"",this.b=v0}wr.prototype.ta=!0,wr.prototype.sa=function(){return this.a},wr.prototype.toString=function(){return"Const{"+this.a+"}"};function Hd(o){return o instanceof wr&&o.constructor===wr&&o.b===v0?o.a:(te("expected object of type Const, got '"+o+"'"),"type_error:Const")}var v0={},jl={},Vl;function m0(){if(Vl===void 0){var o=null,u=l.trustedTypes;if(u&&u.createPolicy){try{o=u.createPolicy("goog#html",{createHTML:Jn,createScript:Jn,createScriptURL:Jn})}catch(f){l.console&&l.console.error(f.message)}Vl=o}else Vl=o}return Vl}function Ss(o,u){this.a=u===y0?o:""}Ss.prototype.ta=!0,Ss.prototype.sa=function(){return this.a.toString()},Ss.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function g0(o){return o instanceof Ss&&o.constructor===Ss?o.a:(te("expected object of type TrustedResourceUrl, got '"+o+"' of type "+_(o)),"type_error:TrustedResourceUrl")}function zd(o,u){var f=Hd(o);if(!LL.test(f))throw Error("Invalid TrustedResourceUrl format: "+f);return o=f.replace(DL,function(p,v){if(!Object.prototype.hasOwnProperty.call(u,v))throw Error('Found marker, "'+v+'", in format string, "'+f+'", but no valid label mapping found in args: '+JSON.stringify(u));return p=u[v],p instanceof wr?Hd(p):encodeURIComponent(String(p))}),ML(o)}var DL=/%{(\w+)}/g,LL=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,y0={};function ML(o){var u=m0();return o=u?u.createScriptURL(o):o,new Ss(o,y0)}function dn(o,u){this.a=u===hu?o:""}dn.prototype.ta=!0,dn.prototype.sa=function(){return this.a.toString()},dn.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function Bl(o){return o instanceof dn&&o.constructor===dn?o.a:(te("expected object of type SafeUrl, got '"+o+"' of type "+_(o)),"type_error:SafeUrl")}var FL=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,UL=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,_0=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function b0(o){if(o instanceof dn)return o;if(o=typeof o=="object"&&o.ta?o.sa():String(o),_0.test(o))o=new dn(o,hu);else{o=String(o),o=o.replace(/(%0A|%0D)/g,"");var u=o.match(UL);o=u&&FL.test(u[1])?new dn(o,hu):null}return o}function w0(o){return o instanceof dn?o:(o=typeof o=="object"&&o.ta?o.sa():String(o),_0.test(o)||(o="about:invalid#zClosurez"),new dn(o,hu))}var hu={},E0=new dn("about:invalid#zClosurez",hu);function Cs(o,u,f){this.a=f===I0?o:""}Cs.prototype.ta=!0,Cs.prototype.sa=function(){return this.a.toString()},Cs.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function jL(o){return o instanceof Cs&&o.constructor===Cs?o.a:(te("expected object of type SafeHtml, got '"+o+"' of type "+_(o)),"type_error:SafeHtml")}var I0={};function VL(o,u){d0(o,"HTMLScriptElement"),o.src=g0(u),(u=o.ownerDocument&&o.ownerDocument.defaultView)&&u!=l?u=g(u.document):(d===null&&(d=g(l.document)),u=d),u&&o.setAttribute("nonce",u)}function T0(o,u,f,p){return o=o instanceof dn?o:w0(o),u=u||l,f=f instanceof wr?Hd(f):f||"",u.open(Bl(o),f,p,void 0)}function S0(o,u){for(var f=o.split("%s"),p="",v=Array.prototype.slice.call(arguments,1);v.length&&1<f.length;)p+=f.shift()+v.shift();return p+f.join("%s")}function Qd(o){return PL.test(o)&&(o.indexOf("&")!=-1&&(o=o.replace(AL,"&amp;")),o.indexOf("<")!=-1&&(o=o.replace(kL,"&lt;")),o.indexOf(">")!=-1&&(o=o.replace(RL,"&gt;")),o.indexOf('"')!=-1&&(o=o.replace(NL,"&quot;")),o.indexOf("'")!=-1&&(o=o.replace(OL,"&#39;")),o.indexOf("\0")!=-1&&(o=o.replace(xL,"&#0;"))),o}function Yd(o){return Yd[" "](o),o}Yd[" "]=m;function BL(o,u){var f=KL;return Object.prototype.hasOwnProperty.call(f,o)?f[o]:f[o]=u(o)}var qL=lt("Opera"),er=lt("Trident")||lt("MSIE"),C0=lt("Edge"),WL=C0||er,A0=lt("Gecko")&&!(De(Ts.toLowerCase(),"webkit")&&!lt("Edge"))&&!(lt("Trident")||lt("MSIE"))&&!lt("Edge"),GL=De(Ts.toLowerCase(),"webkit")&&!lt("Edge");function k0(){var o=l.document;return o?o.documentMode:void 0}var ql;e:{var Xd="",$d=function(){var o=Ts;if(A0)return/rv:([^\);]+)(\)|;)/.exec(o);if(C0)return/Edge\/([\d\.]+)/.exec(o);if(er)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o);if(GL)return/WebKit\/(\S+)/.exec(o);if(qL)return/(?:Version)[ \/]?(\S+)/.exec(o)}();if($d&&(Xd=$d?$d[1]:""),er){var Jd=k0();if(Jd!=null&&Jd>parseFloat(Xd)){ql=String(Jd);break e}}ql=Xd}var KL={};function R0(o){return BL(o,function(){for(var u=0,f=c0(String(ql)).split("."),p=c0(String(o)).split("."),v=Math.max(f.length,p.length),y=0;u==0&&y<v;y++){var b=f[y]||"",I=p[y]||"";do{if(b=/(\d*)(\D*)(.*)/.exec(b)||["","","",""],I=/(\d*)(\D*)(.*)/.exec(I)||["","","",""],b[0].length==0&&I[0].length==0)break;u=Kd(b[1].length==0?0:parseInt(b[1],10),I[1].length==0?0:parseInt(I[1],10))||Kd(b[2].length==0,I[2].length==0)||Kd(b[2],I[2]),b=b[3],I=I[3]}while(u==0)}return 0<=u})}var Zd;if(l.document&&er){var N0=k0();Zd=N0||parseInt(ql,10)||void 0}else Zd=void 0;var yi=Zd;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(o){}var HL=!er||9<=Number(yi);function pu(o){var u=document;return typeof o=="string"?u.getElementById(o):o}function O0(o,u){h0(u,function(f,p){f&&typeof f=="object"&&f.ta&&(f=f.sa()),p=="style"?o.style.cssText=f:p=="class"?o.className=f:p=="for"?o.htmlFor=f:x0.hasOwnProperty(p)?o.setAttribute(x0[p],f):p.lastIndexOf("aria-",0)==0||p.lastIndexOf("data-",0)==0?o.setAttribute(p,f):o[p]=f})}var x0={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function zL(o,u,f){var p=arguments,v=document,y=String(p[0]),b=p[1];if(!HL&&b&&(b.name||b.type)){if(y=["<",y],b.name&&y.push(' name="',Qd(b.name),'"'),b.type){y.push(' type="',Qd(b.type),'"');var I={};pn(I,b),delete I.type,b=I}y.push(">"),y=y.join("")}return y=Wl(v,y),b&&(typeof b=="string"?y.className=b:Array.isArray(b)?y.className=b.join(" "):O0(y,b)),2<p.length&&QL(v,y,p),y}function QL(o,u,f){function p(I){I&&u.appendChild(typeof I=="string"?o.createTextNode(I):I)}for(var v=2;v<f.length;v++){var y=f[v];if(!w(y)||T(y)&&0<y.nodeType)p(y);else{e:{if(y&&typeof y.length=="number"){if(T(y)){var b=typeof y.item=="function"||typeof y.item=="string";break e}if(E(y)){b=typeof y.item=="function";break e}}b=!1}ke(b?lo(y):y,p)}}}function Wl(o,u){return u=String(u),o.contentType==="application/xhtml+xml"&&(u=u.toLowerCase()),o.createElement(u)}function P0(o){l.setTimeout(function(){throw o},0)}var ev;function YL(){var o=l.MessageChannel;if(typeof o=="undefined"&&typeof window!="undefined"&&window.postMessage&&window.addEventListener&&!lt("Presto")&&(o=function(){var v=Wl(document,"IFRAME");v.style.display="none",document.documentElement.appendChild(v);var y=v.contentWindow;v=y.document,v.open(),v.close();var b="callImmediate"+Math.random(),I=y.location.protocol=="file:"?"*":y.location.protocol+"//"+y.location.host;v=P(function(x){(I=="*"||x.origin==I)&&x.data==b&&this.port1.onmessage()},this),y.addEventListener("message",v,!1),this.port1={},this.port2={postMessage:function(){y.postMessage(b,I)}}}),typeof o!="undefined"&&!lt("Trident")&&!lt("MSIE")){var u=new o,f={},p=f;return u.port1.onmessage=function(){if(f.next!==void 0){f=f.next;var v=f.Hb;f.Hb=null,v()}},function(v){p.next={Hb:v},p=p.next,u.port2.postMessage(0)}}return function(v){l.setTimeout(v,0)}}function Gl(o,u){Kl||XL(),tv||(Kl(),tv=!0),D0.add(o,u)}var Kl;function XL(){if(l.Promise&&l.Promise.resolve){var o=l.Promise.resolve(void 0);Kl=function(){o.then(L0)}}else Kl=function(){var u=L0;!E(l.setImmediate)||l.Window&&l.Window.prototype&&!lt("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(ev||(ev=YL()),ev(u)):l.setImmediate(u)}}var tv=!1,D0=new Et;function L0(){for(var o;o=hn();){try{o.a.call(o.b)}catch(u){P0(u)}Ke(It,o)}tv=!1}function ve(o,u){if(this.a=ho,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,o!=m)try{var f=this;o.call(u,function(p){po(f,du,p)},function(p){if(!(p instanceof As))try{throw p instanceof Error?p:Error("Promise rejected.")}catch(v){}po(f,Qr,p)})}catch(p){po(this,Qr,p)}}var ho=0,du=2,Qr=3;function M0(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}M0.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var F0=new ee(function(){return new M0},function(o){o.reset()});function nv(o,u,f){var p=F0.get();return p.g=o,p.b=u,p.f=f,p}function Z(o){if(o instanceof ve)return o;var u=new ve(m);return po(u,du,o),u}function Ve(o){return new ve(function(u,f){f(o)})}function U0(o,u,f){q0(o,u,f,null)||Gl(ue(u,o))}function $L(o){return new ve(function(u,f){var p=o.length,v=[];if(p)for(var y=function(M,ie){p--,v[M]=ie,p==0&&u(v)},b=function(M){f(M)},I=0,x;I<o.length;I++)x=o[I],U0(x,ue(y,I),b);else u(v)})}function j0(o){return new ve(function(u){var f=o.length,p=[];if(f)for(var v=function(I,x,M){f--,p[I]=x?{Qb:!0,value:M}:{Qb:!1,reason:M},f==0&&u(p)},y=0,b;y<o.length;y++)b=o[y],U0(b,ue(v,y,!0),ue(v,y,!1));else u(p)})}ve.prototype.then=function(o,u,f){return B0(this,E(o)?o:null,E(u)?u:null,f)},ve.prototype.$goog_Thenable=!0,e=ve.prototype,e.oa=function(o,u){return o=nv(o,o,u),o.c=!0,rv(this,o),this},e.o=function(o,u){return B0(this,null,o,u)},e.cancel=function(o){if(this.a==ho){var u=new As(o);Gl(function(){V0(this,u)},this)}};function V0(o,u){if(o.a==ho)if(o.c){var f=o.c;if(f.b){for(var p=0,v=null,y=null,b=f.b;b&&(b.c||(p++,b.a==o&&(v=b),!(v&&1<p)));b=b.next)v||(y=b);v&&(f.a==ho&&p==1?V0(f,u):(y?(p=y,p.next==f.f&&(f.f=p),p.next=p.next.next):G0(f),K0(f,v,Qr,u)))}o.c=null}else po(o,Qr,u)}function rv(o,u){o.b||o.a!=du&&o.a!=Qr||W0(o),o.f?o.f.next=u:o.b=u,o.f=u}function B0(o,u,f,p){var v=nv(null,null,null);return v.a=new ve(function(y,b){v.g=u?function(I){try{var x=u.call(p,I);y(x)}catch(M){b(M)}}:y,v.b=f?function(I){try{var x=f.call(p,I);x===void 0&&I instanceof As?b(I):y(x)}catch(M){b(M)}}:b}),v.a.c=o,rv(o,v),v.a}e.$c=function(o){this.a=ho,po(this,du,o)},e.ad=function(o){this.a=ho,po(this,Qr,o)};function po(o,u,f){o.a==ho&&(o===f&&(u=Qr,f=new TypeError("Promise cannot resolve to itself")),o.a=1,q0(f,o.$c,o.ad,o)||(o.i=f,o.a=u,o.c=null,W0(o),u!=Qr||f instanceof As||ZL(o,f)))}function q0(o,u,f,p){if(o instanceof ve)return rv(o,nv(u||m,f||null,p)),!0;if(B(o))return o.then(u,f,p),!0;if(T(o))try{var v=o.then;if(E(v))return JL(o,v,u,f,p),!0}catch(y){return f.call(p,y),!0}return!1}function JL(o,u,f,p,v){function y(x){I||(I=!0,p.call(v,x))}function b(x){I||(I=!0,f.call(v,x))}var I=!1;try{u.call(o,b,y)}catch(x){y(x)}}function W0(o){o.h||(o.h=!0,Gl(o.gc,o))}function G0(o){var u=null;return o.b&&(u=o.b,o.b=u.next,u.next=null),o.b||(o.f=null),u}e.gc=function(){for(var o;o=G0(this);)K0(this,o,this.a,this.i);this.h=!1};function K0(o,u,f,p){if(f==Qr&&u.b&&!u.c)for(;o&&o.g;o=o.c)o.g=!1;if(u.a)u.a.c=null,H0(u,f,p);else try{u.c?u.g.call(u.f):H0(u,f,p)}catch(v){z0.call(null,v)}Ke(F0,u)}function H0(o,u,f){u==du?o.g.call(o.f,f):o.b&&o.b.call(o.f,f)}function ZL(o,u){o.g=!0,Gl(function(){o.g&&z0.call(null,u)})}var z0=P0;function As(o){D.call(this,o)}X(As,D),As.prototype.name="cancel";function Hl(){iv!=0&&(Q0[S(this)]=this),this.ya=this.ya,this.pa=this.pa}var iv=0,Q0={};Hl.prototype.ya=!1;function Y0(o){if(!o.ya&&(o.ya=!0,o.Da(),iv!=0)){var u=S(o);if(iv!=0&&o.pa&&0<o.pa.length)throw Error(o+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Q0[u]}}Hl.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var eM=Object.freeze||function(o){return o},X0=!er||9<=Number(yi),tM=er&&!R0("9"),nM=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{l.addEventListener("test",m,u),l.removeEventListener("test",m,u)}catch(f){}return o}();function vn(o,u){this.type=o,this.b=this.target=u,this.defaultPrevented=!1}vn.prototype.preventDefault=function(){this.defaultPrevented=!0};function vo(o,u){if(vn.call(this,o?o.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.b=u,u=o.relatedTarget){if(A0){e:{try{Yd(u.nodeName);var v=!0;break e}catch(y){}v=!1}v||(u=null)}}else f=="mouseover"?u=o.fromElement:f=="mouseout"&&(u=o.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:rM[o.pointerType]||"",this.a=o,o.defaultPrevented&&this.preventDefault()}}X(vo,vn);var rM=eM({2:"touch",3:"pen",4:"mouse"});vo.prototype.preventDefault=function(){vo.bb.preventDefault.call(this);var o=this.a;if(o.preventDefault)o.preventDefault();else if(o.returnValue=!1,tM)try{(o.ctrlKey||112<=o.keyCode&&123>=o.keyCode)&&(o.keyCode=-1)}catch(u){}},vo.prototype.g=function(){return this.a};var vu="closure_listenable_"+(1e6*Math.random()|0),iM=0;function oM(o,u,f,p,v){this.listener=o,this.proxy=null,this.src=u,this.type=f,this.capture=!!p,this.Wa=v,this.key=++iM,this.wa=this.Qa=!1}function zl(o){o.wa=!0,o.listener=null,o.proxy=null,o.src=null,o.Wa=null}function Ql(o){this.src=o,this.a={},this.b=0}Ql.prototype.add=function(o,u,f,p,v){var y=o.toString();o=this.a[y],o||(o=this.a[y]=[],this.b++);var b=sv(o,u,p,v);return-1<b?(u=o[b],f||(u.Qa=!1)):(u=new oM(u,this.src,y,!!p,v),u.Qa=f,o.push(u)),u};function ov(o,u){var f=u.type;f in o.a&&Ul(o.a[f],u)&&(zl(u),o.a[f].length==0&&(delete o.a[f],o.b--))}function sv(o,u,f,p){for(var v=0;v<o.length;++v){var y=o[v];if(!y.wa&&y.listener==u&&y.capture==!!f&&y.Wa==p)return v}return-1}var av="closure_lm_"+(1e6*Math.random()|0),uv={},$0=0;function Ln(o,u,f,p,v){if(p&&p.once)cv(o,u,f,p,v);else if(Array.isArray(u))for(var y=0;y<u.length;y++)Ln(o,u[y],f,p,v);else f=fv(f),o&&o[vu]?rE(o,u,f,T(p)?!!p.capture:!!p,v):J0(o,u,f,!1,p,v)}function J0(o,u,f,p,v,y){if(!u)throw Error("Invalid event type");var b=T(v)?!!v.capture:!!v,I=Yl(o);if(I||(o[av]=I=new Ql(o)),f=I.add(u,f,p,b,y),!f.proxy){if(p=sM(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)nM||(v=b),v===void 0&&(v=!1),o.addEventListener(u.toString(),p,v);else if(o.attachEvent)o.attachEvent(eE(u.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");$0++}}function sM(){var o=aM,u=X0?function(f){return o.call(u.src,u.listener,f)}:function(f){if(f=o.call(u.src,u.listener,f),!f)return f};return u}function cv(o,u,f,p,v){if(Array.isArray(u))for(var y=0;y<u.length;y++)cv(o,u[y],f,p,v);else f=fv(f),o&&o[vu]?hv(o,u,f,T(p)?!!p.capture:!!p,v):J0(o,u,f,!0,p,v)}function In(o,u,f,p,v){if(Array.isArray(u))for(var y=0;y<u.length;y++)In(o,u[y],f,p,v);else p=T(p)?!!p.capture:!!p,f=fv(f),o&&o[vu]?(o=o.v,u=String(u).toString(),u in o.a&&(y=o.a[u],f=sv(y,f,p,v),-1<f&&(zl(y[f]),Array.prototype.splice.call(y,f,1),y.length==0&&(delete o.a[u],o.b--)))):o&&(o=Yl(o))&&(u=o.a[u.toString()],o=-1,u&&(o=sv(u,f,p,v)),(f=-1<o?u[o]:null)&&Z0(f))}function Z0(o){if(typeof o!="number"&&o&&!o.wa){var u=o.src;if(u&&u[vu])ov(u.v,o);else{var f=o.type,p=o.proxy;u.removeEventListener?u.removeEventListener(f,p,o.capture):u.detachEvent?u.detachEvent(eE(f),p):u.addListener&&u.removeListener&&u.removeListener(p),$0--,(f=Yl(u))?(ov(f,o),f.b==0&&(f.src=null,u[av]=null)):zl(o)}}}function eE(o){return o in uv?uv[o]:uv[o]="on"+o}function tE(o,u,f,p){var v=!0;if((o=Yl(o))&&(u=o.a[u.toString()]))for(u=u.concat(),o=0;o<u.length;o++){var y=u[o];y&&y.capture==f&&!y.wa&&(y=nE(y,p),v=v&&y!==!1)}return v}function nE(o,u){var f=o.listener,p=o.Wa||o.src;return o.Qa&&Z0(o),f.call(p,u)}function aM(o,u){if(o.wa)return!0;if(!X0){if(!u)e:{u=["window","event"];for(var f=l,p=0;p<u.length;p++)if(f=f[u[p]],f==null){u=null;break e}u=f}if(p=u,u=new vo(p,this),f=!0,!(0>p.keyCode||p.returnValue!=null)){e:{var v=!1;if(p.keyCode==0)try{p.keyCode=-1;break e}catch(b){v=!0}(v||p.returnValue==null)&&(p.returnValue=!0)}for(p=[],v=u.b;v;v=v.parentNode)p.push(v);for(o=o.type,v=p.length-1;0<=v;v--){u.b=p[v];var y=tE(p[v],o,!0,u);f=f&&y}for(v=0;v<p.length;v++)u.b=p[v],y=tE(p[v],o,!1,u),f=f&&y}return f}return nE(o,new vo(u,this))}function Yl(o){return o=o[av],o instanceof Ql?o:null}var lv="__closure_events_fn_"+(1e9*Math.random()>>>0);function fv(o){return E(o)?o:(o[lv]||(o[lv]=function(u){return o.handleEvent(u)}),o[lv])}function Ht(){Hl.call(this),this.v=new Ql(this),this.bc=this,this.hb=null}X(Ht,Hl),Ht.prototype[vu]=!0,Ht.prototype.addEventListener=function(o,u,f,p){Ln(this,o,u,f,p)},Ht.prototype.removeEventListener=function(o,u,f,p){In(this,o,u,f,p)},Ht.prototype.dispatchEvent=function(o){var u,f=this.hb;if(f)for(u=[];f;f=f.hb)u.push(f);f=this.bc;var p=o.type||o;if(typeof o=="string")o=new vn(o,f);else if(o instanceof vn)o.target=o.target||f;else{var v=o;o=new vn(p,f),pn(o,v)}if(v=!0,u)for(var y=u.length-1;0<=y;y--){var b=o.b=u[y];v=Xl(b,p,!0,o)&&v}if(b=o.b=f,v=Xl(b,p,!0,o)&&v,v=Xl(b,p,!1,o)&&v,u)for(y=0;y<u.length;y++)b=o.b=u[y],v=Xl(b,p,!1,o)&&v;return v},Ht.prototype.Da=function(){if(Ht.bb.Da.call(this),this.v){var o=this.v,u=0,f;for(f in o.a){for(var p=o.a[f],v=0;v<p.length;v++)++u,zl(p[v]);delete o.a[f],o.b--}}this.hb=null};function rE(o,u,f,p,v){o.v.add(String(u),f,!1,p,v)}function hv(o,u,f,p,v){o.v.add(String(u),f,!0,p,v)}function Xl(o,u,f,p){if(u=o.v.a[String(u)],!u)return!0;u=u.concat();for(var v=!0,y=0;y<u.length;++y){var b=u[y];if(b&&!b.wa&&b.capture==f){var I=b.listener,x=b.Wa||b.src;b.Qa&&ov(o.v,b),v=I.call(x,p)!==!1&&v}}return v&&!p.defaultPrevented}function pv(o,u,f){if(E(o))f&&(o=P(o,f));else if(o&&typeof o.handleEvent=="function")o=P(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function ks(o){var u=null;return new ve(function(f,p){u=pv(function(){f(void 0)},o),u==-1&&p(Error("Failed to schedule timer."))}).o(function(f){throw l.clearTimeout(u),f})}function iE(o){if(o.X&&typeof o.X=="function")return o.X();if(typeof o=="string")return o.split("");if(w(o)){for(var u=[],f=o.length,p=0;p<f;p++)u.push(o[p]);return u}u=[],f=0;for(p in o)u[f++]=o[p];return u}function oE(o){if(o.Y&&typeof o.Y=="function")return o.Y();if(!o.X||typeof o.X!="function"){if(w(o)||typeof o=="string"){var u=[];o=o.length;for(var f=0;f<o;f++)u.push(f);return u}u=[],f=0;for(var p in o)u[f++]=p;return u}}function uM(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(w(o)||typeof o=="string")ke(o,u,void 0);else for(var f=oE(o),p=iE(o),v=p.length,y=0;y<v;y++)u.call(void 0,p[y],f&&f[y],o)}function Rs(o,u){this.b={},this.a=[],this.c=0;var f=arguments.length;if(1<f){if(f%2)throw Error("Uneven number of arguments");for(var p=0;p<f;p+=2)this.set(arguments[p],arguments[p+1])}else if(o)if(o instanceof Rs)for(f=o.Y(),p=0;p<f.length;p++)this.set(f[p],o.get(f[p]));else for(p in o)this.set(p,o[p])}e=Rs.prototype,e.X=function(){dv(this);for(var o=[],u=0;u<this.a.length;u++)o.push(this.b[this.a[u]]);return o},e.Y=function(){return dv(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0};function dv(o){if(o.c!=o.a.length){for(var u=0,f=0;u<o.a.length;){var p=o.a[u];mo(o.b,p)&&(o.a[f++]=p),u++}o.a.length=f}if(o.c!=o.a.length){var v={};for(f=u=0;u<o.a.length;)p=o.a[u],mo(v,p)||(o.a[f++]=p,v[p]=1),u++;o.a.length=f}}e.get=function(o,u){return mo(this.b,o)?this.b[o]:u},e.set=function(o,u){mo(this.b,o)||(this.c++,this.a.push(o)),this.b[o]=u},e.forEach=function(o,u){for(var f=this.Y(),p=0;p<f.length;p++){var v=f[p],y=this.get(v);o.call(u,y,v,this)}};function mo(o,u){return Object.prototype.hasOwnProperty.call(o,u)}var sE=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function cM(o,u){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),v=null;if(0<=p){var y=o[f].substring(0,p);v=o[f].substring(p+1)}else y=o[f];u(y,v?decodeURIComponent(v.replace(/\+/g," ")):"")}}}function _i(o,u){this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1;var f;o instanceof _i?(this.i=u!==void 0?u:o.i,mu(this,o.c),this.l=o.l,this.a=o.a,gu(this,o.g),this.f=o.f,vv(this,lE(o.b)),this.h=o.h):o&&(f=String(o).match(sE))?(this.i=!!u,mu(this,f[1]||"",!0),this.l=yu(f[2]||""),this.a=yu(f[3]||"",!0),gu(this,f[4]),this.f=yu(f[5]||"",!0),vv(this,f[6]||"",!0),this.h=yu(f[7]||"")):(this.i=!!u,this.b=new go(null,this.i))}_i.prototype.toString=function(){var o=[],u=this.c;u&&o.push(_u(u,aE,!0),":");var f=this.a;return(f||u=="file")&&(o.push("//"),(u=this.l)&&o.push(_u(u,aE,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.g,f!=null&&o.push(":",String(f))),(f=this.f)&&(this.a&&f.charAt(0)!="/"&&o.push("/"),o.push(_u(f,f.charAt(0)=="/"?hM:fM,!0))),(f=this.b.toString())&&o.push("?",f),(f=this.h)&&o.push("#",_u(f,dM)),o.join("")},_i.prototype.resolve=function(o){var u=new _i(this),f=!!o.c;f?mu(u,o.c):f=!!o.l,f?u.l=o.l:f=!!o.a,f?u.a=o.a:f=o.g!=null;var p=o.f;if(f)gu(u,o.g);else if(f=!!o.f){if(p.charAt(0)!="/")if(this.a&&!this.f)p="/"+p;else{var v=u.f.lastIndexOf("/");v!=-1&&(p=u.f.substr(0,v+1)+p)}if(v=p,v==".."||v==".")p="";else if(De(v,"./")||De(v,"/.")){p=v.lastIndexOf("/",0)==0,v=v.split("/");for(var y=[],b=0;b<v.length;){var I=v[b++];I=="."?p&&b==v.length&&y.push(""):I==".."?((1<y.length||y.length==1&&y[0]!="")&&y.pop(),p&&b==v.length&&y.push("")):(y.push(I),p=!0)}p=y.join("/")}else p=v}return f?u.f=p:f=o.b.toString()!=="",f?vv(u,lE(o.b)):f=!!o.h,f&&(u.h=o.h),u};function mu(o,u,f){o.c=f?yu(u,!0):u,o.c&&(o.c=o.c.replace(/:$/,""))}function gu(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.g=u}else o.g=null}function vv(o,u,f){u instanceof go?(o.b=u,vM(o.b,o.i)):(f||(u=_u(u,pM)),o.b=new go(u,o.i))}function Ze(o,u,f){o.b.set(u,f)}function Mn(o,u){return o.b.get(u)}function mn(o){return o instanceof _i?new _i(o):new _i(o,void 0)}function $l(o,u,f,p){var v=new _i(null,void 0);return o&&mu(v,o),u&&(v.a=u),f&&gu(v,f),p&&(v.f=p),v}function yu(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function _u(o,u,f){return typeof o=="string"?(o=encodeURI(o).replace(u,lM),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function lM(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var aE=/[#\/\?@]/g,fM=/[#\?:]/g,hM=/[#\?]/g,pM=/[#\?@]/g,dM=/#/g;function go(o,u){this.b=this.a=null,this.c=o||null,this.f=!!u}function bi(o){o.a||(o.a=new Rs,o.b=0,o.c&&cM(o.c,function(u,f){o.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}function uE(o){var u=oE(o);if(typeof u=="undefined")throw Error("Keys are undefined");var f=new go(null,void 0);o=iE(o);for(var p=0;p<u.length;p++){var v=u[p],y=o[p];Array.isArray(y)?cE(f,v,y):f.add(v,y)}return f}e=go.prototype,e.add=function(o,u){bi(this),this.c=null,o=Ns(this,o);var f=this.a.get(o);return f||this.a.set(o,f=[]),f.push(u),this.b+=1,this};function Er(o,u){bi(o),u=Ns(o,u),mo(o.a.b,u)&&(o.c=null,o.b-=o.a.get(u).length,o=o.a,mo(o.b,u)&&(delete o.b[u],o.c--,o.a.length>2*o.c&&dv(o)))}e.clear=function(){this.a=this.c=null,this.b=0};function mv(o,u){return bi(o),u=Ns(o,u),mo(o.a.b,u)}e.forEach=function(o,u){bi(this),this.a.forEach(function(f,p){ke(f,function(v){o.call(u,v,p,this)},this)},this)},e.Y=function(){bi(this);for(var o=this.a.X(),u=this.a.Y(),f=[],p=0;p<u.length;p++)for(var v=o[p],y=0;y<v.length;y++)f.push(u[p]);return f},e.X=function(o){bi(this);var u=[];if(typeof o=="string")mv(this,o)&&(u=Gd(u,this.a.get(Ns(this,o))));else{o=this.a.X();for(var f=0;f<o.length;f++)u=Gd(u,o[f])}return u},e.set=function(o,u){return bi(this),this.c=null,o=Ns(this,o),mv(this,o)&&(this.b-=this.a.get(o).length),this.a.set(o,[u]),this.b+=1,this},e.get=function(o,u){return o?(o=this.X(o),0<o.length?String(o[0]):u):u};function cE(o,u,f){Er(o,u),0<f.length&&(o.c=null,o.a.set(Ns(o,u),lo(f)),o.b+=f.length)}e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var o=[],u=this.a.Y(),f=0;f<u.length;f++){var p=u[f],v=encodeURIComponent(String(p));p=this.X(p);for(var y=0;y<p.length;y++){var b=v;p[y]!==""&&(b+="="+encodeURIComponent(String(p[y]))),o.push(b)}}return this.c=o.join("&")};function lE(o){var u=new go;return u.c=o.c,o.a&&(u.a=new Rs(o.a),u.b=o.b),u}function Ns(o,u){return u=String(u),o.f&&(u=u.toLowerCase()),u}function vM(o,u){u&&!o.f&&(bi(o),o.c=null,o.a.forEach(function(f,p){var v=p.toLowerCase();p!=v&&(Er(this,p),cE(this,v,f))},o)),o.f=u}function fE(o){var u=[];return gv(new mM,o,u),u.join("")}function mM(){}function gv(o,u,f){if(u==null)f.push("null");else{if(typeof u=="object"){if(Array.isArray(u)){var p=u;u=p.length,f.push("[");for(var v="",y=0;y<u;y++)f.push(v),gv(o,p[y],f),v=",";f.push("]");return}if(u instanceof String||u instanceof Number||u instanceof Boolean)u=u.valueOf();else{f.push("{"),v="";for(p in u)Object.prototype.hasOwnProperty.call(u,p)&&(y=u[p],typeof y!="function"&&(f.push(v),pE(p,f),f.push(":"),gv(o,y,f),v=","));f.push("}");return}}switch(typeof u){case"string":pE(u,f);break;case"number":f.push(isFinite(u)&&!isNaN(u)?String(u):"null");break;case"boolean":f.push(String(u));break;case"function":f.push("null");break;default:throw Error("Unknown type: "+typeof u)}}}var hE={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},gM=/\uffff/.test("\uFFFF")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function pE(o,u){u.push('"',o.replace(gM,function(f){var p=hE[f];return p||(p="\\u"+(f.charCodeAt(0)|65536).toString(16).substr(1),hE[f]=p),p}),'"')}function yv(){var o=Tt();return er&&!!yi&&yi==11||/Edge\/\d+/.test(o)}function bu(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function dE(o,u){u=u||l.window;var f="about:blank";o&&(f=Bl(b0(o)||E0)),u.location.href=f}function vE(o,u){var f=[],p;for(p in o)p in u?typeof o[p]!=typeof u[p]?f.push(p):typeof o[p]=="object"&&o[p]!=null&&u[p]!=null?0<vE(o[p],u[p]).length&&f.push(p):o[p]!==u[p]&&f.push(p):f.push(p);for(p in u)p in o||f.push(p);return f}function yM(){var o=Tt();return o=Os(o)!=_E?null:(o=o.match(/\sChrome\/(\d+)/i))&&o.length==2?parseInt(o[1],10):null,o&&30>o?!1:!er||!yi||9<yi}function mE(o){return o=(o||Tt()).toLowerCase(),!!(o.match(/android/)||o.match(/webos/)||o.match(/iphone|ipad|ipod/)||o.match(/blackberry/)||o.match(/windows phone/)||o.match(/iemobile/))}function yo(o){o=o||l.window;try{o.close()}catch(u){}}function gE(o,u,f){var p=Math.floor(1e9*Math.random()).toString();u=u||500,f=f||600;var v=(window.screen.availHeight-f)/2,y=(window.screen.availWidth-u)/2;u={width:u,height:f,top:0<v?v:0,left:0<y?y:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},f=Tt().toLowerCase(),p&&(u.target=p,De(f,"crios/")&&(u.target="_blank")),Os(Tt())==wv&&(o=o||"http://localhost",u.scrollbars=!0),f=o||"",(o=u)||(o={}),p=window,u=f instanceof dn?f:b0(typeof f.href!="undefined"?f.href:String(f))||E0,f=o.target||f.target,v=[];for(b in o)switch(b){case"width":case"height":case"top":case"left":v.push(b+"="+o[b]);break;case"target":case"noopener":case"noreferrer":break;default:v.push(b+"="+(o[b]?1:0))}var b=v.join(",");if((lt("iPhone")&&!lt("iPod")&&!lt("iPad")||lt("iPad")||lt("iPod"))&&p.navigator&&p.navigator.standalone&&f&&f!="_self"?(b=Wl(document,"A"),d0(b,"HTMLAnchorElement"),u=u instanceof dn?u:w0(u),b.href=Bl(u),b.setAttribute("target",f),o.noreferrer&&b.setAttribute("rel","noreferrer"),o=document.createEvent("MouseEvent"),o.initMouseEvent("click",!0,!0,p,1),b.dispatchEvent(o),b={}):o.noreferrer?(b=T0("",p,f,b),o=Bl(u),b&&(WL&&De(o,";")&&(o="'"+o.replace(/'/g,"%27")+"'"),b.opener=null,o='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Qd(o)+'">',o=(p=m0())?p.createHTML(o):o,o=new Cs(o,null,I0),p=b.document)&&(p.write(jL(o)),p.close())):(b=T0(u,p,f,b))&&o.noopener&&(b.opener=null),b)try{b.focus()}catch(I){}return b}function _M(o){return new ve(function(u){function f(){ks(2e3).then(function(){if(!o||o.closed)u();else return f()})}return f()})}var bM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wM=/^[^@]+@[^@]+$/;function Jl(){var o=null;return new ve(function(u){l.document.readyState=="complete"?u():(o=function(){u()},cv(window,"load",o))}).o(function(u){throw In(window,"load",o),u})}function EM(){return _v(void 0)?Jl().then(function(){return new ve(function(o,u){var f=l.document,p=setTimeout(function(){u(Error("Cordova framework is not ready."))},1e3);f.addEventListener("deviceready",function(){clearTimeout(p),o()},!1)})}):Ve(Error("Cordova must run in an Android or iOS file scheme."))}function _v(o){return o=o||Tt(),!(Ps()!=="file:"&&Ps()!=="ionic:"||!o.toLowerCase().match(/iphone|ipad|ipod|android/))}function bv(){var o=l.window;try{return!(!o||o==o.top)}catch(u){return!1}}function tr(){return typeof l.WorkerGlobalScope!="undefined"&&typeof l.importScripts=="function"}function Ir(){return K.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":K.INTERNAL.hasOwnProperty("node")?"Node":tr()?"Worker":"Browser"}function yE(){var o=Ir();return o==="ReactNative"||o==="Node"}function IM(){for(var o=50,u=[];0<o;)u.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),o--;return u.join("")}var wv="Firefox",_E="Chrome";function Os(o){var u=o.toLowerCase();if(De(u,"opera/")||De(u,"opr/")||De(u,"opios/"))return"Opera";if(De(u,"iemobile"))return"IEMobile";if(De(u,"msie")||De(u,"trident/"))return"IE";if(De(u,"edge/"))return"Edge";if(De(u,"firefox/"))return wv;if(De(u,"silk/"))return"Silk";if(De(u,"blackberry"))return"Blackberry";if(De(u,"webos"))return"Webos";if(!De(u,"safari/")||De(u,"chrome/")||De(u,"crios/")||De(u,"android"))if(!De(u,"chrome/")&&!De(u,"crios/")||De(u,"edge/")){if(De(u,"android"))return"Android";if((o=o.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&o.length==2)return o[1]}else return _E;else return"Safari";return"Other"}var bE={md:"FirebaseCore-web",od:"FirebaseUI-web"};function xs(o,u){u=u||[];var f=[],p={},v;for(v in bE)p[bE[v]]=!0;for(v=0;v<u.length;v++)typeof p[u[v]]!="undefined"&&(delete p[u[v]],f.push(u[v]));return f.sort(),u=f,u.length||(u=["FirebaseCore-web"]),f=Ir(),f==="Browser"?(p=Tt(),f=Os(p)):f==="Worker"&&(p=Tt(),f=Os(p)+"-"+f),f+"/JsCore/"+o+"/"+u.join(",")}function Tt(){return l.navigator&&l.navigator.userAgent||""}function Be(o,u){o=o.split("."),u=u||l;for(var f=0;f<o.length&&typeof u=="object"&&u!=null;f++)u=u[o[f]];return f!=o.length&&(u=void 0),u}function Ev(){try{var o=l.localStorage,u=bo();if(o)return o.setItem(u,"1"),o.removeItem(u),yv()?!!l.indexedDB:!0}catch(f){return tr()&&!!l.indexedDB}return!1}function _o(){return(Zl()||Ps()==="chrome-extension:"||_v())&&!yE()&&Ev()&&!tr()}function Zl(){return Ps()==="http:"||Ps()==="https:"}function Ps(){return l.location&&l.location.protocol||null}function wu(o){return o=o||Tt(),!(mE(o)||Os(o)==wv)}function Eu(o){return typeof o=="undefined"?null:fE(o)}function wE(o){var u={},f;for(f in o)o.hasOwnProperty(f)&&o[f]!==null&&o[f]!==void 0&&(u[f]=o[f]);return u}function Ds(o){if(o!==null)return JSON.parse(o)}function bo(o){return o||Math.floor(1e9*Math.random()).toString()}function EE(o){return o=o||Tt(),!(Os(o)=="Safari"||o.toLowerCase().match(/iphone|ipad|ipod/))}function IE(){var o=l.___jsl;if(o&&o.H){for(var u in o.H)if(o.H[u].r=o.H[u].r||[],o.H[u].L=o.H[u].L||[],o.H[u].r=o.H[u].L.concat(),o.CP)for(var f=0;f<o.CP.length;f++)o.CP[f]=null}}function wi(o,u){if(o>u)throw Error("Short delay should be less than long delay!");this.a=o,this.c=u,o=Tt(),u=Ir(),this.b=mE(o)||u==="ReactNative"}wi.prototype.get=function(){var o=l.navigator;return(o&&typeof o.onLine=="boolean"&&(Zl()||Ps()==="chrome-extension:"||typeof o.connection!="undefined")?o.onLine:1)?this.b?this.c:this.a:Math.min(5e3,this.a)};function Iv(){var o=l.document;return o&&typeof o.visibilityState!="undefined"?o.visibilityState=="visible":!0}function TM(){var o=l.document,u=null;return Iv()||!o?Z():new ve(function(f){u=function(){Iv()&&(o.removeEventListener("visibilitychange",u,!1),f())},o.addEventListener("visibilitychange",u,!1)}).o(function(f){throw o.removeEventListener("visibilitychange",u,!1),f})}function Iu(o){try{var u=new Date(parseInt(o,10));if(!isNaN(u.getTime())&&!/[^0-9]/.test(o))return u.toUTCString()}catch(f){}return null}function TE(){return!(!Be("fireauth.oauthhelper",l)&&!Be("fireauth.iframe",l))}function SM(){var o=l.navigator;return o&&o.serviceWorker&&o.serviceWorker.controller||null}function CM(){var o=l.navigator;return o&&o.serviceWorker?Z().then(function(){return o.serviceWorker.ready}).then(function(u){return u.active||null}).o(function(){return null}):Z(null)}var SE={};function Tv(o){SE[o]||(SE[o]=!0,typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(o))}var Sv;try{var Cv={};Object.defineProperty(Cv,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Cv,"abcd",{configurable:!0,enumerable:!0,value:2}),Sv=Cv.abcd==2}catch(o){Sv=!1}function Y(o,u,f){Sv?Object.defineProperty(o,u,{configurable:!0,enumerable:!0,value:f}):o[u]=f}function zt(o,u){if(u)for(var f in u)u.hasOwnProperty(f)&&Y(o,f,u[f])}function Tr(o){var u={};return zt(u,o),u}function AM(o){var u={},f;for(f in o)o.hasOwnProperty(f)&&(u[f]=o[f]);return u}function kM(o,u){if(!u||!u.length)return!0;if(!o)return!1;for(var f=0;f<u.length;f++){var p=o[u[f]];if(p==null||p==="")return!1}return!0}function Av(o){var u=o;if(typeof o=="object"&&o!=null){u="length"in o?[]:{};for(var f in o)Y(u,f,Av(o[f]))}return u}function kv(o){var u=o&&(o[xv]?"phone":null);if(u&&o&&o[Ov]){Y(this,"uid",o[Ov]),Y(this,"displayName",o[CE]||null);var f=null;o[Nv]&&(f=new Date(o[Nv]).toUTCString()),Y(this,"enrollmentTime",f),Y(this,"factorId",u)}else throw new k("internal-error","Internal assert: invalid MultiFactorInfo object")}kv.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};function Rv(o){try{var u=new Tu(o)}catch(f){u=null}return u}var CE="displayName",Nv="enrolledAt",Ov="mfaEnrollmentId",xv="phoneInfo";function Tu(o){kv.call(this,o),Y(this,"phoneNumber",o[xv])}X(Tu,kv),Tu.prototype.w=function(){var o=Tu.bb.w.call(this);return o.phoneNumber=this.phoneNumber,o};function RM(o){var u={},f=o[NM],p=o[xM],v=o[PM];if(o=Rv(o[OM]),!v||v!=ef&&v!=Su&&!f||v==Su&&!p||v==Pv&&!o)throw Error("Invalid checkActionCode response!");v==Su?(u[kE]=f||null,u[RE]=f||null,u[AE]=p):(u[kE]=p||null,u[RE]=p||null,u[AE]=f||null),u[DM]=o||null,Y(this,MM,v),Y(this,LM,Av(u))}var Pv="REVERT_SECOND_FACTOR_ADDITION",ef="EMAIL_SIGNIN",Su="VERIFY_AND_CHANGE_EMAIL",NM="email",OM="mfaInfo",xM="newEmail",PM="requestType",AE="email",kE="fromEmail",DM="multiFactorInfo",RE="previousEmail",LM="data",MM="operation";function Dv(o){o=mn(o);var u=Mn(o,NE)||null,f=Mn(o,OE)||null,p=Mn(o,xE)||null;if(p=p&&VM[p]||null,!u||!f||!p)throw new k("argument-error",NE+", "+OE+"and "+xE+" are required in a valid action code URL.");zt(this,{apiKey:u,operation:p,code:f,continueUrl:Mn(o,FM)||null,languageCode:Mn(o,UM)||null,tenantId:Mn(o,jM)||null})}var NE="apiKey",OE="oobCode",FM="continueUrl",UM="languageCode",xE="mode",jM="tenantId",VM={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Pv,signIn:ef,verifyAndChangeEmail:Su,verifyEmail:"VERIFY_EMAIL"};function PE(o){try{return new Dv(o)}catch(u){return null}}function tf(o){var u=o[BM];if(typeof u=="undefined")throw new k("missing-continue-uri");if(typeof u!="string"||typeof u=="string"&&!u.length)throw new k("invalid-continue-uri");this.h=u,this.b=this.a=null,this.g=!1;var f=o[DE];if(f&&typeof f=="object"){u=f[jE];var p=f[FE];if(f=f[UE],typeof u=="string"&&u.length){if(this.a=u,typeof p!="undefined"&&typeof p!="boolean")throw new k("argument-error",FE+" property must be a boolean when specified.");if(this.g=!!p,typeof f!="undefined"&&(typeof f!="string"||typeof f=="string"&&!f.length))throw new k("argument-error",UE+" property must be a non empty string when specified.");this.b=f||null}else{if(typeof u!="undefined")throw new k("argument-error",jE+" property must be a non empty string when specified.");if(typeof p!="undefined"||typeof f!="undefined")throw new k("missing-android-pkg-name")}}else if(typeof f!="undefined")throw new k("argument-error",DE+" property must be a non null object when specified.");if(this.f=null,(u=o[ME])&&typeof u=="object"){if(u=u[VE],typeof u=="string"&&u.length)this.f=u;else if(typeof u!="undefined")throw new k("argument-error",VE+" property must be a non empty string when specified.")}else if(typeof u!="undefined")throw new k("argument-error",ME+" property must be a non null object when specified.");if(u=o[Lv],typeof u!="undefined"&&typeof u!="boolean")throw new k("argument-error",Lv+" property must be a boolean when specified.");if(this.c=!!u,o=o[LE],typeof o!="undefined"&&(typeof o!="string"||typeof o=="string"&&!o.length))throw new k("argument-error",LE+" property must be a non empty string when specified.");this.i=o||null}var DE="android",LE="dynamicLinkDomain",Lv="handleCodeInApp",ME="iOS",BM="url",FE="installApp",UE="minimumVersion",jE="packageName",VE="bundleId";function nf(o){var u={};u.continueUrl=o.h,u.canHandleCodeInApp=o.c,(u.androidPackageName=o.a)&&(u.androidMinimumVersion=o.b,u.androidInstallApp=o.g),u.iOSBundleId=o.f,u.dynamicLinkDomain=o.i;for(var f in u)u[f]===null&&delete u[f];return u}function qM(o){return Fl(o,function(u){return u=u.toString(16),1<u.length?u:"0"+u}).join("")}var Cu=null;function WM(o){var u=[];return GM(o,function(f){u.push(f)}),u}function GM(o,u){function f(x){for(;p<o.length;){var M=o.charAt(p++),ie=Cu[M];if(ie!=null)return ie;if(!/^[\s\xa0]*$/.test(M))throw Error("Unknown base64 encoding at char: "+M)}return x}KM();for(var p=0;;){var v=f(-1),y=f(0),b=f(64),I=f(64);if(I===64&&v===-1)break;u(v<<2|y>>4),b!=64&&(u(y<<4&240|b>>2),I!=64&&u(b<<6&192|I))}}function KM(){if(!Cu){Cu={};for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),u=["+/=","+/","-_=","-_.","-_"],f=0;5>f;f++)for(var p=o.concat(u[f].split("")),v=0;v<p.length;v++){var y=p[v];Cu[y]===void 0&&(Cu[y]=v)}}}function rf(o){var u=BE(o);if(!(u&&u.sub&&u.iss&&u.aud&&u.exp))throw Error("Invalid JWT");this.h=o,this.a=u.exp,this.i=u.sub,o=Date.now()/1e3,this.g=u.iat||(o>this.a?this.a:o),this.b=u.provider_id||u.firebase&&u.firebase.sign_in_provider||null,this.f=u.firebase&&u.firebase.tenant||null,this.c=!!u.is_anonymous||this.b=="anonymous"}rf.prototype.T=function(){return this.f},rf.prototype.l=function(){return this.c},rf.prototype.toString=function(){return this.h};function of(o){try{return new rf(o)}catch(u){return null}}function BE(o){if(!o||(o=o.split("."),o.length!=3))return null;o=o[1];for(var u=(4-o.length%4)%4,f=0;f<u;f++)o+=".";try{var p=WM(o);for(o=[],f=u=0;u<p.length;){var v=p[u++];if(128>v)o[f++]=String.fromCharCode(v);else if(191<v&&224>v){var y=p[u++];o[f++]=String.fromCharCode((v&31)<<6|y&63)}else if(239<v&&365>v){y=p[u++];var b=p[u++],I=p[u++],x=((v&7)<<18|(y&63)<<12|(b&63)<<6|I&63)-65536;o[f++]=String.fromCharCode(55296+(x>>10)),o[f++]=String.fromCharCode(56320+(x&1023))}else y=p[u++],b=p[u++],o[f++]=String.fromCharCode((v&15)<<12|(y&63)<<6|b&63)}return JSON.parse(o.join(""))}catch(M){}return null}var qE="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),sf=["client_id","response_type","scope","redirect_uri","state"],Mv={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:sf},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:sf},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:sf},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:qE},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Fv(o){for(var u in Mv)if(Mv[u].fa==o)return Mv[u];return null}function WE(o){var u={};u["facebook.com"]=KE,u["google.com"]=zE,u["github.com"]=HE,u["twitter.com"]=QE;var f=o&&o[GE];try{if(f)return u[f]?new u[f](o):new Sr(o);if(typeof o[Uv]!="undefined")return new jv(o)}catch(p){}return null}var Uv="idToken",GE="providerId";function jv(o){var u=o[GE];if(!u&&o[Uv]){var f=of(o[Uv]);f&&f.b&&(u=f.b)}if(!u)throw Error("Invalid additional user info!");(u=="anonymous"||u=="custom")&&(u=null),f=!1,typeof o.isNewUser!="undefined"?f=!!o.isNewUser:o.kind==="identitytoolkit#SignupNewUserResponse"&&(f=!0),Y(this,"providerId",u),Y(this,"isNewUser",f)}function Sr(o){jv.call(this,o),o=Ds(o.rawUserInfo||"{}"),Y(this,"profile",Av(o||{}))}X(Sr,jv);function KE(o){if(Sr.call(this,o),this.providerId!="facebook.com")throw Error("Invalid provider ID!")}X(KE,Sr);function HE(o){if(Sr.call(this,o),this.providerId!="github.com")throw Error("Invalid provider ID!");Y(this,"username",this.profile&&this.profile.login||null)}X(HE,Sr);function zE(o){if(Sr.call(this,o),this.providerId!="google.com")throw Error("Invalid provider ID!")}X(zE,Sr);function QE(o){if(Sr.call(this,o),this.providerId!="twitter.com")throw Error("Invalid provider ID!");Y(this,"username",o.screenName||null)}X(QE,Sr);function YE(o){var u=mn(o),f=Mn(u,"link"),p=Mn(mn(f),"link");return u=Mn(u,"deep_link_id"),Mn(mn(u),"link")||u||p||f||o}function af(o,u){if(!o&&!u)throw new k("internal-error","Internal assert: no raw session string available");if(o&&u)throw new k("internal-error","Internal assert: unable to determine the session type");this.a=o||null,this.b=u||null,this.type=this.a?Au:uf}var Au="enroll",uf="signin";af.prototype.Ha=function(){return this.a?Z(this.a):Z(this.b)},af.prototype.w=function(){return this.type==Au?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}};function Ls(){}Ls.prototype.ka=function(){},Ls.prototype.b=function(){},Ls.prototype.c=function(){},Ls.prototype.w=function(){};function Ms(o,u){return o.then(function(f){if(f[ir]){var p=of(f[ir]);if(!p||u!=p.i)throw new k("user-mismatch");return f}throw new k("user-mismatch")}).o(function(f){throw f&&f.code&&f.code==uo+"user-not-found"?new k("user-mismatch"):f})}function wo(o,u){if(u)this.a=u;else throw new k("internal-error","failed to construct a credential");Y(this,"providerId",o),Y(this,"signInMethod",o)}wo.prototype.ka=function(o){return cm(o,Vv(this))},wo.prototype.b=function(o,u){var f=Vv(this);return f.idToken=u,lm(o,f)},wo.prototype.c=function(o,u){return Ms(fm(o,Vv(this)),u)};function Vv(o){return{pendingToken:o.a,requestUri:"http://localhost"}}wo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}};function HM(o){if(o&&o.providerId&&o.signInMethod&&o.providerId.indexOf("saml.")==0&&o.pendingToken)try{return new wo(o.providerId,o.pendingToken)}catch(u){}return null}function Yr(o,u,f){if(this.a=null,u.idToken||u.accessToken)u.idToken&&Y(this,"idToken",u.idToken),u.accessToken&&Y(this,"accessToken",u.accessToken),u.nonce&&!u.pendingToken&&Y(this,"nonce",u.nonce),u.pendingToken&&(this.a=u.pendingToken);else if(u.oauthToken&&u.oauthTokenSecret)Y(this,"accessToken",u.oauthToken),Y(this,"secret",u.oauthTokenSecret);else throw new k("internal-error","failed to construct a credential");Y(this,"providerId",o),Y(this,"signInMethod",f)}Yr.prototype.ka=function(o){return cm(o,Bv(this))},Yr.prototype.b=function(o,u){var f=Bv(this);return f.idToken=u,lm(o,f)},Yr.prototype.c=function(o,u){var f=Bv(this);return Ms(fm(o,f),u)};function Bv(o){var u={};return o.idToken&&(u.id_token=o.idToken),o.accessToken&&(u.access_token=o.accessToken),o.secret&&(u.oauth_token_secret=o.secret),u.providerId=o.providerId,o.nonce&&!o.a&&(u.nonce=o.nonce),u={postBody:uE(u).toString(),requestUri:"http://localhost"},o.a&&(delete u.postBody,u.pendingToken=o.a),u}Yr.prototype.w=function(){var o={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(o.oauthIdToken=this.idToken),this.accessToken&&(o.oauthAccessToken=this.accessToken),this.secret&&(o.oauthTokenSecret=this.secret),this.nonce&&(o.nonce=this.nonce),this.a&&(o.pendingToken=this.a),o};function zM(o){if(o&&o.providerId&&o.signInMethod){var u={idToken:o.oauthIdToken,accessToken:o.oauthTokenSecret?null:o.oauthAccessToken,oauthTokenSecret:o.oauthTokenSecret,oauthToken:o.oauthTokenSecret&&o.oauthAccessToken,nonce:o.nonce,pendingToken:o.pendingToken};try{return new Yr(o.providerId,u,o.signInMethod)}catch(f){}}return null}function Eo(o,u){this.Qc=u||[],zt(this,{providerId:o,isOAuthProvider:!0}),this.Jb={},this.qb=(Fv(o)||{}).Ja||null,this.pb=null}Eo.prototype.Ka=function(o){return this.Jb=gi(o),this};function XE(o){if(typeof o!="string"||o.indexOf("saml.")!=0)throw new k("argument-error",'SAML provider IDs must be prefixed with "saml."');Eo.call(this,o,[])}X(XE,Eo);function Tn(o){Eo.call(this,o,sf),this.a=[]}X(Tn,Eo),Tn.prototype.Ca=function(o){return zr(this.a,o)||this.a.push(o),this},Tn.prototype.Rb=function(){return lo(this.a)},Tn.prototype.credential=function(o,u){var f;if(T(o)?f={idToken:o.idToken||null,accessToken:o.accessToken||null,nonce:o.rawNonce||null}:f={idToken:o||null,accessToken:u||null},!f.idToken&&!f.accessToken)throw new k("argument-error","credential failed: must provide the ID token and/or the access token.");return new Yr(this.providerId,f,this.providerId)};function Io(){Tn.call(this,"facebook.com")}X(Io,Tn),Y(Io,"PROVIDER_ID","facebook.com"),Y(Io,"FACEBOOK_SIGN_IN_METHOD","facebook.com");function $E(o){if(!o)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var u=o;return T(o)&&(u=o.accessToken),new Io().credential({accessToken:u})}function To(){Tn.call(this,"github.com")}X(To,Tn),Y(To,"PROVIDER_ID","github.com"),Y(To,"GITHUB_SIGN_IN_METHOD","github.com");function JE(o){if(!o)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var u=o;return T(o)&&(u=o.accessToken),new To().credential({accessToken:u})}function So(){Tn.call(this,"google.com"),this.Ca("profile")}X(So,Tn),Y(So,"PROVIDER_ID","google.com"),Y(So,"GOOGLE_SIGN_IN_METHOD","google.com");function ZE(o,u){var f=o;return T(o)&&(f=o.idToken,u=o.accessToken),new So().credential({idToken:f,accessToken:u})}function Fs(){Eo.call(this,"twitter.com",qE)}X(Fs,Eo),Y(Fs,"PROVIDER_ID","twitter.com"),Y(Fs,"TWITTER_SIGN_IN_METHOD","twitter.com");function eI(o,u){var f=o;if(T(f)||(f={oauthToken:o,oauthTokenSecret:u}),!f.oauthToken||!f.oauthTokenSecret)throw new k("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Yr("twitter.com",f,"twitter.com")}function Ei(o,u,f){this.a=o,this.f=u,Y(this,"providerId","password"),Y(this,"signInMethod",f===Fn.EMAIL_LINK_SIGN_IN_METHOD?Fn.EMAIL_LINK_SIGN_IN_METHOD:Fn.EMAIL_PASSWORD_SIGN_IN_METHOD)}Ei.prototype.ka=function(o){return this.signInMethod==Fn.EMAIL_LINK_SIGN_IN_METHOD?ge(o,xF,{email:this.a,oobCode:this.f}):ge(o,kI,{email:this.a,password:this.f})},Ei.prototype.b=function(o,u){return this.signInMethod==Fn.EMAIL_LINK_SIGN_IN_METHOD?ge(o,PF,{idToken:u,email:this.a,oobCode:this.f}):ge(o,AI,{idToken:u,email:this.a,password:this.f})},Ei.prototype.c=function(o,u){return Ms(this.ka(o),u)},Ei.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}};function QM(o){return o&&o.email&&o.password?new Ei(o.email,o.password,o.signInMethod):null}function Fn(){zt(this,{providerId:"password",isOAuthProvider:!1})}function tI(o,u){if(u=qv(u),!u)throw new k("argument-error","Invalid email link!");return new Ei(o,u.code,Fn.EMAIL_LINK_SIGN_IN_METHOD)}function qv(o){return o=YE(o),(o=PE(o))&&o.operation===ef?o:null}zt(Fn,{PROVIDER_ID:"password"}),zt(Fn,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),zt(Fn,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"});function Ii(o){if(!(o.fb&&o.eb||o.La&&o.ea))throw new k("internal-error");this.a=o,Y(this,"providerId","phone"),this.fa="phone",Y(this,"signInMethod","phone")}Ii.prototype.ka=function(o){return o.gb(ku(this))},Ii.prototype.b=function(o,u){var f=ku(this);return f.idToken=u,ge(o,ZF,f)},Ii.prototype.c=function(o,u){var f=ku(this);return f.operation="REAUTH",o=ge(o,e2,f),Ms(o,u)},Ii.prototype.w=function(){var o={providerId:"phone"};return this.a.fb&&(o.verificationId=this.a.fb),this.a.eb&&(o.verificationCode=this.a.eb),this.a.La&&(o.temporaryProof=this.a.La),this.a.ea&&(o.phoneNumber=this.a.ea),o};function YM(o){if(o&&o.providerId==="phone"&&(o.verificationId&&o.verificationCode||o.temporaryProof&&o.phoneNumber)){var u={};return ke(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(f){o[f]&&(u[f]=o[f])}),new Ii(u)}return null}function ku(o){return o.a.La&&o.a.ea?{temporaryProof:o.a.La,phoneNumber:o.a.ea}:{sessionInfo:o.a.fb,code:o.a.eb}}function Xr(o){try{this.a=o||K.auth()}catch(u){throw new k("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}zt(this,{providerId:"phone",isOAuthProvider:!1})}Xr.prototype.gb=function(o,u){var f=this.a.a;return Z(u.verify()).then(function(p){if(typeof p!="string")throw new k("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(u.type){case"recaptcha":var v=T(o)?o.session:null,y=T(o)?o.phoneNumber:o,b;return v&&v.type==Au?b=v.Ha().then(function(I){return IF(f,{idToken:I,phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:p}})}):v&&v.type==uf?b=v.Ha().then(function(I){return TF(f,{mfaPendingCredential:I,mfaEnrollmentId:o.multiFactorHint&&o.multiFactorHint.uid||o.multiFactorUid,phoneSignInInfo:{recaptchaToken:p}})}):b=EF(f,{phoneNumber:y,recaptchaToken:p}),b.then(function(I){return typeof u.reset=="function"&&u.reset(),I},function(I){throw typeof u.reset=="function"&&u.reset(),I});default:throw new k("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})};function nI(o,u){if(!o)throw new k("missing-verification-id");if(!u)throw new k("missing-verification-code");return new Ii({fb:o,eb:u})}zt(Xr,{PROVIDER_ID:"phone"}),zt(Xr,{PHONE_SIGN_IN_METHOD:"phone"});function Wv(o){if(o.temporaryProof&&o.phoneNumber)return new Ii({La:o.temporaryProof,ea:o.phoneNumber});var u=o&&o.providerId;if(!u||u==="password")return null;var f=o&&o.oauthAccessToken,p=o&&o.oauthTokenSecret,v=o&&o.nonce,y=o&&o.oauthIdToken,b=o&&o.pendingToken;try{switch(u){case"google.com":return ZE(y,f);case"facebook.com":return $E(f);case"github.com":return JE(f);case"twitter.com":return eI(f,p);default:return f||p||y||b?b?u.indexOf("saml.")==0?new wo(u,b):new Yr(u,{pendingToken:b,idToken:o.oauthIdToken,accessToken:o.oauthAccessToken},u):new Tn(u).credential({idToken:y,accessToken:f,rawNonce:v}):null}}catch(I){return null}}function Gv(o){if(!o.isOAuthProvider)throw new k("invalid-oauth-provider")}function nr(o,u,f,p,v,y,b){if(this.c=o,this.b=u||null,this.g=f||null,this.f=p||null,this.i=y||null,this.h=b||null,this.a=v||null,this.g||this.a){if(this.g&&this.a)throw new k("invalid-auth-event");if(this.g&&!this.f)throw new k("invalid-auth-event")}else throw new k("invalid-auth-event")}nr.prototype.getUid=function(){var o=[];return o.push(this.c),this.b&&o.push(this.b),this.f&&o.push(this.f),this.h&&o.push(this.h),o.join("-")},nr.prototype.T=function(){return this.h},nr.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};function rI(o){return o=o||{},o.type?new nr(o.type,o.eventId,o.urlResponse,o.sessionId,o.error&&lu(o.error),o.postBody,o.tenantId):null}function XM(){this.b=null,this.a=[]}var Kv=null;function $M(o){var u=Kv;u.a.push(o),u.b||(u.b=function(f){for(var p=0;p<u.a.length;p++)u.a[p](f)},o=Be("universalLinks.subscribe",l),typeof o=="function"&&o(null,u.b))}function Hv(o){var u="unauthorized-domain",f=void 0,p=mn(o);o=p.a,p=p.c,p=="chrome-extension"?f=S0("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",o):p=="http"||p=="https"?f=S0("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",o):u="operation-not-supported-in-this-environment",k.call(this,u,f)}X(Hv,k);function Ru(o,u,f){k.call(this,o,f),o=u||{},o.Kb&&Y(this,"email",o.Kb),o.ea&&Y(this,"phoneNumber",o.ea),o.credential&&Y(this,"credential",o.credential),o.$b&&Y(this,"tenantId",o.$b)}X(Ru,k),Ru.prototype.w=function(){var o={code:this.code,message:this.message};this.email&&(o.email=this.email),this.phoneNumber&&(o.phoneNumber=this.phoneNumber),this.tenantId&&(o.tenantId=this.tenantId);var u=this.credential&&this.credential.w();return u&&pn(o,u),o},Ru.prototype.toJSON=function(){return this.w()};function cf(o){if(o.code){var u=o.code||"";u.indexOf(uo)==0&&(u=u.substring(uo.length));var f={credential:Wv(o),$b:o.tenantId};if(o.email)f.Kb=o.email;else if(o.phoneNumber)f.ea=o.phoneNumber;else if(!f.credential)return new k(u,o.message||void 0);return new Ru(u,f,o.message)}return null}function Nu(){}Nu.prototype.c=null;function iI(o){return o.c||(o.c=o.b())}var zv;function lf(){}X(lf,Nu),lf.prototype.a=function(){var o=oI(this);return o?new ActiveXObject(o):new XMLHttpRequest},lf.prototype.b=function(){var o={};return oI(this)&&(o[0]=!0,o[1]=!0),o};function oI(o){if(!o.f&&typeof XMLHttpRequest=="undefined"&&typeof ActiveXObject!="undefined"){for(var u=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],f=0;f<u.length;f++){var p=u[f];try{return new ActiveXObject(p),o.f=p}catch(v){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return o.f}zv=new lf;function ff(){}X(ff,Nu),ff.prototype.a=function(){var o=new XMLHttpRequest;if("withCredentials"in o)return o;if(typeof XDomainRequest!="undefined")return new sI;throw Error("Unsupported browser")},ff.prototype.b=function(){return{}};function sI(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=P(this.qc,this),this.a.onerror=P(this.Tb,this),this.a.onprogress=P(this.rc,this),this.a.ontimeout=P(this.vc,this)}e=sI.prototype,e.open=function(o,u,f){if(f!=null&&!f)throw Error("Only async requests are supported.");this.a.open(o,u)},e.send=function(o){if(o)if(typeof o=="string")this.a.send(o);else throw Error("Only string data is supported");else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(o){return o.toLowerCase()=="content-type"?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Qv(this,4)},e.Tb=function(){this.status=500,this.response=this.responseText="",Qv(this,4)},e.vc=function(){this.Tb()},e.rc=function(){this.status=200,Qv(this,1)};function Qv(o,u){o.readyState=u,o.onreadystatechange&&o.onreadystatechange()}e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};function Yv(o,u,f){this.reset(o,u,f,void 0,void 0)}Yv.prototype.a=null;var JM=0;Yv.prototype.reset=function(o,u,f,p,v){typeof v=="number"||JM++,p||Je(),delete this.a};function Xv(o){this.f=o,this.b=this.c=this.a=null}function Ou(o,u){this.name=o,this.value=u}Ou.prototype.toString=function(){return this.name};var aI=new Ou("SEVERE",1e3),$v=new Ou("WARNING",900),ZM=new Ou("CONFIG",700),eF=new Ou("FINE",500);function uI(o){return o.c?o.c:o.a?uI(o.a):(te("Root logger has no level set."),null)}Xv.prototype.log=function(o,u,f){if(o.value>=uI(this).value)for(E(u)&&(u=u()),o=new Yv(o,String(u),this.f),f&&(o.a=f),f=this;f;)f=f.a};var Jv={},hf=null;function Zv(o){hf||(hf=new Xv(""),Jv[""]=hf,hf.c=ZM);var u;if(!(u=Jv[o])){u=new Xv(o);var f=o.lastIndexOf("."),p=o.substr(f+1);f=Zv(o.substr(0,f)),f.b||(f.b={}),f.b[p]=u,u.a=f,Jv[o]=u}return u}function Un(o,u){o&&o.log(eF,u,void 0)}function pf(o){this.f=o}X(pf,Nu),pf.prototype.a=function(){return new df(this.f)},pf.prototype.b=function(o){return function(){return o}}({});function df(o){Ht.call(this),this.u=o,this.h=void 0,this.readyState=em,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=Zv("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}X(df,Ht);var em=0;e=df.prototype,e.open=function(o,u){if(this.readyState!=em)throw this.abort(),Error("Error reopening a connection");this.s=o,this.f=u,this.readyState=1,Pu(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.a=!0;var u={headers:this.l,method:this.s,credentials:this.h,cache:void 0};o&&(u.body=o),this.u.fetch(new Request(this.f,u)).then(this.uc.bind(this),this.Va.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&this.readyState!=4&&(this.a=!1,xu(this)),this.readyState=em},e.uc=function(o){this.a&&(this.g=o,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=o.headers,this.readyState=2,Pu(this)),this.a&&(this.readyState=3,Pu(this),this.a&&(this.responseType==="arraybuffer"?o.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):typeof l.ReadableStream!="undefined"&&"body"in o?(this.response=this.responseText="",this.c=o.body.getReader(),this.m=new TextDecoder,cI(this)):o.text().then(this.tc.bind(this),this.Va.bind(this)))))};function cI(o){o.c.read().then(o.pc.bind(o)).catch(o.Va.bind(o))}e.pc=function(o){if(this.a){var u=this.m.decode(o.value?o.value:new Uint8Array(0),{stream:!o.done});u&&(this.response=this.responseText+=u),o.done?xu(this):Pu(this),this.readyState==3&&cI(this)}},e.tc=function(o){this.a&&(this.response=this.responseText=o,xu(this))},e.sc=function(o){this.a&&(this.response=o,xu(this))},e.Va=function(o){var u=this.i;u&&u.log($v,"Failed to fetch url "+this.f,o instanceof Error?o:Error(o)),this.a&&xu(this)};function xu(o){o.readyState=4,o.g=null,o.c=null,o.m=null,Pu(o)}e.setRequestHeader=function(o,u){this.l.append(o,u)},e.getResponseHeader=function(o){return this.b?this.b.get(o.toLowerCase())||"":((o=this.i)&&o.log($v,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var o=this.i;return o&&o.log($v,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}o=[];for(var u=this.b.entries(),f=u.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=u.next();return o.join(`\r
`)};function Pu(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(df.prototype,"withCredentials",{get:function(){return this.h==="include"},set:function(o){this.h=o?"include":"same-origin"}});function Du(o){Ht.call(this),this.headers=new Rs,this.D=o||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=lI,this.u=this.S=!1}X(Du,Ht);var lI="";Du.prototype.b=Zv("goog.net.XhrIo");var tF=/^https?$/i,nF=["POST","PUT"];function rF(o,u,f,p,v){if(o.a)throw Error("[goog.net.XhrIo] Object is active with another request="+o.l+"; newUri="+u);f=f?f.toUpperCase():"GET",o.l=u,o.h="",o.P=f,o.J=!1,o.c=!0,o.a=o.D?o.D.a():zv.a(),o.C=o.D?iI(o.D):iI(zv),o.a.onreadystatechange=P(o.Wb,o);try{Un(o.b,$r(o,"Opening Xhr")),o.N=!0,o.a.open(f,String(u),!0),o.N=!1}catch(b){Un(o.b,$r(o,"Error opening Xhr: "+b.message)),fI(o,b);return}u=p||"";var y=new Rs(o.headers);v&&uM(v,function(b,I){y.set(I,b)}),v=CL(y.Y()),p=l.FormData&&u instanceof l.FormData,!zr(nF,f)||v||p||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),y.forEach(function(b,I){this.a.setRequestHeader(I,b)},o),o.m&&(o.a.responseType=o.m),"withCredentials"in o.a&&o.a.withCredentials!==o.S&&(o.a.withCredentials=o.S);try{dI(o),0<o.g&&(o.u=iF(o.a),Un(o.b,$r(o,"Will abort after "+o.g+"ms if incomplete, xhr2 "+o.u)),o.u?(o.a.timeout=o.g,o.a.ontimeout=P(o.Ma,o)):o.s=pv(o.Ma,o.g,o)),Un(o.b,$r(o,"Sending request")),o.i=!0,o.a.send(u),o.i=!1}catch(b){Un(o.b,$r(o,"Send error: "+b.message)),fI(o,b)}}function iF(o){return er&&R0(9)&&typeof o.timeout=="number"&&o.ontimeout!==void 0}function oF(o){return o.toLowerCase()=="content-type"}e=Du.prototype,e.Ma=function(){typeof c!="undefined"&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Un(this.b,$r(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))};function fI(o,u){o.c=!1,o.a&&(o.f=!0,o.a.abort(),o.f=!1),o.h=u,hI(o),vf(o)}function hI(o){o.J||(o.J=!0,o.dispatchEvent("complete"),o.dispatchEvent("error"))}e.abort=function(){this.a&&this.c&&(Un(this.b,$r(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),vf(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),vf(this,!0)),Du.bb.Da.call(this)},e.Wb=function(){this.ya||(this.N||this.i||this.f?pI(this):this.Jc())},e.Jc=function(){pI(this)};function pI(o){if(o.c&&typeof c!="undefined"){if(o.C[1]&&Lu(o)==4&&mf(o)==2)Un(o.b,$r(o,"Local request error detected and ignored"));else if(o.i&&Lu(o)==4)pv(o.Wb,0,o);else if(o.dispatchEvent("readystatechange"),Lu(o)==4){Un(o.b,$r(o,"Request complete")),o.c=!1;try{var u=mf(o);e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var v;if(v=u===0){var y=String(o.l).match(sE)[1]||null;if(!y&&l.self&&l.self.location){var b=l.self.location.protocol;y=b.substr(0,b.length-1)}v=!tF.test(y?y.toLowerCase():"")}p=v}if(p)o.dispatchEvent("complete"),o.dispatchEvent("success");else{try{var I=2<Lu(o)?o.a.statusText:""}catch(x){Un(o.b,"Can not get status: "+x.message),I=""}o.h=I+" ["+mf(o)+"]",hI(o)}}finally{vf(o)}}}}function vf(o,u){if(o.a){dI(o);var f=o.a,p=o.C[0]?m:null;o.a=null,o.C=null,u||o.dispatchEvent("ready");try{f.onreadystatechange=p}catch(v){(o=o.b)&&o.log(aI,"Problem encountered resetting onreadystatechange: "+v.message,void 0)}}}function dI(o){o.a&&o.u&&(o.a.ontimeout=null),o.s&&(l.clearTimeout(o.s),o.s=null)}function Lu(o){return o.a?o.a.readyState:0}function mf(o){try{return 2<Lu(o)?o.a.status:-1}catch(u){return-1}}function sF(o){try{return o.a?o.a.responseText:""}catch(u){return Un(o.b,"Can not get responseText: "+u.message),""}}e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case lI:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var o=this.b;return o&&o.log(aI,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(u){return Un(this.b,"Can not get response: "+u.message),null}};function $r(o,u){return u+" ["+o.P+" "+o.l+" "+mf(o)+"]"}function Co(o){var u=cF;this.g=[],this.u=u,this.s=o||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}Co.prototype.cancel=function(o){if(this.a)this.c instanceof Co&&this.c.cancel();else{if(this.b){var u=this.b;delete this.b,o?u.cancel(o):(u.l--,0>=u.l&&u.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(o=new Fu(this),gf(this),Mu(this,!1,o))}},Co.prototype.m=function(o,u){this.i=!1,Mu(this,o,u)};function Mu(o,u,f){o.a=!0,o.c=f,o.f=!u,mI(o)}function gf(o){if(o.a){if(!o.v)throw new yf(o);o.v=!1}}function aF(o,u){tm(o,null,u,void 0)}function tm(o,u,f,p){o.g.push([u,f,p]),o.a&&mI(o)}Co.prototype.then=function(o,u,f){var p,v,y=new ve(function(b,I){p=b,v=I});return tm(this,p,function(b){b instanceof Fu?y.cancel():v(b)}),y.then(o,u,f)},Co.prototype.$goog_Thenable=!0;function vI(o){return SL(o.g,function(u){return E(u[1])})}function mI(o){if(o.h&&o.a&&vI(o)){var u=o.h,f=_f[u];f&&(l.clearTimeout(f.a),delete _f[u]),o.h=0}o.b&&(o.b.l--,delete o.b),u=o.c;for(var p=f=!1;o.g.length&&!o.i;){var v=o.g.shift(),y=v[0],b=v[1];if(v=v[2],y=o.f?b:y)try{var I=y.call(v||o.s,u);I!==void 0&&(o.f=o.f&&(I==u||I instanceof Error),o.c=u=I),(B(u)||typeof l.Promise=="function"&&u instanceof l.Promise)&&(p=!0,o.i=!0)}catch(x){u=x,o.f=!0,vI(o)||(f=!0)}}o.c=u,p&&(I=P(o.m,o,!0),p=P(o.m,o,!1),u instanceof Co?(tm(u,I,p),u.C=!0):u.then(I,p)),f&&(u=new gI(u),_f[u.a]=u,o.h=u.a)}function yf(){D.call(this)}X(yf,D),yf.prototype.message="Deferred has already fired",yf.prototype.name="AlreadyCalledError";function Fu(){D.call(this)}X(Fu,D),Fu.prototype.message="Deferred was canceled",Fu.prototype.name="CanceledError";function gI(o){this.a=l.setTimeout(P(this.c,this),0),this.b=o}gI.prototype.c=function(){throw delete _f[this.a],this.b};var _f={};function nm(o){var u={},f=u.document||document,p=g0(o).toString(),v=Wl(document,"SCRIPT"),y={Xb:v,Ma:void 0},b=new Co(y),I=null,x=u.timeout!=null?u.timeout:5e3;return 0<x&&(I=window.setTimeout(function(){bf(v,!0);var M=new rm(fF,"Timeout reached for loading script "+p);gf(b),Mu(b,!1,M)},x),y.Ma=I),v.onload=v.onreadystatechange=function(){v.readyState&&v.readyState!="loaded"&&v.readyState!="complete"||(bf(v,u.xd||!1,I),gf(b),Mu(b,!0,null))},v.onerror=function(){bf(v,!0,I);var M=new rm(lF,"Error while loading script "+p);gf(b),Mu(b,!1,M)},y=u.attributes||{},pn(y,{type:"text/javascript",charset:"UTF-8"}),O0(v,y),VL(v,o),uF(f).appendChild(v),b}function uF(o){var u;return(u=(o||document).getElementsByTagName("HEAD"))&&u.length!=0?u[0]:o.documentElement}function cF(){if(this&&this.Xb){var o=this.Xb;o&&o.tagName=="SCRIPT"&&bf(o,!0,this.Ma)}}function bf(o,u,f){f!=null&&l.clearTimeout(f),o.onload=m,o.onerror=m,o.onreadystatechange=m,u&&window.setTimeout(function(){o&&o.parentNode&&o.parentNode.removeChild(o)},0)}var lF=0,fF=1;function rm(o,u){var f="Jsloader error (code #"+o+")";u&&(f+=": "+u),D.call(this,f),this.code=o}X(rm,D);function wf(o){this.f=o}X(wf,Nu),wf.prototype.a=function(){return new this.f},wf.prototype.b=function(){return{}};function rr(o,u,f){if(this.c=o,o=u||{},this.l=o.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=o.secureTokenTimeout||hF,this.g=gi(o.secureTokenHeaders||pF),this.h=o.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=o.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=o.firebaseTimeout||dF,this.a=gi(o.firebaseHeaders||vF),f&&(this.a["X-Client-Version"]=f,this.g["X-Client-Version"]=f),f=Ir()=="Node",f=l.XMLHttpRequest||f&&K.INTERNAL.node&&K.INTERNAL.node.XMLHttpRequest,!f&&!tr())throw new k("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,tr()?this.f=new pf(self):yE()?this.f=new wf(f):this.f=new ff,this.b=null}var im,ir="idToken",hF=new wi(3e4,6e4),pF={"Content-Type":"application/x-www-form-urlencoded"},dF=new wi(3e4,6e4),vF={"Content-Type":"application/json"};function yI(o,u){u?o.a["X-Firebase-Locale"]=u:delete o.a["X-Firebase-Locale"]}function Ef(o,u){u&&(o.l=om("https://securetoken.googleapis.com/v1/token",u),o.h=om("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",u),o.i=om("https://identitytoolkit.googleapis.com/v2/",u))}function om(o,u){return o=mn(o),u=mn(u.url),o.f=o.a+o.f,mu(o,u.c),o.a=u.a,gu(o,u.g),o.toString()}function _I(o,u){u?(o.a["X-Client-Version"]=u,o.g["X-Client-Version"]=u):(delete o.a["X-Client-Version"],delete o.g["X-Client-Version"])}rr.prototype.T=function(){return this.b};function bI(o,u,f,p,v,y,b){yM()||tr()?o=P(o.u,o):(im||(im=new ve(function(I,x){gF(I,x)})),o=P(o.s,o)),o(u,f,p,v,y,b)}rr.prototype.u=function(o,u,f,p,v,y){if(tr()&&(typeof l.fetch=="undefined"||typeof l.Headers=="undefined"||typeof l.Request=="undefined"))throw new k("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var b=new Du(this.f);if(y){b.g=Math.max(0,y);var I=setTimeout(function(){b.dispatchEvent("timeout")},y)}rE(b,"complete",function(){I&&clearTimeout(I);var x=null;try{x=JSON.parse(sF(this))||null}catch(M){x=null}u&&u(x)}),hv(b,"ready",function(){I&&clearTimeout(I),Y0(this)}),hv(b,"timeout",function(){I&&clearTimeout(I),Y0(this),u&&u(null)}),rF(b,o,f,p,v)};var mF=new wr(jl,"https://apis.google.com/js/client.js?onload=%{onload}"),wI="__fcb"+Math.floor(1e6*Math.random()).toString();function gF(o,u){if(((window.gapi||{}).client||{}).request)o();else{l[wI]=function(){((window.gapi||{}).client||{}).request?o():u(Error("CORS_UNSUPPORTED"))};var f=zd(mF,{onload:wI});aF(nm(f),function(){u(Error("CORS_UNSUPPORTED"))})}}rr.prototype.s=function(o,u,f,p,v){var y=this;im.then(function(){window.gapi.client.setApiKey(y.c);var b=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:o,method:f,body:p,headers:v,authType:"none",callback:function(I){window.gapi.auth.setToken(b),u&&u(I)}})}).o(function(b){u&&u({error:{message:b&&b.message||"CORS_UNSUPPORTED"}})})};function yF(o,u){return new ve(function(f,p){u.grant_type=="refresh_token"&&u.refresh_token||u.grant_type=="authorization_code"&&u.code?bI(o,o.l+"?key="+encodeURIComponent(o.c),function(v){v?v.error?p(pm(v)):v.access_token&&v.refresh_token?f(v):p(new k("internal-error")):p(new k("network-request-failed"))},"POST",uE(u).toString(),o.g,o.m.get()):p(new k("internal-error"))})}function EI(o,u,f,p,v,y,b){var I=mn(u+f);Ze(I,"key",o.c),b&&Ze(I,"cb",Date.now().toString());var x=p=="GET";if(x)for(var M in v)v.hasOwnProperty(M)&&Ze(I,M,v[M]);return new ve(function(ie,Re){bI(o,I.toString(),function(Ie){Ie?Ie.error?Re(pm(Ie,y||{})):ie(Ie):Re(new k("network-request-failed"))},p,x?void 0:fE(wE(v)),o.a,o.v.get())})}function Ao(o){if(o=o.email,typeof o!="string"||!wM.test(o))throw new k("invalid-email")}function II(o){"email"in o&&Ao(o)}function _F(o,u){return ge(o,RF,{identifier:u,continueUri:Zl()?bu():"http://localhost"}).then(function(f){return f.signinMethods||[]})}function bF(o){return ge(o,BF,{}).then(function(u){return u.authorizedDomains||[]})}function gn(o){if(!o[ir])throw o.mfaPendingCredential?new k("multi-factor-auth-required",null,gi(o)):new k("internal-error")}function sm(o){if(o.phoneNumber||o.temporaryProof){if(!o.phoneNumber||!o.temporaryProof)throw new k("internal-error")}else{if(!o.sessionInfo)throw new k("missing-verification-id");if(!o.code)throw new k("missing-verification-code")}}rr.prototype.Ab=function(){return ge(this,KF,{})},rr.prototype.Cb=function(o,u){return ge(this,CI,{idToken:o,email:u})},rr.prototype.Db=function(o,u){return ge(this,AI,{idToken:o,password:u})};var wF={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};e=rr.prototype,e.Eb=function(o,u){var f={idToken:o},p=[];return h0(wF,function(v,y){var b=u[y];b===null?p.push(v):y in u&&(f[y]=b)}),p.length&&(f.deleteAttribute=p),ge(this,CI,f)},e.wb=function(o,u){return o={requestType:"PASSWORD_RESET",email:o},pn(o,u),ge(this,VF,o)},e.xb=function(o,u){return o={requestType:"EMAIL_SIGNIN",email:o},pn(o,u),ge(this,FF,o)},e.vb=function(o,u){return o={requestType:"VERIFY_EMAIL",idToken:o},pn(o,u),ge(this,UF,o)},e.Fb=function(o,u,f){return o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:o,newEmail:u},pn(o,f),ge(this,jF,o)};function EF(o,u){return ge(o,GF,u)}e.gb=function(o){return ge(this,JF,o)};function IF(o,u){return ge(o,HF,u).then(function(f){return f.phoneSessionInfo.sessionInfo})}function TI(o){if(!o.phoneVerificationInfo)throw new k("internal-error");if(!o.phoneVerificationInfo.sessionInfo)throw new k("missing-verification-id");if(!o.phoneVerificationInfo.code)throw new k("missing-verification-code")}function TF(o,u){return ge(o,zF,u).then(function(f){return f.phoneResponseInfo.sessionInfo})}function SF(o,u,f){return ge(o,OF,{idToken:u,deleteProvider:f})}function am(o){if(!o.requestUri||!o.sessionId&&!o.postBody&&!o.pendingToken)throw new k("internal-error")}function um(o,u){return u.oauthIdToken&&u.providerId&&u.providerId.indexOf("oidc.")==0&&!u.pendingToken&&(o.sessionId?u.nonce=o.sessionId:o.postBody&&(o=new go(o.postBody),mv(o,"nonce")&&(u.nonce=o.get("nonce")))),u}function SI(o){var u=null;if(o.needConfirmation?(o.code="account-exists-with-different-credential",u=cf(o)):o.errorMessage=="FEDERATED_USER_ID_ALREADY_LINKED"?(o.code="credential-already-in-use",u=cf(o)):o.errorMessage=="EMAIL_EXISTS"?(o.code="email-already-in-use",u=cf(o)):o.errorMessage&&(u=RI(o.errorMessage)),u)throw u;gn(o)}function cm(o,u){return u.returnIdpCredential=!0,ge(o,QF,u)}function lm(o,u){return u.returnIdpCredential=!0,ge(o,XF,u)}function fm(o,u){return u.returnIdpCredential=!0,u.autoCreate=!1,ge(o,YF,u)}function hm(o){if(!o.oobCode)throw new k("invalid-action-code")}e.ob=function(o,u){return ge(this,WF,{oobCode:o,newPassword:u})},e.Sa=function(o){return ge(this,AF,{oobCode:o})},e.kb=function(o){return ge(this,CF,{oobCode:o})};var CF={endpoint:"setAccountInfo",A:hm,Z:"email",B:!0},AF={endpoint:"resetPassword",A:hm,G:function(o){var u=o.requestType;if(!u||!o.email&&u!="EMAIL_SIGNIN"&&u!="VERIFY_AND_CHANGE_EMAIL")throw new k("internal-error")},B:!0},kF={endpoint:"signupNewUser",A:function(o){if(Ao(o),!o.password)throw new k("weak-password")},G:gn,V:!0,B:!0},RF={endpoint:"createAuthUri",B:!0},NF={endpoint:"deleteAccount",O:["idToken"]},OF={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(o){if(!Array.isArray(o.deleteProvider))throw new k("internal-error")}},xF={endpoint:"emailLinkSignin",O:["email","oobCode"],A:Ao,G:gn,V:!0,B:!0},PF={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:Ao,G:gn,V:!0},DF={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:TI,G:gn,B:!0,Na:!0},LF={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:TI,G:gn,B:!0,Na:!0},MF={endpoint:"getAccountInfo"},FF={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(o){if(o.requestType!="EMAIL_SIGNIN")throw new k("internal-error");Ao(o)},Z:"email",B:!0},UF={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(o){if(o.requestType!="VERIFY_EMAIL")throw new k("internal-error")},Z:"email",B:!0},jF={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(o){if(o.requestType!="VERIFY_AND_CHANGE_EMAIL")throw new k("internal-error")},Z:"email",B:!0},VF={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(o){if(o.requestType!="PASSWORD_RESET")throw new k("internal-error");Ao(o)},Z:"email",B:!0},BF={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},qF={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(o){if(!o.recaptchaSiteKey)throw new k("internal-error")}},WF={endpoint:"resetPassword",A:hm,Z:"email",B:!0},GF={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},CI={endpoint:"setAccountInfo",O:["idToken"],A:II,V:!0},AI={endpoint:"setAccountInfo",O:["idToken"],A:function(o){if(II(o),!o.password)throw new k("weak-password")},G:gn,V:!0},KF={endpoint:"signupNewUser",G:gn,V:!0,B:!0},HF={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(o){if(!o.phoneEnrollmentInfo)throw new k("internal-error");if(!o.phoneEnrollmentInfo.phoneNumber)throw new k("missing-phone-number");if(!o.phoneEnrollmentInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(o){if(!o.phoneSessionInfo||!o.phoneSessionInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},zF={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(o){if(!o.phoneSignInInfo||!o.phoneSignInInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(o){if(!o.phoneResponseInfo||!o.phoneResponseInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},QF={endpoint:"verifyAssertion",A:am,Za:um,G:SI,V:!0,B:!0},YF={endpoint:"verifyAssertion",A:am,Za:um,G:function(o){if(o.errorMessage&&o.errorMessage=="USER_NOT_FOUND")throw new k("user-not-found");if(o.errorMessage)throw RI(o.errorMessage);gn(o)},V:!0,B:!0},XF={endpoint:"verifyAssertion",A:function(o){if(am(o),!o.idToken)throw new k("internal-error")},Za:um,G:SI,V:!0},$F={endpoint:"verifyCustomToken",A:function(o){if(!o.token)throw new k("invalid-custom-token")},G:gn,V:!0,B:!0},kI={endpoint:"verifyPassword",A:function(o){if(Ao(o),!o.password)throw new k("wrong-password")},G:gn,V:!0,B:!0},JF={endpoint:"verifyPhoneNumber",A:sm,G:gn,B:!0},ZF={endpoint:"verifyPhoneNumber",A:function(o){if(!o.idToken)throw new k("internal-error");sm(o)},G:function(o){if(o.temporaryProof)throw o.code="credential-already-in-use",cf(o);gn(o)}},e2={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:sm,G:gn,B:!0},t2={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(o){if(!!o[ir]^!!o.refreshToken)throw new k("internal-error")},B:!0,Na:!0};function ge(o,u,f){if(!kM(f,u.O))return Ve(new k("internal-error"));var p=!!u.Na,v=u.Vb||"POST",y;return Z(f).then(u.A).then(function(){return u.V&&(f.returnSecureToken=!0),u.B&&o.b&&typeof f.tenantId=="undefined"&&(f.tenantId=o.b),p?EI(o,o.i,u.endpoint,v,f,u.Ib,u.mb||!1):EI(o,o.h,u.endpoint,v,f,u.Ib,u.mb||!1)}).then(function(b){return y=b,u.Za?u.Za(f,y):y}).then(u.G).then(function(){if(!u.Z)return y;if(!(u.Z in y))throw new k("internal-error");return y[u.Z]})}function RI(o){return pm({error:{errors:[{message:o}],code:400,message:o}})}function pm(o,u){var f=(o.error&&o.error.errors&&o.error.errors[0]||{}).reason||"",p={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(f=p[f]?new k(p[f]):null)return f;f=o.error&&o.error.message||"",p={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},pn(p,u||{}),u=(u=f.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<u.length?u[1]:void 0;for(var v in p)if(f.indexOf(v)===0)return new k(p[v],u);return!u&&o&&(u=Eu(o)),new k("internal-error",u)}function n2(o){this.b=o,this.a=null,this.sb=r2(this)}function r2(o){return c2().then(function(){return new ve(function(u,f){Be("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:Be("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(p){function v(){clearTimeout(y),u()}o.a=p,o.a.restyle({setHideOnLeave:!1});var y=setTimeout(function(){f(Error("Network Error"))},u2.get());p.ping(v).then(v,function(){f(Error("Network Error"))})})})})}function i2(o,u){return o.sb.then(function(){return new ve(function(f){o.a.send(u.type,u,f,Be("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function o2(o,u){o.sb.then(function(){o.a.register("authEvent",u,Be("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}var s2=new wr(jl,"https://apis.google.com/js/api.js?onload=%{onload}"),a2=new wi(3e4,6e4),u2=new wi(5e3,15e3),If=null;function c2(){return If||(If=new ve(function(o,u){function f(){IE(),Be("gapi.load")("gapi.iframes",{callback:o,ontimeout:function(){IE(),u(Error("Network Error"))},timeout:a2.get()})}if(Be("gapi.iframes.Iframe"))o();else if(Be("gapi.load"))f();else{var p="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[p]=function(){Be("gapi.load")?f():u(Error("Network Error"))},p=zd(s2,{onload:p}),Z(nm(p)).o(function(){u(Error("Network Error"))})}}).o(function(o){throw If=null,o}))}function NI(o,u,f,p){this.l=o,this.h=u,this.i=f,this.g=p,this.f=null,this.g?(o=mn(this.g.url),o=$l(o.c,o.a,o.g,"/emulator/auth/iframe")):o=$l("https",this.l,null,"/__/auth/iframe"),this.a=o,Ze(this.a,"apiKey",this.h),Ze(this.a,"appName",this.i),this.b=null,this.c=[]}NI.prototype.toString=function(){return this.f?Ze(this.a,"v",this.f):Er(this.a.b,"v"),this.b?Ze(this.a,"eid",this.b):Er(this.a.b,"eid"),this.c.length?Ze(this.a,"fw",this.c.join(",")):Er(this.a.b,"fw"),this.a.toString()};function dm(o,u,f,p,v,y){this.u=o,this.s=u,this.c=f,this.m=p,this.v=y,this.i=this.g=this.l=null,this.a=v,this.h=this.f=null}dm.prototype.zb=function(o){return this.h=o,this},dm.prototype.toString=function(){if(this.v){var o=mn(this.v.url);o=$l(o.c,o.a,o.g,"/emulator/auth/handler")}else o=$l("https",this.u,null,"/__/auth/handler");if(Ze(o,"apiKey",this.s),Ze(o,"appName",this.c),Ze(o,"authType",this.m),this.a.isOAuthProvider){var u=this.a;try{var f=K.app(this.c).auth().la()}catch(I){f=null}u.pb=f,Ze(o,"providerId",this.a.providerId),f=this.a,u=wE(f.Jb);for(var p in u)u[p]=u[p].toString();p=f.Qc,u=gi(u);for(var v=0;v<p.length;v++){var y=p[v];y in u&&delete u[y]}f.qb&&f.pb&&!u[f.qb]&&(u[f.qb]=f.pb),fo(u)||Ze(o,"customParameters",Eu(u))}if(typeof this.a.Rb=="function"&&(f=this.a.Rb(),f.length&&Ze(o,"scopes",f.join(","))),this.l?Ze(o,"redirectUrl",this.l):Er(o.b,"redirectUrl"),this.g?Ze(o,"eventId",this.g):Er(o.b,"eventId"),this.i?Ze(o,"v",this.i):Er(o.b,"v"),this.b)for(var b in this.b)this.b.hasOwnProperty(b)&&!Mn(o,b)&&Ze(o,b,this.b[b]);return this.h?Ze(o,"tid",this.h):Er(o.b,"tid"),this.f?Ze(o,"eid",this.f):Er(o.b,"eid"),b=vm(this.c),b.length&&Ze(o,"fw",b.join(",")),o.toString()};function vm(o){try{return K.app(o).auth().Ga()}catch(u){return[]}}function OI(o,u,f,p,v,y){this.s=o,this.g=u,this.b=f,this.f=y,this.c=p||null,this.i=v||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function xI(o){var u=bu();return bF(o).then(function(f){e:{var p=mn(u),v=p.c;p=p.a;for(var y=0;y<f.length;y++){var b=f[y],I=p,x=v;if(b.indexOf("chrome-extension://")==0?I=mn(b).a==I&&x=="chrome-extension":x!="http"&&x!="https"?I=!1:bM.test(b)?I=I==b:(b=b.split(".").join("\\."),I=new RegExp("^(.+\\."+b+"|"+b+")$","i").test(I)),I){f=!0;break e}}f=!1}if(!f)throw new Hv(bu())})}function PI(o){return o.m||(o.m=Jl().then(function(){if(!o.u){var u=o.c,f=o.i,p=vm(o.b),v=new NI(o.s,o.g,o.b,o.f);v.f=u,v.b=f,v.c=lo(p||[]),o.u=v.toString()}o.v=new n2(o.u),l2(o)})),o.m}e=OI.prototype,e.Pb=function(o,u,f){var p=new k("popup-closed-by-user"),v=new k("web-storage-unsupported"),y=this,b=!1;return this.ma().then(function(){f2(y).then(function(I){I||(o&&yo(o),u(v),b=!0)})}).o(function(){}).then(function(){if(!b)return _M(o)}).then(function(){if(!b)return ks(f).then(function(){u(p)})})},e.Yb=function(){var o=Tt();return!wu(o)&&!EE(o)},e.Ub=function(){return!1},e.Nb=function(o,u,f,p,v,y,b,I){if(!o)return Ve(new k("popup-blocked"));if(b&&!wu())return this.ma().o(function(M){yo(o),v(M)}),p(),Z();this.a||(this.a=xI(DI(this)));var x=this;return this.a.then(function(){var M=x.ma().o(function(ie){throw yo(o),v(ie),ie});return p(),M}).then(function(){if(Gv(f),!b){var M=Uu(x.s,x.g,x.b,u,f,null,y,x.c,void 0,x.i,I,x.f);dE(M,o)}}).o(function(M){throw M.code=="auth/network-request-failed"&&(x.a=null),M})};function DI(o){return o.l||(o.C=o.c?xs(o.c,vm(o.b)):null,o.l=new rr(o.g,Kr(o.i),o.C),o.f&&Ef(o.l,o.f)),o.l}e.Ob=function(o,u,f,p){this.a||(this.a=xI(DI(this)));var v=this;return this.a.then(function(){Gv(u);var y=Uu(v.s,v.g,v.b,o,u,bu(),f,v.c,void 0,v.i,p,v.f);dE(y)}).o(function(y){throw y.code=="auth/network-request-failed"&&(v.a=null),y})},e.ma=function(){var o=this;return PI(this).then(function(){return o.v.sb}).o(function(){throw o.a=null,new k("network-request-failed")})},e.ac=function(){return!0};function Uu(o,u,f,p,v,y,b,I,x,M,ie,Re){return o=new dm(o,u,f,p,v,Re),o.l=y,o.g=b,o.i=I,o.b=gi(x||null),o.f=M,o.zb(ie).toString()}function l2(o){if(!o.v)throw Error("IfcHandler must be initialized!");o2(o.v,function(u){var f={};if(u&&u.authEvent){var p=!1;for(u=rI(u.authEvent),f=0;f<o.h.length;f++)p=o.h[f](u)||p;return f={},f.status=p?"ACK":"ERROR",Z(f)}return f.status="ERROR",Z(f)})}function f2(o){var u={type:"webStorageSupport"};return PI(o).then(function(){return i2(o.v,u)}).then(function(f){if(f&&f.length&&typeof f[0].webStorageSupport!="undefined")return f[0].webStorageSupport;throw Error()})}e.Ea=function(o){this.h.push(o)},e.Ta=function(o){Zn(this.h,function(u){return u==o})};function LI(o){if(this.a=o||K.INTERNAL.reactNative&&K.INTERNAL.reactNative.AsyncStorage,!this.a)throw new k("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}e=LI.prototype,e.get=function(o){return Z(this.a.getItem(o)).then(function(u){return u&&Ds(u)})},e.set=function(o,u){return Z(this.a.setItem(o,Eu(u)))},e.U=function(o){return Z(this.a.removeItem(o))},e.ca=function(){},e.ia=function(){};function MI(o){this.b=o,this.a={},this.f=P(this.c,this)}var FI=[];function h2(){var o=tr()?self:null;if(ke(FI,function(f){f.b==o&&(u=f)}),!u){var u=new MI(o);FI.push(u)}return u}MI.prototype.c=function(o){var u=o.data.eventType,f=o.data.eventId,p=this.a[u];if(p&&0<p.length){o.ports[0].postMessage({status:"ack",eventId:f,eventType:u,response:null});var v=[];ke(p,function(y){v.push(Z().then(function(){return y(o.origin,o.data.data)}))}),j0(v).then(function(y){var b=[];ke(y,function(I){b.push({fulfilled:I.Qb,value:I.value,reason:I.reason?I.reason.message:void 0})}),ke(b,function(I){for(var x in I)typeof I[x]=="undefined"&&delete I[x]}),o.ports[0].postMessage({status:"done",eventId:f,eventType:u,response:b})})}};function UI(o,u,f){fo(o.a)&&o.b.addEventListener("message",o.f),typeof o.a[u]=="undefined"&&(o.a[u]=[]),o.a[u].push(f)}function jI(o){this.a=o}jI.prototype.postMessage=function(o,u){this.a.postMessage(o,u)};function VI(o){this.c=o,this.b=!1,this.a=[]}function BI(o,u,f,p){var v,y=f||{},b,I,x,M=null;if(o.b)return Ve(Error("connection_unavailable"));var ie=p?800:50,Re=typeof MessageChannel!="undefined"?new MessageChannel:null;return new ve(function(Ie,_t){Re?(v=Math.floor(Math.random()*Math.pow(10,20)).toString(),Re.port1.start(),I=setTimeout(function(){_t(Error("unsupported_event"))},ie),b=function(Jr){Jr.data.eventId===v&&(Jr.data.status==="ack"?(clearTimeout(I),x=setTimeout(function(){_t(Error("timeout"))},3e3)):Jr.data.status==="done"?(clearTimeout(x),typeof Jr.data.response!="undefined"?Ie(Jr.data.response):_t(Error("unknown_error"))):(clearTimeout(I),clearTimeout(x),_t(Error("invalid_response"))))},M={messageChannel:Re,onMessage:b},o.a.push(M),Re.port1.addEventListener("message",b),o.c.postMessage({eventType:u,eventId:v,data:y},[Re.port2])):_t(Error("connection_unavailable"))}).then(function(Ie){return mm(o,M),Ie}).o(function(Ie){throw mm(o,M),Ie})}function mm(o,u){if(u){var f=u.messageChannel,p=u.onMessage;f&&(f.port1.removeEventListener("message",p),f.port1.close()),Zn(o.a,function(v){return v==u})}}VI.prototype.close=function(){for(;0<this.a.length;)mm(this,this.a[0]);this.b=!0};function qI(){if(!_m())throw new k("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var o=this;tr()&&self?(this.v=h2(),UI(this.v,"keyChanged",function(u,f){return KI(o).then(function(p){return 0<p.length&&ke(o.a,function(v){v(p)}),{keyProcessed:zr(p,f.key)}})}),UI(this.v,"ping",function(){return Z(["keyChanged"])})):CM().then(function(u){(o.h=u)&&(o.g=new VI(new jI(u)),BI(o.g,"ping",null,!0).then(function(f){f[0].fulfilled&&zr(f[0].value,"keyChanged")&&(o.s=!0)}).o(function(){}))})}var gm;function p2(o){return new ve(function(u,f){var p=o.m.deleteDatabase("firebaseLocalStorageDb");p.onsuccess=function(){u()},p.onerror=function(v){f(Error(v.target.error))}})}function WI(o){return new ve(function(u,f){var p=o.m.open("firebaseLocalStorageDb",1);p.onerror=function(v){try{v.preventDefault()}catch(y){}f(Error(v.target.error))},p.onupgradeneeded=function(v){v=v.target.result;try{v.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(y){f(y)}},p.onsuccess=function(v){v=v.target.result,v.objectStoreNames.contains("firebaseLocalStorage")?u(v):p2(o).then(function(){return WI(o)}).then(function(y){u(y)}).o(function(y){f(y)})}})}function ym(o){return o.i||(o.i=WI(o)),o.i}function Tf(o,u){function f(v,y){ym(o).then(u).then(v).o(function(b){if(3<++p)y(b);else return ym(o).then(function(I){return I.close(),o.i=void 0,f(v,y)}).o(function(I){y(I)})})}var p=0;return new ve(f)}function _m(){try{return!!l.indexedDB}catch(o){return!1}}function ju(o){return o.objectStore("firebaseLocalStorage")}function Vu(o,u){return o.transaction(["firebaseLocalStorage"],u?"readwrite":"readonly")}function Us(o){return new ve(function(u,f){o.onsuccess=function(p){p&&p.target?u(p.target.result):u()},o.onerror=function(p){f(p.target.error)}})}e=qI.prototype,e.set=function(o,u){var f=this,p=!1;return Tf(this,function(v){return v=ju(Vu(v,!0)),Us(v.get(o))}).then(function(v){return Tf(f,function(y){if(y=ju(Vu(y,!0)),v)return v.value=u,Us(y.put(v));f.b++,p=!0;var b={};return b.fbase_key=o,b.value=u,Us(y.add(b))})}).then(function(){return f.c[o]=u,GI(f,o)}).oa(function(){p&&f.b--})};function GI(o,u){return o.g&&o.h&&SM()===o.h?BI(o.g,"keyChanged",{key:u},o.s).then(function(){}).o(function(){}):Z()}e.get=function(o){return Tf(this,function(u){return Us(ju(Vu(u,!1)).get(o))}).then(function(u){return u&&u.value})},e.U=function(o){var u=this,f=!1;return Tf(this,function(p){return f=!0,u.b++,Us(ju(Vu(p,!0)).delete(o))}).then(function(){return delete u.c[o],GI(u,o)}).oa(function(){f&&u.b--})};function KI(o){return ym(o).then(function(u){var f=ju(Vu(u,!1));return f.getAll?Us(f.getAll()):new ve(function(p,v){var y=[],b=f.openCursor();b.onsuccess=function(I){(I=I.target.result)?(y.push(I.value),I.continue()):p(y)},b.onerror=function(I){v(I.target.error)}})}).then(function(u){var f={},p=[];if(o.b==0){for(p=0;p<u.length;p++)f[u[p].fbase_key]=u[p].value;p=vE(o.c,f),o.c=f}return p})}e.ca=function(o){this.a.length==0&&d2(this),this.a.push(o)},e.ia=function(o){Zn(this.a,function(u){return u==o}),this.a.length==0&&HI(this)};function d2(o){function u(){o.f=setTimeout(function(){o.l=KI(o).then(function(f){0<f.length&&ke(o.a,function(p){p(f)})}).then(function(){u()}).o(function(f){f.message!="STOP_EVENT"&&u()})},800)}HI(o),u()}function HI(o){o.l&&o.l.cancel("STOP_EVENT"),o.f&&(clearTimeout(o.f),o.f=null)}function zI(o){var u=this,f=null;this.a=[],this.type="indexedDB",this.c=o,this.b=Z().then(function(){if(_m()){var p=bo(),v="__sak"+p;return gm||(gm=new qI),f=gm,f.set(v,p).then(function(){return f.get(v)}).then(function(y){if(y!==p)throw Error("indexedDB not supported!");return f.U(v)}).then(function(){return f}).o(function(){return u.c})}return u.c}).then(function(p){return u.type=p.type,p.ca(function(v){ke(u.a,function(y){y(v)})}),p})}e=zI.prototype,e.get=function(o){return this.b.then(function(u){return u.get(o)})},e.set=function(o,u){return this.b.then(function(f){return f.set(o,u)})},e.U=function(o){return this.b.then(function(u){return u.U(o)})},e.ca=function(o){this.a.push(o)},e.ia=function(o){Zn(this.a,function(u){return u==o})};function Bu(){this.a={},this.type="inMemory"}e=Bu.prototype,e.get=function(o){return Z(this.a[o])},e.set=function(o,u){return this.a[o]=u,Z()},e.U=function(o){return delete this.a[o],Z()},e.ca=function(){},e.ia=function(){};function Sf(){if(!v2())throw Ir()=="Node"?new k("internal-error","The LocalStorage compatibility library was not found."):new k("web-storage-unsupported");this.a=QI()||K.INTERNAL.node.localStorage,this.type="localStorage"}function QI(){try{var o=l.localStorage,u=bo();return o&&(o.setItem(u,"1"),o.removeItem(u)),o}catch(f){return null}}function v2(){var o=Ir()=="Node";if(o=QI()||o&&K.INTERNAL.node&&K.INTERNAL.node.localStorage,!o)return!1;try{return o.setItem("__sak","1"),o.removeItem("__sak"),!0}catch(u){return!1}}e=Sf.prototype,e.get=function(o){var u=this;return Z().then(function(){var f=u.a.getItem(o);return Ds(f)})},e.set=function(o,u){var f=this;return Z().then(function(){var p=Eu(u);p===null?f.U(o):f.a.setItem(o,p)})},e.U=function(o){var u=this;return Z().then(function(){u.a.removeItem(o)})},e.ca=function(o){l.window&&Ln(l.window,"storage",o)},e.ia=function(o){l.window&&In(l.window,"storage",o)};function bm(){this.type="nullStorage"}e=bm.prototype,e.get=function(){return Z(null)},e.set=function(){return Z()},e.U=function(){return Z()},e.ca=function(){},e.ia=function(){};function wm(){if(!m2())throw Ir()=="Node"?new k("internal-error","The SessionStorage compatibility library was not found."):new k("web-storage-unsupported");this.a=YI()||K.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function YI(){try{var o=l.sessionStorage,u=bo();return o&&(o.setItem(u,"1"),o.removeItem(u)),o}catch(f){return null}}function m2(){var o=Ir()=="Node";if(o=YI()||o&&K.INTERNAL.node&&K.INTERNAL.node.sessionStorage,!o)return!1;try{return o.setItem("__sak","1"),o.removeItem("__sak"),!0}catch(u){return!1}}e=wm.prototype,e.get=function(o){var u=this;return Z().then(function(){var f=u.a.getItem(o);return Ds(f)})},e.set=function(o,u){var f=this;return Z().then(function(){var p=Eu(u);p===null?f.U(o):f.a.setItem(o,p)})},e.U=function(o){var u=this;return Z().then(function(){u.a.removeItem(o)})},e.ca=function(){},e.ia=function(){};function g2(){var o={};o.Browser=y2,o.Node=_2,o.ReactNative=b2,o.Worker=w2,this.a=o[Ir()]}var Em,y2={F:Sf,cb:wm},_2={F:Sf,cb:wm},b2={F:LI,cb:bm},w2={F:Sf,cb:bm},js={rd:"local",NONE:"none",td:"session"};function E2(o){var u=new k("invalid-persistence-type"),f=new k("unsupported-persistence-type");e:{for(p in js)if(js[p]==o){var p=!0;break e}p=!1}if(!p||typeof o!="string")throw u;switch(Ir()){case"ReactNative":if(o==="session")throw f;break;case"Node":if(o!=="none")throw f;break;case"Worker":if(o==="session"||!_m()&&o!=="none")throw f;break;default:if(!Ev()&&o!=="none")throw f}}function XI(){var o=!!(!EE(Tt())&&bv()),u=wu(),f=Ev();this.m=o,this.h=u,this.l=f,this.a={},Em||(Em=new g2),o=Em;try{this.g=!yv()&&TE()||!l.indexedDB?new o.a.F:new zI(tr()?new Bu:new o.a.F)}catch(p){this.g=new Bu,this.h=!0}try{this.i=new o.a.cb}catch(p){this.i=new Bu}this.v=new Bu,this.f=P(this.Zb,this),this.b={}}var Im;function qu(){return Im||(Im=new XI),Im}function ko(o,u){switch(u){case"session":return o.i;case"none":return o.v;default:return o.g}}function Vs(o,u){return"firebase:"+o.name+(u?":"+u:"")}function I2(o,u,f){var p=Vs(u,f),v=ko(o,u.F);return o.get(u,f).then(function(y){var b=null;try{b=Ds(l.localStorage.getItem(p))}catch(I){}if(b&&!y)return l.localStorage.removeItem(p),o.set(u,b,f);b&&y&&v.type!="localStorage"&&l.localStorage.removeItem(p)})}e=XI.prototype,e.get=function(o,u){return ko(this,o.F).get(Vs(o,u))};function Bs(o,u,f){return f=Vs(u,f),u.F=="local"&&(o.b[f]=null),ko(o,u.F).U(f)}e.set=function(o,u,f){var p=Vs(o,f),v=this,y=ko(this,o.F);return y.set(p,u).then(function(){return y.get(p)}).then(function(b){o.F=="local"&&(v.b[p]=b)})},e.addListener=function(o,u,f){o=Vs(o,u),this.l&&(this.b[o]=l.localStorage.getItem(o)),fo(this.a)&&(ko(this,"local").ca(this.f),this.h||(yv()||!TE())&&l.indexedDB||!this.l||T2(this)),this.a[o]||(this.a[o]=[]),this.a[o].push(f)},e.removeListener=function(o,u,f){o=Vs(o,u),this.a[o]&&(Zn(this.a[o],function(p){return p==f}),this.a[o].length==0&&delete this.a[o]),fo(this.a)&&(ko(this,"local").ia(this.f),Tm(this))};function T2(o){Tm(o),o.c=setInterval(function(){for(var u in o.a){var f=l.localStorage.getItem(u),p=o.b[u];f!=p&&(o.b[u]=f,f=new vo({type:"storage",key:u,target:window,oldValue:p,newValue:f,a:!0}),o.Zb(f))}},1e3)}function Tm(o){o.c&&(clearInterval(o.c),o.c=null)}e.Zb=function(o){if(o&&o.g){var u=o.a.key;if(u==null)for(var f in this.a){var p=this.b[f];typeof p=="undefined"&&(p=null);var v=l.localStorage.getItem(f);v!==p&&(this.b[f]=v,this.nb(f))}else if(u.indexOf("firebase:")==0&&this.a[u]){if(typeof o.a.a!="undefined"?ko(this,"local").ia(this.f):Tm(this),this.m){if(f=l.localStorage.getItem(u),p=o.a.newValue,p!==f)p!==null?l.localStorage.setItem(u,p):l.localStorage.removeItem(u);else if(this.b[u]===p&&typeof o.a.a=="undefined")return}var y=this;f=function(){(typeof o.a.a!="undefined"||y.b[u]!==l.localStorage.getItem(u))&&(y.b[u]=l.localStorage.getItem(u),y.nb(u))},er&&yi&&yi==10&&l.localStorage.getItem(u)!==o.a.newValue&&o.a.newValue!==o.a.oldValue?setTimeout(f,10):f()}}else ke(o,P(this.nb,this))},e.nb=function(o){this.a[o]&&ke(this.a[o],function(u){u()})};function S2(o){this.a=o,this.b=qu()}var Sm={name:"authEvent",F:"local"};function C2(o){return o.b.get(Sm,o.a).then(function(u){return rI(u)})}function A2(){this.a=qu()}function k2(){this.b=-1}function Cf(o,u){this.b=$I,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=o,this.h=u,this.l=l.Int32Array?new Int32Array(64):Array(64),Af===void 0&&(l.Int32Array?Af=new Int32Array(eT):Af=eT),this.reset()}var Af;X(Cf,k2);for(var $I=64,R2=$I-1,JI=[],Cm=0;Cm<R2;Cm++)JI[Cm]=0;var ZI=Gd(128,JI);Cf.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):lo(this.h)};function Am(o){for(var u=o.f,f=o.l,p=0,v=0;v<u.length;)f[p++]=u[v]<<24|u[v+1]<<16|u[v+2]<<8|u[v+3],v=4*p;for(u=16;64>u;u++){v=f[u-15]|0,p=f[u-2]|0;var y=(f[u-16]|0)+((v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3)|0,b=(f[u-7]|0)+((p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10)|0;f[u]=y+b|0}p=o.a[0]|0,v=o.a[1]|0;var I=o.a[2]|0,x=o.a[3]|0,M=o.a[4]|0,ie=o.a[5]|0,Re=o.a[6]|0;for(y=o.a[7]|0,u=0;64>u;u++){var Ie=((p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10))+(p&v^p&I^v&I)|0;b=M&ie^~M&Re,y=y+((M>>>6|M<<26)^(M>>>11|M<<21)^(M>>>25|M<<7))|0,b=b+(Af[u]|0)|0,b=y+(b+(f[u]|0)|0)|0,y=Re,Re=ie,ie=M,M=x+b|0,x=I,I=v,v=p,p=b+Ie|0}o.a[0]=o.a[0]+p|0,o.a[1]=o.a[1]+v|0,o.a[2]=o.a[2]+I|0,o.a[3]=o.a[3]+x|0,o.a[4]=o.a[4]+M|0,o.a[5]=o.a[5]+ie|0,o.a[6]=o.a[6]+Re|0,o.a[7]=o.a[7]+y|0}function km(o,u,f){f===void 0&&(f=u.length);var p=0,v=o.c;if(typeof u=="string")for(;p<f;)o.f[v++]=u.charCodeAt(p++),v==o.b&&(Am(o),v=0);else if(w(u))for(;p<f;){var y=u[p++];if(!(typeof y=="number"&&0<=y&&255>=y&&y==(y|0)))throw Error("message must be a byte array");o.f[v++]=y,v==o.b&&(Am(o),v=0)}else throw Error("message must be string or array");o.c=v,o.g+=f}var eT=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function tT(){Cf.call(this,8,N2)}X(tT,Cf);var N2=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function nT(o,u,f,p,v,y){this.v=o,this.i=u,this.l=f,this.m=p||null,this.u=v||null,this.s=y,this.h=u+":"+f,this.C=new A2,this.g=new S2(this.h),this.f=null,this.b=[],this.a=this.c=null}function kf(o){return new k("invalid-cordova-configuration",o)}e=nT.prototype,e.ma=function(){return this.Ia?this.Ia:this.Ia=EM().then(function(){if(typeof Be("universalLinks.subscribe",l)!="function")throw kf("cordova-universal-links-plugin-fix is not installed");if(typeof Be("BuildInfo.packageName",l)=="undefined")throw kf("cordova-plugin-buildinfo is not installed");if(typeof Be("cordova.plugins.browsertab.openUrl",l)!="function")throw kf("cordova-plugin-browsertab is not installed");if(typeof Be("cordova.InAppBrowser.open",l)!="function")throw kf("cordova-plugin-inappbrowser is not installed")},function(){throw new k("cordova-not-ready")})};function O2(){for(var o=20,u=[];0<o;)u.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),o--;return u.join("")}function x2(o){var u=new tT;km(u,o),o=[];var f=8*u.g;56>u.c?km(u,ZI,56-u.c):km(u,ZI,u.b-(u.c-56));for(var p=63;56<=p;p--)u.f[p]=f&255,f/=256;for(Am(u),p=f=0;p<u.i;p++)for(var v=24;0<=v;v-=8)o[f++]=u.a[p]>>v&255;return qM(o)}e.Pb=function(o,u){return u(new k("operation-not-supported-in-this-environment")),Z()},e.Nb=function(){return Ve(new k("operation-not-supported-in-this-environment"))},e.ac=function(){return!1},e.Yb=function(){return!0},e.Ub=function(){return!0},e.Ob=function(o,u,f,p){if(this.c)return Ve(new k("redirect-operation-pending"));var v=this,y=l.document,b=null,I=null,x=null,M=null;return this.c=Z().then(function(){return Gv(u),iT(v)}).then(function(){return P2(v,o,u,f,p)}).then(function(){return new ve(function(ie,Re){I=function(){var Ie=Be("cordova.plugins.browsertab.close",l);return ie(),typeof Ie=="function"&&Ie(),v.a&&typeof v.a.close=="function"&&(v.a.close(),v.a=null),!1},v.Ea(I),x=function(){b||(b=ks(2e3).then(function(){Re(new k("redirect-cancelled-by-user"))}))},M=function(){Iv()&&x()},y.addEventListener("resume",x,!1),Tt().toLowerCase().match(/android/)||y.addEventListener("visibilitychange",M,!1)}).o(function(ie){return Rm(v).then(function(){throw ie})})}).oa(function(){x&&y.removeEventListener("resume",x,!1),M&&y.removeEventListener("visibilitychange",M,!1),b&&b.cancel(),I&&v.Ta(I),v.c=null})};function P2(o,u,f,p,v){var y=O2(),b=new nr(u,p,null,y,new k("no-auth-event"),null,v),I=Be("BuildInfo.packageName",l);if(typeof I!="string")throw new k("invalid-cordova-configuration");var x=Be("BuildInfo.displayName",l),M={};if(Tt().toLowerCase().match(/iphone|ipad|ipod/))M.ibi=I;else if(Tt().toLowerCase().match(/android/))M.apn=I;else return Ve(new k("operation-not-supported-in-this-environment"));x&&(M.appDisplayName=x),y=x2(y),M.sessionId=y;var ie=Uu(o.v,o.i,o.l,u,f,null,p,o.m,M,o.u,v,o.s);return o.ma().then(function(){var Re=o.h;return o.C.a.set(Sm,b.w(),Re)}).then(function(){var Re=Be("cordova.plugins.browsertab.isAvailable",l);if(typeof Re!="function")throw new k("invalid-cordova-configuration");var Ie=null;Re(function(_t){if(_t){if(Ie=Be("cordova.plugins.browsertab.openUrl",l),typeof Ie!="function")throw new k("invalid-cordova-configuration");Ie(ie)}else{if(Ie=Be("cordova.InAppBrowser.open",l),typeof Ie!="function")throw new k("invalid-cordova-configuration");_t=Tt(),o.a=Ie(ie,_t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||_t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function rT(o,u){for(var f=0;f<o.b.length;f++)try{o.b[f](u)}catch(p){}}function iT(o){return o.f||(o.f=o.ma().then(function(){return new ve(function(u){function f(p){return u(p),o.Ta(f),!1}o.Ea(f),D2(o)})})),o.f}function Rm(o){var u=null;return C2(o.g).then(function(f){return u=f,f=o.g,Bs(f.b,Sm,f.a)}).then(function(){return u})}function D2(o){function u(b){p=!0,v&&v.cancel(),Rm(o).then(function(I){var x=f;if(I&&b&&b.url){var M=null;x=YE(b.url),x.indexOf("/__/auth/callback")!=-1&&(M=mn(x),M=Ds(Mn(M,"firebaseError")||null),M=(M=typeof M=="object"?lu(M):null)?new nr(I.c,I.b,null,null,M,null,I.T()):new nr(I.c,I.b,x,I.f,null,null,I.T())),x=M||f}rT(o,x)})}var f=new nr("unknown",null,null,null,new k("no-auth-event")),p=!1,v=ks(500).then(function(){return Rm(o).then(function(){p||rT(o,f)})}),y=l.handleOpenURL;l.handleOpenURL=function(b){if(b.toLowerCase().indexOf(Be("BuildInfo.packageName",l).toLowerCase()+"://")==0&&u({url:b}),typeof y=="function")try{y(b)}catch(I){console.error(I)}},Kv||(Kv=new XM),$M(u)}e.Ea=function(o){this.b.push(o),iT(this).o(function(u){u.code==="auth/invalid-cordova-configuration"&&(u=new nr("unknown",null,null,null,new k("no-auth-event")),o(u))})},e.Ta=function(o){Zn(this.b,function(u){return u==o})};function L2(o){this.a=o,this.b=qu()}var Nm={name:"pendingRedirect",F:"session"};function M2(o){return o.b.set(Nm,"pending",o.a)}function Om(o){return Bs(o.b,Nm,o.a)}function F2(o){return o.b.get(Nm,o.a).then(function(u){return u=="pending"})}function Rf(o,u,f,p){this.i={},this.u=0,this.D=o,this.v=u,this.m=f,this.J=p,this.h=[],this.f=!1,this.l=P(this.s,this),this.b=new Of,this.C=new dT,this.g=new L2(fT(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=oT(this.D,this.v,this.m,mi,this.J)}function oT(o,u,f,p,v){var y=K.SDK_VERSION||null;return _v()?new nT(o,u,f,y,p,v):new OI(o,u,f,y,p,v)}Rf.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=oT(this.D,this.v,this.m,null,this.J),this.i={}};function sT(o){o.f||(o.f=!0,o.a.Ea(o.l));var u=o.a;return o.a.ma().o(function(f){throw o.a==u&&o.reset(),f})}function aT(o){o.a.Yb()&&sT(o).o(function(u){var f=new nr("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Pm(u)&&o.s(f)}),o.a.Ub()||hT(o.b)}function Nf(o,u){zr(o.h,u)||o.h.push(u),o.f||F2(o.g).then(function(f){f?Om(o.g).then(function(){sT(o).o(function(p){var v=new nr("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Pm(p)&&o.s(v)})}):aT(o)}).o(function(){aT(o)})}function xm(o,u){Zn(o.h,function(f){return f==u})}Rf.prototype.s=function(o){if(!o)throw new k("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),o&&o.getUid()&&this.i.hasOwnProperty(o.getUid()))return!1;for(var u=!1,f=0;f<this.h.length;f++){var p=this.h[f];if(p.Gb(o.c,o.b)){(u=this.c[o.c])&&(u.h(o,p),o&&(o.f||o.b)&&(this.i[o.getUid()]=!0,this.u=Date.now())),u=!0;break}}return hT(this.b),u};var U2=new wi(2e3,1e4),j2=new wi(3e4,6e4);Rf.prototype.ra=function(){return this.b.ra()};function uT(o,u,f,p,v,y,b){return o.a.Nb(u,f,p,function(){o.f||(o.f=!0,o.a.Ea(o.l))},function(){o.reset()},v,y,b)}function Pm(o){return!!(o&&o.code=="auth/cordova-not-ready")}function cT(o,u,f,p,v){var y;return M2(o.g).then(function(){return o.a.Ob(u,f,p,v).o(function(b){if(Pm(b))throw new k("operation-not-supported-in-this-environment");return y=b,Om(o.g).then(function(){throw y})}).then(function(){return o.a.ac()?new ve(function(){}):Om(o.g).then(function(){return o.ra()}).then(function(){}).o(function(){})})})}function lT(o,u,f,p,v){return o.a.Pb(p,function(y){u.na(f,null,y,v)},U2.get())}var Dm={};function fT(o,u,f){return o=o+":"+u,f&&(o=o+":"+f.url),o}function Lm(o,u,f,p){var v=fT(u,f,p);return Dm[v]||(Dm[v]=new Rf(o,u,f,p)),Dm[v]}function Of(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}Of.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Of.prototype.h=function(o,u){if(o){this.reset(),this.g=!0;var f=o.c,p=o.b,v=o.a&&o.a.code=="auth/web-storage-unsupported",y=o.a&&o.a.code=="auth/operation-not-supported-in-this-environment";this.i=!(!v&&!y),f!="unknown"||v||y?o.a?(Ro(this,!0,null,o.a),Z()):u.Fa(f,p)?V2(this,o,u):Ve(new k("invalid-auth-event")):(Ro(this,!1,null,null),Z())}else Ve(new k("invalid-auth-event"))};function hT(o){o.g||(o.g=!0,Ro(o,!1,null,null))}function xf(o){o.g&&!o.i&&Ro(o,!1,null,null)}function V2(o,u,f){f=f.Fa(u.c,u.b);var p=u.g,v=u.f,y=u.i,b=u.T(),I=!!u.c.match(/Redirect$/);f(p,v,b,y).then(function(x){Ro(o,I,x,null)}).o(function(x){Ro(o,I,null,x)})}function B2(o,u){if(o.b=function(){return Ve(u)},o.c.length)for(var f=0;f<o.c.length;f++)o.c[f](u)}function pT(o,u){if(o.b=function(){return Z(u)},o.f.length)for(var f=0;f<o.f.length;f++)o.f[f](u)}function Ro(o,u,f,p){u?p?B2(o,p):pT(o,f):pT(o,{user:null}),o.f=[],o.c=[]}Of.prototype.ra=function(){var o=this;return new ve(function(u,f){o.b?o.b().then(u,f):(o.f.push(u),o.c.push(f),q2(o))})};function q2(o){var u=new k("timeout");o.a&&o.a.cancel(),o.a=ks(j2.get()).then(function(){o.b||(o.g=!0,Ro(o,!0,null,u))})}function dT(){}dT.prototype.h=function(o,u){if(o){var f=o.c,p=o.b;o.a?(u.na(o.c,null,o.a,o.b),Z()):u.Fa(f,p)?W2(o,u):Ve(new k("invalid-auth-event"))}else Ve(new k("invalid-auth-event"))};function W2(o,u){var f=o.b,p=o.c;u.Fa(p,f)(o.g,o.f,o.T(),o.i).then(function(v){u.na(p,v,null,f)}).o(function(v){u.na(p,null,v,f)})}function vT(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(o){this.jb=o},enumerable:!1})}function Mm(o,u){this.a=u,Y(this,"verificationId",o)}Mm.prototype.confirm=function(o){return o=nI(this.verificationId,o),this.a(o)};function Fm(o,u,f,p){return new Xr(o).gb(u,f).then(function(v){return new Mm(v,p)})}function G2(o){var u=BE(o);if(!(u&&u.exp&&u.auth_time&&u.iat))throw new k("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");zt(this,{token:o,expirationTime:Iu(1e3*u.exp),authTime:Iu(1e3*u.auth_time),issuedAtTime:Iu(1e3*u.iat),signInProvider:u.firebase&&u.firebase.sign_in_provider?u.firebase.sign_in_provider:null,signInSecondFactor:u.firebase&&u.firebase.sign_in_second_factor?u.firebase.sign_in_second_factor:null,claims:u})}function Um(o,u,f){var p=u&&u[gT];if(!p)throw new k("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=o,this.f=gi(u),this.g=f,this.c=new af(null,p),this.b=[];var v=this;ke(u[mT]||[],function(y){(y=Rv(y))&&v.b.push(y)}),Y(this,"auth",this.a),Y(this,"session",this.c),Y(this,"hints",this.b)}var mT="mfaInfo",gT="mfaPendingCredential";Um.prototype.Rc=function(o){var u=this;return o.tb(this.a.a,this.c).then(function(f){var p=gi(u.f);return delete p[mT],delete p[gT],pn(p,f),u.g(p)})};function jm(o,u,f,p){k.call(this,"multi-factor-auth-required",p,u),this.b=new Um(o,u,f),Y(this,"resolver",this.b)}X(jm,k);function yT(o,u,f){if(o&&T(o.serverResponse)&&o.code==="auth/multi-factor-auth-required")try{return new jm(u,o.serverResponse,f,o.message)}catch(p){}return null}function _T(){}_T.prototype.tb=function(o,u,f){return u.type==Au?K2(this,o,u,f):H2(this,o,u)};function K2(o,u,f,p){return f.Ha().then(function(v){return v={idToken:v},typeof p!="undefined"&&(v.displayName=p),pn(v,{phoneVerificationInfo:ku(o.a)}),ge(u,DF,v)})}function H2(o,u,f){return f.Ha().then(function(p){return p={mfaPendingCredential:p},pn(p,{phoneVerificationInfo:ku(o.a)}),ge(u,LF,p)})}function Vm(o){Y(this,"factorId",o.fa),this.a=o}X(Vm,_T);function bT(o){if(Vm.call(this,o),this.a.fa!=Xr.PROVIDER_ID)throw new k("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}X(bT,Vm);function qs(o,u){vn.call(this,o);for(var f in u)this[f]=u[f]}X(qs,vn);function Bm(o,u){this.a=o,this.b=[],this.c=P(this.yc,this),Ln(this.a,"userReloaded",this.c);var f=[];u&&u.multiFactor&&u.multiFactor.enrolledFactors&&ke(u.multiFactor.enrolledFactors,function(p){var v=null,y={};if(p){p.uid&&(y[Ov]=p.uid),p.displayName&&(y[CE]=p.displayName),p.enrollmentTime&&(y[Nv]=new Date(p.enrollmentTime).toISOString()),p.phoneNumber&&(y[xv]=p.phoneNumber);try{v=new Tu(y)}catch(b){}p=v}else p=null;p&&f.push(p)}),Pf(this,f)}function z2(o){var u=[];return ke(o.mfaInfo||[],function(f){(f=Rv(f))&&u.push(f)}),u}e=Bm.prototype,e.yc=function(o){Pf(this,z2(o.hd))};function Pf(o,u){o.b=u,Y(o,"enrolledFactors",u)}e.Sb=function(){return this.a.I().then(function(o){return new af(o,null)})},e.fc=function(o,u){var f=this,p=this.a.a;return this.Sb().then(function(v){return o.tb(p,v,u)}).then(function(v){return Cr(f.a,v),f.a.reload()})},e.bd=function(o){var u=this,f=typeof o=="string"?o:o.uid,p=this.a.a;return this.a.I().then(function(v){return ge(p,t2,{idToken:v,mfaEnrollmentId:f})}).then(function(v){var y=TL(u.b,function(b){return b.uid!=f});return Pf(u,y),Cr(u.a,v),u.a.reload().o(function(b){if(b.code!="auth/user-token-expired")throw b})})},e.w=function(){return{multiFactor:{enrolledFactors:Fl(this.b,function(o){return o.w()})}}};function qm(o,u,f){if(this.h=o,this.i=u,this.g=f,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}qm.prototype.start=function(){this.a=this.c,Wm(this,!0)};function Q2(o,u){return u?(o.a=o.c,o.g()):(u=o.a,o.a*=2,o.a>o.f&&(o.a=o.f),u)}function Wm(o,u){o.stop(),o.b=ks(Q2(o,u)).then(function(){return TM()}).then(function(){return o.h()}).then(function(){Wm(o,!0)}).o(function(f){o.i(f)&&Wm(o,!1)})}qm.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)};function Gm(o){this.f=o,this.b=this.a=null,this.c=Date.now()}Gm.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}};function wT(o,u){typeof u=="undefined"&&(o.b?(u=o.b,u=u.a-u.g):u=0),o.c=Date.now()+1e3*u}function ET(o,u){o.b=of(u[ir]||""),o.a=u.refreshToken,u=u.expiresIn,wT(o,typeof u!="undefined"?Number(u):void 0)}function Y2(o,u){o.b=u.b,o.a=u.a,o.c=u.c}function X2(o,u){return yF(o.f,u).then(function(f){return o.b=of(f.access_token),o.a=f.refresh_token,wT(o,f.expires_in),{accessToken:o.b.toString(),refreshToken:o.a}}).o(function(f){throw f.code=="auth/user-token-expired"&&(o.a=null),f})}Gm.prototype.getToken=function(o){return o=!!o,this.b&&!this.a?Ve(new k("user-token-expired")):o||!this.b||Date.now()>this.c-3e4?this.a?X2(this,{grant_type:"refresh_token",refresh_token:this.a}):Z(null):Z({accessToken:this.b.toString(),refreshToken:this.a})};function Df(o,u){this.a=o||null,this.b=u||null,zt(this,{lastSignInTime:Iu(u||null),creationTime:Iu(o||null)})}function $2(o){return new Df(o.a,o.b)}Df.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}};function J2(o,u,f,p,v,y){zt(this,{uid:o,displayName:p||null,photoURL:v||null,email:f||null,phoneNumber:y||null,providerId:u})}function Sn(o,u,f){this.N=[],this.l=o.apiKey,this.m=o.appName,this.s=o.authDomain||null;var p=K.SDK_VERSION?xs(K.SDK_VERSION):null;this.a=new rr(this.l,Kr(mi),p),(this.u=o.emulatorConfig||null)&&Ef(this.a,this.u),this.h=new Gm(this.a),$m(this,u[ir]),ET(this.h,u),Y(this,"refreshToken",this.h.a),TT(this,f||{}),Ht.call(this),this.P=!1,this.s&&_o()&&(this.b=Lm(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=Z2(this),this.ba=P(this.ib,this);var v=this;this.za=null,this.Pa=function(y){v.xa(y.h)},this.qa=null,this.Ba=function(y){Km(v,y.c)},this.$=null,this.aa=[],this.Oa=function(y){Wu(v,y.f)},this.ja=null,this.S=new Bm(this,f),Y(this,"multiFactor",this.S)}X(Sn,Ht),Sn.prototype.xa=function(o){this.za=o,yI(this.a,o)};function Km(o,u){o.u=u,Ef(o.a,u),o.b&&(u=o.b,o.b=Lm(o.s,o.l,o.m,o.u),o.P&&(xm(u,o),Nf(o.b,o)))}Sn.prototype.la=function(){return this.za};function Hm(o,u){o.qa&&In(o.qa,"languageCodeChanged",o.Pa),(o.qa=u)&&Ln(u,"languageCodeChanged",o.Pa)}function zm(o,u){o.$&&In(o.$,"emulatorConfigChanged",o.Ba),(o.$=u)&&Ln(u,"emulatorConfigChanged",o.Ba)}function Wu(o,u){o.aa=u,_I(o.a,K.SDK_VERSION?xs(K.SDK_VERSION,o.aa):null)}Sn.prototype.Ga=function(){return lo(this.aa)};function Qm(o,u){o.ja&&In(o.ja,"frameworkChanged",o.Oa),(o.ja=u)&&Ln(u,"frameworkChanged",o.Oa)}Sn.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())};function Ym(o){try{return K.app(o.m).auth()}catch(u){throw new k("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+o.m+"'!")}}function Z2(o){return new qm(function(){return o.I(!0)},function(u){return!!(u&&u.code=="auth/network-request-failed")},function(){var u=o.h.c-Date.now()-3e5;return 0<u?u:0})}function IT(o){o.J||o.D.b||(o.D.start(),In(o,"tokenChanged",o.ba),Ln(o,"tokenChanged",o.ba))}function Xm(o){In(o,"tokenChanged",o.ba),o.D.stop()}function $m(o,u){o.Aa=u,Y(o,"_lat",u)}function eU(o,u){Zn(o.W,function(f){return f==u})}function No(o){for(var u=[],f=0;f<o.W.length;f++)u.push(o.W[f](o));return j0(u).then(function(){return o})}function Gu(o){o.b&&!o.P&&(o.P=!0,Nf(o.b,o))}function TT(o,u){zt(o,{uid:u.uid,displayName:u.displayName||null,photoURL:u.photoURL||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,isAnonymous:u.isAnonymous||!1,tenantId:u.tenantId||null,metadata:new Df(u.createdAt,u.lastLoginAt),providerData:[]}),o.a.b=o.tenantId}Y(Sn.prototype,"providerId","firebase");function ST(){}function Jm(o){return Z().then(function(){if(o.J)throw new k("app-deleted")})}function Zm(o){return Fl(o.providerData,function(u){return u.providerId})}function eg(o,u){u&&(CT(o,u.providerId),o.providerData.push(u))}function CT(o,u){Zn(o.providerData,function(f){return f.providerId==u})}function Ti(o,u,f){(u!="uid"||f)&&o.hasOwnProperty(u)&&Y(o,u,f)}function Lf(o,u){o!=u&&(zt(o,{uid:u.uid,displayName:u.displayName,photoURL:u.photoURL,email:u.email,emailVerified:u.emailVerified,phoneNumber:u.phoneNumber,isAnonymous:u.isAnonymous,tenantId:u.tenantId,providerData:[]}),u.metadata?Y(o,"metadata",$2(u.metadata)):Y(o,"metadata",new Df),ke(u.providerData,function(f){eg(o,f)}),Y2(o.h,u.h),Y(o,"refreshToken",o.h.a),Pf(o.S,u.S.b))}e=Sn.prototype,e.reload=function(){var o=this;return ft(this,Jm(this).then(function(){return tg(o).then(function(){return No(o)}).then(ST)}))};function tg(o){return o.I().then(function(u){var f=o.isAnonymous;return tU(o,u).then(function(){return f||Ti(o,"isAnonymous",!1),u})})}e.oc=function(o){return this.I(o).then(function(u){return new G2(u)})},e.I=function(o){var u=this;return ft(this,Jm(this).then(function(){return u.h.getToken(o)}).then(function(f){if(!f)throw new k("internal-error");return f.accessToken!=u.Aa&&($m(u,f.accessToken),u.dispatchEvent(new qs("tokenChanged"))),Ti(u,"refreshToken",f.refreshToken),f.accessToken}))};function Cr(o,u){u[ir]&&o.Aa!=u[ir]&&(ET(o.h,u),o.dispatchEvent(new qs("tokenChanged")),$m(o,u[ir]),Ti(o,"refreshToken",o.h.a))}function tU(o,u){return ge(o.a,MF,{idToken:u}).then(P(o.Kc,o))}e.Kc=function(o){if(o=o.users,!o||!o.length)throw new k("internal-error");o=o[0],TT(this,{uid:o.localId,displayName:o.displayName,photoURL:o.photoUrl,email:o.email,emailVerified:!!o.emailVerified,phoneNumber:o.phoneNumber,lastLoginAt:o.lastLoginAt,createdAt:o.createdAt,tenantId:o.tenantId});for(var u=nU(o),f=0;f<u.length;f++)eg(this,u[f]);Ti(this,"isAnonymous",!(this.email&&o.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new qs("userReloaded",{hd:o}))};function nU(o){return(o=o.providerUserInfo)&&o.length?Fl(o,function(u){return new J2(u.rawId,u.providerId,u.email,u.displayName,u.photoUrl,u.phoneNumber)}):[]}e.Lc=function(o){return Tv("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(o)},e.ub=function(o){var u=this,f=null;return ft(this,o.c(this.a,this.uid).then(function(p){return Cr(u,p),f=Ku(u,p,"reauthenticate"),u.i=null,u.reload()}).then(function(){return f}),!0)};function Mf(o,u){return tg(o).then(function(){if(zr(Zm(o),u))return No(o).then(function(){throw new k("provider-already-linked")})})}e.Cc=function(o){return Tv("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(o)},e.rb=function(o){var u=this,f=null;return ft(this,Mf(this,o.providerId).then(function(){return u.I()}).then(function(p){return o.b(u.a,p)}).then(function(p){return f=Ku(u,p,"link"),AT(u,p)}).then(function(){return f}))},e.Dc=function(o,u){var f=this;return ft(this,Mf(this,"phone").then(function(){return Fm(Ym(f),o,u,P(f.rb,f))}))},e.Mc=function(o,u){var f=this;return ft(this,Z().then(function(){return Fm(Ym(f),o,u,P(f.ub,f))}),!0)};function Ku(o,u,f){var p=Wv(u);return u=WE(u),Tr({user:o,credential:p,additionalUserInfo:u,operationType:f})}function AT(o,u){return Cr(o,u),o.reload().then(function(){return o})}e.Cb=function(o){var u=this;return ft(this,this.I().then(function(f){return u.a.Cb(f,o)}).then(function(f){return Cr(u,f),u.reload()}))},e.ed=function(o){var u=this;return ft(this,this.I().then(function(f){return o.b(u.a,f)}).then(function(f){return Cr(u,f),u.reload()}))},e.Db=function(o){var u=this;return ft(this,this.I().then(function(f){return u.a.Db(f,o)}).then(function(f){return Cr(u,f),u.reload()}))},e.Eb=function(o){if(o.displayName===void 0&&o.photoURL===void 0)return Jm(this);var u=this;return ft(this,this.I().then(function(f){return u.a.Eb(f,{displayName:o.displayName,photoUrl:o.photoURL})}).then(function(f){return Cr(u,f),Ti(u,"displayName",f.displayName||null),Ti(u,"photoURL",f.photoUrl||null),ke(u.providerData,function(p){p.providerId==="password"&&(Y(p,"displayName",u.displayName),Y(p,"photoURL",u.photoURL))}),No(u)}).then(ST))},e.cd=function(o){var u=this;return ft(this,tg(this).then(function(f){return zr(Zm(u),o)?SF(u.a,f,[o]).then(function(p){var v={};return ke(p.providerUserInfo||[],function(y){v[y.providerId]=!0}),ke(Zm(u),function(y){v[y]||CT(u,y)}),v[Xr.PROVIDER_ID]||Y(u,"phoneNumber",null),No(u)}):No(u).then(function(){throw new k("no-such-provider")})}))},e.delete=function(){var o=this;return ft(this,this.I().then(function(u){return ge(o.a,NF,{idToken:u})}).then(function(){o.dispatchEvent(new qs("userDeleted"))})).then(function(){for(var u=0;u<o.N.length;u++)o.N[u].cancel("app-deleted");Hm(o,null),zm(o,null),Qm(o,null),o.N=[],o.J=!0,Xm(o),Y(o,"refreshToken",null),o.b&&xm(o.b,o)})},e.Gb=function(o,u){return!!(o=="linkViaPopup"&&(this.g||null)==u&&this.f||o=="reauthViaPopup"&&(this.g||null)==u&&this.f||o=="linkViaRedirect"&&(this.ga||null)==u||o=="reauthViaRedirect"&&(this.ga||null)==u)},e.na=function(o,u,f,p){o!="linkViaPopup"&&o!="reauthViaPopup"||p!=(this.g||null)||(f&&this.C?this.C(f):u&&!f&&this.f&&this.f(u),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(o,u){return o=="linkViaPopup"&&u==(this.g||null)?P(this.Lb,this):o=="reauthViaPopup"&&u==(this.g||null)?P(this.Mb,this):o=="linkViaRedirect"&&(this.ga||null)==u?P(this.Lb,this):o=="reauthViaRedirect"&&(this.ga||null)==u?P(this.Mb,this):null},e.Ec=function(o){var u=this;return kT(this,"linkViaPopup",o,function(){return Mf(u,o.providerId).then(function(){return No(u)})},!1)},e.Nc=function(o){return kT(this,"reauthViaPopup",o,function(){return Z()},!0)};function kT(o,u,f,p,v){if(!_o())return Ve(new k("operation-not-supported-in-this-environment"));if(o.i&&!v)return Ve(o.i);var y=Fv(f.providerId),b=bo(o.uid+":::"),I=null;(!wu()||bv())&&o.s&&f.isOAuthProvider&&(I=Uu(o.s,o.l,o.m,u,f,null,b,K.SDK_VERSION||null,null,null,o.tenantId,o.u));var x=gE(I,y&&y.va,y&&y.ua);return p=p().then(function(){if(NT(o),!v)return o.I().then(function(){})}).then(function(){return uT(o.b,x,u,f,b,!!I,o.tenantId)}).then(function(){return new ve(function(M,ie){o.na(u,null,new k("cancelled-popup-request"),o.g||null),o.f=M,o.C=ie,o.g=b,o.c=lT(o.b,o,u,x,b)})}).then(function(M){return x&&yo(x),M?Tr(M):null}).o(function(M){throw x&&yo(x),M}),ft(o,p,v)}e.Fc=function(o){var u=this;return RT(this,"linkViaRedirect",o,function(){return Mf(u,o.providerId)},!1)},e.Oc=function(o){return RT(this,"reauthViaRedirect",o,function(){return Z()},!0)};function RT(o,u,f,p,v){if(!_o())return Ve(new k("operation-not-supported-in-this-environment"));if(o.i&&!v)return Ve(o.i);var y=null,b=bo(o.uid+":::");return p=p().then(function(){if(NT(o),!v)return o.I().then(function(){})}).then(function(){return o.ga=b,No(o)}).then(function(I){return o.ha&&(I=o.ha,I=I.b.set(ng,o.w(),I.a)),I}).then(function(){return cT(o.b,u,f,b,o.tenantId)}).o(function(I){if(y=I,o.ha)return xT(o.ha);throw y}).then(function(){if(y)throw y}),ft(o,p,v)}function NT(o){if(!o.b||!o.P)throw o.b&&!o.P?new k("internal-error"):new k("auth-domain-config-required")}e.Lb=function(o,u,f,p){var v=this;this.c&&(this.c.cancel(),this.c=null);var y=null;return f=this.I().then(function(b){return lm(v.a,{requestUri:o,postBody:p,sessionId:u,idToken:b})}).then(function(b){return y=Ku(v,b,"link"),AT(v,b)}).then(function(){return y}),ft(this,f)},e.Mb=function(o,u,f,p){var v=this;this.c&&(this.c.cancel(),this.c=null);var y=null,b=Z().then(function(){return Ms(fm(v.a,{requestUri:o,sessionId:u,postBody:p,tenantId:f}),v.uid)}).then(function(I){return y=Ku(v,I,"reauthenticate"),Cr(v,I),v.i=null,v.reload()}).then(function(){return y});return ft(this,b,!0)},e.vb=function(o){var u=this,f=null;return ft(this,this.I().then(function(p){return f=p,typeof o=="undefined"||fo(o)?{}:nf(new tf(o))}).then(function(p){return u.a.vb(f,p)}).then(function(p){if(u.email!=p)return u.reload()}).then(function(){}))},e.Fb=function(o,u){var f=this,p=null;return ft(this,this.I().then(function(v){return p=v,typeof u=="undefined"||fo(u)?{}:nf(new tf(u))}).then(function(v){return f.a.Fb(p,o,v)}).then(function(v){if(f.email!=v)return f.reload()}).then(function(){}))};function ft(o,u,f){var p=rU(o,u,f);return o.N.push(p),p.oa(function(){Ul(o.N,p)}),p.o(function(v){var y=null;throw v&&v.code==="auth/multi-factor-auth-required"&&(y=yT(v.w(),Ym(o),P(o.jc,o))),y||v})}e.jc=function(o){var u=null,f=this;return o=Ms(Z(o),f.uid).then(function(p){return u=Ku(f,p,"reauthenticate"),Cr(f,p),f.i=null,f.reload()}).then(function(){return u}),ft(this,o,!0)};function rU(o,u,f){return o.i&&!f?(u.cancel(),Ve(o.i)):u.o(function(p){throw!p||p.code!="auth/user-disabled"&&p.code!="auth/user-token-expired"||(o.i||o.dispatchEvent(new qs("userInvalidated")),o.i=p),p})}e.toJSON=function(){return this.w()},e.w=function(){var o={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&pn(o,this.metadata.w()),ke(this.providerData,function(u){o.providerData.push(AM(u))}),pn(o,this.S.w()),o};function OT(o){if(!o.apiKey)return null;var u={apiKey:o.apiKey,authDomain:o.authDomain,appName:o.appName,emulatorConfig:o.emulatorConfig},f={};if(o.stsTokenManager&&o.stsTokenManager.accessToken){f[ir]=o.stsTokenManager.accessToken,f.refreshToken=o.stsTokenManager.refreshToken||null;var p=o.stsTokenManager.expirationTime;p&&(f.expiresIn=(p-Date.now())/1e3)}else return null;var v=new Sn(u,f,o);return o.providerData&&ke(o.providerData,function(y){y&&eg(v,Tr(y))}),o.redirectEventId&&(v.ga=o.redirectEventId),v}function iU(o,u,f,p){var v=new Sn(o,u);return f&&(v.ha=f),p&&Wu(v,p),v.reload().then(function(){return v})}function oU(o,u,f,p){var v=o.h,y={};return y[ir]=v.b&&v.b.toString(),y.refreshToken=v.a,u=new Sn(u||{apiKey:o.l,authDomain:o.s,appName:o.m},y),f&&(u.ha=f),p&&Wu(u,p),Lf(u,o),u}function sU(o){this.a=o,this.b=qu()}var ng={name:"redirectUser",F:"session"};function xT(o){return Bs(o.b,ng,o.a)}function aU(o,u){return o.b.get(ng,o.a).then(function(f){return f&&u&&(f.authDomain=u),OT(f||{})})}function rg(o){this.a=o,this.b=qu(),this.c=null,this.f=uU(this),this.b.addListener(Ar("local"),this.a,P(this.g,this))}rg.prototype.g=function(){var o=this,u=Ar("local");Ws(this,function(){return Z().then(function(){return o.c&&o.c.F!="local"?o.b.get(u,o.a):null}).then(function(f){if(f)return ig(o,"local").then(function(){o.c=u})})})};function ig(o,u){var f=[],p;for(p in js)js[p]!==u&&f.push(Bs(o.b,Ar(js[p]),o.a));return f.push(Bs(o.b,og,o.a)),$L(f)}function uU(o){var u=Ar("local"),f=Ar("session"),p=Ar("none");return I2(o.b,u,o.a).then(function(){return o.b.get(f,o.a)}).then(function(v){return v?f:o.b.get(p,o.a).then(function(y){return y?p:o.b.get(u,o.a).then(function(b){return b?u:o.b.get(og,o.a).then(function(I){return I?Ar(I):u})})})}).then(function(v){return o.c=v,ig(o,v.F)}).o(function(){o.c||(o.c=u)})}var og={name:"persistence",F:"session"};function Ar(o){return{name:"authUser",F:o}}rg.prototype.yb=function(o){var u=null,f=this;return E2(o),Ws(this,function(){return o!=f.c.F?f.b.get(f.c,f.a).then(function(p){return u=p,ig(f,o)}).then(function(){if(f.c=Ar(o),u)return f.b.set(f.c,u,f.a)}):Z()})};function cU(o){return Ws(o,function(){return o.b.set(og,o.c.F,o.a)})}function PT(o,u){return Ws(o,function(){return o.b.set(o.c,u.w(),o.a)})}function DT(o){return Ws(o,function(){return Bs(o.b,o.c,o.a)})}function LT(o,u,f){return Ws(o,function(){return o.b.get(o.c,o.a).then(function(p){return p&&u&&(p.authDomain=u),p&&f&&(p.emulatorConfig=f),OT(p||{})})})}function Ws(o,u){return o.f=o.f.then(u,u),o.f}function or(o){if(this.l=!1,Y(this,"settings",new vT),Y(this,"app",o),xe(this).options&&xe(this).options.apiKey)o=K.SDK_VERSION?xs(K.SDK_VERSION):null,this.a=new rr(xe(this).options&&xe(this).options.apiKey,Kr(mi),o);else throw new k("invalid-api-key");this.P=[],this.s=[],this.N=[],this.Pa=K.INTERNAL.createSubscribe(P(this.zc,this)),this.W=void 0,this.ib=K.INTERNAL.createSubscribe(P(this.Ac,this)),Gs(this,null),this.i=new rg(xe(this).options.apiKey+":"+xe(this).name),this.D=new sU(xe(this).options.apiKey+":"+xe(this).name),this.$=Ye(this,vU(this)),this.h=Ye(this,mU(this)),this.ba=!1,this.ja=P(this.Zc,this),this.Ba=P(this.da,this),this.qa=P(this.mc,this),this.za=P(this.wc,this),this.Aa=P(this.xc,this),this.b=null,hU(this),this.INTERNAL={},this.INTERNAL.delete=P(this.delete,this),this.INTERNAL.logFramework=P(this.Gc,this),this.u=0,Ht.call(this),fU(this),this.J=[],this.R=null}X(or,Ht);function MT(o){vn.call(this,"languageCodeChanged"),this.h=o}X(MT,vn);function FT(o){vn.call(this,"emulatorConfigChanged"),this.c=o}X(FT,vn);function UT(o){vn.call(this,"frameworkChanged"),this.f=o}X(UT,vn),e=or.prototype,e.yb=function(o){return o=this.i.yb(o),Ye(this,o)},e.xa=function(o){this.aa===o||this.l||(this.aa=o,yI(this.a,this.aa),this.dispatchEvent(new MT(this.la())))},e.la=function(){return this.aa},e.fd=function(){var o=l.navigator;this.xa(o&&(o.languages&&o.languages[0]||o.language||o.userLanguage)||null)},e.gd=function(o,u){if(!this.R){if(!/^https?:\/\//.test(o))throw new k("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");u=u?!!u.disableWarnings:!1,lU(u),this.R={url:o,ec:u},this.settings.jb=!0,Ef(this.a,this.R),this.dispatchEvent(new FT(this.R))}};function lU(o){typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!o&&Jl().then(function(){var u=l.document.createElement("div");u.innerText="Running in emulator mode. Do not use with production credentials.",u.style.position="fixed",u.style.width="100%",u.style.backgroundColor="#ffffff",u.style.border=".1em solid #000000",u.style.color="#b50000",u.style.bottom="0px",u.style.left="0px",u.style.margin="0px",u.style.zIndex=1e4,u.style.textAlign="center",u.classList.add("firebase-emulator-warning"),l.document.body.appendChild(u)})}e.Gc=function(o){this.J.push(o),_I(this.a,K.SDK_VERSION?xs(K.SDK_VERSION,this.J):null),this.dispatchEvent(new UT(this.J))},e.Ga=function(){return lo(this.J)},e.zb=function(o){this.S===o||this.l||(this.S=o,this.a.b=this.S)},e.T=function(){return this.S};function fU(o){Object.defineProperty(o,"lc",{get:function(){return this.la()},set:function(u){this.xa(u)},enumerable:!1}),o.aa=null,Object.defineProperty(o,"ti",{get:function(){return this.T()},set:function(u){this.zb(u)},enumerable:!1}),o.S=null,Object.defineProperty(o,"emulatorConfig",{get:function(){if(this.R){var u=mn(this.R.url);u=Tr({protocol:u.c,host:u.a,port:u.g,options:Tr({disableWarnings:this.R.ec})})}else u=null;return u},enumerable:!1})}e.toJSON=function(){return{apiKey:xe(this).options.apiKey,authDomain:xe(this).options.authDomain,appName:xe(this).name,currentUser:fe(this)&&fe(this).w()}};function sg(o){return o.Oa||Ve(new k("auth-domain-config-required"))}function hU(o){var u=xe(o).options.authDomain,f=xe(o).options.apiKey;u&&_o()&&(o.Oa=o.$.then(function(){if(!o.l){if(o.b=Lm(u,f,xe(o).name,o.R),Nf(o.b,o),fe(o)&&Gu(fe(o)),o.m){Gu(o.m);var p=o.m;p.xa(o.la()),Hm(p,o),p=o.m,Wu(p,o.J),Qm(p,o),p=o.m,Km(p,o.R),zm(p,o),o.m=null}return o.b}}))}e.Gb=function(o,u){switch(o){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==u&&!!this.f;default:return!1}},e.na=function(o,u,f,p){o=="signInViaPopup"&&this.g==p&&(f&&this.C?this.C(f):u&&!f&&this.f&&this.f(u),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(o,u){return o=="signInViaRedirect"||o=="signInViaPopup"&&this.g==u&&this.f?P(this.ic,this):null},e.ic=function(o,u,f,p){var v=this,y={requestUri:o,postBody:p,sessionId:u,tenantId:f};return this.c&&(this.c.cancel(),this.c=null),v.$.then(function(){return Oo(v,cm(v.a,y))})},e.Xc=function(o){if(!_o())return Ve(new k("operation-not-supported-in-this-environment"));var u=this,f=Fv(o.providerId),p=bo(),v=null;(!wu()||bv())&&xe(this).options.authDomain&&o.isOAuthProvider&&(v=Uu(xe(this).options.authDomain,xe(this).options.apiKey,xe(this).name,"signInViaPopup",o,null,p,K.SDK_VERSION||null,null,null,this.T(),this.R));var y=gE(v,f&&f.va,f&&f.ua);return f=sg(this).then(function(b){return uT(b,y,"signInViaPopup",o,p,!!v,u.T())}).then(function(){return new ve(function(b,I){u.na("signInViaPopup",null,new k("cancelled-popup-request"),u.g),u.f=b,u.C=I,u.g=p,u.c=lT(u.b,u,"signInViaPopup",y,p)})}).then(function(b){return y&&yo(y),b?Tr(b):null}).o(function(b){throw y&&yo(y),b}),Ye(this,f)},e.Yc=function(o){if(!_o())return Ve(new k("operation-not-supported-in-this-environment"));var u=this,f=sg(this).then(function(){return cU(u.i)}).then(function(){return cT(u.b,"signInViaRedirect",o,void 0,u.T())});return Ye(this,f)};function jT(o){if(!_o())return Ve(new k("operation-not-supported-in-this-environment"));var u=sg(o).then(function(){return o.b.ra()}).then(function(f){return f?Tr(f):null});return Ye(o,u)}e.ra=function(){var o=this;return jT(this).then(function(u){return o.b&&xf(o.b.b),u}).o(function(u){throw o.b&&xf(o.b.b),u})},e.dd=function(o){if(!o)return Ve(new k("null-user"));if(this.S!=o.tenantId)return Ve(new k("tenant-id-mismatch"));var u=this,f={};f.apiKey=xe(this).options.apiKey,f.authDomain=xe(this).options.authDomain,f.appName=xe(this).name;var p=oU(o,f,u.D,u.Ga());return Ye(this,this.h.then(function(){if(xe(u).options.apiKey!=o.l)return p.reload()}).then(function(){return fe(u)&&o.uid==fe(u).uid?(Lf(fe(u),o),u.da(o)):(Gs(u,p),Gu(p),u.da(p))}).then(function(){Hu(u)}))};function pU(o,u){var f={};return f.apiKey=xe(o).options.apiKey,f.authDomain=xe(o).options.authDomain,f.appName=xe(o).name,o.R&&(f.emulatorConfig=o.R),o.$.then(function(){return iU(f,u,o.D,o.Ga())}).then(function(p){return fe(o)&&p.uid==fe(o).uid?(Lf(fe(o),p),o.da(p)):(Gs(o,p),Gu(p),o.da(p))}).then(function(){Hu(o)})}function Gs(o,u){fe(o)&&(eU(fe(o),o.Ba),In(fe(o),"tokenChanged",o.qa),In(fe(o),"userDeleted",o.za),In(fe(o),"userInvalidated",o.Aa),Xm(fe(o))),u&&(u.W.push(o.Ba),Ln(u,"tokenChanged",o.qa),Ln(u,"userDeleted",o.za),Ln(u,"userInvalidated",o.Aa),0<o.u&&IT(u)),Y(o,"currentUser",u),u&&(u.xa(o.la()),Hm(u,o),Wu(u,o.J),Qm(u,o),Km(u,o.R),zm(u,o))}e.Bb=function(){var o=this,u=this.h.then(function(){return o.b&&xf(o.b.b),fe(o)?(Gs(o,null),DT(o.i).then(function(){Hu(o)})):Z()});return Ye(this,u)};function dU(o){var u=aU(o.D,xe(o).options.authDomain).then(function(f){return(o.m=f)&&(f.ha=o.D),xT(o.D)});return Ye(o,u)}function vU(o){var u=xe(o).options.authDomain,f=dU(o).then(function(){return LT(o.i,u,o.R)}).then(function(p){return p?(p.ha=o.D,o.m&&(o.m.ga||null)==(p.ga||null)?p:p.reload().then(function(){return PT(o.i,p).then(function(){return p})}).o(function(v){return v.code=="auth/network-request-failed"?p:DT(o.i)})):null}).then(function(p){Gs(o,p||null)});return Ye(o,f)}function mU(o){return o.$.then(function(){return jT(o)}).o(function(){}).then(function(){if(!o.l)return o.ja()}).o(function(){}).then(function(){if(!o.l){o.ba=!0;var u=o.i;u.b.addListener(Ar("local"),u.a,o.ja)}})}e.Zc=function(){var o=this;return LT(this.i,xe(this).options.authDomain).then(function(u){if(!o.l){var f;if(f=fe(o)&&u){f=fe(o).uid;var p=u.uid;f=f==null||f===""||p===void 0||p===null||p===""?!1:f==p}if(f)return Lf(fe(o),u),fe(o).I();(fe(o)||u)&&(Gs(o,u),u&&(Gu(u),u.ha=o.D),o.b&&Nf(o.b,o),Hu(o))}})},e.da=function(o){return PT(this.i,o)},e.mc=function(){Hu(this),this.da(fe(this))},e.wc=function(){this.Bb()},e.xc=function(){this.Bb()};function Oo(o,u){var f=null,p=null;return Ye(o,u.then(function(v){return f=Wv(v),p=WE(v),pU(o,v)},function(v){var y=null;throw v&&v.code==="auth/multi-factor-auth-required"&&(y=yT(v.w(),o,P(o.kc,o))),y||v}).then(function(){return Tr({user:fe(o),credential:f,additionalUserInfo:p,operationType:"signIn"})}))}e.kc=function(o){var u=this;return this.h.then(function(){return Oo(u,Z(o))})},e.zc=function(o){var u=this;this.addAuthTokenListener(function(){o.next(fe(u))})},e.Ac=function(o){var u=this;gU(this,function(){o.next(fe(u))})},e.Ic=function(o,u,f){var p=this;return this.ba&&Promise.resolve().then(function(){typeof o=="function"?o(fe(p)):typeof o.next=="function"&&o.next(fe(p))}),this.Pa(o,u,f)},e.Hc=function(o,u,f){var p=this;return this.ba&&Promise.resolve().then(function(){p.W=p.getUid(),typeof o=="function"?o(fe(p)):typeof o.next=="function"&&o.next(fe(p))}),this.ib(o,u,f)},e.nc=function(o){var u=this,f=this.h.then(function(){return fe(u)?fe(u).I(o).then(function(p){return{accessToken:p}}):null});return Ye(this,f)},e.Tc=function(o){var u=this;return this.h.then(function(){return Oo(u,ge(u.a,$F,{token:o}))}).then(function(f){var p=f.user;return Ti(p,"isAnonymous",!1),u.da(p),f})},e.Uc=function(o,u){var f=this;return this.h.then(function(){return Oo(f,ge(f.a,kI,{email:o,password:u}))})},e.dc=function(o,u){var f=this;return this.h.then(function(){return Oo(f,ge(f.a,kF,{email:o,password:u}))})},e.ab=function(o){var u=this;return this.h.then(function(){return Oo(u,o.ka(u.a))})},e.Sc=function(o){return Tv("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(o)},e.Ab=function(){var o=this;return this.h.then(function(){var u=fe(o);if(u&&u.isAnonymous){var f=Tr({providerId:null,isNewUser:!1});return Tr({user:u,credential:null,additionalUserInfo:f,operationType:"signIn"})}return Oo(o,o.a.Ab()).then(function(p){var v=p.user;return Ti(v,"isAnonymous",!0),o.da(v),p})})};function xe(o){return o.app}function fe(o){return o.currentUser}e.getUid=function(){return fe(this)&&fe(this).uid||null};function Ff(o){return fe(o)&&fe(o)._lat||null}function Hu(o){if(o.ba){for(var u=0;u<o.s.length;u++)o.s[u]&&o.s[u](Ff(o));if(o.W!==o.getUid()&&o.N.length)for(o.W=o.getUid(),u=0;u<o.N.length;u++)o.N[u]&&o.N[u](Ff(o))}}e.cc=function(o){this.addAuthTokenListener(o),this.u++,0<this.u&&fe(this)&&IT(fe(this))},e.Pc=function(o){var u=this;ke(this.s,function(f){f==o&&u.u--}),0>this.u&&(this.u=0),this.u==0&&fe(this)&&Xm(fe(this)),this.removeAuthTokenListener(o)},e.addAuthTokenListener=function(o){var u=this;this.s.push(o),Ye(this,this.h.then(function(){u.l||zr(u.s,o)&&o(Ff(u))}))},e.removeAuthTokenListener=function(o){Zn(this.s,function(u){return u==o})};function gU(o,u){o.N.push(u),Ye(o,o.h.then(function(){!o.l&&zr(o.N,u)&&o.W!==o.getUid()&&(o.W=o.getUid(),u(Ff(o)))}))}e.delete=function(){this.l=!0;for(var o=0;o<this.P.length;o++)this.P[o].cancel("app-deleted");return this.P=[],this.i&&(o=this.i,o.b.removeListener(Ar("local"),o.a,this.ja)),this.b&&(xm(this.b,this),xf(this.b.b)),Promise.resolve()};function Ye(o,u){return o.P.push(u),u.oa(function(){Ul(o.P,u)}),u}e.hc=function(o){return Ye(this,_F(this.a,o))},e.Bc=function(o){return!!qv(o)},e.xb=function(o,u){var f=this;return Ye(this,Z().then(function(){var p=new tf(u);if(!p.c)throw new k("argument-error",Lv+" must be true when sending sign in link to email");return nf(p)}).then(function(p){return f.a.xb(o,p)}).then(function(){}))},e.jd=function(o){return this.Sa(o).then(function(u){return u.data.email})},e.ob=function(o,u){return Ye(this,this.a.ob(o,u).then(function(){}))},e.Sa=function(o){return Ye(this,this.a.Sa(o).then(function(u){return new RM(u)}))},e.kb=function(o){return Ye(this,this.a.kb(o).then(function(){}))},e.wb=function(o,u){var f=this;return Ye(this,Z().then(function(){return typeof u=="undefined"||fo(u)?{}:nf(new tf(u))}).then(function(p){return f.a.wb(o,p)}).then(function(){}))},e.Wc=function(o,u){return Ye(this,Fm(this,o,u,P(this.ab,this)))},e.Vc=function(o,u){var f=this;return Ye(this,Z().then(function(){var p=u||bu(),v=tI(o,p);if(p=qv(p),!p)throw new k("argument-error","Invalid email link!");if(p.tenantId!==f.T())throw new k("tenant-id-mismatch");return f.ab(v)}))};function zu(){}zu.prototype.render=function(){},zu.prototype.reset=function(){},zu.prototype.getResponse=function(){},zu.prototype.execute=function(){};function Ks(){this.a={},this.b=1e12}var ag=null;Ks.prototype.render=function(o,u){return this.a[this.b.toString()]=new Uf(o,u),this.b++},Ks.prototype.reset=function(o){var u=ug(this,o);o=VT(o),u&&o&&(u.delete(),delete this.a[o])},Ks.prototype.getResponse=function(o){return(o=ug(this,o))?o.getResponse():null},Ks.prototype.execute=function(o){(o=ug(this,o))&&o.execute()};function ug(o,u){return(u=VT(u))&&o.a[u]||null}function VT(o){return(o=typeof o=="undefined"?1e12:o)?o.toString():null}function Uf(o,u){this.g=!1,this.c=u,this.a=this.b=null,this.h=this.c.size!=="invisible",this.f=pu(o);var f=this;this.i=function(){f.execute()},this.h?this.execute():Ln(this.f,"click",this.i)}Uf.prototype.getResponse=function(){return cg(this),this.b},Uf.prototype.execute=function(){cg(this);var o=this;this.a||(this.a=setTimeout(function(){o.b=IM();var u=o.c.callback,f=o.c["expired-callback"];if(u)try{u(o.b)}catch(p){}o.a=setTimeout(function(){if(o.a=null,o.b=null,f)try{f()}catch(p){}o.h&&o.execute()},6e4)},500))},Uf.prototype.delete=function(){cg(this),this.g=!0,clearTimeout(this.a),this.a=null,In(this.f,"click",this.i)};function cg(o){if(o.g)throw Error("reCAPTCHA mock was already deleted!")}function lg(){}Y(lg,"FACTOR_ID","phone");function fg(){}fg.prototype.g=function(){return ag||(ag=new Ks),Z(ag)},fg.prototype.c=function(){};var hg=null;function pg(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var yU=new wr(jl,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),_U=new wi(3e4,6e4);pg.prototype.g=function(o){var u=this;return new ve(function(f,p){var v=setTimeout(function(){p(new k("network-request-failed"))},_U.get());if(!l.grecaptcha||o!==u.f&&!u.b){l[u.a]=function(){if(l.grecaptcha){u.f=o;var b=l.grecaptcha.render;l.grecaptcha.render=function(I,x){return I=b(I,x),u.b++,I},clearTimeout(v),f(l.grecaptcha)}else clearTimeout(v),p(new k("internal-error"));delete l[u.a]};var y=zd(yU,{onload:u.a,hl:o||""});Z(nm(y)).o(function(){clearTimeout(v),p(new k("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(v),f(l.grecaptcha)})},pg.prototype.c=function(){this.b--};var dg=null;function vg(o,u,f,p,v,y,b){if(Y(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=u,this.g=null,b?(hg||(hg=new fg),b=hg):(dg||(dg=new pg),b=dg),this.m=b,this.a=f||{theme:"light",type:"image"},this.h=[],this.a[WT])throw new k("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i=this.a[bU]==="invisible",!l.document)throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!pu(u)||!this.i&&pu(u).hasChildNodes())throw new k("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new rr(o,y||null,v||null),this.u=p||function(){return null};var I=this;this.l=[];var x=this.a[BT];this.a[BT]=function(ie){if(GT(I,ie),typeof x=="function")x(ie);else if(typeof x=="string"){var Re=Be(x,l);typeof Re=="function"&&Re(ie)}};var M=this.a[qT];this.a[qT]=function(){if(GT(I,null),typeof M=="function")M();else if(typeof M=="string"){var ie=Be(M,l);typeof ie=="function"&&ie()}}}var BT="callback",qT="expired-callback",WT="sitekey",bU="size";function GT(o,u){for(var f=0;f<o.l.length;f++)try{o.l[f](u)}catch(p){}}function wU(o,u){Zn(o.l,function(f){return f==u})}function mg(o,u){return o.h.push(u),u.oa(function(){Ul(o.h,u)}),u}e=vg.prototype,e.Ia=function(){var o=this;return this.f?this.f:this.f=mg(this,Z().then(function(){if(Zl()&&!tr())return Jl();throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return o.m.g(o.u())}).then(function(u){return o.g=u,ge(o.s,qF,{})}).then(function(u){o.a[WT]=u.recaptchaSiteKey}).o(function(u){throw o.f=null,u}))},e.render=function(){jf(this);var o=this;return mg(this,this.Ia().then(function(){if(o.c===null){var u=o.v;if(!o.i){var f=pu(u);u=zL("DIV"),f.appendChild(u)}o.c=o.g.render(u,o.a)}return o.c}))},e.verify=function(){jf(this);var o=this;return mg(this,this.render().then(function(u){return new ve(function(f){var p=o.g.getResponse(u);if(p)f(p);else{var v=function(y){y&&(wU(o,v),f(y))};o.l.push(v),o.i&&o.g.execute(o.c)}})}))},e.reset=function(){jf(this),this.c!==null&&this.g.reset(this.c)};function jf(o){if(o.J)throw new k("internal-error","RecaptchaVerifier instance has been destroyed.")}e.clear=function(){jf(this),this.J=!0,this.m.c();for(var o=0;o<this.h.length;o++)this.h[o].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){o=pu(this.v);for(var u;u=o.firstChild;)o.removeChild(u)}};function gg(o,u,f){var p=!1;try{this.b=f||K.app()}catch(b){throw new k("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)f=this.b.options.apiKey;else throw new k("invalid-api-key");var v=this,y=null;try{y=this.b.auth().Ga()}catch(b){}try{p=this.b.auth().settings.appVerificationDisabledForTesting}catch(b){}y=K.SDK_VERSION?xs(K.SDK_VERSION,y):null,vg.call(this,f,o,u,function(){try{var b=v.b.auth().la()}catch(I){b=null}return b},y,Kr(mi),p)}X(gg,vg);function KT(o,u,f,p){e:{f=Array.prototype.slice.call(f);for(var v=0,y=!1,b=0;b<u.length;b++)if(u[b].optional)y=!0;else{if(y)throw new k("internal-error","Argument validator encountered a required argument after an optional argument.");v++}if(y=u.length,f.length<v||y<f.length)p="Expected "+(v==y?v==1?"1 argument":v+" arguments":v+"-"+y+" arguments")+" but got "+f.length+".";else{for(v=0;v<f.length;v++)if(y=u[v].optional&&f[v]===void 0,!u[v].M(f[v])&&!y){if(u=u[v],0>v||v>=HT.length)throw new k("internal-error","Argument validator received an unsupported number of arguments.");f=HT[v],p=(p?"":f+" argument ")+(u.name?'"'+u.name+'" ':"")+"must be "+u.K+".";break e}p=null}}if(p)throw new k("argument-error",o+" failed: "+p)}var HT="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Q(o,u){return{name:o||"",K:"a valid string",optional:!!u,M:function(f){return typeof f=="string"}}}function yg(o,u){return{name:o||"",K:"a boolean",optional:!!u,M:function(f){return typeof f=="boolean"}}}function rt(o,u){return{name:o||"",K:"a valid object",optional:!!u,M:T}}function Hs(o,u){return{name:o||"",K:"a function",optional:!!u,M:function(f){return typeof f=="function"}}}function kr(o,u){return{name:o||"",K:"null",optional:!!u,M:function(f){return f===null}}}function EU(){return{name:"",K:"an HTML element",optional:!1,M:function(o){return!!(o&&o instanceof Element)}}}function IU(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(o){return!!(o&&o instanceof or)}}}function TU(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(o){return!!(o&&o instanceof K.app.App)}}}function Si(o){return{name:o?o+"Credential":"credential",K:o?"a valid "+o+" credential":"a valid credential",optional:!1,M:function(u){if(!u)return!1;var f=!o||u.providerId===o;return!(!u.ka||!f)}}}function zT(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(o){return o?!!o.tb:!1}}}function zs(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(o){return!!(o&&o.providerId&&o.hasOwnProperty&&o.hasOwnProperty("isOAuthProvider"))}}}function _g(o,u){return T(o)&&typeof o.type=="string"&&o.type===u&&typeof o.Ha=="function"}function QT(o){return T(o)&&typeof o.uid=="string"}function Vf(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(o){return!(!o||typeof o.type!="string"||typeof o.verify!="function")}}}function et(o,u,f,p){return{name:f||"",K:o.K+" or "+u.K,optional:!!p,M:function(v){return o.M(v)||u.M(v)}}}function He(o,u){for(var f in u){var p=u[f].name;o[p]=XT(p,o[f],u[f].j)}}function YT(o,u){for(var f in u){var p=u[f].name;p!==f&&Object.defineProperty(o,p,{get:ue(function(v){return this[v]},f),set:ue(function(v,y,b,I){KT(v,[b],[I],!0),this[y]=I},p,f,u[f].lb),enumerable:!0})}}function tt(o,u,f,p){o[u]=XT(u,f,p)}function XT(o,u,f){function p(){var b=Array.prototype.slice.call(arguments);return KT(v,f,b),u.apply(this,b)}if(!f)return u;var v=SU(o),y;for(y in u)p[y]=u[y];for(y in u.prototype)p.prototype[y]=u.prototype[y];return p}function SU(o){return o=o.split("."),o[o.length-1]}He(or.prototype,{kb:{name:"applyActionCode",j:[Q("code")]},Sa:{name:"checkActionCode",j:[Q("code")]},ob:{name:"confirmPasswordReset",j:[Q("code"),Q("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Q("email"),Q("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Q("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Q("emailLink")]},Hc:{name:"onAuthStateChanged",j:[et(rt(),Hs(),"nextOrObserver"),Hs("opt_error",!0),Hs("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[et(rt(),Hs(),"nextOrObserver"),Hs("opt_error",!0),Hs("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Q("email"),et(rt("opt_actionCodeSettings",!0),kr(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Q("email"),rt("actionCodeSettings")]},yb:{name:"setPersistence",j:[Q("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Si()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Si()]},Tc:{name:"signInWithCustomToken",j:[Q("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Q("email"),Q("password")]},Vc:{name:"signInWithEmailLink",j:[Q("email"),Q("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Q("phoneNumber"),Vf()]},Xc:{name:"signInWithPopup",j:[zs()]},Yc:{name:"signInWithRedirect",j:[zs()]},dd:{name:"updateCurrentUser",j:[et(function(o){return{name:"user",K:"an instance of Firebase User",optional:!!o,M:function(u){return!!(u&&u instanceof Sn)}}}(),kr(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Q(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Q("url"),rt("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Q("code")]}}),YT(or.prototype,{lc:{name:"languageCode",lb:et(Q(),kr(),"languageCode")},ti:{name:"tenantId",lb:et(Q(),kr(),"tenantId")}}),or.Persistence=js,or.Persistence.LOCAL="local",or.Persistence.SESSION="session",or.Persistence.NONE="none",He(Sn.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[yg("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[yg("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Si()]},rb:{name:"linkWithCredential",j:[Si()]},Dc:{name:"linkWithPhoneNumber",j:[Q("phoneNumber"),Vf()]},Ec:{name:"linkWithPopup",j:[zs()]},Fc:{name:"linkWithRedirect",j:[zs()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Si()]},ub:{name:"reauthenticateWithCredential",j:[Si()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Q("phoneNumber"),Vf()]},Nc:{name:"reauthenticateWithPopup",j:[zs()]},Oc:{name:"reauthenticateWithRedirect",j:[zs()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[et(rt("opt_actionCodeSettings",!0),kr(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Q(null,!0)]},cd:{name:"unlink",j:[Q("provider")]},Cb:{name:"updateEmail",j:[Q("email")]},Db:{name:"updatePassword",j:[Q("password")]},ed:{name:"updatePhoneNumber",j:[Si("phone")]},Eb:{name:"updateProfile",j:[rt("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Q("email"),et(rt("opt_actionCodeSettings",!0),kr(null,!0),"opt_actionCodeSettings",!0)]}}),He(Ks.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),He(zu.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),He(ve.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),YT(vT.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:yg("appVerificationDisabledForTesting")}}),He(Mm.prototype,{confirm:{name:"confirm",j:[Q("verificationCode")]}}),tt(Ls,"fromJSON",function(o){o=typeof o=="string"?JSON.parse(o):o;for(var u,f=[zM,QM,YM,HM],p=0;p<f.length;p++)if(u=f[p](o))return u;return null},[et(Q(),rt(),"json")]),tt(Fn,"credential",function(o,u){return new Ei(o,u)},[Q("email"),Q("password")]),He(Ei.prototype,{w:{name:"toJSON",j:[Q(null,!0)]}}),He(Io.prototype,{Ca:{name:"addScope",j:[Q("scope")]},Ka:{name:"setCustomParameters",j:[rt("customOAuthParameters")]}}),tt(Io,"credential",$E,[et(Q(),rt(),"token")]),tt(Fn,"credentialWithLink",tI,[Q("email"),Q("emailLink")]),He(To.prototype,{Ca:{name:"addScope",j:[Q("scope")]},Ka:{name:"setCustomParameters",j:[rt("customOAuthParameters")]}}),tt(To,"credential",JE,[et(Q(),rt(),"token")]),He(So.prototype,{Ca:{name:"addScope",j:[Q("scope")]},Ka:{name:"setCustomParameters",j:[rt("customOAuthParameters")]}}),tt(So,"credential",ZE,[et(Q(),et(rt(),kr()),"idToken"),et(Q(),kr(),"accessToken",!0)]),He(Fs.prototype,{Ka:{name:"setCustomParameters",j:[rt("customOAuthParameters")]}}),tt(Fs,"credential",eI,[et(Q(),rt(),"token"),Q("secret",!0)]),He(Tn.prototype,{Ca:{name:"addScope",j:[Q("scope")]},credential:{name:"credential",j:[et(Q(),et(rt(),kr()),"optionsOrIdToken"),et(Q(),kr(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[rt("customOAuthParameters")]}}),He(Yr.prototype,{w:{name:"toJSON",j:[Q(null,!0)]}}),He(wo.prototype,{w:{name:"toJSON",j:[Q(null,!0)]}}),tt(Xr,"credential",nI,[Q("verificationId"),Q("verificationCode")]),He(Xr.prototype,{gb:{name:"verifyPhoneNumber",j:[et(Q(),function(o,u){return{name:o||"phoneInfoOptions",K:"valid phone info options",optional:!!u,M:function(f){return f?f.session&&f.phoneNumber?_g(f.session,Au)&&typeof f.phoneNumber=="string":f.session&&f.multiFactorHint?_g(f.session,uf)&&QT(f.multiFactorHint):f.session&&f.multiFactorUid?_g(f.session,uf)&&typeof f.multiFactorUid=="string":f.phoneNumber?typeof f.phoneNumber=="string":!1:!1}}}(),"phoneInfoOptions"),Vf()]}}),He(Ii.prototype,{w:{name:"toJSON",j:[Q(null,!0)]}}),He(k.prototype,{toJSON:{name:"toJSON",j:[Q(null,!0)]}}),He(Ru.prototype,{toJSON:{name:"toJSON",j:[Q(null,!0)]}}),He(Hv.prototype,{toJSON:{name:"toJSON",j:[Q(null,!0)]}}),He(jm.prototype,{toJSON:{name:"toJSON",j:[Q(null,!0)]}}),He(Um.prototype,{Rc:{name:"resolveSignIn",j:[zT()]}}),He(Bm.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[zT(),Q("displayName",!0)]},bd:{name:"unenroll",j:[et({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:QT},Q(),"multiFactorInfoIdentifier")]}}),He(gg.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),tt(Dv,"parseLink",PE,[Q("link")]),tt(lg,"assertion",function(o){return new bT(o)},[Si("phone")]),function(){if(typeof K!="undefined"&&K.INTERNAL&&K.INTERNAL.registerComponent){var o={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ef,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Pv,VERIFY_AND_CHANGE_EMAIL:Su,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:or,AuthCredential:Ls,Error:k};tt(o,"EmailAuthProvider",Fn,[]),tt(o,"FacebookAuthProvider",Io,[]),tt(o,"GithubAuthProvider",To,[]),tt(o,"GoogleAuthProvider",So,[]),tt(o,"TwitterAuthProvider",Fs,[]),tt(o,"OAuthProvider",Tn,[Q("providerId")]),tt(o,"SAMLAuthProvider",XE,[Q("providerId")]),tt(o,"PhoneAuthProvider",Xr,[IU()]),tt(o,"RecaptchaVerifier",gg,[et(Q(),EU(),"recaptchaContainer"),rt("recaptchaParameters",!0),TU()]),tt(o,"ActionCodeURL",Dv,[]),tt(o,"PhoneMultiFactorGenerator",lg,[]),K.INTERNAL.registerComponent({name:"auth",instanceFactory:function(u){return u=u.getProvider("app").getImmediate(),new or(u)},multipleInstances:!1,serviceProps:o,instantiationMode:"LAZY",type:"PUBLIC"}),K.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(u){return u=u.getProvider("auth").getImmediate(),{getUid:P(u.getUid,u),getToken:P(u.nc,u),addAuthTokenListener:P(u.cc,u),removeAuthTokenListener:P(u.Pc,u)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),K.registerVersion("@firebase/auth","0.16.7"),K.INTERNAL.extendNamespace({User:Sn})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})});var fN={};Rr(fN);var hN=Le(()=>{lN()});function EW(e,t){w_(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function pN(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function cp(){}function I_(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function jc(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function TW(e){return Object.prototype.hasOwnProperty.call(e,T_)&&e[T_]||(e[T_]=++SW)}function CW(e,t,n){return e.call.apply(e.bind,arguments)}function AW(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function Ft(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ft=CW:Ft=AW,Ft.apply(null,arguments)}function lp(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function Fr(){return Date.now()}function At(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Pb=function(r,i,s){for(var a=Array(arguments.length-2),c=2;c<arguments.length;c++)a[c-2]=arguments[c];return t.prototype[i].apply(r,a)}}function qi(){this.j=this.j,this.i=this.i}function RW(e){e:{for(var t=yG,n=e.length,r=typeof e=="string"?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:typeof e=="string"?e.charAt(t):e[t]}function mN(e){return Array.prototype.concat.apply([],arguments)}function S_(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function fp(e){return/^[\s\xa0]*$/.test(e)}function Zt(e,t){return e.indexOf(t)!=-1}function C_(e,t){return e<t?-1:e>t?1:0}function R_(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function yN(e){var t={};for(var n in e)t[n]=e[n];return t}function bN(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var s=0;s<_N.length;s++)n=_N[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function N_(e){return N_[" "](e),e}function NW(e,t){var n=PW;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function IN(){var e=ae.document;return e?e.documentMode:void 0}function TN(e){return NW(e,function(){for(var t=0,n=gN(String(hp)).split("."),r=gN(String(e)).split("."),i=Math.max(n.length,r.length),s=0;t==0&&s<i;s++){var a=n[s]||"",c=r[s]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],a[0].length==0&&c[0].length==0)break;t=C_(a[1].length==0?0:parseInt(a[1],10),c[1].length==0?0:parseInt(c[1],10))||C_(a[2].length==0,c[2].length==0)||C_(a[2],c[2]),a=a[3],c=c[3]}while(t==0)}return 0<=t})}function Ut(e,t){this.type=e,this.a=this.target=t,this.defaultPrevented=!1}function Vc(e,t){if(Ut.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(EN){e:{try{N_(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:MW[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}function UW(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++FW,this.Y=this.Z=!1}function mp(e){e.Y=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function gp(e){this.src=e,this.a={},this.b=0}function L_(e,t){var n=t.type;if(n in e.a){var r=e.a[n],i=dN(r,t),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(mp(t),e.a[n].length==0&&(delete e.a[n],e.b--))}}function M_(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.Y&&s.listener==t&&s.capture==!!n&&s.da==r)return i}return-1}function j_(e,t,n,r,i){if(r&&r.once)return AN(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)j_(e,t[s],n,r,i);return null}return n=W_(n),e&&e[Bc]?e.wa(t,n,jc(r)?!!r.capture:!!r,i):CN(e,t,n,!1,r,i)}function CN(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=jc(i)?!!i.capture:!!i;if(a&&!D_)return null;var c=B_(e);if(c||(e[F_]=c=new gp(e)),n=c.add(t,n,r,a,s),n.proxy)return n;if(r=jW(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)LW||(i=a),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(RN(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function jW(){var e=VW,t=D_?function(n){return e.call(t.src,t.listener,n)}:function(n){if(n=e.call(t.src,t.listener,n),!n)return n};return t}function AN(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)AN(e,t[s],n,r,i);return null}return n=W_(n),e&&e[Bc]?e.xa(t,n,jc(r)?!!r.capture:!!r,i):CN(e,t,n,!0,r,i)}function kN(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)kN(e,t[s],n,r,i);else r=jc(r)?!!r.capture:!!r,n=W_(n),e&&e[Bc]?(e=e.c,t=String(t).toString(),t in e.a&&(s=e.a[t],n=M_(s,n,r,i),-1<n&&(mp(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.a[t],e.b--)))):e&&(e=B_(e))&&(t=e.a[t.toString()],e=-1,t&&(e=M_(t,n,r,i)),(n=-1<e?t[e]:null)&&V_(n))}function V_(e){if(typeof e!="number"&&e&&!e.Y){var t=e.src;if(t&&t[Bc])L_(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(RN(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=B_(t))?(L_(n,e),n.b==0&&(n.src=null,t[F_]=null)):mp(e)}}}function RN(e){return e in U_?U_[e]:U_[e]="on"+e}function NN(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&V_(e),n.call(r,t)}function VW(e,t){if(e.Y)return!0;if(!D_){if(!t)e:{t=["window","event"];for(var n=ae,r=0;r<t.length;r++)if(n=n[t[r]],n==null){t=null;break e}t=n}return t=new Vc(t,this),NN(e,t)}return NN(e,new Vc(t,this))}function B_(e){return e=e[F_],e instanceof gp?e:null}function W_(e){return typeof e=="function"?e:(e[q_]||(e[q_]=function(t){return e.handleEvent(t)}),e[q_])}function tn(){qi.call(this),this.c=new gp(this),this.J=this,this.D=null}function kt(e,t){var n,r=e.D;if(r)for(n=[];r;r=r.D)n.push(r);if(e=e.J,r=t.type||t,typeof t=="string")t=new Ut(t,e);else if(t instanceof Ut)t.target=t.target||e;else{var i=t;t=new Ut(r,e),bN(t,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.a=n[s];i=yp(a,r,!0,t)&&i}if(a=t.a=e,i=yp(a,r,!0,t)&&i,i=yp(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)a=t.a=n[s],i=yp(a,r,!1,t)&&i}function yp(e,t,n,r){if(t=e.c.a[String(t)],!t)return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.Y&&a.capture==n){var c=a.listener,l=a.da||a.src;a.Z&&L_(e.c,a),i=c.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}function ON(){this.b=this.a=null}function BW(){var e=DN,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function K_(){this.next=this.b=this.a=null}function qW(e){ae.setTimeout(function(){throw e},0)}function PN(e,t){H_||WW(),z_||(H_(),z_=!0),DN.add(e,t)}function WW(){var e=ae.Promise.resolve(void 0);H_=function(){e.then(GW)}}function GW(){for(var e;e=BW();){try{e.a.call(e.b)}catch(n){qW(n)}var t=xN;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}z_=!1}function _p(e,t){tn.call(this),this.b=e||1,this.a=t||ae,this.f=Ft(this.eb,this),this.g=Fr()}function Q_(e){e.aa=!1,e.M&&(e.a.clearTimeout(e.M),e.M=null)}function Y_(e,t,n){if(typeof e=="function")n&&(e=Ft(e,n));else if(e&&typeof e.handleEvent=="function")e=Ft(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:ae.setTimeout(e,t||0)}function LN(e){e.a=Y_(function(){e.a=null,e.c&&(e.c=!1,LN(e))},e.h);var t=e.b;e.b=null,e.g.apply(null,t)}function qc(e){qi.call(this),this.b=e,this.a={}}function FN(e,t,n,r){Array.isArray(n)||(n&&(MN[0]=n.toString()),n=MN);for(var i=0;i<n.length;i++){var s=j_(t,n[i],r||e.handleEvent,!1,e.b||e);if(!s)break;e.a[s.key]=s}}function UN(e){R_(e.a,function(t,n){this.a.hasOwnProperty(n)&&V_(t)},e),e.a={}}function X_(){this.a=!0}function HW(e,t,n,r,i,s){e.info(function(){if(e.a)if(s)for(var a="",c=s.split("&"),l=0;l<c.length;l++){var h=c[l].split("=");if(1<h.length){var d=h[0];h=h[1];var g=d.split("_");a=2<=g.length&&g[1]=="type"?a+(d+"="+h+"&"):a+(d+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+a})}function zW(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+s+" "+a})}function Ia(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+YW(e,n)+(r?" "+r:"")})}function QW(e,t){e.info(function(){return"TIMEOUT: "+t})}function YW(e,t){if(!e.a)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var a=1;a<i.length;a++)i[a]=""}}}}return G_(n)}catch(c){return t}}function bp(){return jN=jN||new tn}function VN(e){Ut.call(this,$o.Ga,e)}function Wc(e){var t=bp();kt(t,new VN(t,e))}function BN(e,t){Ut.call(this,$o.STAT_EVENT,e),this.stat=t}function nn(e){var t=bp();kt(t,new BN(t,e))}function qN(e){Ut.call(this,$o.Ha,e)}function Gc(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return ae.setTimeout(function(){e()},t)}function $_(){}function GN(e){return e.b||(e.b=e.c())}function KN(){}function J_(){Ut.call(this,"d")}function Z_(){Ut.call(this,"c")}function Ep(){}function Hc(e,t,n,r){this.g=e,this.c=t,this.f=n,this.S=r||1,this.J=new qc(this),this.P=XW,e=O_?125:void 0,this.R=new _p(e),this.B=null,this.b=!1,this.j=this.l=this.i=this.G=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}function nb(e,t,n){e.G=1,e.i=kp(oi(t)),e.j=n,e.I=!0,zN(e,null)}function zN(e,t){e.u=Fr(),zc(e),e.l=oi(e.i);var n=e.l,r=e.S;Array.isArray(r)||(r=[String(r)]),tO(n.b,"t",r),e.D=0,e.a=wO(e.g,e.g.C?t:null),0<e.O&&(e.F=new KW(Ft(e.Da,e,e.a),e.O)),FN(e.J,e.a,"readystatechange",e.bb),t=e.B?yN(e.B):{},e.j?(e.m||(e.m="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ba(e.l,e.m,e.j,t)):(e.m="GET",e.a.ba(e.l,e.m,null,t)),Wc(1),HW(e.c,e.m,e.l,e.f,e.S,e.j)}function QN(e,t,n){for(var r=!0;!e.A&&e.D<n.length;){var i=$W(e,n);if(i==tb){t==4&&(e.h=4,nn(14),r=!1),Ia(e.c,e.f,null,"[Incomplete Response]");break}else if(i==HN){e.h=4,nn(15),Ia(e.c,e.f,n,"[Invalid Chunk]"),r=!1;break}else Ia(e.c,e.f,i,null),rb(e,i)}t==4&&n.length==0&&(e.h=1,nn(16),r=!1),e.b=e.b&&r,r?0<n.length&&!e.V&&(e.V=!0,t=e.g,t.a==e&&t.U&&!t.F&&(t.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),pb(t),t.F=!0,nn(11))):(Ia(e.c,e.f,n,"[Invalid Chunked Response]"),Ta(e),Tp(e))}function $W(e,t){var n=e.D,r=t.indexOf(`
`,n);return r==-1?tb:(n=Number(t.substring(n,r)),isNaN(n)?HN:(r+=1,r+n>t.length?tb:(t=t.substr(r,n),e.D=r+n,t)))}function zc(e){e.T=Fr()+e.P,YN(e,e.P)}function YN(e,t){if(e.o!=null)throw Error("WatchDog timer not null");e.o=Gc(Ft(e.$a,e),t)}function Ip(e){e.o&&(ae.clearTimeout(e.o),e.o=null)}function Tp(e){e.g.v==0||e.A||gO(e.g,e)}function Ta(e){Ip(e);var t=e.F;t&&typeof t.ka=="function"&&t.ka(),e.F=null,Q_(e.R),UN(e.J),e.a&&(t=e.a,e.a=null,t.abort(),t.ka())}function rb(e,t){try{var n=e.g;if(n.v!=0&&(n.a==e||sb(n.b,e))){if(n.I=e.N,!e.C&&sb(n.b,e)&&n.v==3){try{var r=n.la.a.parse(t)}catch(T){r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0)e:if(!n.j){if(n.a)if(n.a.u+3e3<e.u)Pp(n),Op(n);else break e;hb(n),nn(18)}else n.pa=i[1],0<n.pa-n.P&&37500>i[2]&&n.G&&n.o==0&&!n.m&&(n.m=Gc(Ft(n.Xa,n),6e3));if(1>=iO(n.b)&&n.fa){try{n.fa()}catch(T){}n.fa=void 0}}else es(n,11)}else if((e.C||n.a==e)&&Pp(n),!fp(t))for(t=r=n.la.a.parse(t),r=0;r<t.length;r++)if(i=t[r],n.P=i[0],i=i[1],n.v==2)if(i[0]=="c"){n.J=i[1],n.ha=i[2];var s=i[3];s!=null&&(n.ia=s,n.c.info("VER="+n.ia));var a=i[4];a!=null&&(n.qa=a,n.c.info("SVER="+n.qa));var c=i[5];if(c!=null&&typeof c=="number"&&0<c){var l=1.5*c;n.D=l,n.c.info("backChannelRequestTimeoutMs_="+l)}l=n;var h=e.a;if(h){var d=h.a?h.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(d){var g=l.b;!g.a&&(Zt(d,"spdy")||Zt(d,"quic")||Zt(d,"h2"))&&(g.f=g.g,g.a=new Set,g.b&&(ab(g,g.b),g.b=null))}if(l.A){var m=h.a?h.a.getResponseHeader("X-HTTP-Session-Id"):null;m&&(l.oa=m,Ge(l.B,l.A,m))}}n.v=3,n.f&&n.f.ua(),n.U&&(n.N=Fr()-e.u,n.c.info("Handshake RTT: "+n.N+"ms")),l=n;var _=e;if(l.ma=bO(l,l.C?l.ha:null,l.ga),_.C){oO(l.b,_);var w=_,E=l.D;E&&w.setTimeout(E),w.o&&(Ip(w),zc(w)),l.a=_}else vO(l);0<n.g.length&&xp(n)}else i[0]!="stop"&&i[0]!="close"||es(n,7);else n.v==3&&(i[0]=="stop"||i[0]=="close"?i[0]=="stop"?es(n,7):lb(n):i[0]!="noop"&&n.f&&n.f.ta(i),n.o=0)}Wc(4)}catch(T){}}function JW(e){if(e.K&&typeof e.K=="function")return e.K();if(typeof e=="string")return e.split("");if(I_(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return e=t}function ib(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(I_(e)||typeof e=="string")vN(e,t,void 0);else{if(e.L&&typeof e.L=="function")var n=e.L();else if(e.K&&typeof e.K=="function")n=void 0;else if(I_(e)||typeof e=="string"){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=JW(e),i=r.length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function Sa(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Sa)for(n=e.L(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function ob(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Jo(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)r=e.a[t],Jo(i,r)||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Jo(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ZW(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Zo(e,t){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,e instanceof Zo){this.a=t!==void 0?t:e.a,Sp(this,e.f),this.j=e.j,Cp(this,e.c),Ap(this,e.h),this.g=e.g,t=e.b;var n=new Xc;n.c=t.c,t.a&&(n.a=new Sa(t.a),n.b=t.b),$N(this,n),this.i=e.i}else e&&(n=String(e).match(XN))?(this.a=!!t,Sp(this,n[1]||"",!0),this.j=Qc(n[2]||""),Cp(this,n[3]||"",!0),Ap(this,n[4]),this.g=Qc(n[5]||"",!0),$N(this,n[6]||"",!0),this.i=Qc(n[7]||"")):(this.a=!!t,this.b=new Xc(null,this.a))}function oi(e){return new Zo(e)}function Sp(e,t,n){e.f=n?Qc(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Cp(e,t,n){e.c=n?Qc(t,!0):t}function Ap(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.h=t}else e.h=null}function $N(e,t,n){t instanceof Xc?(e.b=t,aG(e.b,e.a)):(n||(t=Yc(t,oG)),e.b=new Xc(t,e.a))}function Ge(e,t,n){e.b.set(t,n)}function kp(e){return Ge(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Fr()).toString(36)),e}function eG(e){return e instanceof Zo?oi(e):new Zo(e,void 0)}function tG(e,t,n,r){var i=new Zo(null,void 0);return e&&Sp(i,e),t&&Cp(i,t),n&&Ap(i,n),r&&(i.g=r),i}function Qc(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Yc(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,nG),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function nG(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}function Xc(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Gi(e){e.a||(e.a=new Sa,e.b=0,e.c&&ZW(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function ZN(e,t){Gi(e),t=Ca(e,t),Jo(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,e=e.a,Jo(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&ob(e)))}function eO(e,t){return Gi(e),t=Ca(e,t),Jo(e.a.b,t)}function tO(e,t,n){ZN(e,t),0<n.length&&(e.c=null,e.a.set(Ca(e,t),S_(n)),e.b+=n.length)}function Ca(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function aG(e,t){t&&!e.f&&(Gi(e),e.c=null,e.a.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(ZN(this,r),tO(this,i,n))},e)),e.f=t}function nO(e){this.g=e||cG,ae.PerformanceNavigationTiming?(e=ae.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(ae.ja&&ae.ja.za&&ae.ja.za()&&ae.ja.za().Qb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}function rO(e){return e.b?!0:e.a?e.a.size>=e.f:!1}function iO(e){return e.b?1:e.a?e.a.size:0}function sb(e,t){return e.b?e.b==t:e.a?e.a.has(t):!1}function ab(e,t){e.a?e.a.add(t):e.b=t}function oO(e,t){e.b&&e.b==t?e.b=null:e.a&&e.a.has(t)&&e.a.delete(t)}function sO(e){var t,n;if(e.b!=null)return e.c.concat(e.b.s);if(e.a!=null&&e.a.size!==0){var r=e.c;try{for(var i=pN(e.a.values()),s=i.next();!s.done;s=i.next()){var a=s.value;r=r.concat(a.s)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return S_(e.c)}function ub(){}function lG(){this.a=new ub}function fG(e,t,n){var r=n||"";try{ib(e,function(i,s){var a=i;jc(i)&&(a=G_(i)),t.push(r+s+"="+encodeURIComponent(a))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function hG(e,t){var n=new X_;if(ae.Image){var r=new Image;r.onload=lp(Rp,n,r,"TestLoadImage: loaded",!0,t),r.onerror=lp(Rp,n,r,"TestLoadImage: error",!1,t),r.onabort=lp(Rp,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=lp(Rp,n,r,"TestLoadImage: timeout",!1,t),ae.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Rp(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function dt(e){tn.call(this),this.headers=new Sa,this.l=e||null,this.b=!1,this.u=this.a=null,this.C="",this.h=0,this.f="",this.g=this.B=this.m=this.A=!1,this.s=0,this.o=null,this.I=dG,this.F=this.G=!1}function gG(e){return Wi&&TN(9)&&typeof e.timeout=="number"&&e.ontimeout!==void 0}function yG(e){return e.toLowerCase()=="content-type"}function aO(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,uO(e),Np(e)}function uO(e){e.A||(e.A=!0,kt(e,"complete"),kt(e,"error"))}function cO(e){if(e.b&&typeof E_!="undefined"&&(!e.u[1]||Ki(e)!=4||e.W()!=2)){if(e.m&&Ki(e)==4)Y_(e.Aa,0,e);else if(kt(e,"readystatechange"),Ki(e)==4){e.b=!1;try{{var t=e.W();e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=t===0){var s=String(e.C).match(XN)[1]||null;if(!s&&ae.self&&ae.self.location){var a=ae.self.location.protocol;s=a.substr(0,a.length-1)}i=!vG.test(s?s.toLowerCase():"")}r=i}var c=r}if(c)kt(e,"complete"),kt(e,"success");else{e.h=6;try{var l=2<Ki(e)?e.a.statusText:""}catch(h){l=""}e.f=l+" ["+e.W()+"]",uO(e)}}finally{Np(e)}}}}function Np(e,t){if(e.a){lO(e);var n=e.a,r=e.u[0]?cp:null;e.a=null,e.u=null,t||kt(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function lO(e){e.a&&e.F&&(e.a.ontimeout=null),e.o&&(ae.clearTimeout(e.o),e.o=null)}function Ki(e){return e.a?e.a.readyState:0}function _G(e){var t="";return R_(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function cb(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=_G(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):Ge(e,t,n))}function $c(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function fO(e){this.qa=0,this.g=[],this.c=new X_,this.ha=this.ma=this.B=this.ga=this.a=this.oa=this.A=this.V=this.i=this.O=this.l=null,this.Pa=this.R=0,this.Ma=$c("failFast",!1,e),this.G=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.pa=this.P=-1,this.T=this.o=this.u=0,this.Ia=$c("baseRetryDelayMs",5e3,e),this.Sa=$c("retryDelaySeedMs",1e4,e),this.Na=$c("forwardChannelMaxRetries",2,e),this.na=$c("forwardChannelRequestTimeoutMs",2e4,e),this.Oa=e&&e.xmlHttpFactory||void 0,this.D=void 0,this.C=e&&e.supportsCrossDomainXhr||!1,this.J="",this.b=new nO(e&&e.concurrentRequestLimit),this.la=new lG,this.ea=e&&e.fastHandshake||!1,this.Ja=e&&e.b||!1,e&&e.f&&(this.c.a=!1),e&&e.forceLongPolling&&(this.S=!1),this.U=!this.ea&&this.S&&e&&e.detectBufferingProxy||!1,this.fa=void 0,this.N=0,this.F=!1,this.s=null,(this.La=e&&e.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function lb(e){if(hO(e),e.v==3){var t=e.R++,n=oi(e.B);Ge(n,"SID",e.J),Ge(n,"RID",t),Ge(n,"TYPE","terminate"),Jc(e,n),t=new Hc(e,e.c,t,void 0),t.G=2,t.i=kp(oi(n)),n=!1,ae.navigator&&ae.navigator.sendBeacon&&(n=ae.navigator.sendBeacon(t.i.toString(),"")),!n&&ae.Image&&(new Image().src=t.i,n=!0),n||(t.a=wO(t.g,null),t.a.ba(t.i)),t.u=Fr(),zc(t)}_O(e)}function Op(e){e.a&&(pb(e),e.a.cancel(),e.a=null)}function hO(e){Op(e),e.j&&(ae.clearTimeout(e.j),e.j=null),Pp(e),e.b.cancel(),e.h&&(typeof e.h=="number"&&ae.clearTimeout(e.h),e.h=null)}function fb(e,t){e.g.push(new uG(e.Pa++,t)),e.v==3&&xp(e)}function xp(e){rO(e.b)||e.h||(e.h=!0,PN(e.Ca,e),e.u=0)}function bG(e,t){return iO(e.b)>=e.b.f-(e.h?1:0)?!1:e.h?(e.g=t.s.concat(e.g),!0):e.v==1||e.v==2||e.u>=(e.Ma?0:e.Na)?!1:(e.h=Gc(Ft(e.Ca,e,t),yO(e,e.u)),e.u++,!0)}function pO(e,t){var n;t?n=t.f:n=e.R++;var r=oi(e.B);Ge(r,"SID",e.J),Ge(r,"RID",n),Ge(r,"AID",e.P),Jc(e,r),e.i&&e.l&&cb(r,e.i,e.l),n=new Hc(e,e.c,n,e.u+1),e.i===null&&(n.B=e.l),t&&(e.g=t.s.concat(e.g)),t=dO(e,n,1e3),n.setTimeout(Math.round(.5*e.na)+Math.round(.5*e.na*Math.random())),ab(e.b,n),nb(n,r,t)}function Jc(e,t){e.f&&ib({},function(n,r){Ge(t,r,n)})}function dO(e,t,n){n=Math.min(e.g.length,n);var r=e.f?Ft(e.f.Ka,e.f,e):null;e:for(var i=e.g,s=-1;;){var a=["count="+n];s==-1?0<n?(s=i[0].b,a.push("ofs="+s)):s=0:a.push("ofs="+s);for(var c=!0,l=0;l<n;l++){var h=i[l].b,d=i[l].a;if(h-=s,0>h)s=Math.max(0,i[l].b-100),c=!1;else try{fG(d,a,"req"+h+"_")}catch(g){r&&r(d)}}if(c){r=a.join("&");break e}}return e=e.g.splice(0,n),t.s=e,r}function vO(e){e.a||e.j||(e.T=1,PN(e.Ba,e),e.o=0)}function hb(e){return e.a||e.j||3<=e.o?!1:(e.T++,e.j=Gc(Ft(e.Ba,e),yO(e,e.o)),e.o++,!0)}function pb(e){e.s!=null&&(ae.clearTimeout(e.s),e.s=null)}function mO(e){e.a=new Hc(e,e.c,"rpc",e.T),e.i===null&&(e.a.B=e.l),e.a.O=0;var t=oi(e.ma);Ge(t,"RID","rpc"),Ge(t,"SID",e.J),Ge(t,"CI",e.G?"0":"1"),Ge(t,"AID",e.P),Jc(e,t),Ge(t,"TYPE","xmlhttp"),e.i&&e.l&&cb(t,e.i,e.l),e.D&&e.a.setTimeout(e.D);var n=e.a;e=e.ha,n.G=1,n.i=kp(oi(t)),n.j=null,n.I=!0,zN(n,e)}function Pp(e){e.m!=null&&(ae.clearTimeout(e.m),e.m=null)}function gO(e,t){var n=null;if(e.a==t){Pp(e),pb(e),e.a=null;var r=2}else if(sb(e.b,t))n=t.s,oO(e.b,t),r=1;else return;if(e.I=t.N,e.v!=0){if(t.b)if(r==1){n=t.j?t.j.length:0,t=Fr()-t.u;var i=e.u;r=bp(),kt(r,new qN(r,n,t,i)),xp(e)}else vO(e);else if(i=t.h,i==3||i==0&&0<e.I||!(r==1&&bG(e,t)||r==2&&hb(e)))switch(n&&0<n.length&&(t=e.b,t.c=t.c.concat(n)),i){case 1:es(e,5);break;case 4:es(e,10);break;case 3:es(e,6);break;default:es(e,2)}}}function yO(e,t){var n=e.Ia+Math.floor(Math.random()*e.Sa);return e.f||(n*=2),n*t}function es(e,t){if(e.c.info("Error code "+t),t==2){var n=null;e.f&&(n=null);var r=Ft(e.cb,e);n||(n=new Zo("//www.google.com/images/cleardot.gif"),ae.location&&ae.location.protocol=="http"||Sp(n,"https"),kp(n)),hG(n.toString(),r)}else nn(2);e.v=0,e.f&&e.f.sa(t),_O(e),hO(e)}function _O(e){e.v=0,e.I=-1,e.f&&((sO(e.b).length!=0||e.g.length!=0)&&(e.b.c.length=0,S_(e.g),e.g.length=0),e.f.ra())}function bO(e,t,n){var r=eG(n);if(r.c!="")t&&Cp(r,t+"."+r.c),Ap(r,r.h);else{var i=ae.location;r=tG(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.V&&R_(e.V,function(s,a){Ge(r,a,s)}),t=e.A,n=e.oa,t&&n&&Ge(r,t,n),Ge(r,"VER",e.ia),Jc(e,r),r}function wO(e,t){if(t&&!e.C)throw Error("Can't create secondary domain capable XhrIo object.");return t=new dt(e.Oa),t.G=e.C,t}function EO(){}function Dp(){if(Wi&&!(10<=Number(SN)))throw Error("Environmental error: no available transport.")}function kn(e,t){tn.call(this),this.a=new fO(t),this.g=e,this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.l=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.a&&(e?e["X-WebChannel-Client-Profile"]=t.a:e={"X-WebChannel-Client-Profile":t.a}),this.a.O=e,(e=t&&t.httpHeadersOverwriteParam)&&!fp(e)&&(this.a.i=e),this.o=t&&t.supportsCrossDomainXhr||!1,this.m=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!fp(t)&&(this.a.A=t,e=this.b,e!==null&&t in e&&(e=this.b,t in e&&delete e[t])),this.f=new Aa(this)}function IO(e){J_.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=t!==null&&e in t?t[e]:void 0):this.data=t}else this.data=e}function TO(){Z_.call(this),this.status=1}function Aa(e){this.a=e}function Lp(e){this.f=e}function Mp(e){tn.call(this),this.u=e,this.h=void 0,this.readyState=db,this.status=0,this.responseType=this.responseText=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.o="",this.a=!1,this.m=this.f=this.g=null}function SO(e){e.f.read().then(e.Ta.bind(e)).catch(e.ca.bind(e))}function Zc(e){e.readyState=4,e.g=null,e.f=null,e.m=null,el(e)}function el(e){e.onreadystatechange&&e.onreadystatechange.call(e)}var w_,IW,z,E_,ae,T_,SW,kW,dN,vN,gN,en,A_,k_,_N,OW,Wi,wN,O_,EN,xW,hp,pp,dp,vp,PW,x_,P_,SN,D_,DW,LW,MW,Bc,FW,F_,U_,q_,G_,xN,H_,z_,DN,KW,MN,$o,jN,wp,WN,Kc,eb,XW,HN,tb,XN,JN,rG,iG,oG,sG,uG,cG,pG,dG,vG,mG,db,CO,AO,Fp,kO,RO,vb,NO,tl,OO,mb=Le(()=>{w_=function(e,t){return w_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},w_(e,t)};IW=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},E_=E_||{},ae=IW||self;T_="closure_uid_"+(1e9*Math.random()>>>0),SW=0;kW=0;qi.prototype.j=!1;qi.prototype.ka=function(){if(!this.j&&(this.j=!0,this.H(),kW!=0))var e=TW(this)};qi.prototype.H=function(){if(this.i)for(;this.i.length;)this.i.shift()()};dN=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},vN=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=typeof e=="string"?e.split(""):e,s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};gN=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};e:{if(A_=ae.navigator,A_&&(k_=A_.userAgent,k_)){en=k_;break e}en=""}_N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");N_[" "]=cp;OW=Zt(en,"Opera"),Wi=Zt(en,"Trident")||Zt(en,"MSIE"),wN=Zt(en,"Edge"),O_=wN||Wi,EN=Zt(en,"Gecko")&&!(Zt(en.toLowerCase(),"webkit")&&!Zt(en,"Edge"))&&!(Zt(en,"Trident")||Zt(en,"MSIE"))&&!Zt(en,"Edge"),xW=Zt(en.toLowerCase(),"webkit")&&!Zt(en,"Edge");e:{if(pp="",dp=function(){var e=en;if(EN)return/rv:([^\);]+)(\)|;)/.exec(e);if(wN)return/Edge\/([\d\.]+)/.exec(e);if(Wi)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(xW)return/WebKit\/(\S+)/.exec(e);if(OW)return/(?:Version)[ \/]?(\S+)/.exec(e)}(),dp&&(pp=dp?dp[1]:""),Wi&&(vp=IN(),vp!=null&&vp>parseFloat(pp))){hp=String(vp);break e}hp=pp}PW={};ae.document&&Wi?(P_=IN(),x_=P_||parseInt(hp,10)||void 0):x_=void 0;SN=x_,D_=!Wi||9<=Number(SN),DW=Wi&&!TN("9"),LW=function(){if(!ae.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{ae.addEventListener("test",cp,t),ae.removeEventListener("test",cp,t)}catch(n){}return e}();Ut.prototype.b=function(){this.defaultPrevented=!0};At(Vc,Ut);MW={2:"touch",3:"pen",4:"mouse"};Vc.prototype.b=function(){Vc.X.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,DW)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}};Bc="closure_listenable_"+(1e6*Math.random()|0),FW=0;gp.prototype.add=function(e,t,n,r,i){var s=e.toString();e=this.a[s],e||(e=this.a[s]=[],this.b++);var a=M_(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):(t=new UW(t,this.src,s,!!r,i),t.Z=n,e.push(t)),t};F_="closure_lm_"+(1e6*Math.random()|0),U_={};q_="__closure_events_fn_"+(1e9*Math.random()>>>0);At(tn,qi);tn.prototype[Bc]=!0;z=tn.prototype;z.addEventListener=function(e,t,n,r){j_(this,e,t,n,r)};z.removeEventListener=function(e,t,n,r){kN(this,e,t,n,r)};z.H=function(){if(tn.X.H.call(this),this.c){var e=this.c,t;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)mp(n[r]);delete e.a[t],e.b--}}this.D=null};z.wa=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)};z.xa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};G_=ae.JSON.stringify;xN=new(function(){function e(t,n){this.c=t,this.f=n,this.b=0,this.a=null}return e.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},e}())(function(){return new K_},function(e){e.reset()});ON.prototype.add=function(e,t){var n=xN.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n};K_.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null};K_.prototype.reset=function(){this.next=this.b=this.a=null};z_=!1,DN=new ON;At(_p,tn);z=_p.prototype;z.aa=!1;z.M=null;z.eb=function(){if(this.aa){var e=Fr()-this.g;0<e&&e<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-e):(this.M&&(this.a.clearTimeout(this.M),this.M=null),kt(this,"tick"),this.aa&&(Q_(this),this.start()))}};z.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Fr())};z.H=function(){_p.X.H.call(this),Q_(this),delete this.a};KW=function(e){EW(t,e);function t(n,r){var i=e.call(this)||this;return i.g=n,i.h=r,i.b=null,i.c=!1,i.a=null,i}return t.prototype.f=function(n){this.b=arguments,this.a?this.c=!0:LN(this)},t.prototype.H=function(){e.prototype.H.call(this),this.a&&(ae.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},t}(qi);At(qc,qi);MN=[];qc.prototype.H=function(){qc.X.H.call(this),UN(this)};qc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};X_.prototype.info=function(){};$o={},jN=null;$o.Ga="serverreachability";At(VN,Ut);$o.STAT_EVENT="statevent";At(BN,Ut);$o.Ha="timingevent";At(qN,Ut);wp={NO_ERROR:0,fb:1,sb:2,rb:3,mb:4,qb:5,tb:6,Ea:7,TIMEOUT:8,wb:9},WN={kb:"complete",Gb:"success",Fa:"error",Ea:"abort",yb:"ready",zb:"readystatechange",TIMEOUT:"timeout",ub:"incrementaldata",xb:"progress",nb:"downloadprogress",Ob:"uploadprogress"};$_.prototype.b=null;Kc={OPEN:"a",jb:"b",Fa:"c",vb:"d"};At(J_,Ut);At(Z_,Ut);At(Ep,$_);Ep.prototype.a=function(){return new XMLHttpRequest};Ep.prototype.c=function(){return{}};eb=new Ep;XW=45e3,HN={},tb={};z=Hc.prototype;z.setTimeout=function(e){this.P=e};z.bb=function(e){e=e.target;var t=this.F;t&&Ki(e)==3?t.f():this.Da(e)};z.Da=function(e){try{if(e==this.a)e:{var t=Ki(this.a),n=this.a.va(),r=this.a.W();if(!(3>t||t==3&&!O_&&!this.a.$())){this.A||t!=4||n==7||(n==8||0>=r?Wc(3):Wc(2)),Ip(this);var i=this.a.W();this.N=i;var s=this.a.$();if(this.b=i==200,zW(this.c,this.m,this.l,this.f,this.S,t,i),this.b){if(this.U&&!this.C){t:{if(this.a){var a,c=this.a;if((a=c.a?c.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fp(a)){var l=a;break t}}l=null}if(l)Ia(this.c,this.f,l,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,rb(this,l);else{this.b=!1,this.h=3,nn(12),Ta(this),Tp(this);break e}}this.I?(QN(this,t,s),O_&&this.b&&t==3&&(FN(this.J,this.R,"tick",this.ab),this.R.start())):(Ia(this.c,this.f,s,null),rb(this,s)),t==4&&Ta(this),this.b&&!this.A&&(t==4?gO(this.g,this):(this.b=!1,zc(this)))}else i==400&&0<s.indexOf("Unknown SID")?(this.h=3,nn(12)):(this.h=0,nn(13)),Ta(this),Tp(this)}}}catch(h){}finally{}};z.ab=function(){if(this.a){var e=Ki(this.a),t=this.a.$();this.D<t.length&&(Ip(this),QN(this,e,t),this.b&&e!=4&&zc(this))}};z.cancel=function(){this.A=!0,Ta(this)};z.$a=function(){this.o=null;var e=Fr();0<=e-this.T?(QW(this.c,this.l),this.G!=2&&(Wc(3),nn(17)),Ta(this),this.h=2,Tp(this)):YN(this,this.T-e)};z=Sa.prototype;z.K=function(){ob(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e};z.L=function(){return ob(this),this.a.concat()};z.get=function(e,t){return Jo(this.b,e)?this.b[e]:t};z.set=function(e,t){Jo(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t};z.forEach=function(e,t){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};XN=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;Zo.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Yc(t,JN,!0),":");var n=this.c;return(n||t=="file")&&(e.push("//"),(t=this.j)&&e.push(Yc(t,JN,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.h,n!=null&&e.push(":",String(n))),(n=this.g)&&(this.c&&n.charAt(0)!="/"&&e.push("/"),e.push(Yc(n,n.charAt(0)=="/"?iG:rG,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.i)&&e.push("#",Yc(n,sG)),e.join("")};JN=/[#\/\?@]/g,rG=/[#\?:]/g,iG=/[#\?]/g,oG=/[#\?@]/g,sG=/#/g;z=Xc.prototype;z.add=function(e,t){Gi(this),this.c=null,e=Ca(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this};z.forEach=function(e,t){Gi(this),this.a.forEach(function(n,r){vN(n,function(i){e.call(t,i,r,this)},this)},this)};z.L=function(){Gi(this);for(var e=this.a.K(),t=this.a.L(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n};z.K=function(e){Gi(this);var t=[];if(typeof e=="string")eO(this,e)&&(t=mN(t,this.a.get(Ca(this,e))));else{e=this.a.K();for(var n=0;n<e.length;n++)t=mN(t,e[n])}return t};z.set=function(e,t){return Gi(this),this.c=null,e=Ca(this,e),eO(this,e)&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this};z.get=function(e,t){return e?(e=this.K(e),0<e.length?String(e[0]):t):t};z.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.L(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.K(r);for(var s=0;s<r.length;s++){var a=i;r[s]!==""&&(a+="="+encodeURIComponent(String(r[s]))),e.push(a)}}return this.c=e.join("&")};uG=function(){function e(t,n){this.b=t,this.a=n}return e}();cG=10;nO.prototype.cancel=function(){var e,t;if(this.c=sO(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&this.a.size!==0){try{for(var n=pN(this.a.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(s){e={error:s}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}};ub.prototype.stringify=function(e){return ae.JSON.stringify(e,void 0)};ub.prototype.parse=function(e){return ae.JSON.parse(e,void 0)};pG=ae.JSON.parse;At(dt,tn);dG="",vG=/^https?$/i,mG=["POST","PUT"];z=dt.prototype;z.ba=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.C+"; newUri="+e);t=t?t.toUpperCase():"GET",this.C=e,this.f="",this.h=0,this.A=!1,this.b=!0,this.a=this.l?this.l.a():eb.a(),this.u=this.l?GN(this.l):GN(eb),this.a.onreadystatechange=Ft(this.Aa,this);try{this.B=!0,this.a.open(t,String(e),!0),this.B=!1}catch(s){aO(this,s);return}e=n||"";var i=new Sa(this.headers);r&&ib(r,function(s,a){i.set(a,s)}),r=RW(i.L()),n=ae.FormData&&e instanceof ae.FormData,!(0<=dN(mG,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,a){this.a.setRequestHeader(a,s)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.G&&(this.a.withCredentials=this.G);try{lO(this),0<this.s&&((this.F=gG(this.a))?(this.a.timeout=this.s,this.a.ontimeout=Ft(this.ya,this)):this.o=Y_(this.ya,this.s,this)),this.m=!0,this.a.send(e),this.m=!1}catch(s){aO(this,s)}};z.ya=function(){typeof E_!="undefined"&&this.a&&(this.f="Timed out after "+this.s+"ms, aborting",this.h=8,kt(this,"timeout"),this.abort(8))};z.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,kt(this,"complete"),kt(this,"abort"),Np(this))};z.H=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Np(this,!0)),dt.X.H.call(this)};z.Aa=function(){this.j||(this.B||this.m||this.g?cO(this):this.Za())};z.Za=function(){cO(this)};z.W=function(){try{return 2<Ki(this)?this.a.status:-1}catch(e){return-1}};z.$=function(){try{return this.a?this.a.responseText:""}catch(e){return""}};z.Qa=function(e){if(this.a){var t=this.a.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),pG(t)}};z.va=function(){return this.h};z.Ra=function(){return typeof this.f=="string"?this.f:String(this.f)};z=fO.prototype;z.ia=8;z.v=1;z.Ca=function(e){if(this.h)if(this.h=null,this.v==1){if(!e){this.R=Math.floor(1e5*Math.random()),e=this.R++;var t=new Hc(this,this.c,e,void 0),n=this.l;this.O&&(n?(n=yN(n),bN(n,this.O)):n=this.O),this.i===null&&(t.B=n);var r;if(this.ea)e:{for(var i=r=0;i<this.g.length;i++){t:{var s=this.g[i];if("__data__"in s.a&&(s=s.a.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(r+=s,4096<r){r=i;break e}if(r===4096||i===this.g.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=dO(this,t,r),i=oi(this.B),Ge(i,"RID",e),Ge(i,"CVER",22),this.A&&Ge(i,"X-HTTP-Session-Id",this.A),Jc(this,i),this.i&&n&&cb(i,this.i,n),ab(this.b,t),this.Ja&&Ge(i,"TYPE","init"),this.ea?(Ge(i,"$req",r),Ge(i,"SID","null"),t.U=!0,nb(t,i,null)):nb(t,i,r),this.v=2}}else this.v==3&&(e?pO(this,e):this.g.length==0||rO(this.b)||pO(this))};z.Ba=function(){if(this.j=null,mO(this),this.U&&!(this.F||this.a==null||0>=this.N)){var e=2*this.N;this.c.info("BP detection timer enabled: "+e),this.s=Gc(Ft(this.Ya,this),e)}};z.Ya=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.F=!0,nn(10),Op(this),mO(this))};z.Xa=function(){this.m!=null&&(this.m=null,Op(this),hb(this),nn(19))};z.cb=function(e){e?(this.c.info("Successfully pinged google.com"),nn(2)):(this.c.info("Failed to ping google.com"),nn(1))};z=EO.prototype;z.ua=function(){};z.ta=function(){};z.sa=function(){};z.ra=function(){};z.Ka=function(){};Dp.prototype.a=function(e,t){return new kn(e,t)};At(kn,tn);kn.prototype.h=function(){this.a.f=this.f,this.o&&(this.a.C=!0);var e=this.a,t=this.g,n=this.b||void 0;nn(0),e.ga=t,e.V=n||{},e.G=e.S,e.B=bO(e,null,e.ga),xp(e)};kn.prototype.close=function(){lb(this.a)};kn.prototype.l=function(e){if(typeof e=="string"){var t={};t.__data__=e,fb(this.a,t)}else this.m?(t={},t.__data__=G_(e),fb(this.a,t)):fb(this.a,e)};kn.prototype.H=function(){this.a.f=null,delete this.f,lb(this.a),delete this.a,kn.X.H.call(this)};At(IO,J_);At(TO,Z_);At(Aa,EO);Aa.prototype.ua=function(){kt(this.a,"a")};Aa.prototype.ta=function(e){kt(this.a,new IO(e))};Aa.prototype.sa=function(e){kt(this.a,new TO(e))};Aa.prototype.ra=function(){kt(this.a,"b")};At(Lp,$_);Lp.prototype.a=function(){return new Mp(this.f)};Lp.prototype.c=function(e){return function(){return e}}({});At(Mp,tn);db=0;z=Mp.prototype;z.open=function(e,t){if(this.readyState!=db)throw this.abort(),Error("Error reopening a connection");this.s=e,this.o=t,this.readyState=1,el(this)};z.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.l,method:this.s,credentials:this.h,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.o,t)).then(this.Wa.bind(this),this.ca.bind(this))};z.abort=function(){this.responseText="",this.l=new Headers,this.status=0,this.f&&this.f.cancel("Request was aborted."),1<=this.readyState&&this.a&&this.readyState!=4&&(this.a=!1,Zc(this)),this.readyState=db};z.Wa=function(e){this.a&&(this.g=e,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=e.headers,this.readyState=2,el(this)),this.a&&(this.readyState=3,el(this),this.a&&(this.responseType==="arraybuffer"?e.arrayBuffer().then(this.Ua.bind(this),this.ca.bind(this)):typeof ae.ReadableStream!="undefined"&&"body"in e?(this.responseText="",this.f=e.body.getReader(),this.m=new TextDecoder,SO(this)):e.text().then(this.Va.bind(this),this.ca.bind(this)))))};z.Ta=function(e){if(this.a){var t=this.m.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.responseText+=t),e.done?Zc(this):el(this),this.readyState==3&&SO(this)}};z.Va=function(e){this.a&&(this.responseText=e,Zc(this))};z.Ua=function(){this.a&&Zc(this)};z.ca=function(){this.a&&Zc(this)};z.setRequestHeader=function(e,t){this.l.append(e,t)};z.getResponseHeader=function(e){return this.b&&this.b.get(e.toLowerCase())||""};z.getAllResponseHeaders=function(){if(!this.b)return"";for(var e=[],t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};Object.defineProperty(Mp.prototype,"withCredentials",{get:function(){return this.h==="include"},set:function(e){this.h=e?"include":"same-origin"}});Dp.prototype.createWebChannel=Dp.prototype.a;kn.prototype.send=kn.prototype.l;kn.prototype.open=kn.prototype.h;kn.prototype.close=kn.prototype.close;wp.NO_ERROR=0;wp.TIMEOUT=8;wp.HTTP_ERROR=6;WN.COMPLETE="complete";KN.EventType=Kc;Kc.OPEN="a";Kc.CLOSE="b";Kc.ERROR="c";Kc.MESSAGE="d";tn.prototype.listen=tn.prototype.wa;dt.prototype.listenOnce=dt.prototype.xa;dt.prototype.getLastError=dt.prototype.Ra;dt.prototype.getLastErrorCode=dt.prototype.va;dt.prototype.getStatus=dt.prototype.W;dt.prototype.getResponseJson=dt.prototype.Qa;dt.prototype.getResponseText=dt.prototype.$;dt.prototype.send=dt.prototype.ba;CO=function(){return new Dp},AO=function(){return bp()},Fp=wp,kO=WN,RO=$o,vb={lb:0,ob:1,pb:2,Ib:3,Nb:4,Kb:5,Lb:6,Jb:7,Hb:8,Mb:9,PROXY:10,NOPROXY:11,Fb:12,Bb:13,Cb:14,Ab:15,Db:16,Eb:17,hb:18,gb:19,ib:20},NO=Lp,tl=KN,OO=dt});function gb(){return yr.logLevel}function q(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(yr.logLevel<=le.DEBUG){var r=t.map(yb);yr.debug.apply(yr,oe(["Firestore (8.6.8): "+e],r))}}function ot(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(yr.logLevel<=le.ERROR){var r=t.map(yb);yr.error.apply(yr,oe(["Firestore (8.6.8): "+e],r))}}function Up(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(yr.logLevel<=le.WARN){var r=t.map(yb);yr.warn.apply(yr,oe(["Firestore (8.6.8): "+e],r))}}function yb(e){if(typeof e=="string")return e;try{return t=e,JSON.stringify(t)}catch(n){return e}var t}function $(e){e===void 0&&(e="Unexpected state");var t="FIRESTORE (8.6.8) INTERNAL ASSERTION FAILED: "+e;throw ot(t),new Error(t)}function re(e,t){e||$()}function G(e,t){return e}function wG(e){var t=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function _e(e,t){return e<t?-1:e>t?1:0}function ka(e,t,n){return e.length===t.length&&e.every(function(r,i){return n(r,t[i])})}function PO(e){return e+"\0"}function DO(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ts(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function LO(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function si(e){if(re(!!e),typeof e=="string"){var t=0,n=IG.exec(e);if(re(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:st(e.seconds),nanos:st(e.nanos)}}function st(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Na(e){return typeof e=="string"?on.fromBase64String(e):on.fromUint8Array(e)}function _b(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function FO(e){var t=e.mapValue.fields.__previous_value__;return _b(t)?FO(t):t}function nl(e){var t=si(e.mapValue.fields.__local_write_time__.timestampValue);return new rn(t.seconds,t.nanos)}function ns(e){return e==null}function jp(e){return e===0&&1/e==-1/0}function UO(e){return typeof e=="number"&&Number.isInteger(e)&&!jp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function rs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?_b(e)?4:10:$()}function Ur(e,t){var n=rs(e);if(n!==rs(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return nl(e).isEqual(nl(t));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;var s=si(r.timestampValue),a=si(i.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,i){return Na(r.bytesValue).isEqual(Na(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,i){return st(r.geoPointValue.latitude)===st(i.geoPointValue.latitude)&&st(r.geoPointValue.longitude)===st(i.geoPointValue.longitude)}(e,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return st(r.integerValue)===st(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){var s=st(r.doubleValue),a=st(i.doubleValue);return s===a?jp(s)===jp(a):isNaN(s)&&isNaN(a)}return!1}(e,t);case 9:return ka(e.arrayValue.values||[],t.arrayValue.values||[],Ur);case 10:return function(r,i){var s=r.mapValue.fields||{},a=i.mapValue.fields||{};if(DO(s)!==DO(a))return!1;for(var c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Ur(s[c],a[c])))return!1;return!0}(e,t);default:return $()}}function rl(e,t){return(e.values||[]).find(function(n){return Ur(n,t)})!==void 0}function Oa(e,t){var n=rs(e),r=rs(t);if(n!==r)return _e(n,r);switch(n){case 0:return 0;case 1:return _e(e.booleanValue,t.booleanValue);case 2:return function(i,s){var a=st(i.integerValue||i.doubleValue),c=st(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(e,t);case 3:return jO(e.timestampValue,t.timestampValue);case 4:return jO(nl(e),nl(t));case 5:return _e(e.stringValue,t.stringValue);case 6:return function(i,s){var a=Na(i),c=Na(s);return a.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,s){for(var a=i.split("/"),c=s.split("/"),l=0;l<a.length&&l<c.length;l++){var h=_e(a[l],c[l]);if(h!==0)return h}return _e(a.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,s){var a=_e(st(i.latitude),st(s.latitude));return a!==0?a:_e(st(i.longitude),st(s.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,s){for(var a=i.values||[],c=s.values||[],l=0;l<a.length&&l<c.length;++l){var h=Oa(a[l],c[l]);if(h)return h}return _e(a.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,s){var a=i.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(var d=0;d<c.length&&d<h.length;++d){var g=_e(c[d],h[d]);if(g!==0)return g;var m=Oa(a[c[d]],l[h[d]]);if(m!==0)return m}return _e(c.length,h.length)}(e.mapValue,t.mapValue);default:throw $()}}function jO(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return _e(e,t);var n=si(e),r=si(t),i=_e(n.seconds,r.seconds);return i!==0?i:_e(n.nanos,r.nanos)}function bb(e){return wb(e)}function wb(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){var i=si(r);return"time("+i.seconds+","+i.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Na(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,J.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(r){for(var i="[",s=!0,a=0,c=r.values||[];a<c.length;a++)s?s=!1:i+=",",i+=wb(c[a]);return i+"]"}(e.arrayValue):"mapValue"in e?function(r){for(var i="{",s=!0,a=0,c=Object.keys(r.fields||{}).sort();a<c.length;a++){var l=c[a];s?s=!1:i+=",",i+=l+":"+wb(r.fields[l])}return i+"}"}(e.mapValue):$();var t,n}function Vp(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function Eb(e){return!!e&&"integerValue"in e}function Ib(e){return!!e&&"arrayValue"in e}function VO(e){return!!e&&"nullValue"in e}function BO(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Bp(e){return!!e&&"mapValue"in e}function il(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue)return{timestampValue:Object.assign({},si(e.timestampValue))};if(e.mapValue){var t={mapValue:{fields:{}}};return ts(e.mapValue.fields,function(i,s){return t.mapValue.fields[i]=il(s)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=il(e.arrayValue.values[r]);return n}return Object.assign({},e)}function qO(e){var t=[];return ts(e.fields,function(n,r){var i=new _r([n]);if(Bp(r)){var s=qO(r.mapValue).fields;if(s.length===0)t.push(i);else for(var a=0,c=s;a<c.length;a++){var l=c[a];t.push(i.child(l))}}else t.push(i)}),new Ra(t)}function WO(e,t,n,r,i,s,a){return t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s=null),a===void 0&&(a=null),new TG(e,t,n,r,i,s,a)}function ol(e){var t=G(e);if(t.h===null){var n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(r){return function(i){return i.field.canonicalString()+i.op.toString()+bb(i.value)}(r)}).join(","),n+="|ob:",n+=t.orderBy.map(function(r){return function(i){return i.field.canonicalString()+i.dir}(r)}).join(","),ns(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Gp(t.startAt)),t.endAt&&(n+="|ub:",n+=Gp(t.endAt)),t.h=n}return t.h}function qp(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!xG(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],s=t.filters[r],i.op!==s.op||!i.field.isEqual(s.field)||!Ur(i.value,s.value))return!1;var i,s;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!HO(e.startAt,t.startAt)&&HO(e.endAt,t.endAt)}function Wp(e){return J.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function GO(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(function(r){return J.fromName(r.referenceValue)})}function Gp(e){return(e.before?"b":"a")+":"+e.position.map(function(t){return bb(t)}).join(",")}function xG(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function KO(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var s=t[i],a=e.position[i];if(r=s.field.isKeyField()?J.comparator(J.fromName(a.referenceValue),n.key):Oa(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return e.before?r<=0:r<0}function HO(e,t){if(e===null)return t===null;if(t===null||e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ur(e.position[n],t.position[n]))return!1;return!0}function zO(e,t,n,r,i,s,a,c){return new ai(e,t,n,r,i,s,a,c)}function Pa(e){return new ai(e)}function Kp(e){return!ns(e.limit)&&e.limitType==="F"}function Hp(e){return!ns(e.limit)&&e.limitType==="L"}function Tb(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Sb(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function Cb(e){return e.collectionGroup!==null}function Da(e){var t=G(e);if(t.p===null){t.p=[];var n=Sb(t),r=Tb(t);if(n!==null&&r===null)n.isKeyField()||t.p.push(new xa(n)),t.p.push(new xa(_r.keyField(),"asc"));else{for(var i=!1,s=0,a=t.explicitOrderBy;s<a.length;s++){var c=a[s];t.p.push(c),c.field.isKeyField()&&(i=!0)}if(!i){var l=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new xa(_r.keyField(),l))}}}return t.p}function zn(e){var t=G(e);if(!t.T)if(t.limitType==="F")t.T=WO(t.path,t.collectionGroup,Da(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=Da(t);r<i.length;r++){var s=i[r],a=s.dir==="desc"?"asc":"desc";n.push(new xa(s.field,a))}var c=t.endAt?new sl(t.endAt.position,!t.endAt.before):null,l=t.startAt?new sl(t.startAt.position,!t.startAt.before):null;t.T=WO(t.path,t.collectionGroup,n,t.filters,t.limit,c,l)}return t.T}function QO(e,t,n){return new ai(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function al(e,t){return qp(zn(e),zn(t))&&e.limitType===t.limitType}function YO(e){return ol(zn(e))+"|lt:"+e.limitType}function Ab(e){return"Query(target="+function(t){var n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: ["+t.filters.map(function(r){return(i=r).field.canonicalString()+" "+i.op+" "+bb(i.value);var i}).join(", ")+"]"),ns(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: ["+t.orderBy.map(function(r){return function(i){return i.field.canonicalString()+" ("+i.dir+")"}(r)}).join(", ")+"]"),t.startAt&&(n+=", startAt: "+Gp(t.startAt)),t.endAt&&(n+=", endAt: "+Gp(t.endAt)),"Target("+n+")"}(zn(e))+"; limitType="+e.limitType+")"}function ul(e,t){return t.isFoundDocument()&&function(n,r){var i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):J.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(e,t)&&function(n,r){for(var i=0,s=n.explicitOrderBy;i<s.length;i++){var a=s[i];if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1}return!0}(e,t)&&function(n,r){for(var i=0,s=n.filters;i<s.length;i++)if(!s[i].matches(r))return!1;return!0}(e,t)&&function(n,r){return!(n.startAt&&!KO(n.startAt,Da(n),r))&&(!n.endAt||!KO(n.endAt,Da(n),r))}(e,t)}function XO(e){return function(t,n){for(var r=!1,i=0,s=Da(e);i<s.length;i++){var a=s[i],c=PG(a,t,n);if(c!==0)return c;r=r||a.field.isKeyField()}return 0}}function PG(e,t,n){var r=e.field.isKeyField()?J.comparator(t.key,n.key):function(i,s,a){var c=s.data.field(i),l=a.data.field(i);return c!==null&&l!==null?Oa(c,l):$()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return $()}}function $O(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jp(t)?"-0":t}}function JO(e){return{integerValue:""+e}}function ZO(e,t){return UO(t)?JO(t):$O(e,t)}function DG(e,t,n){return e instanceof La?function(r,i){var s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,t):e instanceof is?tx(e,t):e instanceof os?nx(e,t):function(r,i){var s=ex(r,i),a=rx(s)+rx(r.A);return Eb(s)&&Eb(r.A)?JO(a):$O(r.R,a)}(e,t)}function LG(e,t,n){return e instanceof is?tx(e,t):e instanceof os?nx(e,t):n}function ex(e,t){return e instanceof Ma?Eb(n=t)||function(r){return!!r&&"doubleValue"in r}(n)?t:{integerValue:0}:null;var n}function tx(e,t){for(var n=ix(t),r=function(a){n.some(function(c){return Ur(c,a)})||n.push(a)},i=0,s=e.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}function nx(e,t){for(var n=ix(t),r=function(a){n=n.filter(function(c){return!Ur(c,a)})},i=0,s=e.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}function rx(e){return st(e.integerValue||e.doubleValue)}function ix(e){return Ib(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function Qp(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}function FG(e,t,n){e instanceof ll?function(r,i,s){var a=r.value.clone(),c=ux(r.fieldTransforms,i,s.transformResults);a.setAll(c),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Hi?function(r,i,s){if(Qp(r.precondition,i)){var a=ux(r.fieldTransforms,i,s.transformResults),c=i.data;c.setAll(ax(r)),c.setAll(a),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}else i.convertToUnknownDocument(s.version)}(e,t,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,n)}function kb(e,t,n){e instanceof ll?function(r,i,s){if(Qp(r.precondition,i)){var a=r.value.clone(),c=cx(r.fieldTransforms,s,i);a.setAll(c),i.convertToFoundDocument(sx(i),a).setHasLocalMutations()}}(e,t,n):e instanceof Hi?function(r,i,s){if(Qp(r.precondition,i)){var a=cx(r.fieldTransforms,s,i),c=i.data;c.setAll(ax(r)),c.setAll(a),i.convertToFoundDocument(sx(i),c).setHasLocalMutations()}}(e,t,n):function(r,i){Qp(r.precondition,i)&&i.convertToNoDocument(de.min())}(e,t)}function UG(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var s=i[r],a=t.data.field(s.field),c=ex(s.transform,a||null);c!=null&&(n==null&&(n=Nn.empty()),n.set(s.field,c))}return n||null}function ox(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&ka(n,r,function(i,s){return function(a,c){return a.field.isEqual(c.field)&&function(l,h){return l instanceof is&&h instanceof is||l instanceof os&&h instanceof os?ka(l.elements,h.elements,Ur):l instanceof Ma&&h instanceof Ma?Ur(l.A,h.A):l instanceof La&&h instanceof La}(a.transform,c.transform)}(i,s)})}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function sx(e){return e.isFoundDocument()?e.version:de.min()}function ax(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function ux(e,t,n){var r=new Map;re(e.length===n.length);for(var i=0;i<n.length;i++){var s=e[i],a=s.transform,c=t.data.field(s.field);r.set(s.field,LG(a,c,n[i]))}return r}function cx(e,t,n){for(var r=new Map,i=0,s=e;i<s.length;i++){var a=s[i],c=a.transform,l=n.data.field(a.field);r.set(a.field,DG(c,l,t))}return r}function lx(e){switch(e){case N.OK:return $();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return $()}}function fx(e){if(e===void 0)return ot("GRPC error has no .code"),N.UNKNOWN;switch(e){case at.OK:return N.OK;case at.CANCELLED:return N.CANCELLED;case at.UNKNOWN:return N.UNKNOWN;case at.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case at.INTERNAL:return N.INTERNAL;case at.UNAVAILABLE:return N.UNAVAILABLE;case at.UNAUTHENTICATED:return N.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case at.NOT_FOUND:return N.NOT_FOUND;case at.ALREADY_EXISTS:return N.ALREADY_EXISTS;case at.PERMISSION_DENIED:return N.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case at.ABORTED:return N.ABORTED;case at.OUT_OF_RANGE:return N.OUT_OF_RANGE;case at.UNIMPLEMENTED:return N.UNIMPLEMENTED;case at.DATA_LOSS:return N.DATA_LOSS;default:return $()}}function Qn(){return VG}function Nb(){return BG}function px(){return qG}function Ne(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=WG,r=0,i=e;r<i.length;r++){var s=i[r];n=n.add(s)}return n}function $p(){return GG}function gx(){return new Vt(J.comparator)}function yx(){return new Vt(J.comparator)}function hl(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function _x(e,t){return e.I?t.toBase64():t.toUint8Array()}function YG(e,t){return hl(e,t.toTimestamp())}function Nt(e){return re(!!e),de.fromTimestamp(function(t){var n=si(t);return new rn(n.seconds,n.nanos)}(e))}function Pb(e,t){return function(n){return new Se(["projects",n.projectId,"databases",n.database])}(e).child("documents").child(t).canonicalString()}function bx(e){var t=Se.fromString(e);return re(xx(t)),t}function pl(e,t){return Pb(e.databaseId,t.path)}function jr(e,t){var n=bx(t);if(n.get(1)!==e.databaseId.projectId)throw new F(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new F(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new J(Ex(n))}function Db(e,t){return Pb(e.databaseId,t)}function wx(e){var t=bx(e);return t.length===4?Se.emptyPath():Ex(t)}function dl(e){return new Se(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ex(e){return re(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Ix(e,t,n){return{name:pl(e,t),fields:n.value.mapValue.fields}}function Tx(e,t,n){var r=jr(e,t.name),i=Nt(t.updateTime),s=new Nn({mapValue:{fields:t.fields}}),a=Rt.newFoundDocument(r,i,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Zp(e,t){var n;if(t instanceof ll)n={update:Ix(e,t.key,t.value)};else if(t instanceof fl)n={delete:pl(e,t.key)};else if(t instanceof Hi)n={update:Ix(e,t.key,t.data),updateMask:eK(t.fieldMask)};else{if(!(t instanceof Rb))return $();n={verify:pl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(r){return function(i,s){var a=s.transform;if(a instanceof La)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof is)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof os)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ma)return{fieldPath:s.field.canonicalString(),increment:a.A};throw $()}(0,r)})),t.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:YG(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:$()}(e,t.precondition)),n}function Sx(e,t){var n=t.currentDocument?function(h){return h.updateTime!==void 0?jt.updateTime(Nt(h.updateTime)):h.exists!==void 0?jt.exists(h.exists):jt.none()}(t.currentDocument):jt.none(),r=t.updateTransforms?t.updateTransforms.map(function(h){return function(d,g){var m=null;if("setToServerValue"in g)re(g.setToServerValue==="REQUEST_TIME"),m=new La;else if("appendMissingElements"in g){var _=g.appendMissingElements.values||[];m=new is(_)}else if("removeAllFromArray"in g){var w=g.removeAllFromArray.values||[];m=new os(w)}else"increment"in g?m=new Ma(d,g.increment):$();var E=_r.fromServerFormat(g.fieldPath);return new cl(E,m)}(e,h)}):[];if(t.update){t.update.name;var i=jr(e,t.update.name),s=new Nn({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(h){var d=h.fieldPaths||[];return new Ra(d.map(function(g){return _r.fromServerFormat(g)}))}(t.updateMask);return new Hi(i,s,a,n,r)}return new ll(i,s,n,r)}if(t.delete){var c=jr(e,t.delete);return new fl(c,n)}if(t.verify){var l=jr(e,t.verify);return new Rb(l,n)}return $()}function Cx(e,t){return{documents:[Db(e,t.path)]}}function Ax(e,t){var n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=Db(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Db(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(c){if(c.length!==0){var l=c.map(function(h){return function(d){if(d.op==="=="){if(BO(d.value))return{unaryFilter:{field:Fa(d.field),op:"IS_NAN"}};if(VO(d.value))return{unaryFilter:{field:Fa(d.field),op:"IS_NULL"}}}else if(d.op==="!="){if(BO(d.value))return{unaryFilter:{field:Fa(d.field),op:"IS_NOT_NAN"}};if(VO(d.value))return{unaryFilter:{field:Fa(d.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fa(d.field),op:$G(d.op),value:d.value}}}(h)});return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}}(t.filters);i&&(n.structuredQuery.where=i);var s=function(c){if(c.length!==0)return c.map(function(l){return function(h){return{field:Fa(h.field),direction:XG(h.dir)}}(l)})}(t.orderBy);s&&(n.structuredQuery.orderBy=s);var a=function(c,l){return c.I||ns(l)?l:{value:l}}(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=Nx(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Nx(t.endAt)),n}function kx(e){var t=wx(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){re(r===1);var s=n.from[0];s.allDescendants?i=s.collectionId:t=t.child(s.collectionId)}var a=[];n.where&&(a=Rx(n.where));var c=[];n.orderBy&&(c=n.orderBy.map(function(g){return function(m){return new xa(Ua(m.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(g)}));var l=null;n.limit&&(l=function(g){var m;return ns(m=typeof g=="object"?g.value:g)?null:m}(n.limit));var h=null;n.startAt&&(h=Ox(n.startAt));var d=null;return n.endAt&&(d=Ox(n.endAt)),zO(t,i,c,a,l,"F",h,d)}function Rx(e){return e?e.unaryFilter!==void 0?[ZG(e)]:e.fieldFilter!==void 0?[JG(e)]:e.compositeFilter!==void 0?e.compositeFilter.filters.map(function(t){return Rx(t)}).reduce(function(t,n){return t.concat(n)}):$():[]}function Nx(e){return{before:e.before,values:e.position}}function Ox(e){var t=!!e.before,n=e.values||[];return new sl(n,t)}function XG(e){return HG[e]}function $G(e){return zG[e]}function Fa(e){return{fieldPath:e.canonicalString()}}function Ua(e){return _r.fromServerFormat(e.fieldPath)}function JG(e){return On.create(Ua(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return $()}}(e.fieldFilter.op),e.fieldFilter.value)}function ZG(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Ua(e.unaryFilter.field);return On.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Ua(e.unaryFilter.field);return On.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ua(e.unaryFilter.field);return On.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ua(e.unaryFilter.field);return On.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return $()}}function eK(e){var t=[];return e.fields.forEach(function(n){return t.push(n.canonicalString())}),{fieldPaths:t}}function xx(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}function br(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Px(t)),t=tK(e.get(n),t);return Px(t)}function tK(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var s=e.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Px(e){return e+""}function ui(e){var t=e.length;if(re(t>=2),t===2)return re(e.charAt(0)===""&&e.charAt(1)===""),Se.emptyPath();for(var n=t-2,r=[],i="",s=0;s<t;){var a=e.indexOf("",s);switch((a<0||a>n)&&$(),e.charAt(a+1)){case"":var c=e.substring(s,a),l=void 0;i.length===0?l=c:(l=i+=c,i=""),r.push(l);break;case"":i+=e.substring(s,a),i+="\0";break;case"":i+=e.substring(s,a+1);break;default:$()}s=a+2}return new Se(r)}function as(e){return e.name==="IndexedDbTransactionError"}function us(e){return new j(function(t,n){e.onsuccess=function(r){var i=r.target.result;t(i)},e.onerror=function(r){var i=Lb(r.target.error);n(i)}})}function Lb(e){var t=Ba._t(Ri());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new F("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Fx||(Fx=!0,setTimeout(function(){throw r},0)),r}}return e}function wn(e,t){var n=G(e);return Ba.It(n.Mt,t)}function Fb(e,t){if(t.document)return Tx(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=J.fromSegments(t.noDocument.path),r=Wa(t.noDocument.readTime),i=Rt.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var s=J.fromSegments(t.unknownDocument.path);return r=Wa(t.unknownDocument.version),Rt.newUnknownDocument(s,r)}return $()}function Vx(e,t,n){var r=Ub(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var s=function(g,m){return{name:pl(g,m.key),fields:m.data.value.mapValue.fields,updateTime:hl(g,m.version.toTimestamp())}}(e.Lt,t),a=t.hasCommittedMutations;return new $e(null,null,s,a,r,i)}if(t.isNoDocument()){var c=t.key.path.toArray(),l=qa(t.version);return a=t.hasCommittedMutations,new $e(null,new rK(c,l),null,a,r,i)}if(t.isUnknownDocument()){var h=t.key.path.toArray(),d=qa(t.version);return new $e(new iK(h,d),null,null,!0,r,i)}return $()}function Ub(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Bx(e){var t=new rn(e[0],e[1]);return de.fromTimestamp(t)}function qa(e){var t=e.toTimestamp();return new nK(t.seconds,t.nanoseconds)}function Wa(e){var t=new rn(e.seconds,e.nanoseconds);return de.fromTimestamp(t)}function Ga(e,t){for(var n=(t.baseMutations||[]).map(function(l){return Sx(e.Lt,l)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&t.mutations[r+1].transform!==void 0){var s=t.mutations[r+1];i.updateTransforms=s.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map(function(l){return Sx(e.Lt,l)}),c=rn.fromMillis(t.localWriteTimeMs);return new Mb(t.batchId,c,n,a)}function ml(e){var t,n,r=Wa(e.readTime),i=e.lastLimboFreeSnapshotVersion!==void 0?Wa(e.lastLimboFreeSnapshotVersion):de.min();return e.query.documents!==void 0?(re((n=e.query).documents.length===1),t=zn(Pa(wx(n.documents[0])))):t=function(s){return zn(kx(s))}(e.query),new ed(t,e.targetId,0,e.lastListenSequenceNumber,r,i,on.fromBase64String(e.resumeToken))}function qx(e,t){var n,r=qa(t.snapshotVersion),i=qa(t.lastLimboFreeSnapshotVersion);n=Wp(t.target)?Cx(e.Lt,t.target):Ax(e.Lt,t.target);var s=t.resumeToken.toBase64();return new bn(t.targetId,ol(t.target),r,s,t.sequenceNumber,i,n)}function jb(e){var t=kx({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?QO(t,t.limit,"L"):t}function Wx(e){return wn(e,ja.store)}function Gx(e){return wn(e,Va.store)}function Kx(e){return wn(e,ss.store)}function zx(e,t,n){var r=e.store(je.store),i=e.store(Bt.store),s=[],a=IDBKeyRange.only(n.batchId),c=0,l=r.$t({range:a},function(w,E,T){return c++,T.delete()});s.push(l.next(function(){re(c===1)}));for(var h=[],d=0,g=n.mutations;d<g.length;d++){var m=g[d],_=Bt.key(t,m.key.path,n.batchId);s.push(i.delete(_)),h.push(m.key)}return j.waitFor(s).next(function(){return h})}function td(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw $();t=e.noDocument}return JSON.stringify(t).length}function Qx(e,t,n){var r=Bt.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),a=!1;return Ka(e).$t({range:s,kt:!0},function(c,l,h){var d=c[0],g=c[1];c[2],d===t&&g===i&&(a=!0),h.done()}).next(function(){return a})}function Yi(e){return wn(e,je.store)}function Ka(e){return wn(e,Bt.store)}function Yx(e){return wn(e,Qi.store)}function Ha(e){return wn(e,bn.store)}function Xx(e){return wn(e,Pn.store)}function Xi(e){return wn(e,Ot.store)}function cs(e){return A(this,void 0,void 0,function(){return C(this,function(t){if(e.code!==N.FAILED_PRECONDITION||e.message!==Dx)throw e;return q("LocalStore","Unexpectedly lost primary lease"),[2]})})}function $x(e,t){var n=e[0],r=e[1],i=t[0],s=t[1],a=_e(n,i);return a===0?_e(r,s):a}function rd(e,t){return Xi(e).put(function(n,r){return new Ot(0,br(n.path),r)}(t,e.currentSequenceNumber))}function Zx(e){return wn(e,Vr.store)}function $i(e){return wn(e,$e.store)}function id(e){return e.path.toArray()}function eP(e){e.createObjectStore(Ot.store,{keyPath:Ot.keyPath}).createIndex(Ot.documentTargetsIndex,Ot.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(bn.store,{keyPath:bn.keyPath}).createIndex(bn.queryTargetsIndexName,bn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Pn.store)}function gl(e){return wn(e,xn.store)}function od(e){return wn(e,ci.store)}function qb(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}function rP(e,t,n,r){return new TK(e,t,n,r)}function iP(e,t){return A(this,void 0,void 0,function(){var n,r,i,s;return C(this,function(a){switch(a.label){case 0:return n=G(e),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(c){var l;return n._n.getAllMutationBatches(c).next(function(h){return l=h,r=n.persistence.getMutationQueue(t),i=new tP(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(c)}).next(function(h){for(var d=[],g=[],m=Ne(),_=0,w=l;_<w.length;_++){var E=w[_];d.push(E.batchId);for(var T=0,S=E.mutations;T<S.length;T++){var R=S[T];m=m.add(R.key)}}for(var O=0,U=h;O<U.length;O++){var L=U[O];g.push(L.batchId);for(var P=0,ue=L.mutations;P<ue.length;P++){var Je=ue[P];m=m.add(Je.key)}}return i.pn(c,m).next(function(X){return{Ln:X,removedBatchIds:d,addedBatchIds:g}})})})];case 1:return s=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),s)]}})})}function SK(e,t){var n=G(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var i=t.batch.keys(),s=n.On.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){var d=l.batch,g=d.keys(),m=j.resolve();return g.forEach(function(_){m=m.next(function(){return h.getEntry(c,_)}).next(function(w){var E=l.docVersions.get(_);re(E!==null),w.version.compareTo(E)<0&&(d.applyToRemoteDocument(w,l),w.isValidDocument()&&h.addEntry(w,l.commitVersion))})}),m.next(function(){return a._n.removeMutationBatch(c,d)})}(n,r,t,s).next(function(){return s.apply(r)}).next(function(){return n._n.performConsistencyCheck(r)}).next(function(){return n.Mn.pn(r,i)})})}function oP(e){var t=G(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(n){return t.qe.getLastRemoteSnapshotVersion(n)})}function CK(e,t){var n=G(e),r=t.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var a=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var c=[];t.targetChanges.forEach(function(d,g){var m=i.get(g);if(m){c.push(n.qe.removeMatchingKeys(s,d.removedDocuments,g).next(function(){return n.qe.addMatchingKeys(s,d.addedDocuments,g)}));var _=d.resumeToken;if(_.approximateByteSize()>0){var w=m.withResumeToken(_,r).withSequenceNumber(s.currentSequenceNumber);i=i.insert(g,w),function(E,T,S){return re(T.resumeToken.approximateByteSize()>0),E.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8||S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,w,d)&&c.push(n.qe.updateTargetData(s,w))}}});var l=Qn();if(t.documentUpdates.forEach(function(d,g){t.resolvedLimboDocuments.has(d)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),c.push(sP(s,a,t.documentUpdates,r,void 0).next(function(d){l=d})),!r.isEqual(de.min())){var h=n.qe.getLastRemoteSnapshotVersion(s).next(function(d){return n.qe.setTargetsMetadata(s,s.currentSequenceNumber,r)});c.push(h)}return j.waitFor(c).next(function(){return a.apply(s)}).next(function(){return n.Mn.En(s,l)}).next(function(){return l})}).then(function(s){return n.Fn=i,s})}function sP(e,t,n,r,i){var s=Ne();return n.forEach(function(a){return s=s.add(a)}),t.getEntries(e,s).next(function(a){var c=Qn();return n.forEach(function(l,h){var d=a.get(l),g=(i==null?void 0:i.get(l))||r;h.isNoDocument()&&h.version.isEqual(de.min())?(t.removeEntry(l,g),c=c.insert(l,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(h,g),c=c.insert(l,h)):q("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",h.version)}),c})}function AK(e,t){var n=G(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(r){return t===void 0&&(t=-1),n._n.getNextMutationBatchAfterBatchId(r,t)})}function Qa(e,t){var n=G(e);return n.persistence.runTransaction("Allocate target","readwrite",function(r){var i;return n.qe.getTargetData(r,t).next(function(s){return s?(i=s,j.resolve(i)):n.qe.allocateTargetId(r).next(function(a){return i=new ed(t,a,0,r.currentSequenceNumber),n.qe.addTargetData(r,i).next(function(){return i})})})}).then(function(r){var i=n.Fn.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(r.targetId,r),n.kn.set(t,r.targetId)),r})}function Ya(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,a;return C(this,function(c){switch(c.label){case 0:r=G(e),i=r.Fn.get(t),s=n?"readwrite":"readwrite-primary",c.label=1;case 1:return c.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(l){return r.persistence.referenceDelegate.removeTarget(l,i)})];case 2:c.sent(),c.label=3;case 3:return[3,5];case 4:if(!as(a=c.sent()))throw a;return q("LocalStore","Failed to update sequence numbers for target "+t+": "+a),[3,5];case 5:return r.Fn=r.Fn.remove(t),r.kn.delete(i.target),[2]}})})}function sd(e,t,n){var r=G(e),i=de.min(),s=Ne();return r.persistence.runTransaction("Execute query","readonly",function(a){return function(c,l,h){var d=G(c),g=d.kn.get(h);return g!==void 0?j.resolve(d.Fn.get(g)):d.qe.getTargetData(l,h)}(r,a,zn(t)).next(function(c){if(c)return i=c.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(a,c.targetId).next(function(l){s=l})}).next(function(){return r.xn.getDocumentsMatchingQuery(a,t,n?i:de.min(),n?s:Ne())}).next(function(c){return{documents:c,Bn:s}})})}function aP(e,t){var n=G(e),r=G(n.qe),i=n.Fn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(s){return r.lt(s,t).next(function(a){return a?a.target:null})})}function uP(e){var t=G(e);return t.persistence.runTransaction("Get new document changes","readonly",function(n){return function(r,i,s){var a=G(r),c=Qn(),l=Ub(s),h=$i(i),d=IDBKeyRange.lowerBound(l,!0);return h.$t({index:$e.readTimeIndex,range:d},function(g,m){var _=Fb(a.R,m);c=c.insert(_.key,_),l=m.readTime}).next(function(){return{wn:c,readTime:Bx(l)}})}(t.On,n,t.$n)}).then(function(n){var r=n.wn,i=n.readTime;return t.$n=i,r})}function kK(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){return[2,(t=G(e)).persistence.runTransaction("Synchronize last document change read time","readonly",function(r){return function(i){var s=$i(i),a=de.min();return s.$t({index:$e.readTimeIndex,reverse:!0},function(c,l,h){l.readTime&&(a=Bx(l.readTime)),h.done()}).next(function(){return a})}(r)}).then(function(r){t.$n=r})]})})}function RK(e,t,n,r){return A(this,void 0,void 0,function(){var i,s,a,c,l,h,d,g,m,_;return C(this,function(w){switch(w.label){case 0:for(i=G(e),s=Ne(),a=Qn(),c=px(),l=0,h=n;l<h.length;l++)d=h[l],g=t.qn(d.metadata.name),d.document&&(s=s.add(g)),a=a.insert(g,t.Un(d)),c=c.insert(g,t.Qn(d.metadata.readTime));return m=i.On.newChangeBuffer({trackRemovals:!0}),[4,Qa(i,function(E){return zn(Pa(Se.fromString("__bundle__/docs/"+E)))}(r))];case 1:return _=w.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(E){return sP(E,m,a,de.min(),c).next(function(T){return m.apply(E),T}).next(function(T){return i.qe.removeMatchingKeysForTargetId(E,_.targetId).next(function(){return i.qe.addMatchingKeys(E,s,_.targetId)}).next(function(){return i.Mn.En(E,T)}).next(function(){return T})})})]}})})}function NK(e,t,n){return n===void 0&&(n=Ne()),A(this,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return[4,Qa(e,zn(jb(t.bundledQuery)))];case 1:return r=s.sent(),[2,(i=G(e)).persistence.runTransaction("Save named query","readwrite",function(a){var c=Nt(t.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Qe.saveNamedQuery(a,t);var l=r.withResumeToken(on.EMPTY_BYTE_STRING,c);return i.Fn=i.Fn.insert(l.targetId,l),i.qe.updateTargetData(a,l).next(function(){return i.qe.removeMatchingKeysForTargetId(a,r.targetId)}).next(function(){return i.qe.addMatchingKeys(a,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(a,t)})})]}})})}function cP(e,t){return"firestore_clients_"+e+"_"+t}function lP(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function Gb(e,t){return"firestore_targets_"+e+"_"+t}function vP(){return typeof window!="undefined"?window:null}function ad(){return typeof document!="undefined"?document:null}function ud(e){return new QG(e,!0)}function yl(e){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:if(!Ji(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function Xa(e){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function cd(e,t){var n=G(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),$b(n)?Xb(n):Ja(n).er()&&Yb(n,t))}function _l(e,t){var n=G(e),r=Ja(n);n.$r.delete(t),r.er()&&gP(n,t),n.$r.size===0&&(r.er()?r.ir():Ji(n)&&n.Br.set("Unknown"))}function Yb(e,t){e.qr.U(t.targetId),Ja(e).mr(t)}function gP(e,t){e.qr.U(t),Ja(e).yr(t)}function Xb(e){e.qr=new KG({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),Ja(e).start(),e.Br.Sr()}function $b(e){return Ji(e)&&!Ja(e).tr()&&e.$r.size>0}function Ji(e){return G(e).Or.size===0}function yP(e){e.qr=void 0}function YK(e){return A(this,void 0,void 0,function(){return C(this,function(t){return e.$r.forEach(function(n,r){Yb(e,n)}),[2]})})}function XK(e,t){return A(this,void 0,void 0,function(){return C(this,function(n){return yP(e),$b(e)?(e.Br.Nr(t),Xb(e)):e.Br.set("Unknown"),[2]})})}function $K(e,t,n){return A(this,void 0,void 0,function(){var r,i,s;return C(this,function(a){switch(a.label){case 0:if(e.Br.set("Online"),!(t instanceof vx&&t.state===2&&t.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(c,l){return A(this,void 0,void 0,function(){var h,d,g,m;return C(this,function(_){switch(_.label){case 0:h=l.cause,d=0,g=l.targetIds,_.label=1;case 1:return d<g.length?(m=g[d],c.$r.has(m)?[4,c.remoteSyncer.rejectListen(m,h)]:[3,3]):[3,5];case 2:_.sent(),c.$r.delete(m),c.qr.removeTarget(m),_.label=3;case 3:_.label=4;case 4:return d++,[3,1];case 5:return[2]}})})}(e,t)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),q("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,ld(e,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Jp?e.qr.X(t):t instanceof dx?e.qr.rt(t):e.qr.et(t),n.isEqual(de.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,oP(e.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(c,l){var h=c.qr.ut(l);return h.targetChanges.forEach(function(d,g){if(d.resumeToken.approximateByteSize()>0){var m=c.$r.get(g);m&&c.$r.set(g,m.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach(function(d){var g=c.$r.get(d);if(g){c.$r.set(d,g.withResumeToken(on.EMPTY_BYTE_STRING,g.snapshotVersion)),gP(c,d);var m=new ed(g.target,d,1,g.sequenceNumber);Yb(c,m)}}),c.remoteSyncer.applyRemoteEvent(h)}(e,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return q("RemoteStore","Failed to raise snapshot:",s=a.sent()),[4,ld(e,s)];case 12:return a.sent(),[3,13];case 13:return[2]}})})}function ld(e,t,n){return A(this,void 0,void 0,function(){var r=this;return C(this,function(i){switch(i.label){case 0:if(!as(t))throw t;return e.Or.add(1),[4,Xa(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return oP(e.localStore)}),e.asyncQueue.enqueueRetryable(function(){return A(r,void 0,void 0,function(){return C(this,function(s){switch(s.label){case 0:return q("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return s.sent(),e.Or.delete(1),[4,yl(e)];case 2:return s.sent(),[2]}})})}),[2]}})})}function _P(e,t){return t().catch(function(n){return ld(e,n,t)})}function $a(e){return A(this,void 0,void 0,function(){var t,n,r,i,s;return C(this,function(a){switch(a.label){case 0:t=G(e),n=Zi(t),r=t.kr.length>0?t.kr[t.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(c){return Ji(c)&&c.kr.length<10}(t))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,AK(t.localStore,r)];case 3:return(i=a.sent())===null?(t.kr.length===0&&n.ir(),[3,7]):(r=i.batchId,function(c,l){c.kr.push(l);var h=Zi(c);h.er()&&h.pr&&h.Er(l.mutations)}(t,i),[3,6]);case 4:return s=a.sent(),[4,ld(t,s)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return bP(t)&&wP(t),[2]}})})}function bP(e){return Ji(e)&&!Zi(e).tr()&&e.kr.length>0}function wP(e){Zi(e).start()}function JK(e){return A(this,void 0,void 0,function(){return C(this,function(t){return Zi(e).Ar(),[2]})})}function ZK(e){return A(this,void 0,void 0,function(){var t,n,r,i;return C(this,function(s){for(t=Zi(e),n=0,r=e.kr;n<r.length;n++)i=r[n],t.Er(i.mutations);return[2]})})}function eH(e,t,n){return A(this,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return r=e.kr.shift(),i=uK.from(r,t,n),[4,_P(e,function(){return e.remoteSyncer.applySuccessfulWrite(i)})];case 1:return s.sent(),[4,$a(e)];case 2:return s.sent(),[2]}})})}function tH(e,t){return A(this,void 0,void 0,function(){return C(this,function(n){switch(n.label){case 0:return t&&Zi(e).pr?[4,function(r,i){return A(this,void 0,void 0,function(){var s,a;return C(this,function(c){switch(c.label){case 0:return lx(a=i.code)&&a!==N.ABORTED?(s=r.kr.shift(),Zi(r).sr(),[4,_P(r,function(){return r.remoteSyncer.rejectFailedWrite(s.batchId,i)})]):[3,3];case 1:return c.sent(),[4,$a(r)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return bP(e)&&wP(e),[2]}})})}function Jb(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return n=G(e),t?(n.Or.delete(2),[4,yl(n)]):[3,2];case 1:return i.sent(),[3,5];case 2:return(r=t)?[3,4]:(n.Or.add(2),[4,Xa(n)]);case 3:i.sent(),r=n.Br.set("Unknown"),i.label=4;case 4:i.label=5;case 5:return[2]}})})}function Ja(e){var t=this;return e.Ur||(e.Ur=function(n,r,i){var s=G(n);return s.br(),new GK(r,s.Hi,s.credentials,s.R,i)}(e.datastore,e.asyncQueue,{Ii:YK.bind(null,e),Ri:XK.bind(null,e),_r:$K.bind(null,e)}),e.Mr.push(function(n){return A(t,void 0,void 0,function(){return C(this,function(r){switch(r.label){case 0:return n?(e.Ur.sr(),$b(e)?Xb(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:r.sent(),yP(e),r.label=3;case 3:return[2]}})})})),e.Ur}function Zi(e){var t=this;return e.Qr||(e.Qr=function(n,r,i){var s=G(n);return s.br(),new KK(r,s.Hi,s.credentials,s.R,i)}(e.datastore,e.asyncQueue,{Ii:JK.bind(null,e),Ri:tH.bind(null,e),Ir:ZK.bind(null,e),Tr:eH.bind(null,e)}),e.Mr.push(function(n){return A(t,void 0,void 0,function(){return C(this,function(r){switch(r.label){case 0:return n?(e.Qr.sr(),[4,$a(e)]):[3,2];case 1:return r.sent(),[3,4];case 2:return[4,e.Qr.stop()];case 3:r.sent(),e.kr.length>0&&(q("RemoteStore","Stopping write stream with "+e.kr.length+" pending writes"),e.kr=[]),r.label=4;case 4:return[2]}})})})),e.Qr}function Za(e,t){if(ot("AsyncQueue",t+": "+e),as(e))return new F(N.UNAVAILABLE,t+": "+e);throw e}function Zb(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:if(n=G(e),r=t.query,i=!1,(s=n.queries.get(r))||(i=!0,s=new rH),!i)return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),a=s,[4,n.onListen(r)];case 2:return a.Wr=h.sent(),[3,4];case 3:return c=h.sent(),l=Za(c,"Initialization of query '"+Ab(t.query)+"' failed"),[2,void t.onError(l)];case 4:return n.queries.set(r,s),s.listeners.push(t),t.zr(n.onlineState),s.Wr&&t.Hr(s.Wr)&&tw(n),[2]}})})}function ew(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,a;return C(this,function(c){return n=G(e),r=t.query,i=!1,(s=n.queries.get(r))&&(a=s.listeners.indexOf(t))>=0&&(s.listeners.splice(a,1),i=s.listeners.length===0),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function oH(e,t){for(var n=G(e),r=!1,i=0,s=t;i<s.length;i++){var a=s[i],c=a.query,l=n.queries.get(c);if(l){for(var h=0,d=l.listeners;h<d.length;h++)d[h].Hr(a)&&(r=!0);l.Wr=a}}r&&tw(n)}function sH(e,t,n){var r=G(e),i=r.queries.get(t);if(i)for(var s=0,a=i.listeners;s<a.length;s++)a[s].onError(n);r.queries.delete(t)}function tw(e){e.Gr.forEach(function(t){t.next()})}function uH(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}function hH(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,a,c;return C(this,function(l){switch(l.label){case 0:return n=uw(e),(s=n.Po.get(t))?(r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ro(),[3,4]):[3,1];case 1:return[4,Qa(n.localStore,zn(t))];case 2:return a=l.sent(),c=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,rw(n,t,r,c==="current")];case 3:i=l.sent(),n.isPrimaryClient&&cd(n.remoteStore,a),l.label=4;case 4:return[2,i]}})})}function rw(e,t,n,r){return A(this,void 0,void 0,function(){var i,s,a,c,l,h;return C(this,function(d){switch(d.label){case 0:return e.Oo=function(g,m,_){return function(w,E,T,S){return A(this,void 0,void 0,function(){var R,O,U;return C(this,function(L){switch(L.label){case 0:return R=E.view._o(T),R.Nn?[4,sd(w.localStore,E.query,!1).then(function(P){var ue=P.documents;return E.view._o(ue,R)})]:[3,2];case 1:R=L.sent(),L.label=2;case 2:return O=S&&S.targetChanges.get(E.targetId),U=E.view.applyChanges(R,w.isPrimaryClient,O),[2,(sw(w,E.targetId,U.To),U.snapshot)]}})})}(e,g,m,_)},[4,sd(e.localStore,t,!0)];case 1:return i=d.sent(),s=new AP(t,i.Bn),a=s._o(i.documents),c=xb.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline"),l=s.applyChanges(a,e.isPrimaryClient,c),sw(e,n,l.To),h=new cH(t,n,s),[2,(e.Po.set(t,h),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),l.snapshot)]}})})}function pH(e,t){return A(this,void 0,void 0,function(){var n,r,i;return C(this,function(s){switch(s.label){case 0:return n=G(e),r=n.Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(a){return!al(a,t)})),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Ya(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),_l(n.remoteStore,r.targetId),eu(n,r.targetId)}).catch(cs)]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return eu(n,r.targetId),[4,Ya(n.localStore,r.targetId,!0)];case 4:s.sent(),s.label=5;case 5:return[2]}})})}function dH(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,a;return C(this,function(c){switch(c.label){case 0:r=cw(e),c.label=1;case 1:return c.trys.push([1,5,,6]),[4,function(l,h){var d,g=G(l),m=rn.now(),_=h.reduce(function(w,E){return w.add(E.key)},Ne());return g.persistence.runTransaction("Locally write mutations","readwrite",function(w){return g.Mn.pn(w,_).next(function(E){d=E;for(var T=[],S=0,R=h;S<R.length;S++){var O=R[S],U=UG(O,d.get(O.key));U!=null&&T.push(new Hi(O.key,U,qO(U.value.mapValue),jt.exists(!0)))}return g._n.addMutationBatch(w,m,T,h)})}).then(function(w){return w.applyToLocalDocumentSet(d),{batchId:w.batchId,changes:d}})}(r.localStore,t)];case 2:return i=c.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(l,h,d){var g=l.xo[l.currentUser.toKey()];g||(g=new Vt(_e)),g=g.insert(h,d),l.xo[l.currentUser.toKey()]=g}(r,i.batchId,n),[4,eo(r,i.changes)];case 3:return c.sent(),[4,$a(r.remoteStore)];case 4:return c.sent(),[3,6];case 5:return s=c.sent(),a=Za(s,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}})})}function kP(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:n=G(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,CK(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach(function(s,a){var c=n.Co.get(a);c&&(re(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.bo=!0:s.modifiedDocuments.size>0?re(c.bo):s.removedDocuments.size>0&&(re(c.bo),c.bo=!1))}),[4,eo(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,cs(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function RP(e,t,n){var r=G(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){var i=[];r.Po.forEach(function(s,a){var c=a.view.zr(t);c.snapshot&&i.push(c.snapshot)}),function(s,a){var c=G(s);c.onlineState=a;var l=!1;c.queries.forEach(function(h,d){for(var g=0,m=d.listeners;g<m.length;g++)m[g].zr(a)&&(l=!0)}),l&&tw(c)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function vH(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:return(r=G(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.Co.get(t),(s=i&&i.key)?(a=(a=new Vt(J.comparator)).insert(s,Rt.newNoDocument(s,de.min())),c=Ne().add(s),l=new Ob(de.min(),new Map,new vt(_e),a,c),[4,kP(r,l)]):[3,2];case 1:return h.sent(),r.Do=r.Do.remove(s),r.Co.delete(t),aw(r),[3,4];case 2:return[4,Ya(r.localStore,t,!1).then(function(){return eu(r,t,n)}).catch(cs)];case 3:h.sent(),h.label=4;case 4:return[2]}})})}function mH(e,t){return A(this,void 0,void 0,function(){var n,r,i;return C(this,function(s){switch(s.label){case 0:n=G(e),r=t.batch.batchId,s.label=1;case 1:return s.trys.push([1,4,,6]),[4,SK(n.localStore,t)];case 2:return i=s.sent(),ow(n,r,null),iw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,eo(n,i)];case 3:return s.sent(),[3,6];case 4:return[4,cs(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function gH(e,t,n){return A(this,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:r=G(e),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,function(a,c){var l=G(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",function(h){var d;return l._n.lookupMutationBatch(h,c).next(function(g){return re(g!==null),d=g.keys(),l._n.removeMutationBatch(h,g)}).next(function(){return l._n.performConsistencyCheck(h)}).next(function(){return l.Mn.pn(h,d)})})}(r.localStore,t)];case 2:return i=s.sent(),ow(r,t,n),iw(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,eo(r,i)];case 3:return s.sent(),[3,6];case 4:return[4,cs(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function yH(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,a;return C(this,function(c){switch(c.label){case 0:Ji((n=G(e)).remoteStore)||q("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,function(l){var h=G(l);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(d){return h._n.getHighestUnacknowledgedBatchId(d)})}(n.localStore)];case 2:return(r=c.sent())===-1?[2,void t.resolve()]:((i=n.Fo.get(r)||[]).push(t),n.Fo.set(r,i),[3,4]);case 3:return s=c.sent(),a=Za(s,"Initialization of waitForPendingWrites() operation failed"),t.reject(a),[3,4];case 4:return[2]}})})}function iw(e,t){(e.Fo.get(t)||[]).forEach(function(n){n.resolve()}),e.Fo.delete(t)}function ow(e,t,n){var r=G(e),i=r.xo[r.currentUser.toKey()];if(i){var s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function eu(e,t,n){n===void 0&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var s=i[r];e.Po.delete(s),n&&e.vo.Mo(s,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach(function(a){e.No.containsKey(a)||NP(e,a)})}function NP(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);n!==null&&(_l(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),aw(e))}function sw(e,t,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];s instanceof SP?(e.No.addReference(s.key,t),_H(e,s)):s instanceof CP?(q("SyncEngine","Document no longer in limbo: "+s.key),e.No.removeReference(s.key,t),e.No.containsKey(s.key)||NP(e,s.key)):$()}}function _H(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(q("SyncEngine","New document in limbo: "+n),e.So.add(r),aw(e))}function aw(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new J(Se.fromString(t)),r=e.ko.next();e.Co.set(r,new lH(n)),e.Do=e.Do.insert(n,r),cd(e.remoteStore,new ed(zn(Pa(n.path)),r,2,Rn.o))}}function eo(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,a;return C(this,function(c){switch(c.label){case 0:return r=G(e),i=[],s=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(l,h){a.push(r.Oo(h,t,n).then(function(d){if(d){r.isPrimaryClient&&r.sharedClientState.updateQueryState(h.targetId,d.fromCache?"not-current":"current"),i.push(d);var g=IK.Pn(h.targetId,d);s.push(g)}}))}),[4,Promise.all(a)]);case 1:return c.sent(),r.vo._r(i),[4,function(l,h){return A(this,void 0,void 0,function(){var d,g,m,_,w,E,T,S,R;return C(this,function(O){switch(O.label){case 0:d=G(l),O.label=1;case 1:return O.trys.push([1,3,,4]),[4,d.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(U){return j.forEach(h,function(L){return j.forEach(L.bn,function(P){return d.persistence.referenceDelegate.addReference(U,L.targetId,P)}).next(function(){return j.forEach(L.vn,function(P){return d.persistence.referenceDelegate.removeReference(U,L.targetId,P)})})})})];case 2:return O.sent(),[3,4];case 3:if(!as(g=O.sent()))throw g;return q("LocalStore","Failed to update sequence numbers: "+g),[3,4];case 4:for(m=0,_=h;m<_.length;m++)w=_[m],E=w.targetId,w.fromCache||(T=d.Fn.get(E),S=T.snapshotVersion,R=T.withLastLimboFreeSnapshotVersion(S),d.Fn=d.Fn.insert(E,R));return[2]}})})}(r.localStore,s)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function bH(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return(n=G(e)).currentUser.isEqual(t)?[3,3]:(q("SyncEngine","User change. New user:",t.toKey()),[4,iP(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,function(s,a){s.Fo.forEach(function(c){c.forEach(function(l){l.reject(new F(N.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Fo.clear()}(n),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,eo(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function wH(e,t){var n=G(e),r=n.Co.get(t);if(r&&r.bo)return Ne().add(r.key);var i=Ne(),s=n.Vo.get(t);if(!s)return i;for(var a=0,c=s;a<c.length;a++){var l=c[a],h=n.Po.get(l);i=i.unionWith(h.view.wo)}return i}function EH(e,t){return A(this,void 0,void 0,function(){var n,r,i;return C(this,function(s){switch(s.label){case 0:return[4,sd((n=G(e)).localStore,t.query,!0)];case 1:return r=s.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&sw(n,t.targetId,i.To),i)]}})})}function IH(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){return[2,uP((t=G(e)).localStore).then(function(r){return eo(t,r)})]})})}function TH(e,t,n,r){return A(this,void 0,void 0,function(){var i,s;return C(this,function(a){switch(a.label){case 0:return[4,function(c,l){var h=G(c),d=G(h._n);return h.persistence.runTransaction("Lookup mutation documents","readonly",function(g){return d.jt(g,l).next(function(m){return m?h.Mn.pn(g,m):j.resolve(null)})})}((i=G(e)).localStore,t)];case 1:return(s=a.sent())===null?[3,6]:n!=="pending"?[3,3]:[4,$a(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:n==="acknowledged"||n==="rejected"?(ow(i,t,r||null),iw(i,t),function(c,l){G(G(c)._n).Gt(l)}(i.localStore,t)):$(),a.label=4;case 4:return[4,eo(i,s)];case 5:return a.sent(),[3,7];case 6:q("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}})})}function SH(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,a,c,l,h;return C(this,function(d){switch(d.label){case 0:return uw(n=G(e)),cw(n),t!==!0||n.$o===!0?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,OP(n,r.toArray())]);case 1:return i=d.sent(),n.$o=!0,[4,Jb(n.remoteStore,!0)];case 2:for(d.sent(),s=0,a=i;s<a.length;s++)c=a[s],cd(n.remoteStore,c);return[3,7];case 3:return t!==!1||n.$o===!1?[3,7]:(l=[],h=Promise.resolve(),n.Vo.forEach(function(g,m){n.sharedClientState.isLocalQueryTarget(m)?l.push(m):h=h.then(function(){return eu(n,m),Ya(n.localStore,m,!0)}),_l(n.remoteStore,m)}),[4,h]);case 4:return d.sent(),[4,OP(n,l)];case 5:return d.sent(),function(g){var m=G(g);m.Co.forEach(function(_,w){_l(m.remoteStore,w)}),m.No.ts(),m.Co=new Map,m.Do=new Vt(J.comparator)}(n),n.$o=!1,[4,Jb(n.remoteStore,!1)];case 6:d.sent(),d.label=7;case 7:return[2]}})})}function OP(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,a,c,l,h,d,g,m,_,w,E,T;return C(this,function(S){switch(S.label){case 0:r=G(e),i=[],s=[],a=0,c=t,S.label=1;case 1:return a<c.length?(l=c[a],h=void 0,(d=r.Vo.get(l))&&d.length!==0?[4,Qa(r.localStore,zn(d[0]))]:[3,7]):[3,13];case 2:h=S.sent(),g=0,m=d,S.label=3;case 3:return g<m.length?(_=m[g],w=r.Po.get(_),[4,EH(r,w)]):[3,6];case 4:(E=S.sent()).snapshot&&s.push(E.snapshot),S.label=5;case 5:return g++,[3,3];case 6:return[3,11];case 7:return[4,aP(r.localStore,l)];case 8:return T=S.sent(),[4,Qa(r.localStore,T)];case 9:return h=S.sent(),[4,rw(r,xP(T),l,!1)];case 10:S.sent(),S.label=11;case 11:i.push(h),S.label=12;case 12:return a++,[3,1];case 13:return[2,(r.vo._r(s),i)]}})})}function xP(e){return zO(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function CH(e){var t=G(e);return G(G(t.localStore).persistence).fn()}function AH(e,t,n,r){return A(this,void 0,void 0,function(){var i,s,a;return C(this,function(c){switch(c.label){case 0:return(i=G(e)).$o?(q("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,uP(i.localStore)];case 3:return s=c.sent(),a=Ob.createSynthesizedRemoteEventForCurrentChange(t,n==="current"),[4,eo(i,s,a)];case 4:return c.sent(),[3,8];case 5:return[4,Ya(i.localStore,t,!0)];case 6:return c.sent(),eu(i,t,r),[3,8];case 7:$(),c.label=8;case 8:return[2]}})})}function kH(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,a,c,l,h,d,g,m;return C(this,function(_){switch(_.label){case 0:if(!(r=uw(e)).$o)return[3,10];i=0,s=t,_.label=1;case 1:return i<s.length?(a=s[i],r.Vo.has(a)?(q("SyncEngine","Adding an already active target "+a),[3,5]):[4,aP(r.localStore,a)]):[3,6];case 2:return c=_.sent(),[4,Qa(r.localStore,c)];case 3:return l=_.sent(),[4,rw(r,xP(c),l.targetId,!1)];case 4:_.sent(),cd(r.remoteStore,l),_.label=5;case 5:return i++,[3,1];case 6:h=function(w){return C(this,function(E){switch(E.label){case 0:return r.Vo.has(w)?[4,Ya(r.localStore,w,!1).then(function(){_l(r.remoteStore,w),eu(r,w)}).catch(cs)]:[3,2];case 1:E.sent(),E.label=2;case 2:return[2]}})},d=0,g=n,_.label=7;case 7:return d<g.length?(m=g[d],[5,h(m)]):[3,10];case 8:_.sent(),_.label=9;case 9:return d++,[3,7];case 10:return[2]}})})}function uw(e){var t=G(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=kP.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=wH.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=vH.bind(null,t),t.vo._r=oH.bind(null,t.eventManager),t.vo.Mo=sH.bind(null,t.eventManager),t}function cw(e){var t=G(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=mH.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gH.bind(null,t),t}function LP(e,t){return A(this,void 0,void 0,function(){var n,r,i=this;return C(this,function(s){switch(s.label){case 0:return e.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=s.sent(),[4,t.initialize(n)];case 2:return s.sent(),r=n.initialUser,e.setCredentialChangeListener(function(a){return A(i,void 0,void 0,function(){return C(this,function(c){switch(c.label){case 0:return r.isEqual(a)?[3,2]:[4,iP(t.localStore,a)];case 1:c.sent(),r=a,c.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return e.terminate()}),e.offlineComponents=t,[2]}})})}function MP(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,fw(e)];case 1:return n=i.sent(),q("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener(function(s){return function(a,c){return A(this,void 0,void 0,function(){var l,h;return C(this,function(d){switch(d.label){case 0:return(l=G(a)).asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials"),h=Ji(l),l.Or.add(3),[4,Xa(l)];case 1:return d.sent(),h&&l.Br.set("Unknown"),[4,l.remoteSyncer.handleCredentialChange(c)];case 2:return d.sent(),l.Or.delete(3),[4,yl(l)];case 3:return d.sent(),[2]}})})}(t.remoteStore,s)}),e.onlineComponents=t,[2]}})})}function fw(e){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(q("FirestoreClient","Using default OfflineComponentProvider"),[4,LP(e,new PP)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}})})}function pd(e){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(q("FirestoreClient","Using default OnlineComponentProvider"),[4,MP(e,new lw)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}})})}function FP(e){return fw(e).then(function(t){return t.persistence})}function UP(e){return fw(e).then(function(t){return t.localStore})}function jP(e){return pd(e).then(function(t){return t.remoteStore})}function VP(e){return pd(e).then(function(t){return t.syncEngine})}function tu(e){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return[4,pd(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=hH.bind(null,t.syncEngine),n.onUnlisten=pH.bind(null,t.syncEngine),n)]}})})}function BP(e,t,n){var r=this;n===void 0&&(n={});var i=new sn;return e.asyncQueue.enqueueAndForget(function(){return A(r,void 0,void 0,function(){var s;return C(this,function(a){switch(a.label){case 0:return s=function(c,l,h,d,g){var m=new hd({next:function(w){l.enqueueAndForget(function(){return ew(c,_)});var E=w.docs.has(h);!E&&w.fromCache?g.reject(new F(N.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&w.fromCache&&d&&d.source==="server"?g.reject(new F(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(w)},error:function(w){return g.reject(w)}}),_=new nw(Pa(h.path),m,{includeMetadataChanges:!0,so:!0});return Zb(c,_)},[4,tu(e)];case 1:return[2,s.apply(void 0,[a.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}function qP(e,t,n){var r=this;n===void 0&&(n={});var i=new sn;return e.asyncQueue.enqueueAndForget(function(){return A(r,void 0,void 0,function(){var s;return C(this,function(a){switch(a.label){case 0:return s=function(c,l,h,d,g){var m=new hd({next:function(w){l.enqueueAndForget(function(){return ew(c,_)}),w.fromCache&&d.source==="server"?g.reject(new F(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(w)},error:function(w){return g.reject(w)}}),_=new nw(h,m,{includeMetadataChanges:!0,so:!0});return Zb(c,_)},[4,tu(e)];case 1:return[2,s.apply(void 0,[a.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}function hw(e,t,n){if(!n)throw new F(N.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function pw(e,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new F(N.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function HP(e,t,n,r){if(t===!0&&r===!0)throw new F(N.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function zP(e){if(!J.isDocumentKey(e))throw new F(N.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function QP(e){if(J.isDocumentKey(e))throw new F(N.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function vd(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";var t=function(n){if(n.constructor){var r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return typeof e=="function"?"a function":$()}function Ae(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new F(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=vd(e);throw new F(N.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function YP(e,t){if(t<=0)throw new F(N.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}function $P(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=se(e),hw("collection","path",t),e instanceof bl)return QP(n=Se.fromString.apply(Se,oe([t],r))),new to(e,null,n);if(!(e instanceof Qe||e instanceof to))throw new F(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return QP(n=Se.fromString.apply(Se,oe([e.path],r)).child(Se.fromString(t))),new to(e.firestore,null,n)}function md(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=se(e),arguments.length===1&&(t=xO.u()),hw("doc","path",t),e instanceof bl)return zP(n=Se.fromString.apply(Se,oe([t],r))),new Qe(e,null,new J(n));if(!(e instanceof Qe||e instanceof to))throw new F(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return zP(n=e._path.child(Se.fromString.apply(Se,oe([t],r)))),new Qe(e.firestore,e instanceof to?e.converter:null,new J(n))}function JP(e,t){return e=se(e),t=se(t),(e instanceof Qe||e instanceof to)&&(t instanceof Qe||t instanceof to)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function ZP(e,t){return e=se(e),t=se(t),e instanceof Dn&&t instanceof Dn&&e.firestore===t.firestore&&al(e._query,t._query)&&e.converter===t.converter}function nu(e){return function(t,n){if(typeof t!="object"||t===null)return!1;for(var r=t,i=0,s=["next","error","complete"];i<s.length;i++){var a=s[i];if(a in r&&typeof r[a]=="function")return!0}return!1}(e)}function qt(e){return e._firestoreClient||t1(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function t1(e){var t,n=e._freezeSettings(),r=function(i,s,a,c){return new PH(i,s,a,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new xH(e._credentials,e._queue,r)}function n1(e,t,n){var r=this,i=new sn;return e.asyncQueue.enqueue(function(){return A(r,void 0,void 0,function(){var s;return C(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,LP(e,n)];case 1:return a.sent(),[4,MP(e,t)];case 2:return a.sent(),i.resolve(),[3,4];case 3:if(!function(c){return c.name==="FirebaseError"?c.code===N.FAILED_PRECONDITION||c.code===N.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11}(s=a.sent()))throw s;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function r1(e){if(e._initialized||e._terminated)throw new F(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}function o1(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $()}}function hs(e){var t=e._freezeSettings(),n=ud(e._databaseId);return new BH(e._databaseId,!!t.ignoreUndefinedProperties,n)}function gd(e,t,n,r,i,s){s===void 0&&(s={});var a=e.qc(s.merge||s.mergeFields?2:0,t,n,i);gw("Data must be an object, but it was:",a,r);var c,l,h=c1(r,a);if(s.merge)c=new Ra(a.fieldMask),l=a.fieldTransforms;else if(s.mergeFields){for(var d=[],g=0,m=s.mergeFields;g<m.length;g++){var _=yw(t,m[g],n);if(!a.contains(_))throw new F(N.INVALID_ARGUMENT,"Field '"+_+"' is specified in your field mask but missing from your input data.");f1(d,_)||d.push(_)}c=new Ra(d),l=a.fieldTransforms.filter(function(w){return c.covers(w.field)})}else c=null,l=a.fieldTransforms;return new VH(new Nn(h),c,l)}function a1(e,t,n){return new s1({Cc:3,Bc:t.settings.Bc,methodName:e._methodName,Fc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}function vw(e,t,n,r){var i=e.qc(1,t,n);gw("Data must be an object, but it was:",i,r);var s=[],a=Nn.empty();ts(r,function(l,h){var d=_w(t,l,n);h=se(h);var g=i.$c(d);if(h instanceof dw)s.push(d);else{var m=ps(h,g);m!=null&&(s.push(d),a.set(d,m))}});var c=new Ra(s);return new i1(a,c,i.fieldTransforms)}function mw(e,t,n,r,i,s){var a=e.qc(1,t,n),c=[yw(t,r,n)],l=[i];if(s.length%2!=0)throw new F(N.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var h=0;h<s.length;h+=2)c.push(yw(t,s[h])),l.push(s[h+1]);for(var d=[],g=Nn.empty(),m=c.length-1;m>=0;--m)if(!f1(d,c[m])){var _=c[m],w=l[m];w=se(w);var E=a.$c(_);if(w instanceof dw)d.push(_);else{var T=ps(w,E);T!=null&&(d.push(_),g.set(_,T))}}var S=new Ra(d);return new i1(g,S,a.fieldTransforms)}function u1(e,t,n,r){return r===void 0&&(r=!1),ps(n,e.qc(r?4:3,t))}function ps(e,t){if(l1(e=se(e)))return gw("Unsupported field value:",t,e),c1(e,t);if(e instanceof fs)return function(n,r){if(!o1(r.Cc))throw r.Mc(n._methodName+"() can only be used with update() and set()");if(!r.path)throw r.Mc(n._methodName+"() is not currently supported inside arrays");var i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&t.Cc!==4)throw t.Mc("Nested arrays are not supported");return function(n,r){for(var i=[],s=0,a=0,c=n;a<c.length;a++){var l=ps(c[a],r.Oc(s));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),s++}return{arrayValue:{values:i}}}(e,t)}return function(n,r){if((n=se(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return ZO(r.R,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){var i=rn.fromDate(n);return{timestampValue:hl(r.R,i)}}if(n instanceof rn)return i=new rn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3)),{timestampValue:hl(r.R,i)};if(n instanceof wl)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ls)return{bytesValue:_x(r.R,n._byteString)};if(n instanceof Qe){i=r.databaseId;var s=n.firestore._databaseId;if(!s.isEqual(i))throw r.Mc("Document reference is for database "+s.projectId+"/"+s.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Pb(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Mc("Unsupported field value: "+vd(n))}(e,t)}function c1(e,t){var n={};return LO(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ts(e,function(r,i){var s=ps(i,t.xc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function l1(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof rn||e instanceof wl||e instanceof ls||e instanceof Qe||e instanceof fs)}function gw(e,t,n){if(!l1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){var r=vd(n);throw r==="an object"?t.Mc(e+" a custom object"):t.Mc(e+" "+r)}}function yw(e,t,n){if((t=se(t))instanceof qr)return t._internalPath;if(typeof t=="string")return _w(e,t);throw yd("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}function _w(e,t,n){if(t.search(HH)>=0)throw yd("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return new(qr.bind.apply(qr,oe([void 0],t.split("."))))()._internalPath}catch(r){throw yd("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function yd(e,t,n,r,i){var s=r&&!r.isEmpty(),a=i!==void 0,c="Function "+t+"() called with invalid data";n&&(c+=" (via `toFirestore()`)");var l="";return(s||a)&&(l+=" (found",s&&(l+=" in field "+r),a&&(l+=" in document "+i),l+=")"),new F(N.INVALID_ARGUMENT,(c+=". ")+e+l)}function f1(e,t){return e.some(function(n){return n.isEqual(t)})}function _d(e,t){return typeof t=="string"?_w(e,t):t instanceof qr?t._internalPath:t._delegate._internalPath}function QH(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $()}}function h1(e,t){return e instanceof li&&t instanceof li?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(e._document===null?t._document===null:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof no&&t instanceof no&&e._firestore===t._firestore&&ZP(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function p1(e){if(Hp(e)&&e.explicitOrderBy.length===0)throw new F(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function ro(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var s=i[r];e=s._apply(e)}return e}function g1(e,t,n,r){if(n[0]=se(n[0]),n[0]instanceof El)return function(s,a,c,l,h){if(!l)throw new F(N.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var d=[],g=0,m=Da(s);g<m.length;g++){var _=m[g];if(_.field.isKeyField())d.push(Vp(a,l.key));else{var w=l.data.field(_.field);if(_b(w))throw new F(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){var E=_.field.canonicalString();throw new F(N.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+E+"' (used as the orderBy) does not exist.")}d.push(w)}}return new sl(d,h)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=hs(e.firestore);return function(s,a,c,l,h,d){var g=s.explicitOrderBy;if(h.length>g.length)throw new F(N.INVALID_ARGUMENT,"Too many arguments provided to "+l+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var m=[],_=0;_<h.length;_++){var w=h[_];if(g[_].field.isKeyField()){if(typeof w!="string")throw new F(N.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+l+"(), but got a "+typeof w);if(!Cb(s)&&w.indexOf("/")!==-1)throw new F(N.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+l+"() must be a plain document ID, but '"+w+"' contains a slash.");var E=s.path.child(Se.fromString(w));if(!J.isDocumentKey(E))throw new F(N.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+l+"() must result in a valid document path, but '"+E+"' is not because it contains an odd number of segments.");var T=new J(E);m.push(Vp(a,T))}else{var S=u1(c,l,w);m.push(S)}}return new sl(m,d)}(e._query,e.firestore._databaseId,i,t,n,r)}function y1(e,t,n){if(typeof(n=se(n))=="string"){if(n==="")throw new F(N.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cb(t)&&n.indexOf("/")!==-1)throw new F(N.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(Se.fromString(n));if(!J.isDocumentKey(r))throw new F(N.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Vp(e,new J(r))}if(n instanceof Qe)return Vp(e,n._key);throw new F(N.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+vd(n)+".")}function _1(e,t){if(!Array.isArray(e)||e.length===0)throw new F(N.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new F(N.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function b1(e,t,n){if(!n.isEqual(t))throw new F(N.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function bd(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}function io(e,t){if((e=se(e)).firestore!==t)throw new F(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function w1(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=Ae(e,Qe);var s=Ae(e.firestore,ut),a=hs(s);return Sl(s,[(typeof(t=se(t))=="string"||t instanceof qr?mw(a,"updateDoc",e._key,t,n,r):vw(a,"updateDoc",e._key,t)).toMutation(e._key,jt.exists(!0))])}function E1(e){for(var t,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];e=se(e);var a={includeMetadataChanges:!1},c=0;typeof i[c]!="object"||nu(i[c])||(a=i[c],c++);var l,h,d,g={includeMetadataChanges:a.includeMetadataChanges};if(nu(i[c])){var m=i[c];i[c]=(t=m.next)===null||t===void 0?void 0:t.bind(m),i[c+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),i[c+2]=(r=m.complete)===null||r===void 0?void 0:r.bind(m)}if(e instanceof Qe)h=Ae(e.firestore,ut),d=Pa(e._key.path),l={next:function(E){i[c]&&i[c](ww(h,e,E))},error:i[c+1],complete:i[c+2]};else{var _=Ae(e,Dn);h=Ae(_.firestore,ut),d=_._query;var w=new vs(h);l={next:function(E){i[c]&&i[c](new no(h,w,_,E))},error:i[c+1],complete:i[c+2]},p1(e._query)}return function(E,T,S,R){var O=this,U=new hd(R),L=new nw(T,U,S);return E.asyncQueue.enqueueAndForget(function(){return A(O,void 0,void 0,function(){var P;return C(this,function(ue){switch(ue.label){case 0:return P=Zb,[4,tu(E)];case 1:return[2,P.apply(void 0,[ue.sent(),L])]}})})}),function(){U.Wo(),E.asyncQueue.enqueueAndForget(function(){return A(O,void 0,void 0,function(){var P;return C(this,function(ue){switch(ue.label){case 0:return P=ew,[4,tu(E)];case 1:return[2,P.apply(void 0,[ue.sent(),L])]}})})})}}(qt(h),d,g,l)}function Sl(e,t){return function(n,r){var i=this,s=new sn;return n.asyncQueue.enqueueAndForget(function(){return A(i,void 0,void 0,function(){var a;return C(this,function(c){switch(c.label){case 0:return a=dH,[4,VP(n)];case 1:return[2,a.apply(void 0,[c.sent(),r,s])]}})})}),s.promise}(qt(e),t)}function ww(e,t,n){var r=n.docs.get(t._key),i=new vs(e);return new li(e,i,t._key,r,new ds(n.hasPendingWrites,n.fromCache),t.converter)}function I1(){if(typeof Uint8Array=="undefined")throw new F(N.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function T1(){if(typeof atob=="undefined")throw new F(N.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function C1(e){var t;t=e,yr.setLogLevel(t)}function an(e,t,n){return e.message=e.message.replace(t,n),e}function A1(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(typeof r=="object"&&!nu(r))return r}return{}}function k1(e,t){var n,r,i;return{next:function(s){i.next&&i.next(t(s))},error:(n=(i=nu(e[0])?e[0]:nu(e[1])?e[1]:typeof e[0]=="function"?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}function ms(e){return Ae(e,Qe)}var Rn,N,F,yr,xO,rn,de,MO,Se,EG,_r,Ra,on,IG,J,Nn,Rt,TG,On,SG,CG,AG,kG,RG,NG,OG,sl,xa,ai,zp,La,is,os,Ma,cl,MG,jt,Yp,ll,Hi,at,we,fl,Rb,jG,Vt,Xp,zi,vt,hx,VG,BG,qG,WG,GG,Ob,xb,Jp,dx,vx,mx,KG,HG,zG,QG,nK,xn,Qi,je,Bt,rK,iK,$e,Vr,bn,Ot,Pn,ss,ci,ja,Va,oK,Dx,Lx,sn,j,Mx,Ba,sK,vl,aK,Fx,Ux,Mb,uK,ed,jx,cK,lK,Vb,fK,Hx,Br,hK,nd,pK,dK,vK,mK,gK,za,Jx,yK,_K,bK,Bb,wK,EK,tP,IK,nP,TK,OK,Wb,wt,xK,PK,DK,LK,MK,FK,UK,En,fP,Kb,hP,jK,Hb,zb,pP,VK,dP,BK,qK,WK,Qb,mP,GK,KK,HK,zK,QK,nH,EP,IP,fd,rH,iH,nw,aH,TP,ZZ,SP,CP,AP,cH,lH,fH,PP,DP,RH,lw,hd,eee,NH,OH,xH,PH,dd,WP,GP,KP,DH,LH,MH,FH,XP,bl,Qe,Dn,to,UH,tee,e1,ut,qr,ls,fs,wl,jH,VH,i1,s1,BH,dw,qH,WH,GH,KH,HH,El,zH,ds,li,Il,no,Tl,YH,XH,d1,v1,m1,bw,$H,JH,vs,ZH,Ew,S1,Iw,wd,Tw,Sw,Ed,oo,ru,iu,Cl,ez,Id,Al,R1,N1,O1=Le(()=>{Vn();Oi();mb();yn();Rn=function(){function e(t,n){var r=this;this.previousValue=t,n&&(n.sequenceNumberHandler=function(i){return r.t(i)},this.i=function(i){return n.writeSequenceNumber(i)})}return e.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},e.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},e}();Rn.o=-1;N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).code=n,i.message=r,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return W(t,e),t}(Error),yr=new Bn("@firebase/firestore");xO=function(){function e(){}return e.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,r="";r.length<20;)for(var i=wG(40),s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length));return r},e}();rn=function(){function e(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new F(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new F(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new F(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(t){return this.seconds===t.seconds?_e(this.nanoseconds,t.nanoseconds):_e(this.seconds,t.seconds)},e.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),de=function(){function e(t){this.timestamp=t}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new rn(0,0))},e.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},e.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();MO=function(){function e(t,n,r){n===void 0?n=0:n>t.length&&$(),r===void 0?r=t.length-n:r>t.length-n&&$(),this.segments=t,this.offset=n,this.len=r}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return e.comparator(this,t)===0},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(r){n.push(r)}):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(t){return this.segments[this.offset+t]},e.prototype.isEmpty=function(){return this.length===0},e.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.forEach=function(t){for(var n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(t,n){for(var r=Math.min(t.length,n.length),i=0;i<r;i++){var s=t.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return t.length<n.length?-1:t.length>n.length?1:0},e}(),Se=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return W(t,e),t.prototype.construct=function(n,r,i){return new t(n,r,i)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=[],s=0,a=n;s<a.length;s++){var c=a[s];if(c.indexOf("//")>=0)throw new F(N.INVALID_ARGUMENT,"Invalid segment ("+c+"). Paths must not contain // in them.");i.push.apply(i,c.split("/").filter(function(l){return l.length>0}))}return new t(i)},t.emptyPath=function(){return new t([])},t}(MO),EG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,_r=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return W(t,e),t.prototype.construct=function(n,r,i){return new t(n,r,i)},t.isValidIdentifier=function(n){return EG.test(n)},t.prototype.canonicalString=function(){return this.toArray().map(function(n){return n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(n)||(n="`"+n+"`"),n}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return this.length===1&&this.get(0)==="__name__"},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(n){for(var r=[],i="",s=0,a=function(){if(i.length===0)throw new F(N.INVALID_ARGUMENT,"Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(i),i=""},c=!1;s<n.length;){var l=n[s];if(l==="\\"){if(s+1===n.length)throw new F(N.INVALID_ARGUMENT,"Path has trailing escape character: "+n);var h=n[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new F(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);i+=h,s+=2}else l==="`"?(c=!c,s++):l!=="."||c?(i+=l,s++):(a(),s++)}if(a(),c)throw new F(N.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new t(r)},t.emptyPath=function(){return new t([])},t}(MO),Ra=function(){function e(t){this.fields=t,t.sort(_r.comparator)}return e.prototype.covers=function(t){for(var n=0,r=this.fields;n<r.length;n++)if(r[n].isPrefixOf(t))return!0;return!1},e.prototype.isEqual=function(t){return ka(this.fields,t.fields,function(n,r){return n.isEqual(r)})},e}(),on=function(){function e(t){this.binaryString=t}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(n){for(var r="",i=0;i<n.length;++i)r+=String.fromCharCode(n[i]);return r}(t))},e.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},e.prototype.toUint8Array=function(){return function(t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(t){return _e(this.binaryString,t.binaryString)},e.prototype.isEqual=function(t){return this.binaryString===t.binaryString},e}();on.EMPTY_BYTE_STRING=new on("");IG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);J=function(){function e(t){this.path=t}return e.fromPath=function(t){return new e(Se.fromString(t))},e.fromName=function(t){return new e(Se.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},e.prototype.isEqual=function(t){return t!==null&&Se.comparator(this.path,t.path)===0},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(t,n){return Se.comparator(t.path,n.path)},e.isDocumentKey=function(t){return t.length%2==0},e.fromSegments=function(t){return new e(new Se(t.slice()))},e}();Nn=function(){function e(t){this.value=t}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(t){if(t.isEmpty())return this.value;for(var n=this.value,r=0;r<t.length-1;++r)if(!Bp(n=(n.mapValue.fields||{})[t.get(r)]))return null;return(n=(n.mapValue.fields||{})[t.lastSegment()])||null},e.prototype.set=function(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=il(n)},e.prototype.setAll=function(t){var n=this,r=_r.emptyPath(),i={},s=[];t.forEach(function(c,l){if(!r.isImmediateParentOf(l)){var h=n.getFieldsMap(r);n.applyChanges(h,i,s),i={},s=[],r=l.popLast()}c?i[l.lastSegment()]=il(c):s.push(l.lastSegment())});var a=this.getFieldsMap(r);this.applyChanges(a,i,s)},e.prototype.delete=function(t){var n=this.field(t.popLast());Bp(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]},e.prototype.isEqual=function(t){return Ur(this.value,t.value)},e.prototype.getFieldsMap=function(t){var n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(var r=0;r<t.length;++r){var i=n.mapValue.fields[t.get(r)];Bp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields},e.prototype.applyChanges=function(t,n,r){ts(n,function(c,l){return t[c]=l});for(var i=0,s=r;i<s.length;i++){var a=s[i];delete t[a]}},e.prototype.clone=function(){return new e(il(this.value))},e}();Rt=function(){function e(t,n,r,i,s){this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=s}return e.newInvalidDocument=function(t){return new e(t,0,de.min(),Nn.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,Nn.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,Nn.empty(),2)},e.prototype.convertToFoundDocument=function(t,n){return this.version=t,this.documentType=1,this.data=n,this.documentState=0,this},e.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return this.documentState===1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return this.documentState===2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return this.documentType!==0},e.prototype.isFoundDocument=function(){return this.documentType===1},e.prototype.isNoDocument=function(){return this.documentType===2},e.prototype.isUnknownDocument=function(){return this.documentType===3},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),TG=function(e,t,n,r,i,s,a){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s=null),a===void 0&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.h=null};On=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).field=n,s.op=r,s.value=i,s}return W(t,e),t.create=function(n,r,i){return n.isKeyField()?r==="in"||r==="not-in"?this.l(n,r,i):new SG(n,r,i):r==="array-contains"?new kG(n,i):r==="in"?new RG(n,i):r==="not-in"?new NG(n,i):r==="array-contains-any"?new OG(n,i):new t(n,r,i)},t.l=function(n,r,i){return r==="in"?new CG(n,i):new AG(n,i)},t.prototype.matches=function(n){var r=n.data.field(this.field);return this.op==="!="?r!==null&&this.m(Oa(r,this.value)):r!==null&&rs(this.value)===rs(r)&&this.m(Oa(r,this.value))},t.prototype.m=function(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return n===0;case"!=":return n!==0;case">":return n>0;case">=":return n>=0;default:return $()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),SG=function(e){function t(n,r,i){var s=this;return(s=e.call(this,n,r,i)||this).key=J.fromName(i.referenceValue),s}return W(t,e),t.prototype.matches=function(n){var r=J.comparator(n.key,this.key);return this.m(r)},t}(On),CG=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"in",r)||this).keys=GO("in",r),i}return W(t,e),t.prototype.matches=function(n){return this.keys.some(function(r){return r.isEqual(n.key)})},t}(On),AG=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"not-in",r)||this).keys=GO("not-in",r),i}return W(t,e),t.prototype.matches=function(n){return!this.keys.some(function(r){return r.isEqual(n.key)})},t}(On);kG=function(e){function t(n,r){return e.call(this,n,"array-contains",r)||this}return W(t,e),t.prototype.matches=function(n){var r=n.data.field(this.field);return Ib(r)&&rl(r.arrayValue,this.value)},t}(On),RG=function(e){function t(n,r){return e.call(this,n,"in",r)||this}return W(t,e),t.prototype.matches=function(n){var r=n.data.field(this.field);return r!==null&&rl(this.value.arrayValue,r)},t}(On),NG=function(e){function t(n,r){return e.call(this,n,"not-in",r)||this}return W(t,e),t.prototype.matches=function(n){if(rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var r=n.data.field(this.field);return r!==null&&!rl(this.value.arrayValue,r)},t}(On),OG=function(e){function t(n,r){return e.call(this,n,"array-contains-any",r)||this}return W(t,e),t.prototype.matches=function(n){var r=this,i=n.data.field(this.field);return!(!Ib(i)||!i.arrayValue.values)&&i.arrayValue.values.some(function(s){return rl(r.value.arrayValue,s)})},t}(On),sl=function(e,t){this.position=e,this.before=t};xa=function(e,t){t===void 0&&(t="asc"),this.field=e,this.dir=t};ai=function(e,t,n,r,i,s,a,c){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s="F"),a===void 0&&(a=null),c===void 0&&(c=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=c,this.p=null,this.T=null,this.startAt,this.endAt};zp=function(){this._=void 0};La=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return W(t,e),t}(zp),is=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return W(t,e),t}(zp);os=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return W(t,e),t}(zp);Ma=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).R=n,i.A=r,i}return W(t,e),t}(zp);cl=function(e,t){this.field=e,this.transform=t},MG=function(e,t){this.version=e,this.transformResults=t},jt=function(){function e(t,n){this.updateTime=t,this.exists=n}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return this.updateTime===void 0&&this.exists===void 0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},e}();Yp=function(){};ll=function(e){function t(n,r,i,s){s===void 0&&(s=[]);var a=this;return(a=e.call(this)||this).key=n,a.value=r,a.precondition=i,a.fieldTransforms=s,a.type=0,a}return W(t,e),t}(Yp),Hi=function(e){function t(n,r,i,s,a){a===void 0&&(a=[]);var c=this;return(c=e.call(this)||this).key=n,c.data=r,c.fieldMask=i,c.precondition=s,c.fieldTransforms=a,c.type=1,c}return W(t,e),t}(Yp);fl=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return W(t,e),t}(Yp),Rb=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return W(t,e),t}(Yp),jG=function(e){this.count=e};(we=at||(at={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";Vt=function(){function e(t,n){this.comparator=t,this.root=n||zi.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,zi.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,zi.BLACK,null,null))},e.prototype.get=function(t){for(var n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null},e.prototype.indexOf=function(t){for(var n=0,r=this.root;!r.isEmpty();){var i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},e.prototype.forEach=function(t){this.inorderTraversal(function(n,r){return t(n,r),!1})},e.prototype.toString=function(){var t=[];return this.inorderTraversal(function(n,r){return t.push(n+":"+r),!1}),"{"+t.join(", ")+"}"},e.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},e.prototype.getIterator=function(){return new Xp(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(t){return new Xp(this.root,t,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Xp(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(t){return new Xp(this.root,t,this.comparator,!0)},e}(),Xp=function(){function e(t,n,r,i){this.isReverse=i,this.nodeStack=[];for(var s=1;!t.isEmpty();)if(s=n?r(t.key,n):1,i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return e.prototype.getNext=function(){var t=this.nodeStack.pop(),n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(this.nodeStack.length===0)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},e}(),zi=function(){function e(t,n,r,i,s){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=s??e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,s){return new e(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(t,n,r){var i=this,s=r(t,i.key);return(i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},e.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},e.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $();var t=this.left.check();if(t!==this.right.check())throw $();return t+(this.isRed()?0:1)},e}();zi.EMPTY=null,zi.RED=!0,zi.BLACK=!1,zi.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw $()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw $()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw $()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw $()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw $()},enumerable:!1,configurable:!0}),e.prototype.copy=function(t,n,r,i,s){return this},e.prototype.insert=function(t,n,r){return new zi(t,n)},e.prototype.remove=function(t,n){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(t){return!1},e.prototype.reverseTraversal=function(t){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());vt=function(){function e(t){this.comparator=t,this.data=new Vt(this.comparator)}return e.prototype.has=function(t){return this.data.get(t)!==null},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(t){return this.data.indexOf(t)},e.prototype.forEach=function(t){this.data.inorderTraversal(function(n,r){return t(n),!1})},e.prototype.forEachInRange=function(t,n){for(var r=this.data.getIteratorFrom(t[0]);r.hasNext();){var i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}},e.prototype.forEachWhile=function(t,n){var r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return},e.prototype.firstAfterOrEqual=function(t){var n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null},e.prototype.getIterator=function(){return new hx(this.data.getIterator())},e.prototype.getIteratorFrom=function(t){return new hx(this.data.getIteratorFrom(t))},e.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},e.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(t){var n=this;return n.size<t.size&&(n=t,t=this),t.forEach(function(r){n=n.add(r)}),n},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0},e.prototype.toArray=function(){var t=[];return this.forEach(function(n){t.push(n)}),t},e.prototype.toString=function(){var t=[];return this.forEach(function(n){return t.push(n)}),"SortedSet("+t.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),hx=function(){function e(t){this.iter=t}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),VG=new Vt(J.comparator);BG=new Vt(J.comparator);qG=new Vt(J.comparator);WG=new vt(J.comparator);GG=new vt(_e);Ob=function(){function e(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,xb.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(de.min(),r,$p(),Qn(),Ne())},e}(),xb=function(){function e(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(on.EMPTY_BYTE_STRING,n,Ne(),Ne(),Ne())},e}(),Jp=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},dx=function(e,t){this.targetId=e,this.V=t},vx=function(e,t,n,r){n===void 0&&(n=on.EMPTY_BYTE_STRING),r===void 0&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},mx=function(){function e(){this.S=0,this.D=yx(),this.C=on.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"k",{get:function(){return this.S!==0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),e.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},e.prototype.M=function(){var t=Ne(),n=Ne(),r=Ne();return this.D.forEach(function(i,s){switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:$()}}),new xb(this.C,this.N,t,n,r)},e.prototype.L=function(){this.F=!1,this.D=yx()},e.prototype.B=function(t,n){this.F=!0,this.D=this.D.insert(t,n)},e.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.F=!0,this.N=!0},e}(),KG=function(){function e(t){this.W=t,this.G=new Map,this.H=Qn(),this.J=gx(),this.Y=new vt(_e)}return e.prototype.X=function(t){for(var n=0,r=t.v;n<r.length;n++){var i=r[n];t.P&&t.P.isFoundDocument()?this.Z(i,t.P):this.tt(i,t.key,t.P)}for(var s=0,a=t.removedTargetIds;s<a.length;s++)i=a[s],this.tt(i,t.key,t.P)},e.prototype.et=function(t){var n=this;this.forEachTarget(t,function(r){var i=n.nt(r);switch(t.state){case 0:n.st(r)&&i.O(t.resumeToken);break;case 1:i.K(),i.k||i.L(),i.O(t.resumeToken);break;case 2:i.K(),i.k||n.removeTarget(r);break;case 3:n.st(r)&&(i.j(),i.O(t.resumeToken));break;case 4:n.st(r)&&(n.it(r),i.O(t.resumeToken));break;default:$()}})},e.prototype.forEachTarget=function(t,n){var r=this;t.targetIds.length>0?t.targetIds.forEach(n):this.G.forEach(function(i,s){r.st(s)&&n(s)})},e.prototype.rt=function(t){var n=t.targetId,r=t.V.count,i=this.ot(n);if(i){var s=i.target;if(Wp(s))if(r===0){var a=new J(s.path);this.tt(n,a,Rt.newNoDocument(a,de.min()))}else re(r===1);else this.ct(n)!==r&&(this.it(n),this.Y=this.Y.add(n))}},e.prototype.ut=function(t){var n=this,r=new Map;this.G.forEach(function(a,c){var l=n.ot(c);if(l){if(a.current&&Wp(l.target)){var h=new J(l.target.path);n.H.get(h)!==null||n.at(c,h)||n.tt(c,h,Rt.newNoDocument(h,t))}a.$&&(r.set(c,a.M()),a.L())}});var i=Ne();this.J.forEach(function(a,c){var l=!0;c.forEachWhile(function(h){var d=n.ot(h);return!d||d.purpose===2||(l=!1,!1)}),l&&(i=i.add(a))});var s=new Ob(t,r,this.Y,this.H,i);return this.H=Qn(),this.J=gx(),this.Y=new vt(_e),s},e.prototype.Z=function(t,n){if(this.st(t)){var r=this.at(t,n.key)?2:0;this.nt(t).B(n.key,r),this.H=this.H.insert(n.key,n),this.J=this.J.insert(n.key,this.ht(n.key).add(t))}},e.prototype.tt=function(t,n,r){if(this.st(t)){var i=this.nt(t);this.at(t,n)?i.B(n,1):i.q(n),this.J=this.J.insert(n,this.ht(n).delete(t)),r&&(this.H=this.H.insert(n,r))}},e.prototype.removeTarget=function(t){this.G.delete(t)},e.prototype.ct=function(t){var n=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size},e.prototype.U=function(t){this.nt(t).U()},e.prototype.nt=function(t){var n=this.G.get(t);return n||(n=new mx,this.G.set(t,n)),n},e.prototype.ht=function(t){var n=this.J.get(t);return n||(n=new vt(_e),this.J=this.J.insert(t,n)),n},e.prototype.st=function(t){var n=this.ot(t)!==null;return n||q("WatchChangeAggregator","Detected inactive target",t),n},e.prototype.ot=function(t){var n=this.G.get(t);return n&&n.k?null:this.W.lt(t)},e.prototype.it=function(t){var n=this;this.G.set(t,new mx),this.W.getRemoteKeysForTarget(t).forEach(function(r){n.tt(t,r,null)})},e.prototype.at=function(t,n){return this.W.getRemoteKeysForTarget(t).has(n)},e}();HG={asc:"ASCENDING",desc:"DESCENDING"},zG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QG=function(e,t){this.databaseId=e,this.I=t};nK=function(e,t){this.seconds=e,this.nanoseconds=t},xn=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};xn.store="owner",xn.key="owner";Qi=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};Qi.store="mutationQueues",Qi.keyPath="userId";je=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};je.store="mutations",je.keyPath="batchId",je.userMutationsIndex="userMutationsIndex",je.userMutationsKeyPath=["userId","batchId"];Bt=function(){function e(){}return e.prefixForUser=function(t){return[t]},e.prefixForPath=function(t,n){return[t,br(n)]},e.key=function(t,n,r){return[t,br(n),r]},e}();Bt.store="documentMutations",Bt.PLACEHOLDER=new Bt;rK=function(e,t){this.path=e,this.readTime=t},iK=function(e,t){this.path=e,this.version=t},$e=function(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s};$e.store="remoteDocuments",$e.readTimeIndex="readTimeIndex",$e.readTimeIndexPath="readTime",$e.collectionReadTimeIndex="collectionReadTimeIndex",$e.collectionReadTimeIndexPath=["parentPath","readTime"];Vr=function(e){this.byteSize=e};Vr.store="remoteDocumentGlobal",Vr.key="remoteDocumentGlobalKey";bn=function(e,t,n,r,i,s,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=a};bn.store="targets",bn.keyPath="targetId",bn.queryTargetsIndexName="queryTargetsIndex",bn.queryTargetsKeyPath=["canonicalId","targetId"];Ot=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};Ot.store="targetDocuments",Ot.keyPath=["targetId","path"],Ot.documentTargetsIndex="documentTargetsIndex",Ot.documentTargetsKeyPath=["path","targetId"];Pn=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Pn.key="targetGlobalKey",Pn.store="targetGlobal";ss=function(e,t){this.collectionId=e,this.parent=t};ss.store="collectionParents",ss.keyPath=["collectionId","parent"];ci=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};ci.store="clientMetadata",ci.keyPath="clientId";ja=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};ja.store="bundles",ja.keyPath="bundleId";Va=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};Va.store="namedQueries",Va.keyPath="name";oK=oe(oe([],oe(oe([],oe(oe([],oe(oe([],[Qi.store,je.store,Bt.store,$e.store,bn.store,xn.store,Pn.store,Ot.store]),[ci.store])),[Vr.store])),[ss.store])),[ja.store,Va.store]),Dx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Lx=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},e}(),sn=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})},j=function(){function e(t){var n=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(r){n.isDone=!0,n.result=r,n.nextCallback&&n.nextCallback(r)},function(r){n.isDone=!0,n.error=r,n.catchCallback&&n.catchCallback(r)})}return e.prototype.catch=function(t){return this.next(void 0,t)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&$(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(i,s){r.nextCallback=function(a){r.wrapSuccess(t,a).next(i,s)},r.catchCallback=function(a){r.wrapFailure(n,a).next(i,s)}})},e.prototype.toPromise=function(){var t=this;return new Promise(function(n,r){t.next(n,r)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(n,r){n(t)})},e.reject=function(t){return new e(function(n,r){r(t)})},e.waitFor=function(t){return new e(function(n,r){var i=0,s=0,a=!1;t.forEach(function(c){++i,c.next(function(){++s,a&&s===i&&n()},function(l){return r(l)})}),a=!0,s===i&&n()})},e.or=function(t){for(var n=e.resolve(!1),r=function(a){n=n.next(function(c){return c?e.resolve(c):a()})},i=0,s=t;i<s.length;i++)r(s[i]);return n},e.forEach=function(t,n){var r=this,i=[];return t.forEach(function(s,a){i.push(n.call(r,s,a))}),this.waitFor(i)},e}(),Mx=function(){function e(t,n){var r=this;this.action=t,this.transaction=n,this.aborted=!1,this.ft=new sn,this.transaction.oncomplete=function(){r.ft.resolve()},this.transaction.onabort=function(){n.error?r.ft.reject(new vl(t,n.error)):r.ft.resolve()},this.transaction.onerror=function(i){var s=Lb(i.target.error);r.ft.reject(new vl(t,s))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(s){throw new vl(n,s)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(q("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(t){var n=this.transaction.objectStore(t);return new aK(n)},e}(),Ba=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,e._t(Ri())===12.2&&ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return q("SimpleDb","Removing database:",t),us(window.indexedDB.deleteDatabase(t)).toPromise()},e.yt=function(){if(typeof indexedDB=="undefined")return!1;if(e.gt())return!0;var t=Ri(),n=e._t(t),r=0<n&&n<10,i=e.Et(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)},e.gt=function(){var t;return typeof process!="undefined"&&((t=process.env)===null||t===void 0?void 0:t.Tt)==="YES"},e.It=function(t,n){return t.store(n)},e._t=function(t){var n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)},e.Et=function(t){var n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)},e.prototype.At=function(t){return A(this,void 0,void 0,function(){var n,r=this;return C(this,function(i){switch(i.label){case 0:return this.db?[3,2]:(q("SimpleDb","Opening database:",this.name),n=this,[4,new Promise(function(s,a){var c=indexedDB.open(r.name,r.version);c.onsuccess=function(l){var h=l.target.result;s(h)},c.onblocked=function(){a(new vl(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=function(l){var h=l.target.error;h.name==="VersionError"?a(new F(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a(new vl(t,h))},c.onupgradeneeded=function(l){q("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',l.oldVersion);var h=l.target.result;r.wt.Rt(h,c.transaction,l.oldVersion,r.version).next(function(){q("SimpleDb","Database upgrade to version "+r.version+" complete")})}})]);case 1:n.db=i.sent(),i.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(s){return r.bt(s)}),this.db)]}})})},e.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(n){return t(n)})},e.prototype.runTransaction=function(t,n,r,i){return A(this,void 0,void 0,function(){var s,a,c,l,h;return C(this,function(d){switch(d.label){case 0:s=n==="readonly",a=0,c=function(){var g,m,_,w,E;return C(this,function(T){switch(T.label){case 0:++a,T.label=1;case 1:return T.trys.push([1,4,,5]),[4,l.At(t)];case 2:return l.db=T.sent(),g=Mx.open(l.db,t,s?"readonly":"readwrite",r),m=i(g).catch(function(S){return g.abort(S),j.reject(S)}).toPromise(),_={},m.catch(function(){}),[4,g.dt];case 3:return[2,(_.value=(T.sent(),m),_)];case 4:return w=T.sent(),E=w.name!=="FirebaseError"&&a<3,q("SimpleDb","Transaction failed with error:",w.message,"Retrying:",E),l.close(),E?[3,5]:[2,{value:Promise.reject(w)}];case 5:return[2]}})},l=this,d.label=1;case 1:return[5,c()];case 2:if(typeof(h=d.sent())=="object")return[2,h.value];d.label=3;case 3:return[3,1];case 4:return[2]}})})},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),sK=function(){function e(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(t){this.St=t},e.prototype.delete=function(){return us(this.Pt.delete())},e}(),vl=function(e){function t(n,r){var i=this;return(i=e.call(this,N.UNAVAILABLE,"IndexedDB transaction '"+n+"' failed: "+r)||this).name="IndexedDbTransactionError",i}return W(t,e),t}(F);aK=function(){function e(t){this.store=t}return e.prototype.put=function(t,n){var r;return n!==void 0?(q("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(q("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),us(r)},e.prototype.add=function(t){return q("SimpleDb","ADD",this.store.name,t,t),us(this.store.add(t))},e.prototype.get=function(t){var n=this;return us(this.store.get(t)).next(function(r){return r===void 0&&(r=null),q("SimpleDb","GET",n.store.name,t,r),r})},e.prototype.delete=function(t){return q("SimpleDb","DELETE",this.store.name,t),us(this.store.delete(t))},e.prototype.count=function(){return q("SimpleDb","COUNT",this.store.name),us(this.store.count())},e.prototype.Nt=function(t,n){var r=this.cursor(this.options(t,n)),i=[];return this.xt(r,function(s,a){i.push(a)}).next(function(){return i})},e.prototype.Ft=function(t,n){q("SimpleDb","DELETE ALL",this.store.name);var r=this.options(t,n);r.kt=!1;var i=this.cursor(r);return this.xt(i,function(s,a,c){return c.delete()})},e.prototype.$t=function(t,n){var r;n?r=t:(r={},n=t);var i=this.cursor(r);return this.xt(i,n)},e.prototype.Ot=function(t){var n=this.cursor({});return new j(function(r,i){n.onerror=function(s){var a=Lb(s.target.error);i(a)},n.onsuccess=function(s){var a=s.target.result;a?t(a.primaryKey,a.value).next(function(c){c?a.continue():r()}):r()}})},e.prototype.xt=function(t,n){var r=[];return new j(function(i,s){t.onerror=function(a){s(a.target.error)},t.onsuccess=function(a){var c=a.target.result;if(c){var l=new sK(c),h=n(c.primaryKey,c.value,l);if(h instanceof j){var d=h.catch(function(g){return l.done(),j.reject(g)});r.push(d)}l.isDone?i():l.Dt===null?c.continue():c.continue(l.Dt)}else i()}}).next(function(){return j.waitFor(r)})},e.prototype.options=function(t,n){var r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}},e.prototype.cursor=function(t){var n="next";if(t.reverse&&(n="prev"),t.index){var r=this.store.index(t.index);return t.kt?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)},e}();Fx=!1;Ux=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Mt=n,i.currentSequenceNumber=r,i}return W(t,e),t}(Lx);Mb=function(){function e(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return e.prototype.applyToRemoteDocument=function(t,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var s=this.mutations[i];s.key.isEqual(t.key)&&FG(s,t,r[i])}},e.prototype.applyToLocalView=function(t){for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(t.key)&&kb(a,t,this.localWriteTime);for(var i=0,s=this.mutations;i<s.length;i++){var a;(a=s[i]).key.isEqual(t.key)&&kb(a,t,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(t){var n=this;this.mutations.forEach(function(r){var i=t.get(r.key),s=i;n.applyToLocalView(s),i.isValidDocument()||s.convertToNoDocument(de.min())})},e.prototype.keys=function(){return this.mutations.reduce(function(t,n){return t.add(n.key)},Ne())},e.prototype.isEqual=function(t){return this.batchId===t.batchId&&ka(this.mutations,t.mutations,function(n,r){return ox(n,r)})&&ka(this.baseMutations,t.baseMutations,function(n,r){return ox(n,r)})},e}(),uK=function(){function e(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return e.from=function(t,n,r){re(t.mutations.length===r.length);for(var i=px(),s=t.mutations,a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new e(t,n,r,i)},e}(),ed=function(){function e(t,n,r,i,s,a,c){s===void 0&&(s=de.min()),a===void 0&&(a=de.min()),c===void 0&&(c=on.EMPTY_BYTE_STRING),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),jx=function(e){this.Lt=e};cK=function(){function e(){}return e.prototype.getBundleMetadata=function(t,n){return Wx(t).get(n).next(function(r){if(r)return{id:(i=r).bundleId,createTime:Wa(i.createTime),version:i.version};var i})},e.prototype.saveBundleMetadata=function(t,n){return Wx(t).put({bundleId:(r=n).id,createTime:qa(Nt(r.createTime)),version:r.version});var r},e.prototype.getNamedQuery=function(t,n){return Gx(t).get(n).next(function(r){if(r)return{name:(i=r).name,query:jb(i.bundledQuery),readTime:Wa(i.readTime)};var i})},e.prototype.saveNamedQuery=function(t,n){return Gx(t).put(function(r){return{name:r.name,readTime:qa(Nt(r.readTime)),bundledQuery:r.bundledQuery}}(n))},e}();lK=function(){function e(){this.Bt=new Vb}return e.prototype.addToCollectionParentIndex=function(t,n){return this.Bt.add(n),j.resolve()},e.prototype.getCollectionParents=function(t,n){return j.resolve(this.Bt.getEntries(n))},e}(),Vb=function(){function e(){this.index={}}return e.prototype.add=function(t){var n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new vt(Se.comparator),s=!i.has(r);return this.index[n]=i.add(r),s},e.prototype.has=function(t){var n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)},e.prototype.getEntries=function(t){return(this.index[t]||new vt(Se.comparator)).toArray()},e}(),fK=function(){function e(){this.qt=new Vb}return e.prototype.addToCollectionParentIndex=function(t,n){var r=this;if(!this.qt.has(n)){var i=n.lastSegment(),s=n.popLast();t.addOnCommittedListener(function(){r.qt.add(n)});var a={collectionId:i,parent:br(s)};return Kx(t).put(a)}return j.resolve()},e.prototype.getCollectionParents=function(t,n){var r=[],i=IDBKeyRange.bound([n,""],[PO(n),""],!1,!0);return Kx(t).Nt(i).next(function(s){for(var a=0,c=s;a<c.length;a++){var l=c[a];if(l.collectionId!==n)break;r.push(ui(l.parent))}return r})},e}();Hx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Br=function(){function e(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();Br.DEFAULT_COLLECTION_PERCENTILE=10,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Br.DEFAULT=new Br(41943040,Br.DEFAULT_COLLECTION_PERCENTILE,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Br.DISABLED=new Br(-1,0,0);hK=function(){function e(t,n,r,i){this.userId=t,this.R=n,this.Ut=r,this.referenceDelegate=i,this.Qt={}}return e.Kt=function(t,n,r,i){return re(t.uid!==""),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(t){var n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yi(t).$t({index:je.userMutationsIndex,range:r},function(i,s,a){n=!1,a.done()}).next(function(){return n})},e.prototype.addMutationBatch=function(t,n,r,i){var s=this,a=Ka(t),c=Yi(t);return c.add({}).next(function(l){re(typeof l=="number");for(var h=new Mb(l,n,r,i),d=function(S,R,O){var U=O.baseMutations.map(function(P){return Zp(S.Lt,P)}),L=O.mutations.map(function(P){return Zp(S.Lt,P)});return new je(R,O.batchId,O.localWriteTime.toMillis(),U,L)}(s.R,s.userId,h),g=[],m=new vt(function(S,R){return _e(S.canonicalString(),R.canonicalString())}),_=0,w=i;_<w.length;_++){var E=w[_],T=Bt.key(s.userId,E.key.path,l);m=m.add(E.key.path.popLast()),g.push(c.put(d)),g.push(a.put(T,Bt.PLACEHOLDER))}return m.forEach(function(S){g.push(s.Ut.addToCollectionParentIndex(t,S))}),t.addOnCommittedListener(function(){s.Qt[l]=h.keys()}),j.waitFor(g).next(function(){return h})})},e.prototype.lookupMutationBatch=function(t,n){var r=this;return Yi(t).get(n).next(function(i){return i?(re(i.userId===r.userId),Ga(r.R,i)):null})},e.prototype.jt=function(t,n){var r=this;return this.Qt[n]?j.resolve(this.Qt[n]):this.lookupMutationBatch(t,n).next(function(i){if(i){var s=i.keys();return r.Qt[n]=s,s}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(t,n){var r=this,i=n+1,s=IDBKeyRange.lowerBound([this.userId,i]),a=null;return Yi(t).$t({index:je.userMutationsIndex,range:s},function(c,l,h){l.userId===r.userId&&(re(l.batchId>=i),a=Ga(r.R,l)),h.done()}).next(function(){return a})},e.prototype.getHighestUnacknowledgedBatchId=function(t){var n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Yi(t).$t({index:je.userMutationsIndex,range:n,reverse:!0},function(i,s,a){r=s.batchId,a.done()}).next(function(){return r})},e.prototype.getAllMutationBatches=function(t){var n=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Yi(t).Nt(je.userMutationsIndex,r).next(function(i){return i.map(function(s){return Ga(n.R,s)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,i=Bt.prefixForPath(this.userId,n.path),s=IDBKeyRange.lowerBound(i),a=[];return Ka(t).$t({range:s},function(c,l,h){var d=c[0],g=c[1],m=c[2],_=ui(g);if(d===r.userId&&n.path.isEqual(_))return Yi(t).get(m).next(function(w){if(!w)throw $();re(w.userId===r.userId),a.push(Ga(r.R,w))});h.done()}).next(function(){return a})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,n){var r=this,i=new vt(_e),s=[];return n.forEach(function(a){var c=Bt.prefixForPath(r.userId,a.path),l=IDBKeyRange.lowerBound(c),h=Ka(t).$t({range:l},function(d,g,m){var _=d[0],w=d[1],E=d[2],T=ui(w);_===r.userId&&a.path.isEqual(T)?i=i.add(E):m.done()});s.push(h)}),j.waitFor(s).next(function(){return r.Wt(t,i)})},e.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var r=this,i=n.path,s=i.length+1,a=Bt.prefixForPath(this.userId,i),c=IDBKeyRange.lowerBound(a),l=new vt(_e);return Ka(t).$t({range:c},function(h,d,g){var m=h[0],_=h[1],w=h[2],E=ui(_);m===r.userId&&i.isPrefixOf(E)?E.length===s&&(l=l.add(w)):g.done()}).next(function(){return r.Wt(t,l)})},e.prototype.Wt=function(t,n){var r=this,i=[],s=[];return n.forEach(function(a){s.push(Yi(t).get(a).next(function(c){if(c===null)throw $();re(c.userId===r.userId),i.push(Ga(r.R,c))}))}),j.waitFor(s).next(function(){return i})},e.prototype.removeMutationBatch=function(t,n){var r=this;return zx(t.Mt,this.userId,n).next(function(i){return t.addOnCommittedListener(function(){r.Gt(n.batchId)}),j.forEach(i,function(s){return r.referenceDelegate.markPotentiallyOrphaned(t,s)})})},e.prototype.Gt=function(t){delete this.Qt[t]},e.prototype.performConsistencyCheck=function(t){var n=this;return this.checkEmpty(t).next(function(r){if(!r)return j.resolve();var i=IDBKeyRange.lowerBound(Bt.prefixForUser(n.userId)),s=[];return Ka(t).$t({range:i},function(a,c,l){if(a[0]===n.userId){var h=ui(a[1]);s.push(h)}else l.done()}).next(function(){re(s.length===0)})})},e.prototype.containsKey=function(t,n){return Qx(t,this.userId,n)},e.prototype.zt=function(t){var n=this;return Yx(t).get(this.userId).next(function(r){return r||new Qi(n.userId,-1,"")})},e}();nd=function(){function e(t){this.Ht=t}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),pK=function(){function e(t,n){this.referenceDelegate=t,this.R=n}return e.prototype.allocateTargetId=function(t){var n=this;return this.Xt(t).next(function(r){var i=new nd(r.highestTargetId);return r.highestTargetId=i.next(),n.Zt(t,r).next(function(){return r.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(n){return de.fromTimestamp(new rn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(n){return n.highestListenSequenceNumber})},e.prototype.setTargetsMetadata=function(t,n,r){var i=this;return this.Xt(t).next(function(s){return s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),i.Zt(t,s)})},e.prototype.addTargetData=function(t,n){var r=this;return this.te(t,n).next(function(){return r.Xt(t).next(function(i){return i.targetCount+=1,r.ee(n,i),r.Zt(t,i)})})},e.prototype.updateTargetData=function(t,n){return this.te(t,n)},e.prototype.removeTargetData=function(t,n){var r=this;return this.removeMatchingKeysForTargetId(t,n.targetId).next(function(){return Ha(t).delete(n.targetId)}).next(function(){return r.Xt(t)}).next(function(i){return re(i.targetCount>0),i.targetCount-=1,r.Zt(t,i)})},e.prototype.removeTargets=function(t,n,r){var i=this,s=0,a=[];return Ha(t).$t(function(c,l){var h=ml(l);h.sequenceNumber<=n&&r.get(h.targetId)===null&&(s++,a.push(i.removeTargetData(t,h)))}).next(function(){return j.waitFor(a)}).next(function(){return s})},e.prototype.forEachTarget=function(t,n){return Ha(t).$t(function(r,i){var s=ml(i);n(s)})},e.prototype.Xt=function(t){return Xx(t).get(Pn.key).next(function(n){return re(n!==null),n})},e.prototype.Zt=function(t,n){return Xx(t).put(Pn.key,n)},e.prototype.te=function(t,n){return Ha(t).put(qx(this.R,n))},e.prototype.ee=function(t,n){var r=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,r=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,r=!0),r},e.prototype.getTargetCount=function(t){return this.Xt(t).next(function(n){return n.targetCount})},e.prototype.getTargetData=function(t,n){var r=ol(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Ha(t).$t({range:i,index:bn.queryTargetsIndexName},function(a,c,l){var h=ml(c);qp(n,h.target)&&(s=h,l.done())}).next(function(){return s})},e.prototype.addMatchingKeys=function(t,n,r){var i=this,s=[],a=Xi(t);return n.forEach(function(c){var l=br(c.path);s.push(a.put(new Ot(r,l))),s.push(i.referenceDelegate.addReference(t,r,c))}),j.waitFor(s)},e.prototype.removeMatchingKeys=function(t,n,r){var i=this,s=Xi(t);return j.forEach(n,function(a){var c=br(a.path);return j.waitFor([s.delete([r,c]),i.referenceDelegate.removeReference(t,r,a)])})},e.prototype.removeMatchingKeysForTargetId=function(t,n){var r=Xi(t),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)},e.prototype.getMatchingKeysForTargetId=function(t,n){var r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Xi(t),s=Ne();return i.$t({range:r,kt:!0},function(a,c,l){var h=ui(a[1]),d=new J(h);s=s.add(d)}).next(function(){return s})},e.prototype.containsKey=function(t,n){var r=br(n.path),i=IDBKeyRange.bound([r],[PO(r)],!1,!0),s=0;return Xi(t).$t({index:Ot.documentTargetsIndex,kt:!0,range:i},function(a,c,l){var h=a[0];a[1],h!==0&&(s++,l.done())}).next(function(){return s>0})},e.prototype.lt=function(t,n){return Ha(t).get(n).next(function(r){return r?ml(r):null})},e}();dK=function(){function e(t){this.ne=t,this.buffer=new vt($x),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(t){var n=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(n);else{var r=this.buffer.last();$x(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),vK=function(){function e(t,n){this.garbageCollector=t,this.asyncQueue=n,this.oe=!1,this.ce=null}return e.prototype.start=function(t){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.ue(t)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return this.ce!==null},enumerable:!1,configurable:!0}),e.prototype.ue=function(t){var n=this,r=this.oe?3e5:6e4;q("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,function(){return A(n,void 0,void 0,function(){var i;return C(this,function(s){switch(s.label){case 0:this.ce=null,this.oe=!0,s.label=1;case 1:return s.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return s.sent(),[3,7];case 3:return as(i=s.sent())?(q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i),[3,6]):[3,4];case 4:return[4,cs(i)];case 5:s.sent(),s.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return s.sent(),[2]}})})})},e}(),mK=function(){function e(t,n){this.ae=t,this.params=n}return e.prototype.calculateTargetCount=function(t,n){return this.ae.he(t).next(function(r){return Math.floor(n/100*r)})},e.prototype.nthSequenceNumber=function(t,n){var r=this;if(n===0)return j.resolve(Rn.o);var i=new dK(n);return this.ae.forEachTarget(t,function(s){return i.re(s.sequenceNumber)}).next(function(){return r.ae.le(t,function(s){return i.re(s)})}).next(function(){return i.maxValue})},e.prototype.removeTargets=function(t,n,r){return this.ae.removeTargets(t,n,r)},e.prototype.removeOrphanedDocuments=function(t,n){return this.ae.removeOrphanedDocuments(t,n)},e.prototype.collect=function(t,n){var r=this;return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(Hx)):this.getCacheSize(t).next(function(i){return i<r.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),Hx):r.fe(t,n)})},e.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},e.prototype.fe=function(t,n){var r,i,s,a,c,l,h,d=this,g=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(m){return m>d.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+d.params.maximumSequenceNumbersToCollect+" from "+m),i=d.params.maximumSequenceNumbersToCollect):i=m,a=Date.now(),d.nthSequenceNumber(t,i)}).next(function(m){return r=m,c=Date.now(),d.removeTargets(t,r,n)}).next(function(m){return s=m,l=Date.now(),d.removeOrphanedDocuments(t,r)}).next(function(m){return h=Date.now(),gb()<=le.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in `+(a-g)+`ms
	Determined least recently used `+i+" in "+(c-a)+`ms
	Removed `+s+" targets in "+(l-c)+`ms
	Removed `+m+" documents in "+(h-l)+`ms
Total Duration: `+(h-g)+"ms"),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})})},e}(),gK=function(){function e(t,n){this.db=t,this.garbageCollector=function(r,i){return new mK(r,i)}(this,n)}return e.prototype.he=function(t){var n=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(r){return n.next(function(i){return r+i})})},e.prototype.de=function(t){var n=0;return this.le(t,function(r){n++}).next(function(){return n})},e.prototype.forEachTarget=function(t,n){return this.db.getTargetCache().forEachTarget(t,n)},e.prototype.le=function(t,n){return this.we(t,function(r,i){return n(i)})},e.prototype.addReference=function(t,n,r){return rd(t,r)},e.prototype.removeReference=function(t,n,r){return rd(t,r)},e.prototype.removeTargets=function(t,n,r){return this.db.getTargetCache().removeTargets(t,n,r)},e.prototype.markPotentiallyOrphaned=function(t,n){return rd(t,n)},e.prototype._e=function(t,n){return function(r,i){var s=!1;return Yx(r).Ot(function(a){return Qx(r,a,i).next(function(c){return c&&(s=!0),j.resolve(!c)})}).next(function(){return s})}(t,n)},e.prototype.removeOrphanedDocuments=function(t,n){var r=this,i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[],a=0;return this.we(t,function(c,l){if(l<=n){var h=r._e(t,c).next(function(d){if(!d)return a++,i.getEntry(t,c).next(function(){return i.removeEntry(c),Xi(t).delete([0,br(c.path)])})});s.push(h)}}).next(function(){return j.waitFor(s)}).next(function(){return i.apply(t)}).next(function(){return a})},e.prototype.removeTarget=function(t,n){var r=n.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)},e.prototype.updateLimboDocument=function(t,n){return rd(t,n)},e.prototype.we=function(t,n){var r,i=Xi(t),s=Rn.o;return i.$t({index:Ot.documentTargetsIndex},function(a,c){var l=a[0],h=(a[1],c.path),d=c.sequenceNumber;l===0?(s!==Rn.o&&n(new J(ui(r)),s),s=d,r=h):s=Rn.o}).next(function(){s!==Rn.o&&n(new J(ui(r)),s)})},e.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},e}();za=function(){function e(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return e.prototype.get=function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0)for(var i=0,s=r;i<s.length;i++){var a=s[i],c=a[0],l=a[1];if(this.equalsFn(c,t))return l}},e.prototype.has=function(t){return this.get(t)!==void 0},e.prototype.set=function(t,n){var r=this.mapKeyFn(t),i=this.inner[r];if(i!==void 0){for(var s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n])}else this.inner[r]=[[t,n]]},e.prototype.delete=function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),!0;return!1},e.prototype.forEach=function(t){ts(this.inner,function(n,r){for(var i=0,s=r;i<s.length;i++){var a=s[i],c=a[0],l=a[1];t(c,l)}})},e.prototype.isEmpty=function(){return LO(this.inner)},e}(),Jx=function(){function e(){this.changes=new za(function(t){return t.toString()},function(t,n){return t.isEqual(n)}),this.changesApplied=!1}return e.prototype.getReadTime=function(t){var n=this.changes.get(t);return n?n.readTime:de.min()},e.prototype.addEntry=function(t,n){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:n})},e.prototype.removeEntry=function(t,n){n===void 0&&(n=null),this.assertNotApplied(),this.changes.set(t,{document:Rt.newInvalidDocument(t),readTime:n})},e.prototype.getEntry=function(t,n){this.assertNotApplied();var r=this.changes.get(n);return r!==void 0?j.resolve(r.document):this.getFromCache(t,n)},e.prototype.getEntries=function(t,n){return this.getAllFromCache(t,n)},e.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},e.prototype.assertNotApplied=function(){},e}(),yK=function(){function e(t,n){this.R=t,this.Ut=n}return e.prototype.addEntry=function(t,n,r){return $i(t).put(id(n),r)},e.prototype.removeEntry=function(t,n){var r=$i(t),i=id(n);return r.delete(i)},e.prototype.updateMetadata=function(t,n){var r=this;return this.getMetadata(t).next(function(i){return i.byteSize+=n,r.me(t,i)})},e.prototype.getEntry=function(t,n){var r=this;return $i(t).get(id(n)).next(function(i){return r.ye(n,i)})},e.prototype.ge=function(t,n){var r=this;return $i(t).get(id(n)).next(function(i){return{document:r.ye(n,i),size:td(i)}})},e.prototype.getEntries=function(t,n){var r=this,i=Qn();return this.pe(t,n,function(s,a){var c=r.ye(s,a);i=i.insert(s,c)}).next(function(){return i})},e.prototype.Ee=function(t,n){var r=this,i=Qn(),s=new Vt(J.comparator);return this.pe(t,n,function(a,c){var l=r.ye(a,c);i=i.insert(a,l),s=s.insert(a,td(c))}).next(function(){return{documents:i,Te:s}})},e.prototype.pe=function(t,n,r){if(n.isEmpty())return j.resolve();var i=IDBKeyRange.bound(n.first().path.toArray(),n.last().path.toArray()),s=n.getIterator(),a=s.getNext();return $i(t).$t({range:i},function(c,l,h){for(var d=J.fromSegments(c);a&&J.comparator(a,d)<0;)r(a,null),a=s.getNext();a&&a.isEqual(d)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.Ct(a.path.toArray()):h.done()}).next(function(){for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(t,n,r){var i=this,s=Qn(),a=n.path.length+1,c={};if(r.isEqual(de.min())){var l=n.path.toArray();c.range=IDBKeyRange.lowerBound(l)}else{var h=n.path.toArray(),d=Ub(r);c.range=IDBKeyRange.lowerBound([h,d],!0),c.index=$e.collectionReadTimeIndex}return $i(t).$t(c,function(g,m,_){if(g.length===a){var w=Fb(i.R,m);n.path.isPrefixOf(w.key.path)?ul(n,w)&&(s=s.insert(w.key,w)):_.done()}}).next(function(){return s})},e.prototype.newChangeBuffer=function(t){return new _K(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(t){return this.getMetadata(t).next(function(n){return n.byteSize})},e.prototype.getMetadata=function(t){return Zx(t).get(Vr.key).next(function(n){return re(!!n),n})},e.prototype.me=function(t,n){return Zx(t).put(Vr.key,n)},e.prototype.ye=function(t,n){if(n){var r=Fb(this.R,n);if(!r.isNoDocument()||!r.version.isEqual(de.min()))return r}return Rt.newInvalidDocument(t)},e}(),_K=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Ie=n,i.trackRemovals=r,i.Ae=new za(function(s){return s.toString()},function(s,a){return s.isEqual(a)}),i}return W(t,e),t.prototype.applyChanges=function(n){var r=this,i=[],s=0,a=new vt(function(c,l){return _e(c.canonicalString(),l.canonicalString())});return this.changes.forEach(function(c,l){var h=r.Ae.get(c);if(l.document.isValidDocument()){var d=Vx(r.Ie.R,l.document,r.getReadTime(c));a=a.add(c.path.popLast());var g=td(d);s+=g-h,i.push(r.Ie.addEntry(n,c,d))}else if(s-=h,r.trackRemovals){var m=Vx(r.Ie.R,Rt.newNoDocument(c,de.min()),r.getReadTime(c));i.push(r.Ie.addEntry(n,c,m))}else i.push(r.Ie.removeEntry(n,c))}),a.forEach(function(c){i.push(r.Ie.Ut.addToCollectionParentIndex(n,c))}),i.push(this.Ie.updateMetadata(n,s)),j.waitFor(i)},t.prototype.getFromCache=function(n,r){var i=this;return this.Ie.ge(n,r).next(function(s){return i.Ae.set(r,s.size),s.document})},t.prototype.getAllFromCache=function(n,r){var i=this;return this.Ie.Ee(n,r).next(function(s){var a=s.documents;return s.Te.forEach(function(c,l){i.Ae.set(c,l)}),a})},t}(Jx);bK=function(){function e(t){this.R=t}return e.prototype.Rt=function(t,n,r,i){var s=this;re(r<i&&r>=0&&i<=11);var a=new Mx("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(xn.store)}(t),function(l){l.createObjectStore(Qi.store,{keyPath:Qi.keyPath}),l.createObjectStore(je.store,{keyPath:je.keyPath,autoIncrement:!0}).createIndex(je.userMutationsIndex,je.userMutationsKeyPath,{unique:!0}),l.createObjectStore(Bt.store)}(t),eP(t),function(l){l.createObjectStore($e.store)}(t));var c=j.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(Ot.store),l.deleteObjectStore(bn.store),l.deleteObjectStore(Pn.store)}(t),eP(t)),c=c.next(function(){return function(l){var h=l.store(Pn.store),d=new Pn(0,0,de.min().toTimestamp(),0);return h.put(Pn.key,d)}(a)})),r<4&&i>=4&&(r!==0&&(c=c.next(function(){return function(l,h){return h.store(je.store).Nt().next(function(d){l.deleteObjectStore(je.store),l.createObjectStore(je.store,{keyPath:je.keyPath,autoIncrement:!0}).createIndex(je.userMutationsIndex,je.userMutationsKeyPath,{unique:!0});var g=h.store(je.store),m=d.map(function(_){return g.put(_)});return j.waitFor(m)})}(t,a)})),c=c.next(function(){(function(l){l.createObjectStore(ci.store,{keyPath:ci.keyPath})})(t)})),r<5&&i>=5&&(c=c.next(function(){return s.Re(a)})),r<6&&i>=6&&(c=c.next(function(){return function(l){l.createObjectStore(Vr.store)}(t),s.be(a)})),r<7&&i>=7&&(c=c.next(function(){return s.ve(a)})),r<8&&i>=8&&(c=c.next(function(){return s.Pe(t,a)})),r<9&&i>=9&&(c=c.next(function(){(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(t),function(l){var h=l.objectStore($e.store);h.createIndex($e.readTimeIndex,$e.readTimeIndexPath,{unique:!1}),h.createIndex($e.collectionReadTimeIndex,$e.collectionReadTimeIndexPath,{unique:!1})}(n)})),r<10&&i>=10&&(c=c.next(function(){return s.Ve(a)})),r<11&&i>=11&&(c=c.next(function(){(function(l){l.createObjectStore(ja.store,{keyPath:ja.keyPath})})(t),function(l){l.createObjectStore(Va.store,{keyPath:Va.keyPath})}(t)})),c},e.prototype.be=function(t){var n=0;return t.store($e.store).$t(function(r,i){n+=td(i)}).next(function(){var r=new Vr(n);return t.store(Vr.store).put(Vr.key,r)})},e.prototype.Re=function(t){var n=this,r=t.store(Qi.store),i=t.store(je.store);return r.Nt().next(function(s){return j.forEach(s,function(a){var c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return i.Nt(je.userMutationsIndex,c).next(function(l){return j.forEach(l,function(h){re(h.userId===a.userId);var d=Ga(n.R,h);return zx(t,a.userId,d).next(function(){})})})})})},e.prototype.ve=function(t){var n=t.store(Ot.store),r=t.store($e.store);return t.store(Pn.store).get(Pn.key).next(function(i){var s=[];return r.$t(function(a,c){var l=new Se(a),h=function(d){return[0,br(d)]}(l);s.push(n.get(h).next(function(d){return d?j.resolve():function(g){return n.put(new Ot(0,br(g),i.highestListenSequenceNumber))}(l)}))}).next(function(){return j.waitFor(s)})})},e.prototype.Pe=function(t,n){t.createObjectStore(ss.store,{keyPath:ss.keyPath});var r=n.store(ss.store),i=new Vb,s=function(a){if(i.add(a)){var c=a.lastSegment(),l=a.popLast();return r.put({collectionId:c,parent:br(l)})}};return n.store($e.store).$t({kt:!0},function(a,c){var l=new Se(a);return s(l.popLast())}).next(function(){return n.store(Bt.store).$t({kt:!0},function(a,c){a[0];var l=a[1],h=(a[2],ui(l));return s(h.popLast())})})},e.prototype.Ve=function(t){var n=this,r=t.store(bn.store);return r.$t(function(i,s){var a=ml(s),c=qx(n.R,a);return r.put(c)})},e}();Bb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",wK=function(){function e(t,n,r,i,s,a,c,l,h,d){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=s,this.window=a,this.document=c,this.De=h,this.Ce=d,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(g){return Promise.resolve()},!e.yt())throw new F(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gK(this,i),this.Le=n+"main",this.R=new jx(l),this.Be=new Ba(this.Le,11,new bK(this.R)),this.qe=new pK(this.referenceDelegate,this.R),this.Ut=new fK,this.Ue=function(g,m){return new yK(g,m)}(this.R,this.Ut),this.Qe=new cK,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,d===!1&&ot("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new F(N.FAILED_PRECONDITION,Bb);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(n){return t.qe.getHighestSequenceNumber(n)})}).then(function(n){t.Ne=new Rn(n,t.De)}).then(function(){t.xe=!0}).catch(function(n){return t.Be&&t.Be.close(),Promise.reject(n)})},e.prototype.He=function(t){var n=this;return this.Me=function(r){return A(n,void 0,void 0,function(){return C(this,function(i){return this.started?[2,t(r)]:[2]})})},t(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(t){var n=this;this.Be.vt(function(r){return A(n,void 0,void 0,function(){return C(this,function(i){switch(i.label){case 0:return r.newVersion===null?[4,t()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(t){var n=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return A(n,void 0,void 0,function(){return C(this,function(r){switch(r.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})}))},e.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(n){return od(n).put(new ci(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(n).next(function(r){r||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(n)}).next(function(r){return t.isPrimary&&!r?t.Xe(n).next(function(){return!1}):!!r&&t.Ze(n).next(function(){return!0})})}).catch(function(n){if(as(n))return q("IndexedDbPersistence","Failed to extend owner lease: ",n),t.isPrimary;if(!t.allowTabSynchronization)throw n;return q("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(function(n){t.isPrimary!==n&&t.Se.enqueueRetryable(function(){return t.Me(n)}),t.isPrimary=n})},e.prototype.Je=function(t){var n=this;return gl(t).get(xn.key).next(function(r){return j.resolve(n.tn(r))})},e.prototype.en=function(t){return od(t).delete(this.clientId)},e.prototype.nn=function(){return A(this,void 0,void 0,function(){var t,n,r,i,s=this;return C(this,function(a){switch(a.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(c){var l=wn(c,ci.store);return l.Nt().next(function(h){var d=s.rn(h,18e5),g=h.filter(function(m){return d.indexOf(m)===-1});return j.forEach(g,function(m){return l.delete(m.clientId)}).next(function(){return g})})}).catch(function(){return[]})]);case 1:if(t=a.sent(),this.Ke)for(n=0,r=t;n<r.length;n++)i=r[n],this.Ke.removeItem(this.on(i.clientId));a.label=2;case 2:return[2]}})})},e.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},e.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},e.prototype.Ye=function(t){var n=this;return this.Ce?j.resolve(!0):gl(t).get(xn.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)){if(n.tn(r)&&n.networkEnabled)return!0;if(!n.tn(r)){if(!r.allowTabSynchronization)throw new F(N.FAILED_PRECONDITION,Bb);return!1}}return!(!n.networkEnabled||!n.inForeground)||od(t).Nt().next(function(i){return n.rn(i,5e3).find(function(s){if(n.clientId!==s.clientId){var a=!n.networkEnabled&&s.networkEnabled,c=!n.inForeground&&s.inForeground,l=n.networkEnabled===s.networkEnabled;if(a||c&&l)return!0}return!1})===void 0})}).next(function(r){return n.isPrimary!==r&&q("IndexedDbPersistence","Client "+(r?"is":"is not")+" eligible for a primary lease."),r})},e.prototype.shutdown=function(){return A(this,void 0,void 0,function(){var t=this;return C(this,function(n){switch(n.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[xn.store,ci.store],function(r){var i=new Ux(r,Rn.o);return t.Xe(i).next(function(){return t.en(i)})})];case 1:return n.sent(),this.Be.close(),this.ln(),[2]}})})},e.prototype.rn=function(t,n){var r=this;return t.filter(function(i){return r.sn(i.updateTimeMs,n)&&!r.cn(i.clientId)})},e.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(n){return od(n).Nt().next(function(r){return t.rn(r,18e5).map(function(i){return i.clientId})})})},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(t){return hK.Kt(t,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Qe},e.prototype.runTransaction=function(t,n,r){var i=this;q("IndexedDbPersistence","Starting transaction:",t);var s,a=n==="readonly"?"readonly":"readwrite";return this.Be.runTransaction(t,a,oK,function(c){return s=new Ux(c,i.Ne?i.Ne.next():Rn.o),n==="readwrite-primary"?i.Je(s).next(function(l){return!!l||i.Ye(s)}).next(function(l){if(!l)throw ot("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new F(N.FAILED_PRECONDITION,Dx);return r(s)}).next(function(l){return i.Ze(s).next(function(){return l})}):i.dn(s).next(function(){return r(s)})}).then(function(c){return s.raiseOnCommittedEvent(),c})},e.prototype.dn=function(t){var n=this;return gl(t).get(xn.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)&&!n.tn(r)&&!(n.Ce||n.allowTabSynchronization&&r.allowTabSynchronization))throw new F(N.FAILED_PRECONDITION,Bb)})},e.prototype.Ze=function(t){var n=new xn(this.clientId,this.allowTabSynchronization,Date.now());return gl(t).put(xn.key,n)},e.yt=function(){return Ba.yt()},e.prototype.Xe=function(t){var n=this,r=gl(t);return r.get(xn.key).next(function(i){return n.tn(i)?(q("IndexedDbPersistence","Releasing primary lease."),r.delete(xn.key)):j.resolve()})},e.prototype.sn=function(t,n){var r=Date.now();return!(t<r-n||t>r&&(ot("Detected an update time that is in the future: "+t+" > "+r),1))},e.prototype.We=function(){var t=this;this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground=t.document.visibilityState==="visible",t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground=this.document.visibilityState==="visible")},e.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},e.prototype.Ge=function(){var t,n=this;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.Fe=function(){n.un(),n.Se.enqueueAndForget(function(){return n.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},e.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},e.prototype.cn=function(t){var n;try{var r=((n=this.Ke)===null||n===void 0?void 0:n.getItem(this.on(t)))!==null;return q("IndexedDbPersistence","Client '"+t+"' "+(r?"is":"is not")+" zombied in LocalStorage"),r}catch(i){return ot("IndexedDbPersistence","Failed to get zombied client id.",i),!1}},e.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){ot("Failed to set zombie client id.",t)}},e.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},e.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},e}();EK=function(e,t){this.progress=e,this.wn=t},tP=function(){function e(t,n,r){this.Ue=t,this._n=n,this.Ut=r}return e.prototype.mn=function(t,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,n).next(function(i){return r.yn(t,n,i)})},e.prototype.yn=function(t,n,r){return this.Ue.getEntry(t,n).next(function(i){for(var s=0,a=r;s<a.length;s++)a[s].applyToLocalView(i);return i})},e.prototype.gn=function(t,n){t.forEach(function(r,i){for(var s=0,a=n;s<a.length;s++)a[s].applyToLocalView(i)})},e.prototype.pn=function(t,n){var r=this;return this.Ue.getEntries(t,n).next(function(i){return r.En(t,i).next(function(){return i})})},e.prototype.En=function(t,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,n).next(function(i){return r.gn(n,i)})},e.prototype.getDocumentsMatchingQuery=function(t,n,r){return function(i){return J.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.Tn(t,n.path):Cb(n)?this.In(t,n,r):this.An(t,n,r)},e.prototype.Tn=function(t,n){return this.mn(t,new J(n)).next(function(r){var i=Nb();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})},e.prototype.In=function(t,n,r){var i=this,s=n.collectionGroup,a=Nb();return this.Ut.getCollectionParents(t,s).next(function(c){return j.forEach(c,function(l){var h=function(d,g){return new ai(g,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return i.An(t,h,r).next(function(d){d.forEach(function(g,m){a=a.insert(g,m)})})}).next(function(){return a})})},e.prototype.An=function(t,n,r){var i,s,a=this;return this.Ue.getDocumentsMatchingQuery(t,n,r).next(function(c){return i=c,a._n.getAllMutationBatchesAffectingQuery(t,n)}).next(function(c){return s=c,a.Rn(t,s,i).next(function(l){i=l;for(var h=0,d=s;h<d.length;h++)for(var g=d[h],m=0,_=g.mutations;m<_.length;m++){var w=_[m],E=w.key,T=i.get(E);T==null&&(T=Rt.newInvalidDocument(E),i=i.insert(E,T)),kb(w,T,g.localWriteTime),T.isFoundDocument()||(i=i.remove(E))}})}).next(function(){return i.forEach(function(c,l){ul(n,l)||(i=i.remove(c))}),i})},e.prototype.Rn=function(t,n,r){for(var i=Ne(),s=0,a=n;s<a.length;s++)for(var c=0,l=a[s].mutations;c<l.length;c++){var h=l[c];h instanceof Hi&&r.get(h.key)===null&&(i=i.add(h.key))}var d=r;return this.Ue.getEntries(t,i).next(function(g){return g.forEach(function(m,_){_.isFoundDocument()&&(d=d.insert(m,_))}),d})},e}(),IK=function(){function e(t,n,r,i){this.targetId=t,this.fromCache=n,this.bn=r,this.vn=i}return e.Pn=function(t,n){for(var r=Ne(),i=Ne(),s=0,a=n.docChanges;s<a.length;s++){var c=a[s];switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),nP=function(){function e(){}return e.prototype.Vn=function(t){this.Sn=t},e.prototype.getDocumentsMatchingQuery=function(t,n,r,i){var s=this;return function(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(de.min())?this.Dn(t,n):this.Sn.pn(t,i).next(function(a){var c=s.Cn(n,a);return(Kp(n)||Hp(n))&&s.Nn(n.limitType,c,i,r)?s.Dn(t,n):(gb()<=le.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ab(n)),s.Sn.getDocumentsMatchingQuery(t,n,r).next(function(l){return c.forEach(function(h){l=l.insert(h.key,h)}),l}))})},e.prototype.Cn=function(t,n){var r=new vt(XO(t));return n.forEach(function(i,s){ul(t,s)&&(r=r.add(s))}),r},e.prototype.Nn=function(t,n,r,i){if(r.size!==n.size)return!0;var s=t==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)},e.prototype.Dn=function(t,n){return gb()<=le.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Ab(n)),this.Sn.getDocumentsMatchingQuery(t,n,de.min())},e}(),TK=function(){function e(t,n,r,i){this.persistence=t,this.xn=n,this.R=i,this.Fn=new Vt(_e),this.kn=new za(function(s){return ol(s)},qp),this.$n=de.min(),this._n=t.getMutationQueue(r),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new tP(this.On,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(t){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(r){return t.collect(r,n.Fn)})},e}();OK=function(){function e(t){this.R=t,this.Kn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(t,n){return j.resolve(this.Kn.get(n))},e.prototype.saveBundleMetadata=function(t,n){var r;return this.Kn.set(n.id,{id:(r=n).id,version:r.version,createTime:Nt(r.createTime)}),j.resolve()},e.prototype.getNamedQuery=function(t,n){return j.resolve(this.jn.get(n))},e.prototype.saveNamedQuery=function(t,n){return this.jn.set(n.name,function(r){return{name:r.name,query:jb(r.bundledQuery),readTime:Nt(r.readTime)}}(n)),j.resolve()},e}(),Wb=function(){function e(){this.Wn=new vt(wt.Gn),this.zn=new vt(wt.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(t,n){var r=new wt(t,n);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)},e.prototype.Jn=function(t,n){var r=this;t.forEach(function(i){return r.addReference(i,n)})},e.prototype.removeReference=function(t,n){this.Yn(new wt(t,n))},e.prototype.Xn=function(t,n){var r=this;t.forEach(function(i){return r.removeReference(i,n)})},e.prototype.Zn=function(t){var n=this,r=new J(new Se([])),i=new wt(r,t),s=new wt(r,t+1),a=[];return this.zn.forEachInRange([i,s],function(c){n.Yn(c),a.push(c.key)}),a},e.prototype.ts=function(){var t=this;this.Wn.forEach(function(n){return t.Yn(n)})},e.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},e.prototype.es=function(t){var n=new J(new Se([])),r=new wt(n,t),i=new wt(n,t+1),s=Ne();return this.zn.forEachInRange([r,i],function(a){s=s.add(a.key)}),s},e.prototype.containsKey=function(t){var n=new wt(t,0),r=this.Wn.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)},e}(),wt=function(){function e(t,n){this.key=t,this.ns=n}return e.Gn=function(t,n){return J.comparator(t.key,n.key)||_e(t.ns,n.ns)},e.Hn=function(t,n){return _e(t.ns,n.ns)||J.comparator(t.key,n.key)},e}(),xK=function(){function e(t,n){this.Ut=t,this.referenceDelegate=n,this._n=[],this.ss=1,this.rs=new vt(wt.Gn)}return e.prototype.checkEmpty=function(t){return j.resolve(this._n.length===0)},e.prototype.addMutationBatch=function(t,n,r,i){var s=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var a=new Mb(s,n,r,i);this._n.push(a);for(var c=0,l=i;c<l.length;c++){var h=l[c];this.rs=this.rs.add(new wt(h.key,s)),this.Ut.addToCollectionParentIndex(t,h.key.path.popLast())}return j.resolve(a)},e.prototype.lookupMutationBatch=function(t,n){return j.resolve(this.os(n))},e.prototype.getNextMutationBatchAfterBatchId=function(t,n){var r=n+1,i=this.cs(r),s=i<0?0:i;return j.resolve(this._n.length>s?this._n[s]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return j.resolve(this._n.length===0?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(t){return j.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,i=new wt(n,0),s=new wt(n,Number.POSITIVE_INFINITY),a=[];return this.rs.forEachInRange([i,s],function(c){var l=r.os(c.ns);a.push(l)}),j.resolve(a)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,n){var r=this,i=new vt(_e);return n.forEach(function(s){var a=new wt(s,0),c=new wt(s,Number.POSITIVE_INFINITY);r.rs.forEachInRange([a,c],function(l){i=i.add(l.ns)})}),j.resolve(this.us(i))},e.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var r=n.path,i=r.length+1,s=r;J.isDocumentKey(s)||(s=s.child(""));var a=new wt(new J(s),0),c=new vt(_e);return this.rs.forEachWhile(function(l){var h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(l.ns)),!0)},a),j.resolve(this.us(c))},e.prototype.us=function(t){var n=this,r=[];return t.forEach(function(i){var s=n.os(i);s!==null&&r.push(s)}),r},e.prototype.removeMutationBatch=function(t,n){var r=this;re(this.hs(n.batchId,"removed")===0),this._n.shift();var i=this.rs;return j.forEach(n.mutations,function(s){var a=new wt(s.key,n.batchId);return i=i.delete(a),r.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(function(){r.rs=i})},e.prototype.Gt=function(t){},e.prototype.containsKey=function(t,n){var r=new wt(n,0),i=this.rs.firstAfterOrEqual(r);return j.resolve(n.isEqual(i&&i.key))},e.prototype.performConsistencyCheck=function(t){return this._n.length,j.resolve()},e.prototype.hs=function(t,n){return this.cs(t)},e.prototype.cs=function(t){return this._n.length===0?0:t-this._n[0].batchId},e.prototype.os=function(t){var n=this.cs(t);return n<0||n>=this._n.length?null:this._n[n]},e}(),PK=function(){function e(t,n){this.Ut=t,this.ls=n,this.docs=new Vt(J.comparator),this.size=0}return e.prototype.addEntry=function(t,n,r){var i=n.key,s=this.docs.get(i),a=s?s.size:0,c=this.ls(n);return this.docs=this.docs.insert(i,{document:n.clone(),size:c,readTime:r}),this.size+=c-a,this.Ut.addToCollectionParentIndex(t,i.path.popLast())},e.prototype.removeEntry=function(t){var n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)},e.prototype.getEntry=function(t,n){var r=this.docs.get(n);return j.resolve(r?r.document.clone():Rt.newInvalidDocument(n))},e.prototype.getEntries=function(t,n){var r=this,i=Qn();return n.forEach(function(s){var a=r.docs.get(s);i=i.insert(s,a?a.document.clone():Rt.newInvalidDocument(s))}),j.resolve(i)},e.prototype.getDocumentsMatchingQuery=function(t,n,r){for(var i=Qn(),s=new J(n.path.child("")),a=this.docs.getIteratorFrom(s);a.hasNext();){var c=a.getNext(),l=c.key,h=c.value,d=h.document,g=h.readTime;if(!n.path.isPrefixOf(l.path))break;g.compareTo(r)<=0||ul(n,d)&&(i=i.insert(d.key,d.clone()))}return j.resolve(i)},e.prototype.fs=function(t,n){return j.forEach(this.docs,function(r){return n(r)})},e.prototype.newChangeBuffer=function(t){return new DK(this)},e.prototype.getSize=function(t){return j.resolve(this.size)},e}(),DK=function(e){function t(n){var r=this;return(r=e.call(this)||this).Ie=n,r}return W(t,e),t.prototype.applyChanges=function(n){var r=this,i=[];return this.changes.forEach(function(s,a){a.document.isValidDocument()?i.push(r.Ie.addEntry(n,a.document,r.getReadTime(s))):r.Ie.removeEntry(s)}),j.waitFor(i)},t.prototype.getFromCache=function(n,r){return this.Ie.getEntry(n,r)},t.prototype.getAllFromCache=function(n,r){return this.Ie.getEntries(n,r)},t}(Jx),LK=function(){function e(t){this.persistence=t,this.ds=new za(function(n){return ol(n)},qp),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.ws=0,this._s=new Wb,this.targetCount=0,this.ys=nd.Jt()}return e.prototype.forEachTarget=function(t,n){return this.ds.forEach(function(r,i){return n(i)}),j.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(t){return j.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(t){return j.resolve(this.ws)},e.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),j.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ws&&(this.ws=n),j.resolve()},e.prototype.te=function(t){this.ds.set(t.target,t);var n=t.targetId;n>this.highestTargetId&&(this.ys=new nd(n),this.highestTargetId=n),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},e.prototype.addTargetData=function(t,n){return this.te(n),this.targetCount+=1,j.resolve()},e.prototype.updateTargetData=function(t,n){return this.te(n),j.resolve()},e.prototype.removeTargetData=function(t,n){return this.ds.delete(n.target),this._s.Zn(n.targetId),this.targetCount-=1,j.resolve()},e.prototype.removeTargets=function(t,n,r){var i=this,s=0,a=[];return this.ds.forEach(function(c,l){l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i.ds.delete(c),a.push(i.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),j.waitFor(a).next(function(){return s})},e.prototype.getTargetCount=function(t){return j.resolve(this.targetCount)},e.prototype.getTargetData=function(t,n){var r=this.ds.get(n)||null;return j.resolve(r)},e.prototype.addMatchingKeys=function(t,n,r){return this._s.Jn(n,r),j.resolve()},e.prototype.removeMatchingKeys=function(t,n,r){this._s.Xn(n,r);var i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(function(a){s.push(i.markPotentiallyOrphaned(t,a))}),j.waitFor(s)},e.prototype.removeMatchingKeysForTargetId=function(t,n){return this._s.Zn(n),j.resolve()},e.prototype.getMatchingKeysForTargetId=function(t,n){var r=this._s.es(n);return j.resolve(r)},e.prototype.containsKey=function(t,n){return j.resolve(this._s.containsKey(n))},e}(),MK=function(){function e(t,n){var r=this;this.gs={},this.Ne=new Rn(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new LK(this),this.Ut=new lK,this.Ue=function(i,s){return new PK(i,function(a){return r.referenceDelegate.ps(a)})}(this.Ut),this.R=new jx(n),this.Qe=new OK(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(t){var n=this.gs[t.toKey()];return n||(n=new xK(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=n),n},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Qe},e.prototype.runTransaction=function(t,n,r){var i=this;q("MemoryPersistence","Starting transaction:",t);var s=new FK(this.Ne.next());return this.referenceDelegate.Es(),r(s).next(function(a){return i.referenceDelegate.Ts(s).next(function(){return a})}).toPromise().then(function(a){return s.raiseOnCommittedEvent(),a})},e.prototype.Is=function(t,n){return j.or(Object.values(this.gs).map(function(r){return function(){return r.containsKey(t,n)}}))},e}(),FK=function(e){function t(n){var r=this;return(r=e.call(this)||this).currentSequenceNumber=n,r}return W(t,e),t}(Lx),UK=function(){function e(t){this.persistence=t,this.As=new Wb,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw $()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(t,n,r){return this.As.addReference(r,n),this.vs.delete(r.toString()),j.resolve()},e.prototype.removeReference=function(t,n,r){return this.As.removeReference(r,n),this.vs.add(r.toString()),j.resolve()},e.prototype.markPotentiallyOrphaned=function(t,n){return this.vs.add(n.toString()),j.resolve()},e.prototype.removeTarget=function(t,n){var r=this;this.As.Zn(n.targetId).forEach(function(s){return r.vs.add(s.toString())});var i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(function(s){s.forEach(function(a){return r.vs.add(a.toString())})}).next(function(){return i.removeTargetData(t,n)})},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(t){var n=this,r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.vs,function(i){var s=J.fromPath(i);return n.Ps(t,s).next(function(a){a||r.removeEntry(s)})}).next(function(){return n.Rs=null,r.apply(t)})},e.prototype.updateLimboDocument=function(t,n){var r=this;return this.Ps(t,n).next(function(i){i?r.vs.delete(n.toString()):r.vs.add(n.toString())})},e.prototype.ps=function(t){return 0},e.prototype.Ps=function(t,n){var r=this;return j.or([function(){return j.resolve(r.As.containsKey(n))},function(){return r.persistence.getTargetCache().containsKey(t,n)},function(){return r.persistence.Is(t,n)}])},e}(),En=function(){function e(t){this.uid=t}return e.prototype.isAuthenticated=function(){return this.uid!=null},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(t){return t.uid===this.uid},e}();En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid");fP=function(){function e(t,n,r,i){this.user=t,this.batchId=n,this.state=r,this.error=i}return e.Vs=function(t,n,r){var i,s=JSON.parse(r),a=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return a&&s.error&&(a=typeof s.error.message=="string"&&typeof s.error.code=="string")&&(i=new F(s.error.code,s.error.message)),a?new e(t,n,s.state,i):(ot("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),Kb=function(){function e(t,n,r){this.targetId=t,this.state=n,this.error=r}return e.Vs=function(t,n){var r,i=JSON.parse(n),s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string")&&(r=new F(i.error.code,i.error.message)),s?new e(t,i.state,r):(ot("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),hP=function(){function e(t,n){this.clientId=t,this.activeTargetIds=n}return e.Vs=function(t,n){for(var r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=$p(),a=0;i&&a<r.activeTargetIds.length;++a)i=UO(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new e(t,s):(ot("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),jK=function(){function e(t,n){this.clientId=t,this.onlineState=n}return e.Vs=function(t){var n=JSON.parse(t);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new e(n.clientId,n.onlineState):(ot("SharedClientState","Failed to parse online state: "+t),null)},e}(),Hb=function(){function e(){this.activeTargetIds=$p()}return e.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},e.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},e.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},e}(),zb=function(){function e(t,n,r,i,s){this.window=t,this.Se=n,this.persistenceKey=r,this.Ns=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Vt(_e),this.started=!1,this.$s=[];var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Os=cP(this.persistenceKey,this.Ns),this.Ms=function(c){return"firestore_sequence_number_"+c}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Hb),this.Ls=new RegExp("^firestore_clients_"+a+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+a+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+a+"_(\\d+)$"),this.Us=function(c){return"firestore_online_state_"+c}(this.persistenceKey),this.Qs=function(c){return"firestore_bundle_loaded_"+c}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(t){return!(!t||!t.localStorage)},e.prototype.start=function(){return A(this,void 0,void 0,function(){var t,n,r,i,s,a,c,l,h,d,g,m=this;return C(this,function(_){switch(_.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=_.sent(),n=0,r=t;n<r.length;n++)(i=r[n])!==this.Ns&&(s=this.getItem(cP(this.persistenceKey,i)))&&(a=hP.Vs(i,s))&&(this.ks=this.ks.insert(a.clientId,a));for(this.Ks(),(c=this.storage.getItem(this.Us))&&(l=this.js(c))&&this.Ws(l),h=0,d=this.$s;h<d.length;h++)g=d[h],this.Fs(g);return this.$s=[],this.window.addEventListener("pagehide",function(){return m.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},e.prototype.isActiveQueryTarget=function(t){var n=!1;return this.ks.forEach(function(r,i){i.activeTargetIds.has(t)&&(n=!0)}),n},e.prototype.addPendingMutation=function(t){this.zs(t,"pending")},e.prototype.updateMutationState=function(t,n,r){this.zs(t,n,r),this.Hs(t)},e.prototype.addLocalQueryTarget=function(t){var n="not-current";if(this.isActiveQueryTarget(t)){var r=this.storage.getItem(Gb(this.persistenceKey,t));if(r){var i=Kb.Vs(t,r);i&&(n=i.state)}}return this.Js.Ds(t),this.Ks(),n},e.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},e.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){this.removeItem(Gb(this.persistenceKey,t))},e.prototype.updateQueryState=function(t,n,r){this.Ys(t,n,r)},e.prototype.handleUserChange=function(t,n,r){var i=this;n.forEach(function(s){i.Hs(s)}),this.currentUser=t,r.forEach(function(s){i.addPendingMutation(s)})},e.prototype.setOnlineState=function(t){this.Xs(t)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(t){var n=this.storage.getItem(t);return q("SharedClientState","READ",t,n),n},e.prototype.setItem=function(t,n){q("SharedClientState","SET",t,n),this.storage.setItem(t,n)},e.prototype.removeItem=function(t){q("SharedClientState","REMOVE",t),this.storage.removeItem(t)},e.prototype.Fs=function(t){var n=this,r=t;if(r.storageArea===this.storage){if(q("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Os)return void ot("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return A(n,void 0,void 0,function(){var i,s,a,c,l,h;return C(this,function(d){if(this.started){if(r.key!==null){if(this.Ls.test(r.key)){if(r.newValue==null)return i=this.ti(r.key),[2,this.ei(i,null)];if(s=this.ni(r.key,r.newValue))return[2,this.ei(s.clientId,s)]}else if(this.Bs.test(r.key)){if(r.newValue!==null&&(a=this.si(r.key,r.newValue)))return[2,this.ii(a)]}else if(this.qs.test(r.key)){if(r.newValue!==null&&(c=this.ri(r.key,r.newValue)))return[2,this.oi(c)]}else if(r.key===this.Us){if(r.newValue!==null&&(l=this.js(r.newValue)))return[2,this.Ws(l)]}else if(r.key===this.Ms)(h=function(g){var m=Rn.o;if(g!=null)try{var _=JSON.parse(g);re(typeof _=="number"),m=_}catch(w){ot("SharedClientState","Failed to read sequence number from WebStorage",w)}return m}(r.newValue))!==Rn.o&&this.sequenceNumberHandler(h);else if(r.key===this.Qs)return[2,this.syncEngine.ci()]}}else this.$s.push(r);return[2]})})})}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Ks=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(t,n,r){var i=new fP(this.currentUser,t,n,r),s=lP(this.persistenceKey,this.currentUser,t);this.setItem(s,i.Ss())},e.prototype.Hs=function(t){var n=lP(this.persistenceKey,this.currentUser,t);this.removeItem(n)},e.prototype.Xs=function(t){var n={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(n))},e.prototype.Ys=function(t,n,r){var i=Gb(this.persistenceKey,t),s=new Kb(t,n,r);this.setItem(i,s.Ss())},e.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},e.prototype.ti=function(t){var n=this.Ls.exec(t);return n?n[1]:null},e.prototype.ni=function(t,n){var r=this.ti(t);return hP.Vs(r,n)},e.prototype.si=function(t,n){var r=this.Bs.exec(t),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return fP.Vs(new En(s),i,n)},e.prototype.ri=function(t,n){var r=this.qs.exec(t),i=Number(r[1]);return Kb.Vs(i,n)},e.prototype.js=function(t){return jK.Vs(t)},e.prototype.ii=function(t){return A(this,void 0,void 0,function(){return C(this,function(n){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(q("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},e.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},e.prototype.ei=function(t,n){var r=this,i=n?this.ks.insert(t,n):this.ks.remove(t),s=this.Gs(this.ks),a=this.Gs(i),c=[],l=[];return a.forEach(function(h){s.has(h)||c.push(h)}),s.forEach(function(h){a.has(h)||l.push(h)}),this.syncEngine.hi(c,l).then(function(){r.ks=i})},e.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},e.prototype.Gs=function(t){var n=$p();return t.forEach(function(r,i){n=n.unionWith(i.activeTargetIds)}),n},e}(),pP=function(){function e(){this.li=new Hb,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(t){},e.prototype.updateMutationState=function(t,n,r){},e.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},e.prototype.updateQueryState=function(t,n,r){this.fi[t]=n},e.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},e.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){delete this.fi[t]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.start=function(){return this.li=new Hb,Promise.resolve()},e.prototype.handleUserChange=function(t,n,r){},e.prototype.setOnlineState=function(t){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(t){},e.prototype.notifyBundleLoaded=function(){},e}(),VK=function(){function e(){}return e.prototype.di=function(t){},e.prototype.shutdown=function(){},e}(),dP=function(){function e(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return e.prototype.di=function(t){this.gi.push(t)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,n=this.gi;t<n.length;t++)(0,n[t])(0)},e.prototype.yi=function(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,n=this.gi;t<n.length;t++)(0,n[t])(1)},e.yt=function(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0},e}(),BK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},qK=function(){function e(t){this.Ei=t.Ei,this.Ti=t.Ti}return e.prototype.Ii=function(t){this.Ai=t},e.prototype.Ri=function(t){this.bi=t},e.prototype.onMessage=function(t){this.vi=t},e.prototype.close=function(){this.Ti()},e.prototype.send=function(t){this.Ei(t)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(t){this.bi(t)},e.prototype.Si=function(t){this.vi(t)},e}(),WK=function(e){function t(n){var r=this;return(r=e.call(this,n)||this).forceLongPolling=n.forceLongPolling,r.autoDetectLongPolling=n.autoDetectLongPolling,r.useFetchStreams=n.useFetchStreams,r}return W(t,e),t.prototype.ki=function(n,r,i,s){return new Promise(function(a,c){var l=new OO;l.listenOnce(kO.COMPLETE,function(){try{switch(l.getLastErrorCode()){case Fp.NO_ERROR:var d=l.getResponseJson();q("Connection","XHR received:",JSON.stringify(d)),a(d);break;case Fp.TIMEOUT:q("Connection",'RPC "'+n+'" timed out'),c(new F(N.DEADLINE_EXCEEDED,"Request time out"));break;case Fp.HTTP_ERROR:var g=l.getStatus();if(q("Connection",'RPC "'+n+'" failed with status:',g,"response text:",l.getResponseText()),g>0){var m=l.getResponseJson().error;if(m&&m.status&&m.message){var _=function(w){var E=w.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(E)>=0?E:N.UNKNOWN}(m.status);c(new F(_,m.message))}else c(new F(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new F(N.UNAVAILABLE,"Connection failed."));break;default:$()}}finally{q("Connection",'RPC "'+n+'" completed.')}});var h=JSON.stringify(s);l.send(r,"POST",h,i,15)})},t.prototype.Oi=function(n,r){var i=[this.Di,"/","google.firestore.v1.Firestore","/",n,"/channel"],s=CO(),a=AO(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new NO({})),this.Fi(c.initMessageHeaders,r),nc()||yh()||RC()||NC()||OC()||rc()||(c.httpHeadersOverwriteParam="$httpHeaders");var l=i.join("");q("Connection","Creating WebChannel: "+l,c);var h=s.createWebChannel(l,c),d=!1,g=!1,m=new qK({Ei:function(w){g?q("Connection","Not sending because WebChannel is closed:",w):(d||(q("Connection","Opening WebChannel transport."),h.open(),d=!0),q("Connection","WebChannel sending:",w),h.send(w))},Ti:function(){return h.close()}}),_=function(w,E,T){w.listen(E,function(S){try{T(S)}catch(R){setTimeout(function(){throw R},0)}})};return _(h,tl.EventType.OPEN,function(){g||q("Connection","WebChannel transport opened.")}),_(h,tl.EventType.CLOSE,function(){g||(g=!0,q("Connection","WebChannel transport closed"),m.Vi())}),_(h,tl.EventType.ERROR,function(w){g||(g=!0,Up("Connection","WebChannel transport errored:",w),m.Vi(new F(N.UNAVAILABLE,"The operation could not be completed")))}),_(h,tl.EventType.MESSAGE,function(w){var E;if(!g){var T=w.data[0];re(!!T);var S=T,R=S.error||((E=S[0])===null||E===void 0?void 0:E.error);if(R){q("Connection","WebChannel received error:",R);var O=R.status,U=function(P){var ue=at[P];if(ue!==void 0)return fx(ue)}(O),L=R.message;U===void 0&&(U=N.INTERNAL,L="Unknown error status: "+O+" with message "+R.message),g=!0,m.Vi(new F(U,L)),h.close()}else q("Connection","WebChannel received:",T),m.Si(T)}}),_(a,RO.STAT_EVENT,function(w){w.stat===vb.PROXY?q("Connection","Detected buffering proxy"):w.stat===vb.NOPROXY&&q("Connection","Detected no buffering proxy")}),setTimeout(function(){m.Pi()},0),m},t}(function(){function e(t){this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Di=n+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(t,n,r,i){var s=this.xi(t,n);q("RestConnection","Sending: ",s,r);var a={};return this.Fi(a,i),this.ki(t,s,a,r).then(function(c){return q("RestConnection","Received: ",c),c},function(c){throw Up("RestConnection",t+" failed with error: ",c,"url: ",s,"request:",r),c})},e.prototype.$i=function(t,n,r,i){return this.Ni(t,n,r,i)},e.prototype.Fi=function(t,n){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.8",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(var r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(t[r]=n.authHeaders[r])},e.prototype.xi=function(t,n){var r=BK[t];return this.Di+"/v1/"+n+":"+r},e}());Qb=function(){function e(t,n,r,i,s){r===void 0&&(r=1e3),i===void 0&&(i=1.5),s===void 0&&(s=6e4),this.Se=t,this.timerId=n,this.Mi=r,this.Li=i,this.Bi=s,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Ki=function(){this.qi=this.Bi},e.prototype.ji=function(t){var n=this;this.cancel();var r=Math.floor(this.qi+this.Wi()),i=Math.max(0,Date.now()-this.Qi),s=Math.max(0,r-i);s>0&&q("ExponentialBackoff","Backing off for "+s+" ms (base delay: "+this.qi+" ms, delay with jitter: "+r+" ms, last attempt: "+i+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,s,function(){return n.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){this.Ui!==null&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){this.Ui!==null&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),mP=function(){function e(t,n,r,i,s,a){this.Se=t,this.zi=r,this.Hi=i,this.Ji=s,this.listener=a,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Qb(t,n)}return e.prototype.tr=function(){return this.state===1||this.state===2||this.state===4},e.prototype.er=function(){return this.state===2},e.prototype.start=function(){this.state!==3?this.auth():this.nr()},e.prototype.stop=function(){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var t=this;this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},e.prototype.cr=function(t){this.ur(),this.stream.send(t)},e.prototype.rr=function(){return A(this,void 0,void 0,function(){return C(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(t,n){return A(this,void 0,void 0,function(){return C(this,function(r){switch(r.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,t!==3?this.Zi.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(ot(n.toString()),ot("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):n&&n.code===N.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(n)];case 1:return r.sent(),[2]}})})},e.prototype.ar=function(){},e.prototype.auth=function(){var t=this;this.state=1;var n=this.hr(this.Yi),r=this.Yi;this.Ji.getToken().then(function(i){t.Yi===r&&t.lr(i)},function(i){n(function(){var s=new F(N.UNKNOWN,"Fetching auth token failed: "+i.message);return t.dr(s)})})},e.prototype.lr=function(t){var n=this,r=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){r(function(){return n.state=2,n.listener.Ii()})}),this.stream.Ri(function(i){r(function(){return n.dr(i)})}),this.stream.onMessage(function(i){r(function(){return n.onMessage(i)})})},e.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return A(t,void 0,void 0,function(){return C(this,function(n){return this.state=0,this.start(),[2]})})})},e.prototype.dr=function(t){return q("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},e.prototype.hr=function(t){var n=this;return function(r){n.Se.enqueueAndForget(function(){return n.Yi===t?r():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),GK=function(e){function t(n,r,i,s,a){var c=this;return(c=e.call(this,n,"listen_stream_connection_backoff","listen_stream_idle",r,i,a)||this).R=s,c}return W(t,e),t.prototype.wr=function(n){return this.Hi.Oi("Listen",n)},t.prototype.onMessage=function(n){this.Zi.reset();var r=function(s,a){var c;if("targetChange"in a){a.targetChange;var l=function(T){return T==="NO_CHANGE"?0:T==="ADD"?1:T==="REMOVE"?2:T==="CURRENT"?3:T==="RESET"?4:$()}(a.targetChange.targetChangeType||"NO_CHANGE"),h=a.targetChange.targetIds||[],d=function(T,S){return T.I?(re(S===void 0||typeof S=="string"),on.fromBase64String(S||"")):(re(S===void 0||S instanceof Uint8Array),on.fromUint8Array(S||new Uint8Array))}(s,a.targetChange.resumeToken),g=(m=a.targetChange.cause)&&function(T){var S=T.code===void 0?N.UNKNOWN:fx(T.code);return new F(S,T.message||"")}(m);c=new vx(l,h,d,g||null)}else if("documentChange"in a){a.documentChange,(l=a.documentChange).document,l.document.name,l.document.updateTime,h=jr(s,l.document.name),d=Nt(l.document.updateTime);var m=new Nn({mapValue:{fields:l.document.fields}}),_=(g=Rt.newFoundDocument(h,d,m),l.targetIds||[]),w=l.removedTargetIds||[];c=new Jp(_,w,g.key,g)}else if("documentDelete"in a)a.documentDelete,(l=a.documentDelete).document,h=jr(s,l.document),d=l.readTime?Nt(l.readTime):de.min(),m=Rt.newNoDocument(h,d),g=l.removedTargetIds||[],c=new Jp([],g,m.key,m);else if("documentRemove"in a)a.documentRemove,(l=a.documentRemove).document,h=jr(s,l.document),d=l.removedTargetIds||[],c=new Jp([],d,h,null);else{if(!("filter"in a))return $();a.filter;var E=a.filter;E.targetId,l=E.count||0,h=new jG(l),d=E.targetId,c=new dx(d,h)}return c}(this.R,n),i=function(s){if(!("targetChange"in s))return de.min();var a=s.targetChange;return a.targetIds&&a.targetIds.length?de.min():a.readTime?Nt(a.readTime):de.min()}(n);return this.listener._r(r,i)},t.prototype.mr=function(n){var r={};r.database=dl(this.R),r.addTarget=function(s,a){var c,l=a.target;return(c=Wp(l)?{documents:Cx(s,l)}:{query:Ax(s,l)}).targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=_x(s,a.resumeToken):a.snapshotVersion.compareTo(de.min())>0&&(c.readTime=hl(s,a.snapshotVersion.toTimestamp())),c}(this.R,n);var i=function(s,a){var c=function(l,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return $()}}(0,a.purpose);return c==null?null:{"goog-listen-tags":c}}(this.R,n);i&&(r.labels=i),this.cr(r)},t.prototype.yr=function(n){var r={};r.database=dl(this.R),r.removeTarget=n,this.cr(r)},t}(mP),KK=function(e){function t(n,r,i,s,a){var c=this;return(c=e.call(this,n,"write_stream_connection_backoff","write_stream_idle",r,i,a)||this).R=s,c.gr=!1,c}return W(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(n){return this.Hi.Oi("Write",n)},t.prototype.onMessage=function(n){if(re(!!n.streamToken),this.lastStreamToken=n.streamToken,this.gr){this.Zi.reset();var r=function(s,a){return s&&s.length>0?(re(a!==void 0),s.map(function(c){return function(l,h){var d=l.updateTime?Nt(l.updateTime):Nt(h);return d.isEqual(de.min())&&(d=Nt(h)),new MG(d,l.transformResults||[])}(c,a)})):[]}(n.writeResults,n.commitTime),i=Nt(n.commitTime);return this.listener.Tr(i,r)}return re(!n.writeResults||n.writeResults.length===0),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var n={};n.database=dl(this.R),this.cr(n)},t.prototype.Er=function(n){var r=this,i={streamToken:this.lastStreamToken,writes:n.map(function(s){return Zp(r.R,s)})};this.cr(i)},t}(mP),HK=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).credentials=n,s.Hi=r,s.R=i,s.Rr=!1,s}return W(t,e),t.prototype.br=function(){if(this.Rr)throw new F(N.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(n,r,i){var s=this;return this.br(),this.credentials.getToken().then(function(a){return s.Hi.Ni(n,r,i,a)}).catch(function(a){throw a.name==="FirebaseError"?(a.code===N.UNAUTHENTICATED&&s.credentials.invalidateToken(),a):new F(N.UNKNOWN,a.toString())})},t.prototype.$i=function(n,r,i){var s=this;return this.br(),this.credentials.getToken().then(function(a){return s.Hi.$i(n,r,i,a)}).catch(function(a){throw a.name==="FirebaseError"?(a.code===N.UNAUTHENTICATED&&s.credentials.invalidateToken(),a):new F(N.UNKNOWN,a.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),zK=function(){function e(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var t=this;this.vr===0&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},e.prototype.Nr=function(t){this.state==="Online"?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},e.prototype.set=function(t){this.Fr(),this.vr=0,t==="Online"&&(this.Vr=!1),this.Dr(t)},e.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},e.prototype.Cr=function(t){var n="Could not reach Cloud Firestore backend. "+t+`
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(ot(n),this.Vr=!1):q("OnlineStateTracker",n)},e.prototype.Fr=function(){this.Pr!==null&&(this.Pr.cancel(),this.Pr=null)},e}(),QK=function(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(a){n.enqueueAndForget(function(){return A(s,void 0,void 0,function(){return C(this,function(c){switch(c.label){case 0:return Ji(this)?(q("RemoteStore","Restarting streams for network reachability change."),[4,function(l){return A(this,void 0,void 0,function(){var h;return C(this,function(d){switch(d.label){case 0:return(h=G(l)).Or.add(4),[4,Xa(h)];case 1:return d.sent(),h.Br.set("Unknown"),h.Or.delete(4),[4,yl(h)];case 2:return d.sent(),[2]}})})}(this)]):[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})})}),this.Br=new zK(n,r)};nH=function(){function e(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(a){})}return e.createAndSchedule=function(t,n,r,i,s){var a=new e(t,n,Date.now()+r,i,s);return a.start(r),a},e.prototype.start=function(t){var n=this;this.timerHandle=setTimeout(function(){return n.handleDelayElapsed()},t)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(N.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},e.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return t.timerHandle!==null?(t.clearTimeout(),t.op().then(function(n){return t.deferred.resolve(n)})):Promise.resolve()})},e.prototype.clearTimeout=function(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();EP=function(){function e(t){this.comparator=t?function(n,r){return t(n,r)||J.comparator(n.key,r.key)}:function(n,r){return J.comparator(n.key,r.key)},this.keyedMap=Nb(),this.sortedSet=new Vt(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(t){return this.keyedMap.get(t)!=null},e.prototype.get=function(t){return this.keyedMap.get(t)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(t){var n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(n,r){return t(n),!1})},e.prototype.add=function(t){var n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))},e.prototype.delete=function(t){var n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0},e.prototype.toString=function(){var t=[];return this.forEach(function(n){t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),IP=function(){function e(){this.Kr=new Vt(J.comparator)}return e.prototype.track=function(t){var n=t.doc.key,r=this.Kr.get(n);r?t.type!==0&&r.type===3?this.Kr=this.Kr.insert(n,t):t.type===3&&r.type!==1?this.Kr=this.Kr.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.Kr=this.Kr.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.Kr=this.Kr.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.Kr=this.Kr.remove(n):t.type===1&&r.type===2?this.Kr=this.Kr.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.Kr=this.Kr.insert(n,{type:2,doc:t.doc}):$():this.Kr=this.Kr.insert(n,t)},e.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(n,r){t.push(r)}),t},e}(),fd=function(){function e(t,n,r,i,s,a,c,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l}return e.fromInitialDocuments=function(t,n,r,i){var s=[];return n.forEach(function(a){s.push({type:0,doc:a})}),new e(t,n,EP.emptySet(n),s,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&al(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0},e}(),rH=function(){this.Wr=void 0,this.listeners=[]},iH=function(){this.queries=new za(function(e){return YO(e)},al),this.onlineState="Unknown",this.Gr=new Set};nw=function(){function e(t,n,r){this.query=t,this.Jr=n,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}return e.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var n=[],r=0,i=t.docChanges;r<i.length;r++){var s=i[r];s.type!==3&&n.push(s)}t=new fd(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var a=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),a=!0):this.eo(t,this.onlineState)&&(this.no(t),a=!0),this.Xr=t,a},e.prototype.onError=function(t){this.Jr.error(t)},e.prototype.zr=function(t){this.onlineState=t;var n=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),n=!0),n},e.prototype.eo=function(t,n){if(!t.fromCache)return!0;var r=n!=="Offline";return!(this.options.so&&r||t.docs.isEmpty()&&n!=="Offline")},e.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var n=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0},e.prototype.no=function(t){t=fd.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},e}(),aH=function(){function e(t,n){this.payload=t,this.byteLength=n}return e.prototype.io=function(){return"metadata"in this.payload},e}(),TP=function(){function e(t){this.R=t}return e.prototype.qn=function(t){return jr(this.R,t)},e.prototype.Un=function(t){return t.metadata.exists?Tx(this.R,t.document,!1):Rt.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},e.prototype.Qn=function(t){return Nt(t)},e}(),ZZ=function(){function e(t,n,r){this.ro=t,this.localStore=n,this.R=r,this.queries=[],this.documents=[],this.progress=uH(t)}return e.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var n=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++n):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++n),n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null},e.prototype.co=function(t){for(var n=new Map,r=new TP(this.R),i=0,s=t;i<s.length;i++){var a=s[i];if(a.metadata.queries)for(var c=r.qn(a.metadata.name),l=0,h=a.metadata.queries;l<h.length;l++){var d=h[l],g=(n.get(d)||Ne()).add(c);n.set(d,g)}}return n},e.prototype.complete=function(){return A(this,void 0,void 0,function(){var t,n,r,i,s;return C(this,function(a){switch(a.label){case 0:return[4,RK(this.localStore,new TP(this.R),this.documents,this.ro.id)];case 1:t=a.sent(),n=this.co(this.documents),r=0,i=this.queries,a.label=2;case 2:return r<i.length?(s=i[r],[4,NK(this.localStore,s,n.get(s.name))]):[3,5];case 3:a.sent(),a.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new EK(Object.assign({},this.progress),t))]}})})},e}();SP=function(e){this.key=e},CP=function(e){this.key=e},AP=function(){function e(t,n){this.query=t,this.uo=n,this.ao=null,this.current=!1,this.ho=Ne(),this.mutatedKeys=Ne(),this.lo=XO(t),this.fo=new EP(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(t,n){var r=this,i=n?n.mo:new IP,s=n?n.fo:this.fo,a=n?n.mutatedKeys:this.mutatedKeys,c=s,l=!1,h=Kp(this.query)&&s.size===this.query.limit?s.last():null,d=Hp(this.query)&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(function(m,_){var w=s.get(m),E=ul(r.query,_)?_:null,T=!!w&&r.mutatedKeys.has(w.key),S=!!E&&(E.hasLocalMutations||r.mutatedKeys.has(E.key)&&E.hasCommittedMutations),R=!1;w&&E?w.data.isEqual(E.data)?T!==S&&(i.track({type:3,doc:E}),R=!0):r.yo(w,E)||(i.track({type:2,doc:E}),R=!0,(h&&r.lo(E,h)>0||d&&r.lo(E,d)<0)&&(l=!0)):!w&&E?(i.track({type:0,doc:E}),R=!0):w&&!E&&(i.track({type:1,doc:w}),R=!0,(h||d)&&(l=!0)),R&&(E?(c=c.add(E),a=S?a.add(m):a.delete(m)):(c=c.delete(m),a=a.delete(m)))}),Kp(this.query)||Hp(this.query))for(;c.size>this.query.limit;){var g=Kp(this.query)?c.last():c.first();c=c.delete(g.key),a=a.delete(g.key),i.track({type:1,doc:g})}return{fo:c,mo:i,Nn:l,mutatedKeys:a}},e.prototype.yo=function(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations},e.prototype.applyChanges=function(t,n,r){var i=this,s=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var a=t.mo.jr();a.sort(function(d,g){return function(m,_){var w=function(E){switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $()}};return w(m)-w(_)}(d.type,g.type)||i.lo(d.doc,g.doc)}),this.po(r);var c=n?this.Eo():[],l=this.ho.size===0&&this.current?1:0,h=l!==this.ao;return this.ao=l,a.length!==0||h?{snapshot:new fd(this.query,t.fo,s,a,t.mutatedKeys,l===0,h,!1),To:c}:{To:c}},e.prototype.zr=function(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new IP,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},e.prototype.po=function(t){var n=this;t&&(t.addedDocuments.forEach(function(r){return n.uo=n.uo.add(r)}),t.modifiedDocuments.forEach(function(r){}),t.removedDocuments.forEach(function(r){return n.uo=n.uo.delete(r)}),this.current=t.current)},e.prototype.Eo=function(){var t=this;if(!this.current)return[];var n=this.ho;this.ho=Ne(),this.fo.forEach(function(i){t.Io(i.key)&&(t.ho=t.ho.add(i.key))});var r=[];return n.forEach(function(i){t.ho.has(i)||r.push(new CP(i))}),this.ho.forEach(function(i){n.has(i)||r.push(new SP(i))}),r},e.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Ne();var n=this._o(t.documents);return this.applyChanges(n,!0)},e.prototype.Ro=function(){return fd.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.ao===0)},e}(),cH=function(e,t,n){this.query=e,this.targetId=t,this.view=n},lH=function(e){this.key=e,this.bo=!1},fH=function(){function e(t,n,r,i,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.vo={},this.Po=new za(function(c){return YO(c)},al),this.Vo=new Map,this.So=new Set,this.Do=new Vt(J.comparator),this.Co=new Map,this.No=new Wb,this.xo={},this.Fo=new Map,this.ko=nd.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return this.$o===!0},enumerable:!1,configurable:!0}),e}();PP=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(t){return A(this,void 0,void 0,function(){return C(this,function(n){switch(n.label){case 0:return this.R=ud(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return n.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},e.prototype.Uo=function(t){return null},e.prototype.Qo=function(t){return rP(this.persistence,new nP,t.initialUser,this.R)},e.prototype.qo=function(t){return new MK(UK.bs,this.R)},e.prototype.Bo=function(t){return new pP},e.prototype.terminate=function(){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},e}(),DP=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).Ko=n,s.cacheSizeBytes=r,s.forceOwnership=i,s.synchronizeTabs=!1,s}return W(t,e),t.prototype.initialize=function(n){return A(this,void 0,void 0,function(){return C(this,function(r){switch(r.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return r.sent(),[4,kK(this.localStore)];case 2:return r.sent(),[4,this.Ko.initialize(this,n)];case 3:return r.sent(),[4,cw(this.Ko.syncEngine)];case 4:return r.sent(),[4,$a(this.Ko.remoteStore)];case 5:return r.sent(),[2]}})})},t.prototype.Qo=function(n){return rP(this.persistence,new nP,n.initialUser,this.R)},t.prototype.Uo=function(n){var r=this.persistence.referenceDelegate.garbageCollector;return new vK(r,n.asyncQueue)},t.prototype.qo=function(n){var r=qb(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Br.withCacheSize(this.cacheSizeBytes):Br.DEFAULT;return new wK(this.synchronizeTabs,r,n.clientId,i,n.asyncQueue,vP(),ad(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(n){return new pP},t}(PP),RH=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r,!1)||this).Ko=n,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return W(t,e),t.prototype.initialize=function(n){return A(this,void 0,void 0,function(){var r,i=this;return C(this,function(s){switch(s.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return s.sent(),r=this.Ko.syncEngine,this.sharedClientState instanceof zb?(this.sharedClientState.syncEngine={ui:TH.bind(null,r),ai:AH.bind(null,r),hi:kH.bind(null,r),fn:CH.bind(null,r),ci:IH.bind(null,r)},[4,this.sharedClientState.start()]):[3,3];case 2:s.sent(),s.label=3;case 3:return[4,this.persistence.He(function(a){return A(i,void 0,void 0,function(){return C(this,function(c){switch(c.label){case 0:return[4,SH(this.Ko.syncEngine,a)];case 1:return c.sent(),this.gcScheduler&&(a&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):a||this.gcScheduler.stop()),[2]}})})})];case 4:return s.sent(),[2]}})})},t.prototype.Bo=function(n){var r=vP();if(!zb.yt(r))throw new F(N.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var i=qb(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new zb(r,n.asyncQueue,i,n.clientId,n.initialUser)},t}(DP),lw=function(){function e(){}return e.prototype.initialize=function(t,n){return A(this,void 0,void 0,function(){var r=this;return C(this,function(i){switch(i.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(s){return RP(r.syncEngine,s,1)},this.remoteStore.remoteSyncer.handleCredentialChange=bH.bind(null,this.syncEngine),[4,Jb(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.createEventManager=function(t){return new iH},e.prototype.createDatastore=function(t){var n,r=ud(t.databaseInfo.databaseId),i=(n=t.databaseInfo,new WK(n));return function(s,a,c){return new HK(s,a,c)}(t.credentials,i,r)},e.prototype.createRemoteStore=function(t){var n,r,i,s,a,c=this;return n=this.localStore,r=this.datastore,i=t.asyncQueue,s=function(l){return RP(c.syncEngine,l,0)},a=dP.yt()?new dP:new VK,new QK(n,r,i,s,a)},e.prototype.createSyncEngine=function(t,n){return function(r,i,s,a,c,l,h){var d=new fH(r,i,s,a,c,l);return h&&(d.$o=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)},e.prototype.terminate=function(){return function(t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return n=G(t),q("RemoteStore","RemoteStore shutting down."),n.Or.add(5),[4,Xa(n)];case 1:return r.sent(),n.Lr.shutdown(),n.Br.set("Unknown"),[2]}})})}(this.remoteStore)},e}();hd=function(){function e(t){this.observer=t,this.muted=!1}return e.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},e.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(t,n){var r=this;this.muted||setTimeout(function(){r.muted||t(n)},0)},e}(),eee=function(){function e(t,n){var r=this;this.Go=t,this.R=n,this.metadata=new sn,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(i){i&&i.io()?r.metadata.resolve(i.payload.metadata):r.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             `+JSON.stringify(i==null?void 0:i.payload)))},function(i){return r.metadata.reject(i)})}return e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return A(this,void 0,void 0,function(){return C(this,function(t){return[2,this.metadata.promise]})})},e.prototype.Lo=function(){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},e.prototype.Ho=function(){return A(this,void 0,void 0,function(){var t,n,r,i;return C(this,function(s){switch(s.label){case 0:return[4,this.Jo()];case 1:return(t=s.sent())===null?[2,null]:(n=this.zo.decode(t),r=Number(n),isNaN(r)&&this.Yo("length string ("+n+") is not valid number"),[4,this.Xo(r)]);case 2:return i=s.sent(),[2,new aH(JSON.parse(i),t.length+r)]}})})},e.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},e.prototype.Jo=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(r.sent())return[3,3];r.label=2;case 2:return[3,0];case 3:return this.buffer.length===0?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),n)])}})})},e.prototype.Xo=function(t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:r.sent()&&this.Yo("Reached the end of bundle when more is expected."),r.label=2;case 2:return[3,0];case 3:return n=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),n)]}})})},e.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},e.prototype.tc=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return[4,this.Go.read()];case 1:return(t=r.sent()).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),[2,t.done]}})})},e}(),NH=function(){function e(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(t){return A(this,void 0,void 0,function(){var n,r=this;return C(this,function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new F(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return A(this,void 0,void 0,function(){var c,l,h,d,g,m;return C(this,function(_){switch(_.label){case 0:return c=G(s),l=dl(c.R)+"/documents",h={documents:a.map(function(w){return pl(c.R,w)})},[4,c.$i("BatchGetDocuments",l,h)];case 1:return d=_.sent(),g=new Map,d.forEach(function(w){var E=function(T,S){return"found"in S?function(R,O){re(!!O.found),O.found.name,O.found.updateTime;var U=jr(R,O.found.name),L=Nt(O.found.updateTime),P=new Nn({mapValue:{fields:O.found.fields}});return Rt.newFoundDocument(U,L,P)}(T,S):"missing"in S?function(R,O){re(!!O.missing),re(!!O.readTime);var U=jr(R,O.missing),L=Nt(O.readTime);return Rt.newNoDocument(U,L)}(T,S):$()}(c.R,w);g.set(E.key.toString(),E)}),m=[],[2,(a.forEach(function(w){var E=g.get(w.toString());re(!!E),m.push(E)}),m)]}})})}(this.datastore,t)];case 1:return[2,((n=i.sent()).forEach(function(s){return r.recordVersion(s)}),n)]}})})},e.prototype.set=function(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.update=function(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())},e.prototype.delete=function(t){this.write(new fl(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.commit=function(){return A(this,void 0,void 0,function(){var t,n=this;return C(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(i){t.delete(i.key.toString())}),t.forEach(function(i,s){var a=J.fromPath(s);n.mutations.push(new Rb(a,n.precondition(a)))}),[4,function(i,s){return A(this,void 0,void 0,function(){var a,c,l;return C(this,function(h){switch(h.label){case 0:return a=G(i),c=dl(a.R)+"/documents",l={writes:s.map(function(d){return Zp(a.R,d)})},[4,a.Ni("Commit",c,l)];case 1:return h.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return r.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(t){var n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw $();n=de.min()}var r=this.readVersions.get(t.key.toString());if(r){if(!n.isEqual(r))throw new F(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)},e.prototype.precondition=function(t){var n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?jt.updateTime(n):jt.none()},e.prototype.preconditionForUpdate=function(t){var n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(de.min()))throw new F(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jt.updateTime(n)}return jt.exists(!0)},e.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},e.prototype.ensureCommitNotCalled=function(){},e}(),OH=function(){function e(t,n,r,i){this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.ec=5,this.Zi=new Qb(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.nc()},e.prototype.nc=function(){var t=this;this.Zi.ji(function(){return A(t,void 0,void 0,function(){var n,r,i=this;return C(this,function(s){return n=new NH(this.datastore),(r=this.sc(n))&&r.then(function(a){i.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){i.deferred.resolve(a)}).catch(function(c){i.ic(c)})})}).catch(function(a){i.ic(a)}),[2]})})})},e.prototype.sc=function(t){try{var n=this.updateFunction(t);return!ns(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}},e.prototype.ic=function(t){var n=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return n.nc(),Promise.resolve()})):this.deferred.reject(t)},e.prototype.rc=function(t){if(t.name==="FirebaseError"){var n=t.code;return n==="aborted"||n==="failed-precondition"||!lx(n)}return!1},e}(),xH=function(){function e(t,n,r){var i=this;this.credentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=En.UNAUTHENTICATED,this.clientId=xO.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(n,function(s){return A(i,void 0,void 0,function(){return C(this,function(a){switch(a.label){case 0:return q("FirestoreClient","Received user=",s.uid),[4,this.credentialListener(s)];case 1:return a.sent(),this.user=s,[2]}})})})}return e.prototype.getConfiguration=function(){return A(this,void 0,void 0,function(){return C(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},e.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new F(N.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var n=new sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return A(t,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:s.sent(),s.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:s.sent(),s.label=4;case 4:return this.credentials.removeChangeListener(),n.resolve(),[3,6];case 5:return r=s.sent(),i=Za(r,"Failed to shutdown persistence"),n.reject(i),[3,6];case 6:return[2]}})})}),n.promise},e}();PH=function(e,t,n,r,i,s,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.useFetchStreams=c},dd=function(){function e(t,n){this.projectId=t,this.database=n||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database==="(default)"},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),WP=new Map,GP=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},KP=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,n){this.changeListener=n,t.enqueueRetryable(function(){return n(En.UNAUTHENTICATED)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),DH=function(){function e(t){this.token=t,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,n){var r=this;this.changeListener=n,t.enqueueRetryable(function(){return n(r.token.user)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),LH=function(){function e(t){var n=this;this.currentUser=En.UNAUTHENTICATED,this.oc=new sn,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){n.cc++,n.currentUser=n.ac(),n.oc.resolve(),n.changeListener&&n.asyncQueue.enqueueRetryable(function(){return n.changeListener(n.currentUser)})};var r=function(i){q("FirebaseCredentialsProvider","Auth detected"),n.auth=i,n.auth.addAuthTokenListener(n.uc)};t.onInit(function(i){return r(i)}),setTimeout(function(){if(!n.auth){var i=t.getImmediate({optional:!0});i?r(i):(q("FirebaseCredentialsProvider","Auth not yet detected"),n.oc.resolve())}},0)}return e.prototype.getToken=function(){var t=this,n=this.cc,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(i){return t.cc!==n?(q("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):i?(re(typeof i.accessToken=="string"),new GP(i.accessToken,t.currentUser)):null}):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(t,n){var r=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return A(r,void 0,void 0,function(){return C(this,function(i){switch(i.label){case 0:return[4,this.oc.promise];case 1:return i.sent(),[4,n(this.currentUser)];case 2:return i.sent(),this.changeListener=n,[2]}})})})},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return re(t===null||typeof t=="string"),new En(t)},e}(),MH=function(){function e(t,n,r){this.hc=t,this.lc=n,this.fc=r,this.type="FirstParty",this.user=En.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},n=this.hc.auth.getAuthHeaderValueForFirstParty([]);return n&&(t.Authorization=n),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),e}(),FH=function(){function e(t,n,r){this.hc=t,this.lc=n,this.fc=r}return e.prototype.getToken=function(){return Promise.resolve(new MH(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(t,n){t.enqueueRetryable(function(){return n(En.FIRST_PARTY)})},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();XP=function(){function e(t){var n;if(t.host===void 0){if(t.ssl!==void 0)throw new F(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new F(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,HP("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},e}(),bl=function(){function e(t,n){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new XP({}),this._settingsFrozen=!1,t instanceof dd?(this._databaseId=t,this._credentials=new KP):(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new F(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dd(r.options.projectId)}(t),this._credentials=new LH(n))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new F(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return this._terminateTask!==void 0},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(t){if(this._settingsFrozen)throw new F(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new XP(t),t.credentials!==void 0&&(this._credentials=function(n){if(!n)return new KP;switch(n.type){case"gapi":var r=n.client;return re(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new FH(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new F(N.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return t=this,(n=WP.get(t))&&(q("ComponentProvider","Removing Datastore"),WP.delete(t),n.terminate()),Promise.resolve();var t,n},e}(),Qe=function(){function e(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new to(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),Dn=function(){function e(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),to=function(e){function t(n,r,i){var s=this;return(s=e.call(this,n,r,Pa(i))||this)._path=i,s.type="collection",s}return W(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this._path.popLast();return n.isEmpty()?null:new Qe(this.firestore,null,new J(n))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(n){return new t(this.firestore,n,this._path)},t}(Dn);UH=function(){function e(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new Qb(this,"async_queue_retry"),this.Tc=function(){var r=ad();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),t.Zi.Gi()};var n=ad();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(t){this.enqueue(t)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},e.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=ad();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Tc)}},e.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise(function(n){}):this.Ac(t)},e.prototype.enqueueRetryable=function(t){var n=this;this.enqueueAndForget(function(){return n.wc.push(t),n.Rc()})},e.prototype.Rc=function(){return A(this,void 0,void 0,function(){var t,n=this;return C(this,function(r){switch(r.label){case 0:if(this.wc.length===0)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return r.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!as(t=r.sent()))throw t;return q("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return n.Rc()}),r.label=5;case 5:return[2]}})})},e.prototype.Ac=function(t){var n=this,r=this.dc.then(function(){return n.gc=!0,t().catch(function(i){throw n.yc=i,n.gc=!1,ot("INTERNAL UNHANDLED ERROR: ",function(s){var a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i)),i}).then(function(i){return n.gc=!1,i})});return this.dc=r,r},e.prototype.enqueueAfterDelay=function(t,n,r){var i=this;this.Ic(),this.Ec.indexOf(t)>-1&&(n=0);var s=nH.createAndSchedule(this,t,n,r,function(a){return i.bc(a)});return this.mc.push(s),s},e.prototype.Ic=function(){this.yc&&$()},e.prototype.verifyOperationInProgress=function(){},e.prototype.vc=function(){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return[4,t=this.dc];case 1:n.sent(),n.label=2;case 2:if(t!==this.dc)return[3,0];n.label=3;case 3:return[2]}})})},e.prototype.Pc=function(t){for(var n=0,r=this.mc;n<r.length;n++)if(r[n].timerId===t)return!0;return!1},e.prototype.Vc=function(t){var n=this;return this.vc().then(function(){n.mc.sort(function(a,c){return a.targetTimeMs-c.targetTimeMs});for(var r=0,i=n.mc;r<i.length;r++){var s=i[r];if(s.skipDelay(),t!=="all"&&s.timerId===t)break}return n.vc()})},e.prototype.Sc=function(t){this.Ec.push(t)},e.prototype.bc=function(t){var n=this.mc.indexOf(t);this.mc.splice(n,1)},e}();tee=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new sn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(t,n,r){this._progressObserver={next:t,error:n,complete:r}},e.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},e.prototype.then=function(t,n){return this._taskCompletionResolver.promise.then(t,n)},e.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},e.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},e.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},e}(),e1=-1,ut=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).type="firestore",i._queue=new UH,i._persistenceKey="name"in n?n.name:"[DEFAULT]",i}return W(t,e),t.prototype._terminate=function(){return this._firestoreClient||t1(this),this._firestoreClient.terminate()},t}(bl);qr=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0;r<t.length;++r)if(t[r].length===0)throw new F(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _r(t)}return e.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},e}(),ls=function(){function e(t){this._byteString=t}return e.fromBase64String=function(t){try{return new e(on.fromBase64String(t))}catch(n){throw new F(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},e.fromUint8Array=function(t){return new e(on.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},e}(),fs=function(e){this._methodName=e},wl=function(){function e(t,n){if(!isFinite(t)||t<-90||t>90)throw new F(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new F(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(t){return _e(this._lat,t._lat)||_e(this._long,t._long)},e}(),jH=/^__.*__$/,VH=function(){function e(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}return e.prototype.toMutation=function(t,n){return this.fieldMask!==null?new Hi(t,this.data,this.fieldMask,n,this.fieldTransforms):new ll(t,this.data,n,this.fieldTransforms)},e}(),i1=function(){function e(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}return e.prototype.toMutation=function(t,n){return new Hi(t,this.data,this.fieldMask,n,this.fieldTransforms)},e}();s1=function(){function e(t,n,r,i,s,a){this.settings=t,this.databaseId=n,this.R=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Dc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),e.prototype.Nc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.xc=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Nc({path:r,Fc:!1});return i.kc(t),i},e.prototype.$c=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Nc({path:r,Fc:!1});return i.Dc(),i},e.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},e.prototype.Mc=function(t){return yd(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},e.prototype.contains=function(t){return this.fieldMask.find(function(n){return t.isPrefixOf(n)})!==void 0||this.fieldTransforms.find(function(n){return t.isPrefixOf(n.field)})!==void 0},e.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},e.prototype.kc=function(t){if(t.length===0)throw this.Mc("Document fields must not be empty");if(o1(this.Cc)&&jH.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},e}(),BH=function(){function e(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.R=r||ud(t)}return e.prototype.qc=function(t,n,r,i){return i===void 0&&(i=!1),new s1({Cc:t,methodName:n,Bc:r,path:_r.emptyPath(),Fc:!1,Lc:i},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();dw=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return W(t,e),t.prototype._toFieldTransform=function(n){if(n.Cc!==2)throw n.Cc===1?n.Mc(this._methodName+"() can only appear at the top level of your update data"):n.Mc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return n.fieldMask.push(n.path),null},t.prototype.isEqual=function(n){return n instanceof t},t}(fs);qH=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return W(t,e),t.prototype._toFieldTransform=function(n){return new cl(n.path,new La)},t.prototype.isEqual=function(n){return n instanceof t},t}(fs),WH=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Uc=r,i}return W(t,e),t.prototype._toFieldTransform=function(n){var r=a1(this,n,!0),i=this.Uc.map(function(a){return ps(a,r)}),s=new is(i);return new cl(n.path,s)},t.prototype.isEqual=function(n){return this===n},t}(fs),GH=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Uc=r,i}return W(t,e),t.prototype._toFieldTransform=function(n){var r=a1(this,n,!0),i=this.Uc.map(function(a){return ps(a,r)}),s=new os(i);return new cl(n.path,s)},t.prototype.isEqual=function(n){return this===n},t}(fs),KH=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Qc=r,i}return W(t,e),t.prototype._toFieldTransform=function(n){var r=new Ma(n.R,ZO(n.R,this.Qc));return new cl(n.path,r)},t.prototype.isEqual=function(n){return this===n},t}(fs);HH=new RegExp("[~\\*/\\[\\]]");El=function(){function e(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Qe(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return this._document!==null},e.prototype.data=function(){if(this._document){if(this._converter){var t=new zH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(t){if(this._document){var n=this._document.data.field(_d("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}},e}(),zH=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return W(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(El);ds=function(){function e(t,n){this.hasPendingWrites=t,this.fromCache=n}return e.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},e}(),li=function(e){function t(n,r,i,s,a,c){var l=this;return(l=e.call(this,n,r,i,s,c)||this)._firestore=n,l._firestoreImpl=n,l.metadata=a,l}return W(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(n){if(n===void 0&&(n={}),this._document){if(this._converter){var r=new Il(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}},t.prototype.get=function(n,r){if(r===void 0&&(r={}),this._document){var i=this._document.data.field(_d("DocumentSnapshot.get",n));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}},t}(El),Il=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return W(t,e),t.prototype.data=function(n){return n===void 0&&(n={}),e.prototype.data.call(this,n)},t}(li),no=function(){function e(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new ds(i.hasPendingWrites,i.fromCache),this.query=r}return Object.defineProperty(e.prototype,"docs",{get:function(){var t=[];return this.forEach(function(n){return t.push(n)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.size===0},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t,n){var r=this;this._snapshot.docs.forEach(function(i){t.call(n,new Il(r._firestore,r._userDataWriter,i.key,i,new ds(r._snapshot.mutatedKeys.has(i.key),r._snapshot.fromCache),r.query.converter))})},e.prototype.docChanges=function(t){t===void 0&&(t={});var n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){var s=0;return r._snapshot.docChanges.map(function(c){var l=new Il(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ds(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}var a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(function(c){return i||c.type!==3}).map(function(c){var l=new Il(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ds(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),h=-1,d=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(d=(a=a.add(c.doc)).indexOf(c.doc.key)),{type:QH(c.type),doc:l,oldIndex:h,newIndex:d}})}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges},e}();Tl=function(){};YH=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).Kc=n,s.jc=r,s.Wc=i,s.type="where",s}return W(t,e),t.prototype._apply=function(n){var r=hs(n.firestore),i=function(s,a,c,l,h,d,g){var m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new F(N.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+d+"' queries on FieldPath.documentId().");if(d==="in"||d==="not-in"){_1(g,d);for(var _=[],w=0,E=g;w<E.length;w++){var T=E[w];_.push(y1(l,s,T))}m={arrayValue:{values:_}}}else m=y1(l,s,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||_1(g,d),m=u1(c,"where",g,d==="in"||d==="not-in");var S=On.create(h,d,m);return function(R,O){if(O.g()){var U=Sb(R);if(U!==null&&!U.isEqual(O.field))throw new F(N.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+U.toString()+"' and '"+O.field.toString()+"'");var L=Tb(R);L!==null&&b1(R,O.field,L)}var P=function(ue,Je){for(var X=0,Jn=ue.filters;X<Jn.length;X++){var k=Jn[X];if(Je.indexOf(k.op)>=0)return k.op}return null}(R,function(ue){switch(ue){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(O.op));if(P!==null)throw P===O.op?new F(N.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+O.op.toString()+"' filter."):new F(N.INVALID_ARGUMENT,"Invalid query. You cannot use '"+O.op.toString()+"' filters with '"+P.toString()+"' filters.")}(s,S),S}(n._query,0,r,n.firestore._databaseId,this.Kc,this.jc,this.Wc);return new Dn(n.firestore,n.converter,function(s,a){var c=s.filters.concat([a]);return new ai(s.path,s.collectionGroup,s.explicitOrderBy.slice(),c,s.limit,s.limitType,s.startAt,s.endAt)}(n._query,i))},t}(Tl),XH=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Kc=n,i.Gc=r,i.type="orderBy",i}return W(t,e),t.prototype._apply=function(n){var r=function(i,s,a){if(i.startAt!==null)throw new F(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new F(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var c=new xa(s,a);return function(l,h){if(Tb(l)===null){var d=Sb(l);d!==null&&b1(l,d,h.field)}}(i,c),c}(n._query,this.Kc,this.Gc);return new Dn(n.firestore,n.converter,function(i,s){var a=i.explicitOrderBy.concat([s]);return new ai(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(n._query,r))},t}(Tl),d1=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.zc=r,s.Hc=i,s}return W(t,e),t.prototype._apply=function(n){return new Dn(n.firestore,n.converter,QO(n._query,this.zc,this.Hc))},t}(Tl),v1=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.Jc=r,s.Yc=i,s}return W(t,e),t.prototype._apply=function(n){var r=g1(n,this.type,this.Jc,this.Yc);return new Dn(n.firestore,n.converter,function(i,s){return new ai(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(n._query,r))},t}(Tl),m1=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.Jc=r,s.Yc=i,s}return W(t,e),t.prototype._apply=function(n){var r=g1(n,this.type,this.Jc,this.Yc);return new Dn(n.firestore,n.converter,function(i,s){return new ai(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(n._query,r))},t}(Tl);bw=function(){function e(){}return e.prototype.convertValue=function(t,n){switch(n===void 0&&(n="none"),rs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return st(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Na(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw $()}},e.prototype.convertObject=function(t,n){var r=this,i={};return ts(t.fields,function(s,a){i[s]=r.convertValue(a,n)}),i},e.prototype.convertGeoPoint=function(t){return new wl(st(t.latitude),st(t.longitude))},e.prototype.convertArray=function(t,n){var r=this;return(t.values||[]).map(function(i){return r.convertValue(i,n)})},e.prototype.convertServerTimestamp=function(t,n){switch(n){case"previous":var r=FO(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(nl(t));default:return null}},e.prototype.convertTimestamp=function(t){var n=si(t);return new rn(n.seconds,n.nanos)},e.prototype.convertDocumentKey=function(t,n){var r=Se.fromString(t);re(xx(r));var i=new dd(r.get(1),r.get(3)),s=new J(r.popFirst(5));return i.isEqual(n)||ot("Document "+s+" contains a document reference within a different database ("+i.projectId+"/"+i.database+") which is not supported. It will be treated as a reference in the current database ("+n.projectId+"/"+n.database+") instead."),s},e}();$H=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return W(t,e),t.prototype.convertBytes=function(n){return new ls(n)},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new Qe(this.firestore,null,r)},t}(bw),JH=function(){function e(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=hs(t)}return e.prototype.set=function(t,n,r){this._verifyNotCommitted();var i=io(t,this._firestore),s=bd(i.converter,n,r),a=gd(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,jt.none())),this},e.prototype.update=function(t,n,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];this._verifyNotCommitted();var a,c=io(t,this._firestore);return a=typeof(n=se(n))=="string"||n instanceof qr?mw(this._dataReader,"WriteBatch.update",c._key,n,r,i):vw(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(a.toMutation(c._key,jt.exists(!0))),this},e.prototype.delete=function(t){this._verifyNotCommitted();var n=io(t,this._firestore);return this._mutations=this._mutations.concat(new fl(n._key,jt.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new F(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();vs=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return W(t,e),t.prototype.convertBytes=function(n){return new ls(n)},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new Qe(this.firestore,null,r)},t}(bw);ZH=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this)._firestore=n,i}return W(t,e),t.prototype.get=function(n){var r=this,i=io(n,this._firestore),s=new vs(this._firestore);return e.prototype.get.call(this,n).then(function(a){return new li(r._firestore,s,i._key,a._document,new ds(!1,!1),i.converter)})},t}(function(){function e(t,n){this._firestore=t,this._transaction=n,this._dataReader=hs(t)}return e.prototype.get=function(t){var n=this,r=io(t,this._firestore),i=new $H(this._firestore);return this._transaction.lookup([r._key]).then(function(s){if(!s||s.length!==1)return $();var a=s[0];if(a.isFoundDocument())return new El(n._firestore,i,a.key,a,r.converter);if(a.isNoDocument())return new El(n._firestore,i,r._key,null,r.converter);throw $()})},e.prototype.set=function(t,n,r){var i=io(t,this._firestore),s=bd(i.converter,n,r),a=gd(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,a),this},e.prototype.update=function(t,n,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var a,c=io(t,this._firestore);return a=typeof(n=se(n))=="string"||n instanceof qr?mw(this._dataReader,"Transaction.update",c._key,n,r,i):vw(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,a),this},e.prototype.delete=function(t){var n=io(t,this._firestore);return this._transaction.delete(n._key),this},e}());Ew=function(){function e(t){this._delegate=t}return e.fromBase64String=function(t){return T1(),new e(ls.fromBase64String(t))},e.fromUint8Array=function(t){return I1(),new e(ls.fromUint8Array(t))},e.prototype.toBase64=function(){return T1(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return I1(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),S1=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(t,n){return function(r,i){r1(r=Ae(r,ut));var s=qt(r),a=r._freezeSettings(),c=new lw;return n1(s,c,new DP(c,a.cacheSizeBytes,i==null?void 0:i.forceOwnership))}(t._delegate,{forceOwnership:n})},e.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(n){r1(n=Ae(n,ut));var r=qt(n),i=n._freezeSettings(),s=new lw;return n1(r,s,new RH(s,i.cacheSizeBytes))}(t._delegate)},e.prototype.clearIndexedDbPersistence=function(t){return function(n){var r=this;if(n._initialized&&!n._terminated)throw new F(N.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var i=new sn;return n._queue.enqueueAndForgetEvenWhileRestricted(function(){return A(r,void 0,void 0,function(){var s;return C(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,function(c){return A(this,void 0,void 0,function(){var l;return C(this,function(h){switch(h.label){case 0:return Ba.yt()?(l=c+"main",[4,Ba.delete(l)]):[2,Promise.resolve()];case 1:return h.sent(),[2]}})})}(qb(n._databaseId,n._persistenceKey))];case 1:return a.sent(),i.resolve(),[3,3];case 2:return s=a.sent(),i.reject(s),[3,3];case 3:return[2]}})})}),i.promise}(t._delegate)},e}(),Iw=function(){function e(t,n,r){var i=this;this._delegate=n,this.Xc=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof dd||(this.Zc=t)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){var n=this._delegate._getSettings();t.merge||n.host===t.host||Up("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},n),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,n,r){r===void 0&&(r={}),function(i,s,a,c){c===void 0&&(c={});var l=(i=Ae(i,bl))._getSettings();if(l.host!=="firestore.googleapis.com"&&l.host!==s&&Up("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},l),{host:s+":"+a,ssl:!1})),c.mockUserToken){var h=gh(c.mockUserToken),d=c.mockUserToken.sub||c.mockUserToken.user_id;if(!d)throw new F(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");i._credentials=new DH(new GP(h,new En(d)))}}(this._delegate,t,n,r)},e.prototype.enableNetwork=function(){return function(t){var n=this;return t.asyncQueue.enqueue(function(){return A(n,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return[4,FP(t)];case 1:return r=s.sent(),[4,jP(t)];case 2:return i=s.sent(),[2,(r.setNetworkEnabled(!0),function(a){var c=G(a);return c.Or.delete(0),yl(c)}(i))]}})})})}(qt(Ae(this._delegate,ut)))},e.prototype.disableNetwork=function(){return function(t){var n=this;return t.asyncQueue.enqueue(function(){return A(n,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return[4,FP(t)];case 1:return r=s.sent(),[4,jP(t)];case 2:return i=s.sent(),[2,(r.setNetworkEnabled(!1),function(a){return A(this,void 0,void 0,function(){var c;return C(this,function(l){switch(l.label){case 0:return(c=G(a)).Or.add(0),[4,Xa(c)];case 1:return l.sent(),c.Br.set("Offline"),[2]}})})}(i))]}})})})}(qt(Ae(this._delegate,ut)))},e.prototype.enablePersistence=function(t){var n=!1,r=!1;return t&&HP("synchronizeTabs",n=!!t.synchronizeTabs,"experimentalForceOwningTab",r=!!t.experimentalForceOwningTab),n?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,r)},e.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var n=this,r=new sn;return t.asyncQueue.enqueueAndForget(function(){return A(n,void 0,void 0,function(){var i;return C(this,function(s){switch(s.label){case 0:return i=yH,[4,VP(t)];case 1:return[2,i.apply(void 0,[s.sent(),r])]}})})}),r.promise}(qt(Ae(this._delegate,ut)))},e.prototype.onSnapshotsInSync=function(t){return function(n,r){return function(i,s){var a=this,c=new hd(s);return i.asyncQueue.enqueueAndForget(function(){return A(a,void 0,void 0,function(){var l;return C(this,function(h){switch(h.label){case 0:return l=function(d,g){G(d).Gr.add(g),g.next()},[4,tu(i)];case 1:return[2,l.apply(void 0,[h.sent(),c])]}})})}),function(){c.Wo(),i.asyncQueue.enqueueAndForget(function(){return A(a,void 0,void 0,function(){var l;return C(this,function(h){switch(h.label){case 0:return l=function(d,g){G(d).Gr.delete(g)},[4,tu(i)];case 1:return[2,l.apply(void 0,[h.sent(),c])]}})})})}}(qt(n=Ae(n,ut)),nu(r)?r:{next:r})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Zc)throw new F(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Al(this,$P(this._delegate,t))}catch(n){throw an(n,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new oo(this,md(this._delegate,t))}catch(n){throw an(n,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Cl(this,function(n,r){if(n=Ae(n,bl),hw("collectionGroup","collection id",r),r.indexOf("/")>=0)throw new F(N.INVALID_ARGUMENT,"Invalid collection ID '"+r+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Dn(n,null,function(i){return new ai(Se.emptyPath(),i)}(r))}(this._delegate,t))}catch(n){throw an(n,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var n=this;return function(r,i){return function(s,a){var c=this,l=new sn;return s.asyncQueue.enqueueAndForget(function(){return A(c,void 0,void 0,function(){var h;return C(this,function(d){switch(d.label){case 0:return[4,function(g){return pd(g).then(function(m){return m.datastore})}(s)];case 1:return h=d.sent(),new OH(s.asyncQueue,h,a,l).run(),[2]}})})}),l.promise}(qt(r),function(s){return i(new ZH(r,s))})}(this._delegate,function(r){return t(new Tw(n,r))})},e.prototype.batch=function(){var t=this;return qt(this._delegate),new Sw(new JH(this._delegate,function(n){return Sl(t._delegate,n)}))},e.prototype.loadBundle=function(t){throw new F(N.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new F(N.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),wd=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return W(t,e),t.prototype.convertBytes=function(n){return new Ew(new ls(n))},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return oo.tu(r,this.firestore,null)},t}(bw);Tw=function(){function e(t,n){this._firestore=t,this._delegate=n,this._userDataWriter=new wd(t)}return e.prototype.get=function(t){var n=this,r=ms(t);return this._delegate.get(r).then(function(i){return new ru(n._firestore,new li(n._firestore._delegate,n._userDataWriter,i._key,i._document,i.metadata,r.converter))})},e.prototype.set=function(t,n,r){var i=ms(t);return r?(pw("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},e.prototype.update=function(t,n,r){for(var i,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];var c=ms(t);return arguments.length===2?this._delegate.update(c,n):(i=this._delegate).update.apply(i,oe([c,n,r],s)),this},e.prototype.delete=function(t){var n=ms(t);return this._delegate.delete(n),this},e}(),Sw=function(){function e(t){this._delegate=t}return e.prototype.set=function(t,n,r){var i=ms(t);return r?(pw("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},e.prototype.update=function(t,n,r){for(var i,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];var c=ms(t);return arguments.length===2?this._delegate.update(c,n):(i=this._delegate).update.apply(i,oe([c,n,r],s)),this},e.prototype.delete=function(t){var n=ms(t);return this._delegate.delete(n),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),Ed=function(){function e(t,n,r){this._firestore=t,this._userDataWriter=n,this._delegate=r}return e.prototype.fromFirestore=function(t,n){var r=new Il(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new iu(this._firestore,r),n??{})},e.prototype.toFirestore=function(t,n){return n?this._delegate.toFirestore(t,n):this._delegate.toFirestore(t)},e.eu=function(t,n){var r=e.nu,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var s=i.get(n);return s||(s=new e(t,new wd(t),n),i.set(n,s)),s},e}();Ed.nu=new WeakMap;oo=function(){function e(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new wd(t)}return e.su=function(t,n,r){if(t.length%2!=0)throw new F(N.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new Qe(n._delegate,r,new J(t)))},e.tu=function(t,n,r){return new e(n,new Qe(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Al(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Al(this.firestore,$P(this._delegate,t))}catch(n){throw an(n,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return(t=se(t))instanceof Qe&&JP(this._delegate,t)},e.prototype.set=function(t,n){n=pw("DocumentReference.set",n);try{return function(r,i,s){r=Ae(r,Qe);var a=Ae(r.firestore,ut),c=bd(r.converter,i,s);return Sl(a,[gd(hs(a),"setDoc",r._key,c,r.converter!==null,s).toMutation(r._key,jt.none())])}(this._delegate,t,n)}catch(r){throw an(r,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];try{return arguments.length===1?w1(this._delegate,t):w1.apply(void 0,oe([this._delegate,t,n],r))}catch(s){throw an(s,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Sl(Ae((t=this._delegate).firestore,ut),[new fl(t._key,jt.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=A1(n),s=k1(n,function(a){return new ru(t.firestore,new li(t.firestore._delegate,t._userDataWriter,a._key,a._document,a.metadata,t._delegate.converter))});return E1(this._delegate,i,s)},e.prototype.get=function(t){var n=this;return((t==null?void 0:t.source)==="cache"?function(r){r=Ae(r,Qe);var i=Ae(r.firestore,ut),s=qt(i),a=new vs(i);return function(c,l){var h=this,d=new sn;return c.asyncQueue.enqueueAndForget(function(){return A(h,void 0,void 0,function(){var g;return C(this,function(m){switch(m.label){case 0:return g=function(_,w,E){return A(this,void 0,void 0,function(){var T,S;return C(this,function(R){switch(R.label){case 0:return R.trys.push([0,2,,3]),[4,function(O,U){var L=G(O);return L.persistence.runTransaction("read document","readonly",function(P){return L.Mn.mn(P,U)})}(_,w)];case 1:return(S=R.sent()).isFoundDocument()?E.resolve(S):S.isNoDocument()?E.resolve(null):E.reject(new F(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return T=R.sent(),S=Za(T,"Failed to get document '"+w+" from cache"),E.reject(S),[3,3];case 3:return[2]}})})},[4,UP(c)];case 1:return[2,g.apply(void 0,[m.sent(),l,d])]}})})}),d.promise}(s,r._key).then(function(c){return new li(i,a,r._key,c,new ds(c!==null&&c.hasLocalMutations,!0),r.converter)})}(this._delegate):(t==null?void 0:t.source)==="server"?function(r){r=Ae(r,Qe);var i=Ae(r.firestore,ut);return BP(qt(i),r._key,{source:"server"}).then(function(s){return ww(i,r,s)})}(this._delegate):function(r){r=Ae(r,Qe);var i=Ae(r.firestore,ut);return BP(qt(i),r._key).then(function(s){return ww(i,r,s)})}(this._delegate)).then(function(r){return new ru(n.firestore,new li(n.firestore._delegate,n._userDataWriter,r._key,r._document,r.metadata,n._delegate.converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Ed.eu(this.firestore,t)):this._delegate.withConverter(null))},e}();ru=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"ref",{get:function(){return new oo(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,n){return this._delegate.get(t,n)},e.prototype.isEqual=function(t){return h1(this._delegate,t._delegate)},e}(),iu=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return W(t,e),t.prototype.data=function(n){return this._delegate.data(n)},t}(ru),Cl=function(){function e(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new wd(t)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,ro(this._delegate,function(i,s,a){var c=s,l=_d("where",i);return new YH(l,c,a)}(t,n,r)))}catch(i){throw an(i,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,ro(this._delegate,function(r,i){i===void 0&&(i="asc");var s=i,a=_d("orderBy",r);return new XH(a,s)}(t,n)))}catch(r){throw an(r,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,ro(this._delegate,function(n){return YP("limit",n),new d1("limit",n,"F")}(t)))}catch(n){throw an(n,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,ro(this._delegate,function(n){return YP("limitToLast",n),new d1("limitToLast",n,"L")}(t)))}catch(n){throw an(n,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,ro(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new v1("startAt",r,!0)}.apply(void 0,t)))}catch(r){throw an(r,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,ro(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new v1("startAfter",r,!1)}.apply(void 0,t)))}catch(r){throw an(r,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,ro(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new m1("endBefore",r,!0)}.apply(void 0,t)))}catch(r){throw an(r,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,ro(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new m1("endAt",r,!1)}.apply(void 0,t)))}catch(r){throw an(r,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return ZP(this._delegate,t._delegate)},e.prototype.get=function(t){var n=this;return((t==null?void 0:t.source)==="cache"?function(r){r=Ae(r,Dn);var i=Ae(r.firestore,ut),s=qt(i),a=new vs(i);return function(c,l){var h=this,d=new sn;return c.asyncQueue.enqueueAndForget(function(){return A(h,void 0,void 0,function(){var g;return C(this,function(m){switch(m.label){case 0:return g=function(_,w,E){return A(this,void 0,void 0,function(){var T,S,R,O,U;return C(this,function(L){switch(L.label){case 0:return L.trys.push([0,2,,3]),[4,sd(_,w,!0)];case 1:return U=L.sent(),T=new AP(w,U.Bn),S=T._o(U.documents),R=T.applyChanges(S,!1),E.resolve(R.snapshot),[3,3];case 2:return O=L.sent(),U=Za(O,"Failed to execute query '"+w+" against cache"),E.reject(U),[3,3];case 3:return[2]}})})},[4,UP(c)];case 1:return[2,g.apply(void 0,[m.sent(),l,d])]}})})}),d.promise}(s,r._query).then(function(c){return new no(i,a,r,c)})}(this._delegate):(t==null?void 0:t.source)==="server"?function(r){r=Ae(r,Dn);var i=Ae(r.firestore,ut),s=qt(i),a=new vs(i);return qP(s,r._query,{source:"server"}).then(function(c){return new no(i,a,r,c)})}(this._delegate):function(r){r=Ae(r,Dn);var i=Ae(r.firestore,ut),s=qt(i),a=new vs(i);return p1(r._query),qP(s,r._query).then(function(c){return new no(i,a,r,c)})}(this._delegate)).then(function(r){return new Id(n.firestore,new no(n.firestore._delegate,n._userDataWriter,n._delegate,r._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=A1(n),s=k1(n,function(a){return new Id(t.firestore,new no(t.firestore._delegate,t._userDataWriter,t._delegate,a._snapshot))});return E1(this._delegate,i,s)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Ed.eu(this.firestore,t)):this._delegate.withConverter(null))},e}(),ez=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new iu(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),Id=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"query",{get:function(){return new Cl(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(n){return new iu(t._firestore,n)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var n=this;return this._delegate.docChanges(t).map(function(r){return new ez(n._firestore,r)})},e.prototype.forEach=function(t,n){var r=this;this._delegate.forEach(function(i){t.call(n,new iu(r._firestore,i))})},e.prototype.isEqual=function(t){return h1(this._delegate,t._delegate)},e}(),Al=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).firestore=n,i._delegate=r,i}return W(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this._delegate.parent;return n?new oo(this.firestore,n):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(n){try{return new oo(this.firestore,n===void 0?md(this._delegate):md(this._delegate,n))}catch(r){throw an(r,"doc()","CollectionReference.doc()")}},t.prototype.add=function(n){var r=this;return function(i,s){var a=Ae(i.firestore,ut),c=md(i),l=bd(i.converter,s);return Sl(a,[gd(hs(i.firestore),"addDoc",c._key,l,i.converter!==null,{}).toMutation(c._key,jt.exists(!1))]).then(function(){return c})}(this._delegate,n).then(function(i){return new oo(r.firestore,i)})},t.prototype.isEqual=function(n){return JP(this._delegate,n._delegate)},t.prototype.withConverter=function(n){return new t(this.firestore,n?this._delegate.withConverter(Ed.eu(this.firestore,n)):this._delegate.withConverter(null))},t}(Cl);R1=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._delegate=new(qr.bind.apply(qr,oe([void 0],t)))}return e.documentId=function(){return new e(_r.keyField().canonicalString())},e.prototype.isEqual=function(t){return(t=se(t))instanceof qr&&this._delegate._internalPath.isEqual(t._internalPath)},e}(),N1=function(){function e(t){this._delegate=t}return e.serverTimestamp=function(){var t=new qH("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new dw("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new WH("arrayUnion",i)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new GH("arrayRemove",i)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(r){return new KH("increment",r)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}();});function nz(e){(function(t,n){t.INTERNAL.registerComponent(new qe("firestore",function(r){var i=r.getProvider("app").getImmediate();return n(i,r.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},tz)))})(e,function(t,n){return new Iw(t,new ut(t,n),new S1)}),e.registerVersion("@firebase/firestore","2.3.7")}var tz,x1=Le(()=>{Cn();Vn();Oi();mb();yn();O1();fr();tz={Firestore:Iw,GeoPoint:wl,Timestamp:rn,Blob:Ew,Transaction:Tw,WriteBatch:Sw,DocumentReference:oo,DocumentSnapshot:ru,Query:Cl,QueryDocumentSnapshot:iu,QuerySnapshot:Id,CollectionReference:Al,FieldPath:R1,FieldValue:N1,setLogLevel:C1,CACHE_SIZE_UNLIMITED:e1};nz(K)});var P1={};Rr(P1);var D1=Le(()=>{x1()});function rz(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function iz(e,t,n){var r=rz(e),i=r,s=void 0;try{var a=t&&t.error;if(a){var c=a.status;if(typeof c=="string"){if(!L1[c])return new ou("internal","internal");r=L1[c],i=c}var l=a.message;typeof l=="string"&&(i=l),s=a.details,s!==void 0&&(s=n.decode(s))}}catch(h){}return r==="ok"?null:new ou(r,i,s)}function M1(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function cz(e){var t,n=new Promise(function(r,i){t=setTimeout(function(){i(new ou("deadline-exceeded","deadline-exceeded"))},e)});return{timer:t,promise:n}}function U1(e,t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}})})}function fz(e,t){var n={Functions:F1};function r(i,s){var a=s.instanceIdentifier,c=i.getProvider("app").getImmediate(),l=i.getProvider("auth-internal"),h=i.getProvider("app-check-internal"),d=i.getProvider("messaging");return new F1(c,l,d,h,a,t)}e.INTERNAL.registerComponent(new qe(lz,r,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}var L1,ou,oz,sz,az,uz,F1,lz,hz,pz,j1=Le(()=>{Cn();yn();fr();L1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ou=function(e){W(t,e);function t(n,r,i){var s=e.call(this,r)||this;return Object.setPrototypeOf(s,t.prototype),s.code=n,s.details=i,s}return t}(Error);oz=function(){function e(t,n){var r=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(function(i){return r.auth=i},function(){}),this.messaging||n.get().then(function(i){return r.messaging=i},function(){})}return e.prototype.getAuthToken=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:if(!this.auth)return[2,void 0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return t=r.sent(),t?[2,t.accessToken]:[2,void 0];case 3:return n=r.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getInstanceIdToken=function(){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:if(!this.messaging||!("Notification"in self)||Notification.permission!=="granted")return[2,void 0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,n.sent()];case 3:return t=n.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getContext=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return[4,this.getAuthToken()];case 1:return t=r.sent(),[4,this.getInstanceIdToken()];case 2:return n=r.sent(),[2,{authToken:t,instanceIdToken:n}]}})})},e}();sz="type.googleapis.com/google.protobuf.Int64Value",az="type.googleapis.com/google.protobuf.UInt64Value";uz=function(){function e(){}return e.prototype.encode=function(t){var n=this;if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(function(r){return n.encode(r)});if(typeof t=="function"||typeof t=="object")return M1(t,function(r){return n.encode(r)});throw new Error("Data cannot be encoded in JSON: "+t)},e.prototype.decode=function(t){var n=this;if(t==null)return t;if(t["@type"])switch(t["@type"]){case sz:case az:{var r=Number(t.value);if(isNaN(r))throw new Error("Data cannot be decoded from JSON: "+t);return r}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(i){return n.decode(i)}):typeof t=="function"||typeof t=="object"?M1(t,function(i){return n.decode(i)}):t},e}();F1=function(){function e(t,n,r,i,s,a){var c=this;s===void 0&&(s="us-central1"),this.app_=t,this.appCheckProvider=i,this.fetchImpl=a,this.serializer=new uz,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(c.deleteService())}},this.contextProvider=new oz(n,r),this.cancelAllRequests=new Promise(function(h){c.deleteService=function(){return h()}});try{var l=new URL(s);this.customDomain=l.origin,this.region="us-central1"}catch(h){this.customDomain=null,this.region=s}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(t){var n=this.app_.options.projectId;if(this.emulatorOrigin!==null){var r=this.emulatorOrigin;return r+"/"+n+"/"+this.region+"/"+t}return this.customDomain!==null?this.customDomain+"/"+t:"https://"+this.region+"-"+n+".cloudfunctions.net/"+t},e.prototype.useEmulator=function(t,n){this.emulatorOrigin="http://"+t+":"+n},e.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},e.prototype.httpsCallable=function(t,n){var r=this;return function(i){return r.call(t,i,n||{})}},e.prototype.postJSON=function(t,n,r){return A(this,void 0,void 0,function(){var i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:return r["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:i=h.sent(),i!==null&&(r["X-Firebase-AppCheck"]=i),h.label=2;case 2:return h.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(n),headers:r})];case 3:return s=h.sent(),[3,5];case 4:return a=h.sent(),[2,{status:0,json:null}];case 5:c=null,h.label=6;case 6:return h.trys.push([6,8,,9]),[4,s.json()];case 7:return c=h.sent(),[3,9];case 8:return l=h.sent(),[3,9];case 9:return[2,{status:s.status,json:c}]}})})},e.prototype.getAppCheckToken=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return t=this.appCheckProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:return n=r.sent(),[2,n.token];case 2:return[2,null]}})})},e.prototype.call=function(t,n,r){return A(this,void 0,void 0,function(){var i,s,a,c,l,h,d,g,m,_,w,E;return C(this,function(T){switch(T.label){case 0:return i=this._url(t),n=this.serializer.encode(n),s={data:n},a={},[4,this.contextProvider.getContext()];case 1:return c=T.sent(),c.authToken&&(a.Authorization="Bearer "+c.authToken),c.instanceIdToken&&(a["Firebase-Instance-ID-Token"]=c.instanceIdToken),l=r.timeout||7e4,h=cz(l),d=h.timer,g=h.promise,[4,Promise.race([U1(d,this.postJSON(i,s,a)),g,U1(d,this.cancelAllRequests)])];case 2:if(m=T.sent(),!m)throw new ou("cancelled","Firebase Functions instance was deleted.");if(_=iz(m.status,m.json,this.serializer),_)throw _;if(!m.json)throw new ou("internal","Response is not valid JSON object.");if(w=m.json.data,typeof w=="undefined"&&(w=m.json.result),typeof w=="undefined")throw new ou("internal","Response is missing data field.");return E=this.serializer.decode(w),[2,{data:E}]}})})},e}();lz="functions";hz="@firebase/functions",pz="0.6.12";fz(K,fetch.bind(self));K.registerVersion(hz,pz)});var V1={};Rr(V1);var B1=Le(()=>{j1()});function fi(e){var t=new Uint8Array(e),n=btoa(String.fromCharCode.apply(String,oe([],nt(t))));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Tz(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}function Cz(e){return A(this,void 0,void 0,function(){var t,n,r,i,s=this;return C(this,function(a){switch(a.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=a.sent(),n=t.map(function(c){return c.name}),!n.includes(Cw))return[2,null];a.label=2;case 2:return r=null,[4,(0,gs.openDb)(Cw,Sz,function(c){return A(s,void 0,void 0,function(){var l,h,d,d,d,g;return C(this,function(m){switch(m.label){case 0:return c.oldVersion<2?[2]:c.objectStoreNames.contains(G1)?(l=c.transaction.objectStore(G1),[4,l.index("fcmSenderId").get(e)]):[2];case 1:return h=m.sent(),[4,l.clear()];case 2:if(m.sent(),!h)return[2];if(c.oldVersion===2){if(d=h,!d.auth||!d.p256dh||!d.endpoint)return[2];r={token:d.fcmToken,createTime:(g=d.createTime)!==null&&g!==void 0?g:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:fi(d.vapidKey)}}}else c.oldVersion===3?(d=h,r={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:fi(d.auth),p256dh:fi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:fi(d.vapidKey)}}):c.oldVersion===4&&(d=h,r={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:fi(d.auth),p256dh:fi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:fi(d.vapidKey)}});return[2]}})})})];case 3:return i=a.sent(),i.close(),[4,(0,gs.deleteDb)(Cw)];case 4:return a.sent(),[4,(0,gs.deleteDb)("fcm_vapid_details_db")];case 5:return a.sent(),[4,(0,gs.deleteDb)("undefined")];case 6:return a.sent(),[2,Az(r)?r:null]}})})}function Az(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}function kw(){return Aw||(Aw=(0,gs.openDb)(kz,Rz,function(e){switch(e.oldVersion){case 0:e.createObjectStore(_s)}})),Aw}function Sd(e){return A(this,void 0,void 0,function(){var t,n,r,i;return C(this,function(s){switch(s.label){case 0:return t=Nw(e),[4,kw()];case 1:return n=s.sent(),[4,n.transaction(_s).objectStore(_s).get(t)];case 2:return r=s.sent(),r?[2,r]:[3,3];case 3:return[4,Cz(e.appConfig.senderId)];case 4:return i=s.sent(),i?[4,Rw(e,i)]:[3,6];case 5:return s.sent(),[2,i];case 6:return[2]}})})}function Rw(e,t){return A(this,void 0,void 0,function(){var n,r,i;return C(this,function(s){switch(s.label){case 0:return n=Nw(e),[4,kw()];case 1:return r=s.sent(),i=r.transaction(_s,"readwrite"),[4,i.objectStore(_s).put(t,n)];case 2:return s.sent(),[4,i.complete];case 3:return s.sent(),[2,t]}})})}function Nz(e){return A(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:return t=Nw(e),[4,kw()];case 1:return n=i.sent(),r=n.transaction(_s,"readwrite"),[4,r.objectStore(_s).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function Nw(e){var t=e.appConfig;return t.appId}function Oz(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:return[4,xw(e)];case 1:n=h.sent(),r=H1(t),i={method:"POST",headers:n,body:JSON.stringify(r)},h.label=2;case 2:return h.trys.push([2,5,,6]),[4,fetch(Ow(e.appConfig),i)];case 3:return a=h.sent(),[4,a.json()];case 4:return s=h.sent(),[3,6];case 5:throw c=h.sent(),Oe.create("token-subscribe-failed",{errorInfo:c});case 6:if(s.error)throw l=s.error.message,Oe.create("token-subscribe-failed",{errorInfo:l});if(!s.token)throw Oe.create("token-subscribe-no-token");return[2,s.token]}})})}function xz(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:return[4,xw(e)];case 1:n=h.sent(),r=H1(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},h.label=2;case 2:return h.trys.push([2,5,,6]),[4,fetch(Ow(e.appConfig)+"/"+t.token,i)];case 3:return a=h.sent(),[4,a.json()];case 4:return s=h.sent(),[3,6];case 5:throw c=h.sent(),Oe.create("token-update-failed",{errorInfo:c});case 6:if(s.error)throw l=s.error.message,Oe.create("token-update-failed",{errorInfo:l});if(!s.token)throw Oe.create("token-update-no-token");return[2,s.token]}})})}function K1(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,a,c;return C(this,function(l){switch(l.label){case 0:return[4,xw(e)];case 1:n=l.sent(),r={method:"DELETE",headers:n},l.label=2;case 2:return l.trys.push([2,5,,6]),[4,fetch(Ow(e.appConfig)+"/"+t,r)];case 3:return i=l.sent(),[4,i.json()];case 4:if(s=l.sent(),s.error)throw a=s.error.message,Oe.create("token-unsubscribe-failed",{errorInfo:a});return[3,6];case 5:throw c=l.sent(),Oe.create("token-unsubscribe-failed",{errorInfo:c});case 6:return[2]}})})}function Ow(e){var t=e.projectId;return gz+"/projects/"+t+"/registrations"}function xw(e){var t=e.appConfig,n=e.installations;return A(this,void 0,void 0,function(){var r;return C(this,function(i){switch(i.label){case 0:return[4,n.getToken()];case 1:return r=i.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+r})]}})})}function H1(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,s={web:{endpoint:r,auth:n,p256dh:t}};return i!==Td&&(s.web.applicationPubKey=i),s}function Pw(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,a;return C(this,function(c){switch(c.label){case 0:if(Notification.permission!=="granted")throw Oe.create("permission-blocked");return[4,Lz(t,n)];case 1:return r=c.sent(),[4,Sd(e)];case 2:return i=c.sent(),s={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:fi(r.getKey("auth")),p256dh:fi(r.getKey("p256dh"))},i?[3,3]:[2,z1(e,s)];case 3:if(Mz(i.subscriptionOptions,s))return[3,8];c.label=4;case 4:return c.trys.push([4,6,,7]),[4,K1(e,i.token)];case 5:return c.sent(),[3,7];case 6:return a=c.sent(),console.warn(a),[3,7];case 7:return[2,z1(e,s)];case 8:return Date.now()>=i.createTime+Pz?[2,Dz({token:i.token,createTime:Date.now(),subscriptionOptions:s},e,t)]:[2,i.token];case 9:return[2]}})})}function kl(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return[4,Sd(e)];case 1:return n=i.sent(),n?[4,K1(e,n.token)]:[3,4];case 2:return i.sent(),[4,Nz(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return r=i.sent(),r?[2,r.unsubscribe()]:[2,!0]}})})}function Dz(e,t,n){return A(this,void 0,void 0,function(){var r,i,s;return C(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,xz(t,e)];case 1:return r=a.sent(),i=Ee(Ee({},e),{token:r,createTime:Date.now()}),[4,Rw(t,i)];case 2:return a.sent(),[2,r];case 3:return s=a.sent(),[4,kl(t,n)];case 4:throw a.sent(),s;case 5:return[2]}})})}function z1(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return[4,Oz(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,Rw(e,r)];case 2:return i.sent(),[2,r.token]}})})}function Lz(e,t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return n=r.sent(),n?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Tz(t)})]}})})}function Mz(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,s=t.p256dh===e.p256dh;return n&&r&&i&&s}function Fz(e){var t={from:e.from,collapseKey:e.collapse_key};return Uz(t,e),jz(t,e),Vz(t,e),t}function Uz(e,t){if(!!t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}function jz(e,t){!t.data||(e.data=t.data)}function Vz(e,t){if(!!t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}function Q1(e){return typeof e=="object"&&!!e&&W1 in e}function Y1(e){return new Promise(function(t){setTimeout(t,e)})}function qz(e){var t,n=Ee({},e.notification);return n.data=(t={},t[q1]=e,t),n}function Wz(e){var t=e.data;if(!t)return null;try{return t.json()}catch(n){return null}}function Gz(e){return A(this,void 0,void 0,function(){var t,n,r,i,s,a,c;return C(this,function(l){switch(l.label){case 0:return[4,X1()];case 1:t=l.sent();try{for(n=Xe(t),r=n.next();!r.done;r=n.next())if(i=r.value,s=new URL(i.url,self.location.href),e.host===s.host)return[2,i]}catch(h){a={error:h}}finally{try{r&&!r.done&&(c=n.return)&&c.call(n)}finally{if(a)throw a.error}}return[2,null]}})})}function Kz(e){return e.some(function(t){return t.visibilityState==="visible"&&!t.url.startsWith("chrome-extension://")})}function Hz(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=ys.PUSH_RECEIVED;try{for(var i=Xe(e),s=i.next();!s.done;s=i.next()){var a=s.value;a.postMessage(t)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function X1(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function zz(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification((t=e.title)!==null&&t!==void 0?t:"",e)}function Qz(e){var t,n,r,i=(n=(t=e.fcmOptions)===null||t===void 0?void 0:t.link)!==null&&n!==void 0?n:(r=e.notification)===null||r===void 0?void 0:r.click_action;return i||(Q1(e.data)?self.location.origin:null)}function Xz(e){switch(e){case ys.NOTIFICATION_CLICKED:return"notification_open";case ys.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function $z(e){return delete e.messageType,delete e.isFirebaseMessaging,e}function Jz(e){var t,n;if(!e||!e.options)throw Dw("App Configuration Object");if(!e.name)throw Dw("App Name");var r=["projectId","apiKey","appId","messagingSenderId"],i=e.options;try{for(var s=Xe(r),a=s.next();!a.done;a=s.next()){var c=a.value;if(!i[c])throw Dw(c)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return{appName:e.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function Dw(e){return Oe.create("missing-app-config-values",{valueName:e})}function e6(e){var t=e.getProvider("app").getImmediate(),n=Jz(t),r=e.getProvider("installations").getImmediate(),i=e.getProvider("analytics-internal"),s={app:t,appConfig:n,installations:r,analyticsProvider:i};if(!$1())throw Oe.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new Bz(s):new Yz(s)}function $1(){return self&&"ServiceWorkerGlobalScope"in self?r6():n6()}function n6(){return"indexedDB"in window&&indexedDB!==null&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function r6(){return"indexedDB"in self&&indexedDB!==null&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}var gs,mt,dz,Oe,vz,mz,Td,gz,q1,yz,_z,W1,bz,wz,Ez,Iz,ys,Cw,Sz,G1,kz,Rz,_s,Aw,Pz,Bz,Yz,Zz,t6,J1=Le(()=>{Fc();fr();Vn();yn();gs=Qu(u_());Cn();dz=(mt={},mt["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',mt["only-available-in-window"]="This method is available in a Window context.",mt["only-available-in-sw"]="This method is available in a service worker context.",mt["permission-default"]="The notification permission was not granted and dismissed instead.",mt["permission-blocked"]="The notification permission was not granted and blocked instead.",mt["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",mt["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",mt["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",mt["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",mt["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",mt["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",mt["token-update-no-token"]="FCM returned no token when updating the user to push.",mt["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",mt["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",mt["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",mt["invalid-vapid-key"]="The public VAPID key must be a string.",mt["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",mt),Oe=new _n("messaging","Messaging",dz);vz="/firebase-messaging-sw.js",mz="/firebase-cloud-messaging-push-scope",Td="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",gz="https://fcmregistrations.googleapis.com/v1",q1="FCM_MSG",yz="FirebaseMessaging: ",_z="google.c.a.e",W1="google.c.a.c_id",bz="google.c.a.ts",wz="google.c.a.c_l",Ez=1e3,Iz=3e3;(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"})(ys||(ys={}));Cw="fcm_token_details_db",Sz=5,G1="fcm_token_object_Store";kz="firebase-messaging-database",Rz=1,_s="firebase-messaging-store",Aw=null;Pz=7*24*60*60*1e3;Bz=function(){function e(t){var n=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(r){r.waitUntil(n.onPush(r))}),self.addEventListener("pushsubscriptionchange",function(r){r.waitUntil(n.onSubChange(r))}),self.addEventListener("notificationclick",function(r){r.waitUntil(n.onNotificationClick(r))})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||typeof t!="function")throw Oe.create("invalid-bg-handler");this.bgMessageHandler=t},e.prototype.onBackgroundMessage=function(t){var n=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){n.bgMessageHandler=null}},e.prototype.getToken=function(){var t,n;return A(this,void 0,void 0,function(){var r;return C(this,function(i){switch(i.label){case 0:return this.vapidKey?[3,2]:[4,Sd(this.firebaseDependencies)];case 1:r=i.sent(),this.vapidKey=(n=(t=r==null?void 0:r.subscriptionOptions)===null||t===void 0?void 0:t.vapidKey)!==null&&n!==void 0?n:Td,i.label=2;case 2:return[2,Pw(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},e.prototype.deleteToken=function(){return kl(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw Oe.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(t){if(this.vapidKey!==null)throw Oe.create("use-vapid-key-after-get-token");if(typeof t!="string"||t.length===0)throw Oe.create("invalid-vapid-key");this.vapidKey=t},e.prototype.useServiceWorker=function(){throw Oe.create("only-available-in-window")},e.prototype.onMessage=function(){throw Oe.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw Oe.create("only-available-in-window")},e.prototype.onPush=function(t){return A(this,void 0,void 0,function(){var n,r,i,s;return C(this,function(a){switch(a.label){case 0:return n=Wz(t),n?[4,X1()]:(console.debug(yz+"failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return r=a.sent(),Kz(r)?[2,Hz(r,n)]:(i=!1,n.notification?[4,zz(qz(n))]:[3,3]);case 2:a.sent(),i=!0,a.label=3;case 3:return i===!0&&this.isOnBackgroundMessageUsed===!1?[2]:(this.bgMessageHandler&&(s=Fz(n),typeof this.bgMessageHandler=="function"?this.bgMessageHandler(s):this.bgMessageHandler.next(s)),[4,Y1(Ez)]);case 4:return a.sent(),[2]}})})},e.prototype.onSubChange=function(t){var n,r;return A(this,void 0,void 0,function(){var i,s;return C(this,function(a){switch(a.label){case 0:return i=t.newSubscription,i?[3,2]:[4,kl(this.firebaseDependencies,self.registration)];case 1:return a.sent(),[2];case 2:return[4,Sd(this.firebaseDependencies)];case 3:return s=a.sent(),[4,kl(this.firebaseDependencies,self.registration)];case 4:return a.sent(),[4,Pw(this.firebaseDependencies,self.registration,(r=(n=s==null?void 0:s.subscriptionOptions)===null||n===void 0?void 0:n.vapidKey)!==null&&r!==void 0?r:Td)];case 5:return a.sent(),[2]}})})},e.prototype.onNotificationClick=function(t){var n,r;return A(this,void 0,void 0,function(){var i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:if(i=(r=(n=t.notification)===null||n===void 0?void 0:n.data)===null||r===void 0?void 0:r[q1],i){if(t.action)return[2]}else return[2];return t.stopImmediatePropagation(),t.notification.close(),s=Qz(i),s?(a=new URL(s,self.location.href),c=new URL(self.location.origin),a.host!==c.host?[2]:[4,Gz(a)]):[2];case 1:return l=h.sent(),l?[3,4]:[4,self.clients.openWindow(s)];case 2:return l=h.sent(),[4,Y1(Iz)];case 3:return h.sent(),[3,6];case 4:return[4,l.focus()];case 5:l=h.sent(),h.label=6;case 6:return l?(i.messageType=ys.NOTIFICATION_CLICKED,i.isFirebaseMessaging=!0,[2,l.postMessage(i)]):[2]}})})},e}();Yz=function(){function e(t){var n=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(r){return n.messageEventListener(r)})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return n=t.data,n.isFirebaseMessaging?(this.onMessageCallback&&n.messageType===ys.PUSH_RECEIVED&&(typeof this.onMessageCallback=="function"?this.onMessageCallback($z(Object.assign({},n))):this.onMessageCallback.next(Object.assign({},n))),r=n.data,Q1(r)&&r[_z]==="1"?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(t){return A(this,void 0,void 0,function(){return C(this,function(n){switch(n.label){case 0:return Notification.permission!=="default"?[3,2]:[4,Notification.requestPermission()];case 1:n.sent(),n.label=2;case 2:if(Notification.permission!=="granted")throw Oe.create("permission-blocked");return[4,this.updateVapidKey(t==null?void 0:t.vapidKey)];case 3:return n.sent(),[4,this.updateSwReg(t==null?void 0:t.serviceWorkerRegistration)];case 4:return n.sent(),[2,Pw(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},e.prototype.updateVapidKey=function(t){return A(this,void 0,void 0,function(){return C(this,function(n){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=Td),[2]})})},e.prototype.updateSwReg=function(t){return A(this,void 0,void 0,function(){return C(this,function(n){switch(n.label){case 0:return!t&&!this.swRegistration?[4,this.registerDefaultSw()]:[3,2];case 1:n.sent(),n.label=2;case 2:if(!t&&!!this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw Oe.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},e.prototype.registerDefaultSw=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register(vz,{scope:mz})];case 1:return t.swRegistration=r.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw n=r.sent(),Oe.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 3:return[2]}})})},e.prototype.deleteToken=function(){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,kl(this.firebaseDependencies,this.swRegistration)]}})})},e.prototype.requestPermission=function(){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return Notification.permission==="granted"?[2]:[4,Notification.requestPermission()];case 1:if(t=n.sent(),t==="granted")return[2];throw t==="denied"?Oe.create("permission-blocked"):Oe.create("permission-default")}})})},e.prototype.usePublicVapidKey=function(t){if(this.vapidKey!==null)throw Oe.create("use-vapid-key-after-get-token");if(typeof t!="string"||t.length===0)throw Oe.create("invalid-vapid-key");this.vapidKey=t},e.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Oe.create("invalid-sw-registration");if(this.swRegistration)throw Oe.create("use-sw-after-get-token");this.swRegistration=t},e.prototype.onMessage=function(t){var n=this;return this.onMessageCallback=t,function(){n.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw Oe.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw Oe.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(t,n){return A(this,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return r=Xz(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return i=s.sent(),i.logEvent(r,{message_id:n[W1],message_name:n[wz],message_time:n[bz],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},e}();Zz="messaging";t6={isSupported:$1};K.INTERNAL.registerComponent(new qe(Zz,e6,"PUBLIC").setServiceProps(t6))});var Z1={};Rr(Z1);var eD=Le(()=>{J1()});function c6(e){lD=e}function fD(e,t){var n=e.length-t.length;if(n<0||n>1)throw Wt.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}function l6(){var e=gt.getInstance().installationsService.getId();return e.then(function(t){hD=t}),e}function Uw(){return hD}function f6(){var e=gt.getInstance().installationsService.getToken();return e.then(function(t){}),e}function m6(){var e=Gt.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function pD(){var e=Gt.getInstance().document,t=e.visibilityState;switch(t){case"visible":return su.VISIBLE;case"hidden":return su.HIDDEN;default:return su.UNKNOWN}}function g6(){var e=Gt.getInstance().navigator,t=e.connection,n=t&&t.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function y6(e){if(e.length===0||e.length>d6)return!1;var t=h6.some(function(n){return e.startsWith(n)});return!t&&!!e.match(p6)}function _6(e){return e.length!==0&&e.length<=v6}function I6(e){var t=T6();return t?(dD(t),Promise.resolve()):A6(e).then(dD).then(function(n){return S6(n)},function(){})}function T6(){var e=Gt.getInstance().localStorage;if(!!e){var t=e.getItem(uD);if(!(!t||!k6(t))){var n=e.getItem(aD);if(!!n)try{var r=JSON.parse(n);return r}catch(i){return}}}}function S6(e){var t=Gt.getInstance().localStorage;!e||!t||(t.setItem(aD,JSON.stringify(e)),t.setItem(uD,String(Date.now()+gt.getInstance().configTimeToLive*60*60*1e3)))}function A6(e){return f6().then(function(t){var n=gt.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+n+"/namespaces/fireperf:fetch?key="+gt.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:E6+" "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:gt.getInstance().getAppId(),app_version:nD,sdk_version:b6})});return fetch(i).then(function(s){if(s.ok)return s.json();throw Wt.create("RC response not ok")})}).catch(function(){hi.info(C6)})}function dD(e){if(!e)return e;var t=gt.getInstance(),n=e.entries||{};return n.fpr_enabled!==void 0?t.loggingEnabled=String(n.fpr_enabled)==="true":t.loggingEnabled=w6.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),n.fpr_vc_network_request_sampling_rate!==void 0&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),n.fpr_vc_trace_sampling_rate!==void 0&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=vD(t.tracesSamplingRate),t.logNetworkAfterSampling=vD(t.networkRequestsSamplingRate),e}function k6(e){return Number(e)>Date.now()}function vD(e){return Math.random()<=e}function mD(){return jw=2,Vw=Vw||N6(),Vw}function R6(){return jw===3}function N6(){return O6().then(function(){return l6()}).then(function(e){return I6(e)}).then(function(){return gD()},function(){return gD()})}function O6(){var e=Gt.getInstance().document;return new Promise(function(t){if(e&&e.readyState!=="complete"){var n=function(){e.readyState==="complete"&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()})}function gD(){jw=3}function D6(){_D||(Ad(x6),_D=!0)}function Ad(e){setTimeout(function(){if(Cd!==0){if(!so.length)return Ad(Bw);L6()}},e)}function L6(){var e=so.splice(0,P6),t=e.map(function(r){return{source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}}),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:gt.getInstance().logSource,log_event:t};M6(n,e).catch(function(){so=oe(oe([],e),so),Cd--,hi.info("Tries left: "+Cd+"."),Ad(Bw)})}function M6(e,t){return F6(e).then(function(n){return n.ok||hi.info("Call to Firebase backend failed."),n.json()}).then(function(n){var r=Number(n.nextRequestWaitMillis),i=Bw;isNaN(r)||(i=Math.max(r,i));var s=n.logResponseDetails;Array.isArray(s)&&s.length>0&&s[0].responseAction==="RETRY_REQUEST_LATER"&&(so=oe(oe([],t),so),hi.info("Retry transport request later.")),Cd=yD,Ad(i)})}function F6(e){var t=gt.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}function U6(e){if(!e.eventTime||!e.message)throw Wt.create("invalid cc log");so=oe(oe([],so),[e])}function j6(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(void 0,t);U6({message:r,eventTime:Date.now()})}}function bD(e,t){qw||(qw=j6(B6)),qw(e,t)}function kd(e){var t=gt.getInstance();!t.instrumentationEnabled&&e.isAuto||!t.dataCollectionEnabled&&!e.isAuto||!Gt.getInstance().requiredApisAvailable()||e.isAuto&&pD()!==su.VISIBLE||(R6()?Ww(e):mD().then(function(){return Ww(e)},function(){return Ww(e)}))}function Ww(e){if(!!Uw()){var t=gt.getInstance();!t.loggingEnabled||!t.logTraceAfterSampling||setTimeout(function(){return bD(e,1)},0)}}function V6(e){var t=gt.getInstance();if(!!t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n===r||n===i||!t.loggingEnabled||!t.logNetworkAfterSampling||setTimeout(function(){return bD(e,0)},0)}}function B6(e,t){return t===0?q6(e):W6(e)}function q6(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:wD(),network_request_metric:t};return JSON.stringify(n)}function W6(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};Object.keys(e.counters).length!==0&&(t.counters=e.counters);var n=e.getAttributes();Object.keys(n).length!==0&&(t.custom_attributes=n);var r={application_info:wD(),trace_metric:t};return JSON.stringify(r)}function wD(){return{google_app_id:gt.getInstance().getAppId(),app_instance_id:Uw(),web_app_info:{sdk_version:nD,page_url:Gt.getInstance().getUrl(),service_worker_status:m6(),visibility_state:pD(),effective_connection_type:g6()},application_process_state:0}}function z6(e,t){return e.length===0||e.length>G6?!1:t&&t.startsWith(rD)&&H6.indexOf(e)>-1||!e.startsWith(K6)}function Q6(e){var t=Math.floor(e);return t<e&&hi.info("Metric value should be an Integer, setting the value as : "+t+"."),t}function ED(e){var t=e;if(!(!t||t.responseStart===void 0)){var n=Gt.getInstance().getTimeOrigin(),r=Math.floor((t.startTime+n)*1e3),i=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,s=Math.floor((t.responseEnd-t.startTime)*1e3),a=t.name&&t.name.split("?")[0],c={url:a,responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:s};V6(c)}}function ID(){!Uw()||(setTimeout(function(){return $6()},0),setTimeout(function(){return X6()},0),setTimeout(function(){return J6()},0))}function X6(){for(var e=Gt.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){var i=r[n];ED(i)}e.setupObserver("resource",ED)}function $6(){var e=Gt.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout(function(){Rl.createOobTrace(t,n),r=void 0},Y6);e.onFirstInputDelay(function(i){r&&(clearTimeout(r),Rl.createOobTrace(t,n,i))})}else Rl.createOobTrace(t,n)}function J6(){for(var e=Gt.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){var i=r[n];TD(i)}e.setupObserver("measure",TD)}function TD(e){var t=e.name;t.substring(0,Lw.length)!==Lw&&Rl.createUserTimingTrace(t)}function tQ(e){var t=function(n,r){if(n.name!==eQ)throw Wt.create("FB not default");if(typeof window=="undefined")throw Wt.create("no window");return c6(window),gt.getInstance().firebaseAppInstance=n,gt.getInstance().installationsService=r,new Z6(n)};e.INTERNAL.registerComponent(new qe("performance",function(n){var r=n.getProvider("app").getImmediate(),i=n.getProvider("installations").getImmediate();return t(r,i)},"PUBLIC")),e.registerVersion(i6,tD)}var i6,tD,nD,o6,s6,Lw,rD,iD,oD,sD,aD,uD,a6,cD,xt,u6,Wt,hi,Mw,lD,Gt,Fw,gt,hD,su,h6,p6,d6,v6,b6,w6,E6,C6,jw,Vw,Bw,x6,yD,P6,Cd,so,_D,qw,G6,K6,H6,Rl,Y6,Z6,eQ,SD=Le(()=>{Cn();Fc();yn();Vn();Oi();fr();i6="@firebase/performance",tD="0.4.15";nD=tD,o6="FB-PERF-TRACE-START",s6="FB-PERF-TRACE-STOP",Lw="FB-PERF-TRACE-MEASURE",rD="_wt_",iD="_fp",oD="_fcp",sD="_fid",aD="@firebase/performance/config",uD="@firebase/performance/configexpire",a6="performance",cD="Performance";u6=(xt={},xt["trace started"]="Trace {$traceName} was started before.",xt["trace stopped"]="Trace {$traceName} is not running.",xt["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",xt["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",xt["no window"]="Window is not available.",xt["no app id"]="App id is not available.",xt["no project id"]="Project id is not available.",xt["no api key"]="Api key is not available.",xt["invalid cc log"]="Attempted to queue invalid cc event",xt["FB not default"]="Performance can only start when Firebase app instance is the default one.",xt["RC response not ok"]="RC response is not ok",xt["invalid attribute name"]="Attribute name {$attributeName} is invalid.",xt["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",xt["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",xt["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",xt),Wt=new _n(a6,cD,u6);hi=new Bn(cD);hi.logLevel=le.INFO;Gt=function(){function e(t){if(this.window=t,!t)throw Wt.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(t){!this.performance||!this.performance.mark||this.performance.mark(t)},e.prototype.measure=function(t,n,r){!this.performance||!this.performance.measure||this.performance.measure(t,n,r)},e.prototype.getEntriesByType=function(t){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(t)},e.prototype.getEntriesByName=function(t){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(t)},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return!fetch||!Promise||!this.navigator||!this.navigator.cookieEnabled?(hi.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):ic()?!0:(hi.info("IndexedDB is not supported by current browswer"),!1)},e.prototype.setupObserver=function(t,n){if(!!this.PerformanceObserver){var r=new this.PerformanceObserver(function(i){for(var s=0,a=i.getEntries();s<a.length;s++){var c=a[s];n(c)}});r.observe({entryTypes:[t]})}},e.getInstance=function(){return Mw===void 0&&(Mw=new e(lD)),Mw},e}();gt=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=fD("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=fD("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw Wt.create("no app id");return t},e.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw Wt.create("no project id");return t},e.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw Wt.create("no api key");return t},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return Fw===void 0&&(Fw=new e),Fw},e}();(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"})(su||(su={}));h6=["firebase_","google_","ga_"],p6=new RegExp("^[a-zA-Z]\\w*$"),d6=40,v6=100;b6="0.0.1",w6={loggingEnabled:!0},E6="FIREBASE_INSTALLATIONS_AUTH";C6="Could not fetch config, will use default configs";jw=1;Bw=10*1e3,x6=5.5*1e3,yD=3,P6=1e3,Cd=yD,so=[],_D=!1;G6=100,K6="_",H6=[iD,oD,sD];Rl=function(){function e(t,n,r){n===void 0&&(n=!1),this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=Gt.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=o6+"-"+this.randomId+"-"+this.name,this.traceStopMark=s6+"-"+this.randomId+"-"+this.name,this.traceMeasure=r||Lw+"-"+this.randomId+"-"+this.name,r&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(this.state!==1)throw Wt.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(this.state!==2)throw Wt.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),kd(this)},e.prototype.record=function(t,n,r){if(t<=0)throw Wt.create("nonpositive trace startTime",{traceName:this.name});if(n<=0)throw Wt.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(n*1e3),this.startTimeUs=Math.floor(t*1e3),r&&r.attributes&&(this.customAttributes=Ee({},r.attributes)),r&&r.metrics)for(var i=0,s=Object.keys(r.metrics);i<s.length;i++){var a=s[i];isNaN(Number(r.metrics[a]))||(this.counters[a]=Number(Math.floor(r.metrics[a])))}kd(this)},e.prototype.incrementMetric=function(t,n){n===void 0&&(n=1),this.counters[t]===void 0?this.putMetric(t,n):this.putMetric(t,this.counters[t]+n)},e.prototype.putMetric=function(t,n){if(z6(t,this.name))this.counters[t]=Q6(n);else throw Wt.create("invalid custom metric name",{customMetricName:t})},e.prototype.getMetric=function(t){return this.counters[t]||0},e.prototype.putAttribute=function(t,n){var r=y6(t),i=_6(n);if(r&&i){this.customAttributes[t]=n;return}if(!r)throw Wt.create("invalid attribute name",{attributeName:t});if(!i)throw Wt.create("invalid attribute value",{attributeValue:n})},e.prototype.getAttribute=function(t){return this.customAttributes[t]},e.prototype.removeAttribute=function(t){this.customAttributes[t]!==void 0&&delete this.customAttributes[t]},e.prototype.getAttributes=function(){return Ee({},this.customAttributes)},e.prototype.setStartTime=function(t){this.startTimeUs=t},e.prototype.setDuration=function(t){this.durationUs=t},e.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),n=t&&t[0];n&&(this.durationUs=Math.floor(n.duration*1e3),this.startTimeUs=Math.floor((n.startTime+this.api.getTimeOrigin())*1e3))},e.createOobTrace=function(t,n,r){var i=Gt.getInstance().getUrl();if(!!i){var s=new e(rD+i,!0),a=Math.floor(Gt.getInstance().getTimeOrigin()*1e3);s.setStartTime(a),t&&t[0]&&(s.setDuration(Math.floor(t[0].duration*1e3)),s.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),s.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),s.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));var c="first-paint",l="first-contentful-paint";if(n){var h=n.find(function(g){return g.name===c});h&&h.startTime&&s.putMetric(iD,Math.floor(h.startTime*1e3));var d=n.find(function(g){return g.name===l});d&&d.startTime&&s.putMetric(oD,Math.floor(d.startTime*1e3)),r&&s.putMetric(sD,Math.floor(r*1e3))}kd(s)}},e.createUserTimingTrace=function(t){var n=new e(t,!1,t);kd(n)},e}();Y6=5e3;Z6=function(){function e(t){this.app=t,Gt.getInstance().requiredApisAvailable()&&oc().then(function(n){n&&(D6(),mD().then(ID,ID))}).catch(function(n){hi.info("Environment doesn't support IndexedDB: "+n)})}return e.prototype.trace=function(t){return new Rl(t)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return gt.getInstance().instrumentationEnabled},set:function(t){gt.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return gt.getInstance().dataCollectionEnabled},set:function(t){gt.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),e}();eQ="[DEFAULT]";tQ(K)});var CD={};Rr(CD);var AD=Le(()=>{SD()});function iQ(e,t){return e instanceof Or&&e.code.indexOf(t)!==-1}function oQ(e){return e===void 0&&(e=navigator),e.languages&&e.languages[0]||e.language}function dQ(e,t){return e===void 0&&(e={}),t===void 0&&(t={}),Object.keys(Ee(Ee({},e),t))}function Rd(e,t){var n=e.target.error||void 0;return Yn.create(t,{originalErrorMessage:n&&n.message})}function gQ(){return new Promise(function(e,t){var n=indexedDB.open(vQ,mQ);n.onerror=function(r){t(Rd(r,"storage-open"))},n.onsuccess=function(r){e(r.target.result)},n.onupgradeneeded=function(r){var i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(bs,{keyPath:"compositeKey"})}}})}function bQ(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(function(){clearTimeout(s),r(Yn.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function wQ(e){if(!(e instanceof Or)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}function TQ(e){e.INTERNAL.registerComponent(new qe("remoteConfig",t,"PUBLIC").setMultipleInstances(!0)),e.registerVersion(RD,IQ);function t(n,r){var i=r.instanceIdentifier,s=n.getProvider("app").getImmediate(),a=n.getProvider("installations").getImmediate();if(typeof window=="undefined")throw Yn.create("registration-window");var c=s.options,l=c.projectId,h=c.apiKey,d=c.appId;if(!l)throw Yn.create("registration-project-id");if(!h)throw Yn.create("registration-api-key");if(!d)throw Yn.create("registration-app-id");i=i||"firebase";var g=new yQ(d,s.name,i),m=new _Q(g),_=new Bn(RD);_.logLevel=le.ERROR;var w=new sQ(a,e.SDK_VERSION,i,l,h,d),E=new EQ(w,g),T=new nQ(E,g,m,_),S=new pQ(s,T,m,g,_);return S.ensureInitialized(),S}}var nQ,un,rQ,Yn,sQ,aQ,uQ,cQ,kD,lQ,Gw,fQ,hQ,pQ,bs,vQ,mQ,yQ,_Q,EQ,RD,IQ,ND=Le(()=>{Cn();Fc();yn();Vn();Oi();fr();nQ=function(){function e(t,n,r,i){this.client=t,this.storage=n,this.storageCache=r,this.logger=i}return e.prototype.isCachedDataFresh=function(t,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var r=Date.now()-n,i=r<=t;return this.logger.debug("Config fetch cache check."+(" Cache age millis: "+r+".")+(" Cache max age millis (minimumFetchIntervalMillis setting): "+t+".")+(" Is cache hit: "+i+".")),i},e.prototype.fetch=function(t){return A(this,void 0,void 0,function(){var n,r,i,s,a;return C(this,function(c){switch(c.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return n=c.sent(),r=n[0],i=n[1],i&&this.isCachedDataFresh(t.cacheMaxAgeMillis,r)?[2,i]:(t.eTag=i&&i.eTag,[4,this.client.fetch(t)]);case 2:return s=c.sent(),a=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],s.status===200&&a.push(this.storage.setLastSuccessfulFetchResponse(s)),[4,Promise.all(a)];case 3:return c.sent(),[2,s]}})})},e}();rQ=(un={},un["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",un["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",un["registration-api-key"]="Undefined API key. Check Firebase app initialization.",un["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",un["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",un["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",un["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",un["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",un["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",un["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',un["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',un["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",un["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",un),Yn=new _n("remoteconfig","Remote Config",rQ);sQ=function(){function e(t,n,r,i,s,a){this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=a}return e.prototype.fetch=function(t){return A(this,void 0,void 0,function(){var n,r,i,s,a,c,l,h,d,g,m,_,w,E,T,S,R,O,U;return C(this,function(L){switch(L.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:n=L.sent(),r=n[0],i=n[1],s=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",a=s+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},l={sdk_version:this.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:this.appId,language_code:oQ()},h={method:"POST",headers:c,body:JSON.stringify(l)},d=fetch(a,h),g=new Promise(function(P,ue){t.signal.addEventListener(function(){var Je=new Error("The operation was aborted.");Je.name="AbortError",ue(Je)})}),L.label=2;case 2:return L.trys.push([2,5,,6]),[4,Promise.race([d,g])];case 3:return L.sent(),[4,d];case 4:return m=L.sent(),[3,6];case 5:throw _=L.sent(),w="fetch-client-network",_.name==="AbortError"&&(w="fetch-timeout"),Yn.create(w,{originalErrorMessage:_.message});case 6:if(E=m.status,T=m.headers.get("ETag")||void 0,m.status!==200)return[3,11];O=void 0,L.label=7;case 7:return L.trys.push([7,9,,10]),[4,m.json()];case 8:return O=L.sent(),[3,10];case 9:throw U=L.sent(),Yn.create("fetch-client-parse",{originalErrorMessage:U.message});case 10:S=O.entries,R=O.state,L.label=11;case 11:if(R==="INSTANCE_STATE_UNSPECIFIED"?E=500:R==="NO_CHANGE"?E=304:(R==="NO_TEMPLATE"||R==="EMPTY_CONFIG")&&(S={}),E!==304&&E!==200)throw Yn.create("fetch-status",{httpStatus:E});return[2,{status:E,eTag:T,config:S}]}})})},e}();aQ=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(t){this.listeners.push(t)},e.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},e}();uQ=!1,cQ="",kD=0,lQ=["1","true","t","yes","y","on"],Gw=function(){function e(t,n){n===void 0&&(n=cQ),this._source=t,this._value=n}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return this._source==="static"?uQ:lQ.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if(this._source==="static")return kD;var t=Number(this._value);return isNaN(t)&&(t=kD),t},e.prototype.getSource=function(){return this._source},e}();fQ=60*1e3,hQ=12*60*60*1e3,pQ=function(){function e(t,n,r,i,s){this.app=t,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:fQ,minimumFetchIntervalMillis:hQ},this.defaultConfig={}}return e.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=le.DEBUG;break;case"silent":this._logger.logLevel=le.SILENT;break;default:this._logger.logLevel=le.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return A(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=i.sent(),n=t[0],r=t[1],!n||!n.config||!n.eTag||n.eTag===r?[2,!1]:[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])];case 2:return i.sent(),[2,!0]}})})},e.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},e.prototype.fetch=function(){return A(this,void 0,void 0,function(){var t,n,r,i=this;return C(this,function(s){switch(s.label){case 0:t=new aQ,setTimeout(function(){return A(i,void 0,void 0,function(){return C(this,function(a){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return s.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return s.sent(),[3,6];case 4:return n=s.sent(),r=iQ(n,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(r)];case 5:throw s.sent(),n;case 6:return[2]}})})},e.prototype.fetchAndActivate=function(){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},e.prototype.getAll=function(){var t=this;return dQ(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(n,r){return n[r]=t.getValue(r),n},{})},e.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},e.prototype.getNumber=function(t){return this.getValue(t).asNumber()},e.prototype.getString=function(t){return this.getValue(t).asString()},e.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var n=this._storageCache.getActiveConfig();return n&&n[t]!==void 0?new Gw("remote",n[t]):this.defaultConfig&&this.defaultConfig[t]!==void 0?new Gw("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new Gw("static"))},e}();bs="app_namespace_store",vQ="firebase_remote_config",mQ=1;yQ=function(){function e(t,n,r,i){i===void 0&&(i=gQ()),this.appId=t,this.appName=n,this.namespace=r,this.openDbPromise=i}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(t){return this.set("active_config",t)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(t){return A(this,void 0,void 0,function(){var n,r=this;return C(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(s,a){var c=n.transaction([bs],"readonly"),l=c.objectStore(bs),h=r.createCompositeKey(t);try{var d=l.get(h);d.onerror=function(g){a(Rd(g,"storage-get"))},d.onsuccess=function(g){var m=g.target.result;s(m?m.value:void 0)}}catch(g){a(Yn.create("storage-get",{originalErrorMessage:g&&g.message}))}})]}})})},e.prototype.set=function(t,n){return A(this,void 0,void 0,function(){var r,i=this;return C(this,function(s){switch(s.label){case 0:return[4,this.openDbPromise];case 1:return r=s.sent(),[2,new Promise(function(a,c){var l=r.transaction([bs],"readwrite"),h=l.objectStore(bs),d=i.createCompositeKey(t);try{var g=h.put({compositeKey:d,value:n});g.onerror=function(m){c(Rd(m,"storage-set"))},g.onsuccess=function(){a()}}catch(m){c(Yn.create("storage-set",{originalErrorMessage:m&&m.message}))}})]}})})},e.prototype.delete=function(t){return A(this,void 0,void 0,function(){var n,r=this;return C(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(s,a){var c=n.transaction([bs],"readwrite"),l=c.objectStore(bs),h=r.createCompositeKey(t);try{var d=l.delete(h);d.onerror=function(g){a(Rd(g,"storage-delete"))},d.onsuccess=function(){s()}}catch(g){a(Yn.create("storage-delete",{originalErrorMessage:g&&g.message}))}})]}})})},e.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},e}();_Q=function(){function e(t){this.storage=t}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return A(this,void 0,void 0,function(){var t,n,r,i,s,a;return C(this,function(c){switch(c.label){case 0:return t=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,t];case 1:return i=c.sent(),i&&(this.lastFetchStatus=i),[4,n];case 2:return s=c.sent(),s&&(this.lastSuccessfulFetchTimestampMillis=s),[4,r];case 3:return a=c.sent(),a&&(this.activeConfig=a),[2]}})})},e.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},e.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},e}();EQ=function(){function e(t,n){this.client=t,this.storage=n}return e.prototype.fetch=function(t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return n=r.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,n)]}})})},e.prototype.attemptFetch=function(t,n){var r=n.throttleEndTimeMillis,i=n.backoffCount;return A(this,void 0,void 0,function(){var s,a,c;return C(this,function(l){switch(l.label){case 0:return[4,bQ(t.signal,r)];case 1:l.sent(),l.label=2;case 2:return l.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return s=l.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return l.sent(),[2,s];case 5:if(a=l.sent(),!wQ(a))throw a;return c={throttleEndTimeMillis:Date.now()+uc(i),backoffCount:i+1},[4,this.storage.setThrottleMetadata(c)];case 6:return l.sent(),[2,this.attemptFetch(t,c)];case 7:return[2]}})})},e}(),RD="@firebase/remote-config",IQ="0.1.40";TQ(K)});var OD={};Rr(OD);var xD=Le(()=>{ND()});function Kw(e){return"storage/"+e}function Hw(){var e="An unknown error occurred, please check the error payload for server response.";return new ct("unknown",e)}function AQ(e){return new ct("object-not-found","Object '"+e+"' does not exist.")}function kQ(e){return new ct("quota-exceeded","Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function RQ(){var e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ct("unauthenticated",e)}function NQ(){return new ct("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function OQ(e){return new ct("unauthorized","User does not have permission to access '"+e+"'.")}function xQ(){return new ct("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function LD(){return new ct("canceled","User canceled the upload/download.")}function PQ(e){return new ct("invalid-url","Invalid URL '"+e+"'.")}function DQ(e){return new ct("invalid-default-bucket","Invalid default bucket '"+e+"'.")}function LQ(){return new ct("no-default-bucket","No default bucket found. Did you set the '"+DD+"' property when initializing the app?")}function MD(){return new ct("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function MQ(){return new ct("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function FQ(){return new ct("no-download-url","The given file does not have any download URLs.")}function ws(e){return new ct("invalid-argument",e)}function FD(){return new ct("app-deleted","The Firebase app was deleted.")}function UD(e){return new ct("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Nl(e,t){return new ct("invalid-format","String does not match format '"+e+"': "+t)}function Nd(e){throw new ct("internal-error","Internal error: "+e)}function jD(e,t){switch(e){case Xn.RAW:return new zw(VD(t));case Xn.BASE64:case Xn.BASE64URL:return new zw(BD(e,t));case Xn.DATA_URL:return new zw(jQ(t),VQ(t))}throw Hw()}function VD(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)==55296){var i=n<e.length-1&&(e.charCodeAt(n+1)&64512)==56320;if(!i)t.push(239,191,189);else{var s=r,a=e.charCodeAt(++n);r=65536|(s&1023)<<10|a&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}}else(r&64512)==56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function UQ(e){var t;try{t=decodeURIComponent(e)}catch(n){throw Nl(Xn.DATA_URL,"Malformed data URL.")}return VD(t)}function BD(e,t){switch(e){case Xn.BASE64:{var n=t.indexOf("-")!==-1,r=t.indexOf("_")!==-1;if(n||r){var i=n?"-":"_";throw Nl(e,"Invalid character '"+i+"' found: is it base64url encoded?")}break}case Xn.BASE64URL:{var s=t.indexOf("+")!==-1,a=t.indexOf("/")!==-1;if(s||a){var i=s?"+":"/";throw Nl(e,"Invalid character '"+i+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}var c;try{c=atob(t)}catch(d){throw Nl(e,"Invalid character found")}for(var l=new Uint8Array(c.length),h=0;h<c.length;h++)l[h]=c.charCodeAt(h);return l}function jQ(e){var t=new qD(e);return t.base64?BD(Xn.BASE64,t.rest):UQ(t.rest)}function VQ(e){var t=new qD(e);return t.contentType}function BQ(e,t){var n=e.length>=t.length;return n?e.substring(e.length-t.length)===t:!1}function Qw(e){switch(e){case"running":case"pausing":case"canceling":return cn.RUNNING;case"paused":return cn.PAUSED;case"success":return cn.SUCCESS;case"canceled":return cn.CANCELED;case"error":return cn.ERROR;default:return cn.ERROR}}function HQ(e,t,n){var r=1,i=null,s=!1,a=0;function c(){return a===2}var l=!1;function h(){for(var w=[],E=0;E<arguments.length;E++)w[E]=arguments[E];l||(l=!0,t.apply(null,w))}function d(w){i=setTimeout(function(){i=null,e(g,c())},w)}function g(w){for(var E=[],T=1;T<arguments.length;T++)E[T-1]=arguments[T];if(!l){if(w){h.call.apply(h,oe([null,w],E));return}var S=c()||s;if(S){h.call.apply(h,oe([null,w],E));return}r<64&&(r*=2);var R;a===1?(a=2,R=0):R=(r+Math.random())*1e3,d(R)}}var m=!1;function _(w){m||(m=!0,!l&&(i!==null?(w||(a=2),clearTimeout(i),d(0)):w||(a=1)))}return d(0),setTimeout(function(){s=!0,_(!0)},n),_}function zQ(e){e(!1)}function QQ(e){return e!==void 0}function YQ(e){return typeof e=="function"}function XQ(e){return typeof e=="object"&&!Array.isArray(e)}function Od(e){return typeof e=="string"||e instanceof String}function WD(e){return Yw()&&e instanceof Blob}function Yw(){return typeof Blob!="undefined"}function Xw(e,t,n,r){if(r<t)throw ws("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw ws("Invalid value for '"+e+"'. Expected "+n+" or less.")}function ao(e,t){var n=t.match(/^(\w+):\/\/.+/),r=n==null?void 0:n[1],i=t;return r==null&&(i="https://"+t),i+"/v0"+e}function GD(e){var t=encodeURIComponent,n="?";for(var r in e)if(e.hasOwnProperty(r)){var i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}function JQ(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function ZQ(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function e5(e,t){t&&(e["X-Firebase-GMPID"]=t)}function t5(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function n5(e,t,n,r,i,s){var a=GD(e.urlParams),c=e.url+a,l=Object.assign({},e.headers);return e5(l,t),JQ(l,n),ZQ(l,s),t5(l,r),new $Q(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}function r5(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function i5(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=r5();if(n!==void 0){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}else{if(Yw())return new Blob(e);throw new ct("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function o5(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}function Jw(e){var t;try{t=JSON.parse(e)}catch(n){return null}return XQ(t)?t:null}function s5(e){if(e.length===0)return null;var t=e.lastIndexOf("/");if(t===-1)return"";var n=e.slice(0,t);return n}function a5(e,t){var n=t.split("/").filter(function(r){return r.length>0}).join("/");return e.length===0?n:e+"/"+n}function KD(e){var t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}function u5(e,t){return t}function c5(e){return!Od(e)||e.length<2?e:KD(e)}function Dd(){if(Pd)return Pd;var e=[];e.push(new ln("bucket")),e.push(new ln("generation")),e.push(new ln("metageneration")),e.push(new ln("name","fullPath",!0));function t(s,a){return c5(a)}var n=new ln("name");n.xform=t,e.push(n);function r(s,a){return a!==void 0?Number(a):a}var i=new ln("size");return i.xform=r,e.push(i),e.push(new ln("timeCreated")),e.push(new ln("updated")),e.push(new ln("md5Hash",null,!0)),e.push(new ln("cacheControl",null,!0)),e.push(new ln("contentDisposition",null,!0)),e.push(new ln("contentEncoding",null,!0)),e.push(new ln("contentLanguage",null,!0)),e.push(new ln("contentType",null,!0)),e.push(new ln("metadata","customMetadata",!0)),Pd=e,Pd}function l5(e,t){function n(){var r=e.bucket,i=e.fullPath,s=new $n(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function f5(e,t,n){var r={};r.type="file";for(var i=n.length,s=0;s<i;s++){var a=n[s];r[a.local]=a.xform(r,t[a.server])}return l5(r,e),r}function HD(e,t,n){var r=Jw(t);if(r===null)return null;var i=r;return f5(e,i,n)}function h5(e,t,n){var r=Jw(t);if(r===null||!Od(r.downloadTokens))return null;var i=r.downloadTokens;if(i.length===0)return null;var s=encodeURIComponent,a=i.split(","),c=a.map(function(l){var h=e.bucket,d=e.fullPath,g="/b/"+s(h)+"/o/"+s(d),m=ao(g,n),_=GD({alt:"media",token:l});return m+_});return c[0]}function Zw(e,t){for(var n={},r=t.length,i=0;i<r;i++){var s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}function p5(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[zD])for(var i=0,s=n[zD];i<s.length;i++){var a=s[i],c=a.replace(/\/$/,""),l=e._makeStorageReference(new $n(t,c));r.prefixes.push(l)}if(n[QD])for(var h=0,d=n[QD];h<d.length;h++){var g=d[h],l=e._makeStorageReference(new $n(t,g.name));r.items.push(l)}return r}function d5(e,t,n){var r=Jw(n);if(r===null)return null;var i=r;return p5(e,t,i)}function Wr(e){if(!e)throw Hw()}function Ld(e,t){function n(r,i){var s=HD(e,i,t);return Wr(s!==null),s}return n}function v5(e,t){function n(r,i){var s=d5(e,t,i);return Wr(s!==null),s}return n}function m5(e,t){function n(r,i){var s=HD(e,i,t);return Wr(s!==null),h5(s,i,e.host)}return n}function au(e){function t(n,r){var i;return n.getStatus()===401?n.getResponseText().includes("Firebase App Check token is invalid")?i=NQ():i=RQ():n.getStatus()===402?i=kQ(e.bucket):n.getStatus()===403?i=OQ(e.path):i=r,i.serverResponse=r.serverResponse,i}return t}function Md(e){var t=au(e);function n(r,i){var s=t(r,i);return r.getStatus()===404&&(s=AQ(e.path)),s.serverResponse=i.serverResponse,s}return n}function YD(e,t,n){var r=t.fullServerUrl(),i=ao(r,e.host),s="GET",a=e.maxOperationRetryTime,c=new pi(i,s,Ld(e,n),a);return c.errorHandler=Md(t),c}function g5(e,t,n,r,i){var s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);var a=t.bucketOnlyServerUrl(),c=ao(a,e.host),l="GET",h=e.maxOperationRetryTime,d=new pi(c,l,v5(e,t.bucket),h);return d.urlParams=s,d.errorHandler=au(t),d}function y5(e,t,n){var r=t.fullServerUrl(),i=ao(r,e.host),s="GET",a=e.maxOperationRetryTime,c=new pi(i,s,m5(e,n),a);return c.errorHandler=Md(t),c}function _5(e,t,n,r){var i=t.fullServerUrl(),s=ao(i,e.host),a="PATCH",c=Zw(n,r),l={"Content-Type":"application/json; charset=utf-8"},h=e.maxOperationRetryTime,d=new pi(s,a,Ld(e,r),h);return d.headers=l,d.body=c,d.errorHandler=Md(t),d}function b5(e,t){var n=t.fullServerUrl(),r=ao(n,e.host),i="DELETE",s=e.maxOperationRetryTime;function a(l,h){}var c=new pi(r,i,a,s);return c.successCodes=[200,204],c.errorHandler=Md(t),c}function w5(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function XD(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=w5(null,t)),r}function E5(e,t,n,r,i){var s=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){for(var O="",U=0;U<2;U++)O=O+Math.random().toString().slice(2);return O}var l=c();a["Content-Type"]="multipart/related; boundary="+l;var h=XD(t,r,i),d=Zw(h,n),g="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+h.contentType+`\r
\r
`,m=`\r
--`+l+"--",_=$w.getBlob(g,r,m);if(_===null)throw MD();var w={name:h.fullPath},E=ao(s,e.host),T="POST",S=e.maxUploadRetryTime,R=new pi(E,T,Ld(e,n),S);return R.urlParams=w,R.headers=a,R.body=_.uploadData(),R.errorHandler=au(t),R}function e0(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(i){Wr(!1)}var r=t||["active"];return Wr(!!n&&r.indexOf(n)!==-1),n}function I5(e,t,n,r,i){var s=t.bucketOnlyServerUrl(),a=XD(t,r,i),c={name:a.fullPath},l=ao(s,e.host),h="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},g=Zw(a,n),m=e.maxUploadRetryTime;function _(E){e0(E);var T;try{T=E.getResponseHeader("X-Goog-Upload-URL")}catch(S){Wr(!1)}return Wr(Od(T)),T}var w=new pi(l,h,_,m);return w.urlParams=c,w.headers=d,w.body=g,w.errorHandler=au(t),w}function T5(e,t,n,r){var i={"X-Goog-Upload-Command":"query"};function s(h){var d=e0(h,["active","final"]),g=null;try{g=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch(_){Wr(!1)}g||Wr(!1);var m=Number(g);return Wr(!isNaN(m)),new Fd(m,r.size(),d==="final")}var a="POST",c=e.maxUploadRetryTime,l=new pi(n,a,s,c);return l.headers=i,l.errorHandler=au(t),l}function S5(e,t,n,r,i,s,a,c){var l=new Fd(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw MQ();var h=l.total-l.current,d=h;i>0&&(d=Math.min(d,i));var g=l.current,m=g+d,_=d===h?"upload, finalize":"upload",w={"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":l.current},E=r.slice(g,m);if(E===null)throw MD();function T(U,L){var P=e0(U,["active","final"]),ue=l.current+d,Je=r.size(),X;return P==="final"?X=Ld(t,s)(U,L):X=null,new Fd(ue,Je,P==="final",X)}var S="POST",R=t.maxUploadRetryTime,O=new pi(n,S,T,R);return O.headers=w,O.body=E.uploadData(),O.progressCallback=c||null,O.errorHandler=au(e),O}function uu(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then(function(){return e.apply(void 0,t)})}}function A5(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new JD(e,new $w(t),n)}function k5(e){var t={prefixes:[],items:[]};return ZD(e,t).then(function(){return t})}function ZD(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,a;return C(this,function(c){switch(c.label){case 0:return r={pageToken:n},[4,eL(e,r)];case 1:return i=c.sent(),(s=t.prefixes).push.apply(s,i.prefixes),(a=t.items).push.apply(a,i.items),i.nextPageToken==null?[3,3]:[4,ZD(e,t,i.nextPageToken)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function eL(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return t!=null&&typeof t.maxResults=="number"&&Xw("options.maxResults",1,1e3,t.maxResults),n=t||{},r=g5(e.storage,e._location,"/",n.pageToken,n.maxResults),[4,e.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function R5(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=YD(e.storage,e._location,Dd()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}})})}function N5(e,t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return e._throwIfRoot("updateMetadata"),n=_5(e.storage,e._location,t,Dd()),[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}function O5(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return e._throwIfRoot("getDownloadURL"),t=y5(e.storage,e._location,Dd()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise().then(function(r){if(r===null)throw FQ();return r})]}})})}function x5(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return e._throwIfRoot("deleteObject"),t=b5(e.storage,e._location),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}})})}function tL(e,t){var n=a5(e._location.path,t),r=new $n(e._location.bucket,n);return new Ud(e.storage,r)}function t0(e){return/^[A-Za-z]+:\/\//.test(e)}function P5(e,t){return new Ud(e,t)}function nL(e,t){if(e instanceof jd){var n=e;if(n._bucket==null)throw LQ();var r=new Ud(n,n._bucket);return t!=null?nL(r,t):r}else if(t!==void 0){if(t.includes(".."))throw ws('`path` param cannot contain ".."');return tL(e,t)}else return e}function D5(e,t){if(t&&t0(t)){if(e instanceof jd)return P5(e,t);throw ws("To use ref(service, url), the first argument must be a Storage instance.")}else return nL(e,t)}function rL(e,t){var n=t==null?void 0:t[DD];return n==null?null:$n.makeFromBucketSpec(n,e)}function L5(e,t,n){e.host="http://"+t+":"+n}function M5(e,t,n){return e=se(e),A5(e,t,n)}function F5(e){return e=se(e),R5(e)}function U5(e,t){return e=se(e),N5(e,t)}function j5(e,t){return e=se(e),eL(e,t)}function V5(e){return e=se(e),k5(e)}function B5(e){return e=se(e),O5(e)}function q5(e){return e=se(e),x5(e)}function iL(e,t){return e=se(e),D5(e,t)}function W5(e,t){return tL(e,t)}function Q5(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal"),a=new G5(r,new jd(r,i,s,new GQ,n,K.SDK_VERSION));return a}function Y5(e){var t={TaskState:cn,TaskEvent:qQ,StringFormat:Xn,Storage:jd,Reference:Ol};e.INTERNAL.registerComponent(new qe(z5,Q5,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion(K5,H5)}var PD,DD,SQ,CQ,ct,Xn,zw,qD,qQ,cn,Es,WQ,GQ,$n,KQ,$Q,xd,$w,ln,Pd,zD,QD,pi,Fd,$D,C5,JD,Ud,jd,Vd,oL,sL,Ol,G5,K5,H5,z5,aL=Le(()=>{Cn();yn();Vn();fr();PD="firebasestorage.googleapis.com",DD="storageBucket",SQ=2*60*1e3,CQ=10*60*1e3,ct=function(e){W(t,e);function t(n,r){var i=e.call(this,Kw(n),"Firebase Storage: "+r+" ("+Kw(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return t.prototype._codeEquals=function(n){return Kw(n)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(n){this.customData.serverResponse=n,this.customData.serverResponse?this.message=this._baseMessage+`
`+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),t}(Or);Xn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},zw=function(){function e(t,n){this.data=t,this.contentType=n||null}return e}();qD=function(){function e(t){this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(n===null)throw Nl(Xn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;r!=null&&(this.base64=BQ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}return e}();qQ={STATE_CHANGED:"state_changed"},cn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Es||(Es={}));WQ=function(){function e(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Es.NO_ERROR,this.sendPromise_=new Promise(function(n){t.xhr_.addEventListener("abort",function(){t.errorCode_=Es.ABORT,n(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=Es.NETWORK_ERROR,n(t)}),t.xhr_.addEventListener("load",function(){n(t)})})}return e.prototype.send=function(t,n,r,i){if(this.sent_)throw Nd("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(var s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw Nd("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw Nd("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw Nd("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},e.prototype.addUploadProgressListener=function(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)},e.prototype.removeUploadProgressListener=function(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)},e}();GQ=function(){function e(){}return e.prototype.createXhrIo=function(){return new WQ},e}();$n=function(){function e(t,n){this.bucket=t,this.path_=n}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return this.path.length===0},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},e.prototype.bucketOnlyServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o"},e.makeFromBucketSpec=function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(r.path==="")return r;throw DQ(t)},e.makeFromUrl=function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";function s(X){X.path.charAt(X.path.length-1)==="/"&&(X.path_=X.path_.slice(0,-1))}var a="(/(.*))?$",c=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function h(X){X.path_=decodeURIComponent(X.path)}for(var d="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",_=new RegExp("^https?://"+g+"/"+d+"/b/"+i+"/o"+m,"i"),w={bucket:1,path:3},E=n===PD?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",S=new RegExp("^https?://"+E+"/"+i+"/"+T,"i"),R={bucket:1,path:2},O=[{regex:c,indices:l,postModify:s},{regex:_,indices:w,postModify:h},{regex:S,indices:R,postModify:h}],U=0;U<O.length;U++){var L=O[U],P=L.regex.exec(t);if(P){var ue=P[L.indices.bucket],Je=P[L.indices.path];Je||(Je=""),r=new e(ue,Je),L.postModify(r);break}}if(r==null)throw PQ(t);return r},e}(),KQ=function(){function e(t){this.promise_=Promise.reject(t)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(t){},e}();$Q=function(){function e(t,n,r,i,s,a,c,l,h,d,g){var m=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s.slice(),this.additionalRetryCodes_=a.slice(),this.callback_=c,this.errorCallback_=l,this.progressCallback_=d,this.timeout_=h,this.pool_=g,this.promise_=new Promise(function(_,w){m.resolve_=_,m.reject_=w,m.start_()})}return e.prototype.start_=function(){var t=this;function n(i,s){if(s){i(!1,new xd(!1,null,!0));return}var a=t.pool_.createXhrIo();t.pendingXhr_=a;function c(l){var h=l.loaded,d=l.lengthComputable?l.total:-1;t.progressCallback_!==null&&t.progressCallback_(h,d)}t.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(t.url_,t.method_,t.body_,t.headers_).then(function(l){t.progressCallback_!==null&&l.removeUploadProgressListener(c),t.pendingXhr_=null,l=l;var h=l.getErrorCode()===Es.NO_ERROR,d=l.getStatus();if(!h||t.isRetryStatusCode_(d)){var g=l.getErrorCode()===Es.ABORT;i(!1,new xd(!1,null,g));return}var m=t.successCodes_.indexOf(d)!==-1;i(!0,new xd(m,l))})}function r(i,s){var a=t.resolve_,c=t.reject_,l=s.xhr;if(s.wasSuccessCode)try{var h=t.callback_(l,l.getResponseText());QQ(h)?a(h):a()}catch(g){c(g)}else if(l!==null){var d=Hw();d.serverResponse=l.getResponseText(),t.errorCallback_?c(t.errorCallback_(l,d)):c(d)}else if(s.canceled){var d=t.appDelete_?FD():LD();c(d)}else{var d=xQ();c(d)}}this.canceled_?r(!1,new xd(!1,null,!0)):this.backoffId_=HQ(n,r,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&zQ(this.backoffId_),this.pendingXhr_!==null&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(t){var n=t>=500&&t<600,r=[408,429],i=r.indexOf(t)!==-1,s=this.additionalRetryCodes_.indexOf(t)!==-1;return n||i||s},e}(),xd=function(){function e(t,n,r){this.wasSuccessCode=t,this.xhr=n,this.canceled=!!r}return e}();$w=function(){function e(t,n){var r=0,i="";WD(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(WD(this.data_)){var r=this.data_,i=o5(r,t,n);return i===null?null:new e(i)}else{var s=new Uint8Array(this.data_.buffer,t,n-t);return new e(s,!0)}},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(Yw()){var r=t.map(function(l){return l instanceof e?l.data_:l});return new e(i5.apply(null,r))}else{var i=t.map(function(l){return Od(l)?jD(Xn.RAW,l).data:l.data_}),s=0;i.forEach(function(l){s+=l.byteLength});var a=new Uint8Array(s),c=0;return i.forEach(function(l){for(var h=0;h<l.length;h++)a[c++]=l[h]}),new e(a,!0)}},e.prototype.uploadData=function(){return this.data_},e}();ln=function(){function e(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||u5}return e}(),Pd=null;zD="prefixes",QD="items";pi=function(){function e(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return e}();Fd=function(){function e(t,n,r,i){this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}return e}();$D=256*1024;C5=function(){function e(t,n,r){var i=YQ(t)||n!=null||r!=null;if(i)this.next=t,this.error=n,this.complete=r;else{var s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}return e}();JD=function(){function e(t,n,r){var i=this;r===void 0&&(r=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=r,this._mappings=Dd(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(s){i._request=void 0,i._chunkMultiplier=1,s._codeEquals("canceled")?(i._needToFetchStatus=!0,i.completeTransitions_()):(i._error=s,i._transition("error"))},this._metadataErrorHandler=function(s){i._request=void 0,s._codeEquals("canceled")?i.completeTransitions_():(i._error=s,i._transition("error"))},this._promise=new Promise(function(s,a){i._resolve=s,i._reject=a,i._start()}),this._promise.then(null,function(){})}return e.prototype._makeProgressCallback=function(){var t=this,n=this._transferred;return function(r){return t._updateProgress(n+r)}},e.prototype._shouldDoResumable=function(t){return t.size()>256*1024},e.prototype._start=function(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(t){var n=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(r){var i=r[0],s=r[1];switch(n._state){case"running":t(i,s);break;case"canceling":n._transition("canceled");break;case"pausing":n._transition("paused");break}})},e.prototype._createResumable=function(){var t=this;this._resolveToken(function(n,r){var i=I5(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),s=t._ref.storage._makeRequest(i,n,r);t._request=s,s.getPromise().then(function(a){t._request=void 0,t._uploadUrl=a,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},e.prototype._fetchStatus=function(){var t=this,n=this._uploadUrl;this._resolveToken(function(r,i){var s=T5(t._ref.storage,t._ref._location,n,t._blob),a=t._ref.storage._makeRequest(s,r,i);t._request=a,a.getPromise().then(function(c){c=c,t._request=void 0,t._updateProgress(c.current),t._needToFetchStatus=!1,c.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},e.prototype._continueUpload=function(){var t=this,n=$D*this._chunkMultiplier,r=new Fd(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken(function(s,a){var c;try{c=S5(t._ref._location,t._ref.storage,i,t._blob,n,t._mappings,r,t._makeProgressCallback())}catch(h){t._error=h,t._transition("error");return}var l=t._ref.storage._makeRequest(c,s,a);t._request=l,l.getPromise().then(function(h){t._increaseMultiplier(),t._request=void 0,t._updateProgress(h.current),h.finalized?(t._metadata=h.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},e.prototype._increaseMultiplier=function(){var t=$D*this._chunkMultiplier;t<32*1024*1024&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(n,r){var i=YD(t._ref.storage,t._ref._location,t._mappings),s=t._ref.storage._makeRequest(i,n,r);t._request=s,s.getPromise().then(function(a){t._request=void 0,t._metadata=a,t._transition("success")},t._metadataErrorHandler)})},e.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(n,r){var i=E5(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),s=t._ref.storage._makeRequest(i,n,r);t._request=s,s.getPromise().then(function(a){t._request=void 0,t._metadata=a,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},e.prototype._updateProgress=function(t){var n=this._transferred;this._transferred=t,this._transferred!==n&&this._notifyObservers()},e.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":this._state=t,this._request!==void 0&&this._request.cancel();break;case"pausing":this._state=t,this._request!==void 0&&this._request.cancel();break;case"running":var n=this._state==="paused";this._state=t,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=LD(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var t=Qw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n,r,i){var s=this,a=new C5(n,r,i);return this._addObserver(a),function(){s._removeObserver(a)}},e.prototype.then=function(t,n){return this._promise.then(t,n)},e.prototype.catch=function(t){return this.then(null,t)},e.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},e.prototype._removeObserver=function(t){var n=this._observers.indexOf(t);n!==-1&&this._observers.splice(n,1)},e.prototype._notifyObservers=function(){var t=this;this._finishPromise();var n=this._observers.slice();n.forEach(function(r){t._notifyObserver(r)})},e.prototype._finishPromise=function(){if(this._resolve!==void 0){var t=!0;switch(Qw(this._state)){case cn.SUCCESS:uu(this._resolve.bind(null,this.snapshot))();break;case cn.CANCELED:case cn.ERROR:var n=this._reject;uu(n.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(t){var n=Qw(this._state);switch(n){case cn.RUNNING:case cn.PAUSED:t.next&&uu(t.next.bind(t,this.snapshot))();break;case cn.SUCCESS:t.complete&&uu(t.complete.bind(t))();break;case cn.CANCELED:case cn.ERROR:t.error&&uu(t.error.bind(t,this._error))();break;default:t.error&&uu(t.error.bind(t,this._error))()}},e.prototype.resume=function(){var t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t},e.prototype.pause=function(){var t=this._state==="running";return t&&this._transition("pausing"),t},e.prototype.cancel=function(){var t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t},e}();Ud=function(){function e(t,n){this._service=t,n instanceof $n?this._location=n:this._location=$n.makeFromUrl(n,t.host)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var t=new $n(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return KD(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=s5(this._location.path);if(t===null)return null;var n=new $n(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(t){if(this._location.path==="")throw UD(t)},e}();jd=function(){function e(t,n,r,i,s,a){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._pool=i,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=PD,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=SQ,this._maxUploadRetryTime=CQ,this._requests=new Set,s!=null?this._bucket=$n.makeFromBucketSpec(s,this._host):this._bucket=rL(this._host,this.app.options)}return Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._url!=null?this._bucket=$n.makeFromBucketSpec(this._url,t):this._bucket=rL(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Xw("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Xw("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return t=this._authProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:if(n=r.sent(),n!==null)return[2,n.accessToken];r.label=2;case 2:return[2,null]}})})},e.prototype._getAppCheckToken=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return t=this._appCheckProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:return n=r.sent(),[2,n.token];case 2:return[2,null]}})})},e.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},e.prototype._makeStorageReference=function(t){return new Ud(this,t)},e.prototype._makeRequest=function(t,n,r){var i=this;if(this._deleted)return new KQ(FD());var s=n5(t,this._appId,n,r,this._pool,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(function(){return i._requests.delete(s)},function(){return i._requests.delete(s)}),s},e.prototype.makeRequestWithTokens=function(t){return A(this,void 0,void 0,function(){var n,r,i;return C(this,function(s){switch(s.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return n=s.sent(),r=n[0],i=n[1],[2,this._makeRequest(t,r,i)]}})})},e}();Vd=function(){function e(t,n,r){this._delegate=t,this.task=n,this.ref=r}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}();oL=function(){function e(t,n){this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new Vd(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(t,n){var r=this;return this._delegate.then(function(i){if(t)return t(new Vd(i,r,r._ref))},n)},e.prototype.on=function(t,n,r,i){var s=this,a=void 0;return n&&(typeof n=="function"?a=function(c){return n(new Vd(c,s,s._ref))}:a={next:n.next?function(c){return n.next(new Vd(c,s,s._ref))}:void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(t,a,r||void 0,i||void 0)},e}(),sL=function(){function e(t,n){this._delegate=t,this._service=n}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(n){return new Ol(n,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(n){return new Ol(n,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}();Ol=function(){function e(t,n){this._delegate=t,this.storage=n}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){var n=W5(this._delegate,t);return new e(n,this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t==null?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(t,n){return this._throwIfRoot("put"),new oL(M5(this._delegate,t,n),this)},e.prototype.putString=function(t,n,r){n===void 0&&(n=Xn.RAW),this._throwIfRoot("putString");var i=jD(n,t),s=Ee({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new oL(new JD(this._delegate,new $w(i.data,!0),s),this)},e.prototype.listAll=function(){var t=this;return V5(this._delegate).then(function(n){return new sL(n,t.storage)})},e.prototype.list=function(t){var n=this;return j5(this._delegate,t||void 0).then(function(r){return new sL(r,n.storage)})},e.prototype.getMetadata=function(){return F5(this._delegate)},e.prototype.updateMetadata=function(t){return U5(this._delegate,t)},e.prototype.getDownloadURL=function(){return B5(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),q5(this._delegate)},e.prototype._throwIfRoot=function(t){if(this._delegate._location.path==="")throw UD(t)},e}();G5=function(){function e(t,n){var r=this;this.app=t,this._delegate=n,this.INTERNAL={delete:function(){return r._delegate._delete()}}}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(t){if(t0(t))throw ws("ref() expected a child path but got a URL, use refFromURL instead.");return new Ol(iL(this._delegate,t),this)},e.prototype.refFromURL=function(t){if(!t0(t))throw ws("refFromURL() expected a full URL but got a child path, use ref() instead.");try{$n.makeFromUrl(t,this._delegate.host)}catch(n){throw ws("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ol(iL(this._delegate,t),this)},e.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},e.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},e.prototype.useEmulator=function(t,n){L5(this._delegate,t,n)},e}(),K5="@firebase/storage",H5="0.5.5";z5="storage";Y5(K)});var uL={};Rr(uL);var cL=Le(()=>{aL()});var yS=Qu(gS()),{__extends:Pt,__assign:FY,__rest:UY,__decorate:jY,__param:VY,__metadata:BY,__awaiter:_S,__generator:Kf,__exportStar:qY,__createBinding:WY,__values:xo,__read:sr,__spread:GY,__spreadArrays:KY,__spreadArray:ar,__await:Hf,__asyncGenerator:bS,__asyncDelegator:HY,__asyncValues:wS,__makeTemplateObject:zY,__importStar:QY,__importDefault:YY,__classPrivateFieldGet:XY,__classPrivateFieldSet:$Y}=yS.default;function be(e){return typeof e=="function"}function Ys(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var zf=Ys(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Po(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var jn=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}return e.prototype.unsubscribe=function(){var t,n,r,i,s;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var c=xo(a),l=c.next();!l.done;l=c.next()){var h=l.value;h.remove(this)}}catch(E){t={error:E}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}else a.remove(this);var d=this.initialTeardown;if(be(d))try{d()}catch(E){s=E instanceof zf?E.errors:[E]}var g=this._teardowns;if(g){this._teardowns=null;try{for(var m=xo(g),_=m.next();!_.done;_=m.next()){var w=_.value;try{ES(w)}catch(E){s=s??[],E instanceof zf?s=ar(ar([],sr(s)),sr(E.errors)):s.push(E)}}}catch(E){r={error:E}}finally{try{_&&!_.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}}if(s)throw new zf(s)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)ES(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=(n=this._teardowns)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&Po(n,t)},e.prototype.remove=function(t){var n=this._teardowns;n&&Po(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();var Ig=jn.EMPTY;function Qf(e){return e instanceof jn||e&&"closed"in e&&be(e.remove)&&be(e.add)&&be(e.unsubscribe)}function ES(e){be(e)?e():e.unsubscribe()}var Zr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Xs={setTimeout:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Xs.delegate;return((n==null?void 0:n.setTimeout)||setTimeout).apply(void 0,ar([],sr(e)))},clearTimeout:function(e){var t=Xs.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Yf(e){Xs.setTimeout(function(){var t=Zr.onUnhandledError;if(t)t(e);else throw e})}function Do(){}var IS=function(){return Tg("C",void 0,void 0)}();function TS(e){return Tg("E",void 0,e)}function SS(e){return Tg("N",e,void 0)}function Tg(e,t,n){return{kind:e,value:t,error:n}}var Yu=function(e){Pt(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,Qf(n)&&n.add(r)):r.destination=xU,r}return t.create=function(n,r,i){return new Xu(n,r,i)},t.prototype.next=function(n){this.isStopped?Cg(SS(n),this):this._next(n)},t.prototype.error=function(n){this.isStopped?Cg(TS(n),this):(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped?Cg(IS,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(jn);var Xu=function(e){Pt(t,e);function t(n,r,i){var s=e.call(this)||this,a;if(be(n))a=n;else if(n){a=n.next,r=n.error,i=n.complete;var c;s&&Zr.useDeprecatedNextContext?(c=Object.create(n),c.unsubscribe=function(){return s.unsubscribe()}):c=n,a=a==null?void 0:a.bind(c),r=r==null?void 0:r.bind(c),i=i==null?void 0:i.bind(c)}return s.destination={next:a?Sg(a,s):Do,error:Sg(r??CS,s),complete:i?Sg(i,s):Do},s}return t}(Yu);function Sg(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{e.apply(void 0,ar([],sr(n)))}catch(i){if(Zr.useDeprecatedSynchronousErrorHandling)if(t._syncErrorHack_isSubscribing)t.__syncError=i;else throw i;else Yf(i)}}}function CS(e){throw e}function Cg(e,t){var n=Zr.onStoppedNotification;n&&Xs.setTimeout(function(){return n(e,t)})}var xU={closed:!0,next:Do,error:CS,complete:Do};var Ci=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Nr(e){return e}function AS(e){return e.length===0?Nr:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var me=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=DU(t)?t:new Xu(t,n,r);if(Zr.useDeprecatedSynchronousErrorHandling)this._deprecatedSyncErrorSubscribe(i);else{var s=this,a=s.operator,c=s.source;i.add(a?a.call(i,c):c?this._subscribe(i):this._trySubscribe(i))}return i},e.prototype._deprecatedSyncErrorSubscribe=function(t){var n=t;n._syncErrorHack_isSubscribing=!0;var r=this.operator;if(r)t.add(r.call(t,this.source));else try{t.add(this._subscribe(t))}catch(s){n.__syncError=s}for(var i=n;i;){if("__syncError"in i)try{throw i.__syncError}finally{t.unsubscribe()}i=i.destination}n._syncErrorHack_isSubscribing=!1},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=kS(n),new n(function(i,s){var a;a=r.subscribe(function(c){try{t(c)}catch(l){s(l),a==null||a.unsubscribe()}},s,i)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[Ci]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.length?AS(t)(this):this},e.prototype.toPromise=function(t){var n=this;return t=kS(t),new t(function(r,i){var s;n.subscribe(function(a){return s=a},function(a){return i(a)},function(){return r(s)})})},e.create=function(t){return new e(t)},e}();function kS(e){var t;return(t=e??Zr.Promise)!==null&&t!==void 0?t:Promise}function PU(e){return e&&be(e.next)&&be(e.error)&&be(e.complete)}function DU(e){return e&&e instanceof Yu||PU(e)&&Qf(e)}function LU(e){return be(e==null?void 0:e.lift)}function Me(e){return function(t){if(LU(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}var Fe=function(e){Pt(t,e);function t(n,r,i,s,a){var c=e.call(this,n)||this;return c.onFinalize=a,c._next=r?function(l){try{r(l)}catch(h){n.error(h)}}:e.prototype._next,c._error=s?function(l){try{s(l)}catch(h){n.error(h)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=i?function(){try{i()}catch(l){n.error(l)}finally{this.unsubscribe()}}:e.prototype._complete,c}return t.prototype.unsubscribe=function(){var n,r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))},t}(Yu);var RS=Ys(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var Ai=function(e){Pt(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new NS(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new RS},t.prototype.next=function(n){var r,i;if(this._throwIfClosed(),!this.isStopped){var s=this.observers.slice();try{for(var a=xo(s),c=a.next();!c.done;c=a.next()){var l=c.value;l.next(n)}}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}},t.prototype.error=function(n){if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;for(var r=this.observers;r.length;)r.shift().error(n)}},t.prototype.complete=function(){if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;for(var n=this.observers;n.length;)n.shift().complete()}},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=r.hasError,s=r.isStopped,a=r.observers;return i||s?Ig:(a.push(n),new jn(function(){return Po(a,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,s=r.thrownError,a=r.isStopped;i?n.error(s):a&&n.complete()},t.prototype.asObservable=function(){var n=new me;return n.source=this,n},t.create=function(n,r){return new NS(n,r)},t}(me);var NS=function(e){Pt(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:Ig},t}(Ai);var $u={now:function(){return($u.delegate||Date).now()},delegate:void 0};var OS=function(e){Pt(t,e);function t(n,r,i){n===void 0&&(n=1/0),r===void 0&&(r=1/0),i===void 0&&(i=$u);var s=e.call(this)||this;return s._bufferSize=n,s._windowTime=r,s._timestampProvider=i,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=r===1/0,s._bufferSize=Math.max(1,n),s._windowTime=Math.max(1,r),s}return t.prototype.next=function(n){var r=this,i=r.isStopped,s=r._buffer,a=r._infiniteTimeWindow,c=r._timestampProvider,l=r._windowTime;i||(s.push(n),!a&&s.push(c.now()+l)),this._trimBuffer(),e.prototype.next.call(this,n)},t.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),i=this,s=i._infiniteTimeWindow,a=i._buffer,c=a.slice(),l=0;l<c.length&&!n.closed;l+=s?1:2)n.next(c[l]);return this._checkFinalizedStatuses(n),r},t.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,i=n._timestampProvider,s=n._buffer,a=n._infiniteTimeWindow,c=(a?1:2)*r;if(r<1/0&&c<s.length&&s.splice(0,s.length-c),!a){for(var l=i.now(),h=0,d=1;d<s.length&&s[d]<=l;d+=2)h=d;h&&s.splice(0,h+1)}},t}(Ai);var xS=function(e){Pt(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return r===void 0&&(r=0),this},t}(jn);var Ju={setInterval:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Ju.delegate;return((n==null?void 0:n.setInterval)||setInterval).apply(void 0,ar([],sr(e)))},clearInterval:function(e){var t=Ju.delegate;return((t==null?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0};var PS=function(e){Pt(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){if(r===void 0&&(r=0),this.closed)return this;this.state=n;var i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,r)),this.pending=!0,this.delay=r,this.id=this.id||this.requestAsyncId(s,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),Ju.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;Ju.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,s;try{this.work(n)}catch(a){i=!0,s=!!a&&a||new Error(a)}if(i)return this.unsubscribe(),s},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Po(s,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(xS);var Ag=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=$u.now,e}();var DS=function(e){Pt(t,e);function t(n,r){r===void 0&&(r=Ag.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i._scheduled=void 0,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(Ag);var kg=new DS(PS),LS=kg;var Zu=new me(function(e){return e.complete()});function Rg(e){return e?MU(e):Zu}function MU(e){return new me(function(t){return e.schedule(function(){return t.complete()})})}function $s(e,t){return new me(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}var Xf=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function $f(e){return be(e==null?void 0:e.then)}function MS(e,t){return new me(function(n){var r=new jn;return r.add(t.schedule(function(){var i=e[Ci]();r.add(i.subscribe({next:function(s){r.add(t.schedule(function(){return n.next(s)}))},error:function(s){r.add(t.schedule(function(){return n.error(s)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r})}function FS(e,t){return new me(function(n){return t.schedule(function(){return e.then(function(r){n.add(t.schedule(function(){n.next(r),n.add(t.schedule(function(){return n.complete()}))}))},function(r){n.add(t.schedule(function(){return n.error(r)}))})})})}function FU(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Jf=FU();function US(e,t,n,r){r===void 0&&(r=0);var i=t.schedule(function(){try{n.call(this)}catch(s){e.error(s)}},r);return e.add(i),i}function jS(e,t){return new me(function(n){var r;return n.add(t.schedule(function(){r=e[Jf](),US(n,t,function(){var i=r.next(),s=i.value,a=i.done;a?n.complete():(n.next(s),this.schedule())})})),function(){return be(r==null?void 0:r.return)&&r.return()}})}function Zf(e,t){if(!e)throw new Error("Iterable cannot be null");return new me(function(n){var r=new jn;return r.add(t.schedule(function(){var i=e[Symbol.asyncIterator]();r.add(t.schedule(function(){var s=this;i.next().then(function(a){a.done?n.complete():(n.next(a.value),s.schedule())})}))})),r})}function eh(e){return be(e[Ci])}function th(e){return be(e==null?void 0:e[Jf])}function nh(e){return Symbol.asyncIterator&&be(e==null?void 0:e[Symbol.asyncIterator])}function rh(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function ih(e){return bS(this,arguments,function(){var n,r,i,s;return Kf(this,function(a){switch(a.label){case 0:n=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Hf(n.read())];case 3:return r=a.sent(),i=r.value,s=r.done,s?[4,Hf(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Hf(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function oh(e){return be(e==null?void 0:e.getReader)}function VS(e,t){return Zf(ih(e),t)}function BS(e,t){if(e!=null){if(eh(e))return MS(e,t);if(Xf(e))return $s(e,t);if($f(e))return FS(e,t);if(nh(e))return Zf(e,t);if(th(e))return jS(e,t);if(oh(e))return VS(e,t)}throw rh(e)}function ur(e,t){return t?BS(e,t):cr(e)}function cr(e){if(e instanceof me)return e;if(e!=null){if(eh(e))return UU(e);if(Xf(e))return Ng(e);if($f(e))return jU(e);if(nh(e))return qS(e);if(th(e))return VU(e);if(oh(e))return BU(e)}throw rh(e)}function UU(e){return new me(function(t){var n=e[Ci]();if(be(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Ng(e){return new me(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function jU(e){return new me(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,Yf)})}function VU(e){return new me(function(t){var n,r;try{for(var i=xo(e),s=i.next();!s.done;s=i.next()){var a=s.value;if(t.next(a),t.closed)return}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function qS(e){return new me(function(t){qU(e,t).catch(function(n){return t.error(n)})})}function BU(e){return qS(ih(e))}function qU(e,t){var n,r,i,s;return _S(this,void 0,void 0,function(){var a,c;return Kf(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=wS(e),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=l.sent(),i={error:c},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function Js(e,t){return t?$s(e,t):Ng(e)}function sh(e){return e&&be(e.schedule)}function WS(e){return e[e.length-1]}function Zs(e){return sh(WS(e))?e.pop():void 0}function GS(e,t){return typeof WS(e)=="number"?e.pop():t}function ki(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Zs(e);return n?$s(e,n):Js(e)}var ea=Ys(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function Og(e,t){var n=typeof t=="object";return new Promise(function(r,i){var s=!1,a;e.subscribe({next:function(c){a=c,s=!0},error:i,complete:function(){s?r(a):n?r(t.defaultValue):i(new ea)}})})}function KS(e){return e instanceof Date&&!isNaN(e)}function Qt(e,t){return Me(function(n,r){var i=0;n.subscribe(new Fe(r,function(s){r.next(e.call(t,s,i++))}))})}function HS(e,t,n,r,i,s,a,c){var l=[],h=0,d=0,g=!1,m=function(){g&&!l.length&&!h&&t.complete()},_=function(E){return h<r?w(E):l.push(E)},w=function(E){s&&t.next(E),h++;var T=!1;cr(n(E,d++)).subscribe(new Fe(t,function(S){i==null||i(S),s?_(S):t.next(S)},function(){T=!0},void 0,function(){if(T)try{h--;for(var S=function(){var R=l.shift();a?t.add(a.schedule(function(){return w(R)})):w(R)};l.length&&h<r;)S();m()}catch(R){t.error(R)}}))};return e.subscribe(new Fe(t,_,function(){g=!0,m()})),function(){c==null||c()}}function ec(e,t,n){return n===void 0&&(n=1/0),be(t)?ec(function(r,i){return Qt(function(s,a){return t(r,s,i,a)})(cr(e(r,i)))},n):(typeof t=="number"&&(n=t),Me(function(r,i){return HS(r,i,e,n)}))}function ah(e){return e===void 0&&(e=1/0),ec(Nr,e)}function zS(){return ah(1)}function QS(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return zS()(Js(e,Zs(e)))}function YS(e,t,n){e===void 0&&(e=0),n===void 0&&(n=LS);var r=-1;return t!=null&&(sh(t)?n=t:r=t),new me(function(i){var s=KS(e)?+e-n.now():e;s<0&&(s=0);var a=0;return n.schedule(function(){i.closed||(i.next(a++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function xg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Zs(e),r=GS(e,1/0),i=e;return i.length?i.length===1?cr(i[0]):ah(r)(Js(i,n)):Zu}function Pg(e,t){return Me(function(n,r){var i=0;n.subscribe(new Fe(r,function(s){return e.call(t,s,i++)&&r.next(s)}))})}function uh(e){return Me(function(t,n){var r=null,i=!1,s;r=t.subscribe(new Fe(n,void 0,void 0,function(a){s=cr(e(a,uh(e)(t))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function XS(e,t,n,r,i){return function(s,a){var c=n,l=t,h=0;s.subscribe(new Fe(a,function(d){var g=h++;l=c?e(l,d,g):(c=!0,d),r&&a.next(l)},i&&function(){c&&a.next(l),a.complete()}))}}function $S(e){return Me(function(t,n){var r=!1;t.subscribe(new Fe(n,function(i){r=!0,n.next(i)},function(){r||n.next(e),n.complete()}))})}function Lo(e){return e<=0?function(){return Zu}:Me(function(t,n){var r=0;t.subscribe(new Fe(n,function(i){++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function JS(){return Me(function(e,t){e.subscribe(new Fe(t,Do))})}function ZS(e){return Qt(function(){return e})}function Dg(e,t){return t?function(n){return QS(t.pipe(Lo(1),JS()),n.pipe(Dg(e)))}:ec(function(n,r){return e(n,r).pipe(Lo(1),ZS(n))})}function Lg(e,t){t===void 0&&(t=kg);var n=YS(e,t);return Dg(function(){return n})}function ch(e,t){return t===void 0&&(t=Nr),e=e??WU,Me(function(n,r){var i,s=!0;n.subscribe(new Fe(r,function(a){var c=t(a);(s||!e(i,c))&&(s=!1,i=c,r.next(a))}))})}function WU(e,t){return e===t}function eC(e){return e===void 0&&(e=GU),Me(function(t,n){var r=!1;t.subscribe(new Fe(n,function(i){r=!0,n.next(i)},function(){return r?n.complete():n.error(e())}))})}function GU(){return new ea}function lh(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Pg(function(i,s){return e(i,s,r)}):Nr,Lo(1),n?$S(t):eC(function(){return new ea}))}}function fh(e,t){return Me(XS(e,t,arguments.length>=2,!0))}function tC(e){e===void 0&&(e={});var t=e.connector,n=t===void 0?function(){return new Ai}:t,r=e.resetOnError,i=r===void 0?!0:r,s=e.resetOnComplete,a=s===void 0?!0:s,c=e.resetOnRefCountZero,l=c===void 0?!0:c;return function(h){var d=null,g=null,m=null,_=0,w=!1,E=!1,T=function(){g==null||g.unsubscribe(),g=null},S=function(){T(),d=m=null,w=E=!1},R=function(){var O=d;S(),O==null||O.unsubscribe()};return Me(function(O,U){_++,!E&&!w&&T();var L=m=m??n();U.add(function(){_--,_===0&&!E&&!w&&(g=Mg(R,l))}),L.subscribe(U),d||(d=new Xu({next:function(P){return L.next(P)},error:function(P){E=!0,T(),g=Mg(S,i,P),L.error(P)},complete:function(){w=!0,T(),g=Mg(S,a),L.complete()}}),ur(O).subscribe(d))})(h)}}function Mg(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return t===!0?(e(),null):t===!1?null:t.apply(void 0,ar([],sr(n))).pipe(Lo(1)).subscribe(function(){return e()})}function Fg(e,t,n){var r,i,s,a=!1;return e&&typeof e=="object"?(s=(r=e.bufferSize)!==null&&r!==void 0?r:1/0,t=(i=e.windowTime)!==null&&i!==void 0?i:1/0,a=!!e.refCount,n=e.scheduler):s=e??1/0,tC({connector:function(){return new OS(s,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}function tc(e,t){return Me(function(n,r){var i=null,s=0,a=!1,c=function(){return a&&!i&&r.complete()};n.subscribe(new Fe(r,function(l){i==null||i.unsubscribe();var h=0,d=s++;cr(e(l,d)).subscribe(i=new Fe(r,function(g){return r.next(t?t(l,g,d,h++):g)},function(){i=null,c()}))},function(){a=!0,c()}))})}function Ug(e,t,n){var r=be(e)||t||n?{next:e,error:t,complete:n}:e;return r?Me(function(i,s){i.subscribe(new Fe(s,function(a){var c;(c=r.next)===null||c===void 0||c.call(r,a),s.next(a)},function(){var a;(a=r.complete)===null||a===void 0||a.call(r),s.complete()},function(a){var c;(c=r.error)===null||c===void 0||c.call(r,a),s.error(a)}))}):Nr}function hh(e){return new me(function(t){var n=e.onIdTokenChanged(t);return{unsubscribe:n}})}Cn();Cn();var kj="firebase",KC="8.6.8";K.registerVersion(kj,KC,"app");K.SDK_VERSION=KC;var pA=Qu(hA()),{__extends:B9,__assign:ca,__rest:q9,__decorate:W9,__param:G9,__metadata:K9,__awaiter:H9,__generator:z9,__exportStar:Q9,__createBinding:Y9,__values:X9,__read:$9,__spread:J9,__spreadArrays:Z9,__spreadArray:cc,__await:eZ,__asyncGenerator:tZ,__asyncDelegator:nZ,__asyncValues:rZ,__makeTemplateObject:iZ,__importStar:oZ,__importDefault:sZ,__classPrivateFieldGet:aZ,__classPrivateFieldSet:uZ}=pA.default;function dA(e,t){return new me(function(n){var r=e.on(t,function(i,s){n.next({snapshot:i,prevKey:s,event:t})},n.error.bind(n));return{unsubscribe:function(){e.off(t,r)}}}).pipe(Lg(0))}var $t;(function(e){e.added="child_added",e.removed="child_removed",e.changed="child_changed",e.moved="child_moved",e.value="value"})($t||($t={}));function Rj(e){return(e==null||e.length===0)&&(e=[$t.added,$t.removed,$t.changed,$t.moved]),e}function Yg(e){return dA(e,$t.value)}function Nj(e,t){var n,r=e.snapshot.val();return!e.snapshot.exists()||typeof r!="object"?r:ca(ca({},r),t?(n={},n[t]=e.snapshot.key,n):null)}function Oj(e){return ur(e.once($t.value)).pipe(Qt(function(t){var n=$t.value;return{snapshot:t,prevKey:null,event:n}}))}function Xg(e,t){var n=Rj(t);return Oj(e).pipe(tc(function(r){if(!r.snapshot.exists())return ki(r.snapshot.val());for(var i=[ki(r)],s=0,a=n;s<a.length;s++){var c=a[s];i.push(dA(e,c))}return xg.apply(void 0,i).pipe(fh(Pj,[]))}),ch())}function vA(e,t){return Xg(e).pipe(Qt(function(n){return n===null?n:n.map(function(r){return Nj(r,t)})}))}function mA(e,t){for(var n=e.length,r=0;r<n;r++)if(e[r].snapshot.key===t)return r;return-1}function xj(e,t){if(t==null)return 0;var n=mA(e,t);return n===-1?e.length:n+1}function Pj(e,t){var n=t.snapshot,r=t.prevKey,i=t.event,s=n.key,a=mA(e,s),c=xj(e,r||void 0);switch(i){case $t.value:if(t.snapshot&&t.snapshot.exists()){var l=null;t.snapshot.forEach(function(g){var m={snapshot:g,event:$t.value,prevKey:l};return l=g.key,e=cc(cc([],e),[m]),!1})}return e;case $t.added:if(a>-1){var h=e[a-1];(h&&h.snapshot.key||null)!==r&&(e=e.filter(function(g){return g.snapshot.key!==n.key}),e.splice(c,0,t))}else{if(r==null)return cc([t],e);e=e.slice(),e.splice(c,0,t)}return e;case $t.removed:return e.filter(function(g){return g.snapshot.key!==n.key});case $t.changed:return e.map(function(g){return g.snapshot.key===s?t:g});case $t.moved:if(a>-1){var d=e.splice(a,1)[0];return e=e.slice(),e.splice(c,0,d),e}return e;default:return e}}var Dj={includeMetadataChanges:!1};function Lj(e,t){return t===void 0&&(t=Dj),new me(function(n){var r=e.onSnapshot(t,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function gA(e,t){return Lj(e,t)}function Mj(e,t){return gA(e,t)}function $g(e,t){return gA(e,t)}function lc(e){return Mj(e,{includeMetadataChanges:!0})}function Jg(e,t){return lc(e).pipe(Qt(function(n){return yA(n,t)}))}function yA(e,t){var n;return e.exists?ca(ca({},e.data()),t?(n={},n[t]=e.id,n):null):e.data()}function Fj(e){return $g(e,{includeMetadataChanges:!0}).pipe(Qt(function(t){return t.docs}))}function _A(e,t){return Fj(e).pipe(Qt(function(n){return n.map(function(r){return yA(r,t)})}))}function bA(e){return ur(e.getDownloadURL())}a_();var X5=window.React,{useMemo:$5,createElement:fn,useContext:n0,createContext:lL,version:J5,Fragment:cu,useState:r0,useEffect:Z5,Suspense:eY,useLayoutEffect:tY}=X5;function fL(e,t,n,r,i,s,a){try{var c=e[s](a),l=c.value}catch(h){n(h);return}c.done?t(l):Promise.resolve(l).then(r,i)}function nY(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function a(l){fL(s,r,i,a,c,"next",l)}function c(l){fL(s,r,i,a,c,"throw",l)}a(void 0)})}}function hL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rY(e,t,n){return t&&hL(e.prototype,t),n&&hL(e,n),e}function Gr(){return Gr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gr.apply(this,arguments)}function pL(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,xl(e,t)}function i0(e){return i0=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},i0(e)}function xl(e,t){return xl=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},xl(e,t)}function iY(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Bd(e,t,n){return iY()?Bd=Reflect.construct:Bd=function(i,s,a){var c=[null];c.push.apply(c,s);var l=Function.bind.apply(i,c),h=new l;return a&&xl(h,a.prototype),h},Bd.apply(null,arguments)}function oY(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function o0(e){var t=typeof Map=="function"?new Map:void 0;return o0=function(r){if(r===null||!oY(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(r))return t.get(r);t.set(r,i)}function i(){return Bd(r,arguments,i0(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),xl(i,r)},o0(e)}function sY(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function dL(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aY(e,t){return t={exports:{}},e(t,t.exports),t.exports}var vL=aY(function(e){var t=function(n){var r=Object.prototype,i=r.hasOwnProperty,s,a=typeof Symbol=="function"?Symbol:{},c=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",h=a.toStringTag||"@@toStringTag";function d(B,D,H){return Object.defineProperty(B,D,{value:H,enumerable:!0,configurable:!0,writable:!0}),B[D]}try{d({},"")}catch(B){d=function(D,H,te){return D[H]=te}}function g(B,D,H,te){var ee=D&&D.prototype instanceof R?D:R,Ke=Object.create(ee.prototype),Et=new co(te||[]);return Ke._invoke=k(B,H,Et),Ke}n.wrap=g;function m(B,D,H){try{return{type:"normal",arg:B.call(D,H)}}catch(te){return{type:"throw",arg:te}}}var _="suspendedStart",w="suspendedYield",E="executing",T="completed",S={};function R(){}function O(){}function U(){}var L={};L[c]=function(){return this};var P=Object.getPrototypeOf,ue=P&&P(P(Kr([])));ue&&ue!==r&&i.call(ue,c)&&(L=ue);var Je=U.prototype=R.prototype=Object.create(L);O.prototype=Je.constructor=U,U.constructor=O,O.displayName=d(U,h,"GeneratorFunction");function X(B){["next","throw","return"].forEach(function(D){d(B,D,function(H){return this._invoke(D,H)})})}n.isGeneratorFunction=function(B){var D=typeof B=="function"&&B.constructor;return D?D===O||(D.displayName||D.name)==="GeneratorFunction":!1},n.mark=function(B){return Object.setPrototypeOf?Object.setPrototypeOf(B,U):(B.__proto__=U,d(B,h,"GeneratorFunction")),B.prototype=Object.create(Je),B},n.awrap=function(B){return{__await:B}};function Jn(B,D){function H(Ke,Et,It,hn){var yt=m(B[Ke],B,Et);if(yt.type==="throw")hn(yt.arg);else{var Is=yt.arg,ke=Is.value;return ke&&typeof ke=="object"&&i.call(ke,"__await")?D.resolve(ke.__await).then(function(Hr){H("next",Hr,It,hn)},function(Hr){H("throw",Hr,It,hn)}):D.resolve(ke).then(function(Hr){Is.value=Hr,It(Is)},function(Hr){return H("throw",Hr,It,hn)})}}var te;function ee(Ke,Et){function It(){return new D(function(hn,yt){H(Ke,Et,hn,yt)})}return te=te?te.then(It,It):It()}this._invoke=ee}X(Jn.prototype),Jn.prototype[l]=function(){return this},n.AsyncIterator=Jn,n.async=function(B,D,H,te,ee){ee===void 0&&(ee=Promise);var Ke=new Jn(g(B,D,H,te),ee);return n.isGeneratorFunction(D)?Ke:Ke.next().then(function(Et){return Et.done?Et.value:Ke.next()})};function k(B,D,H){var te=_;return function(Ke,Et){if(te===E)throw new Error("Generator is already running");if(te===T){if(Ke==="throw")throw Et;return mi()}for(H.method=Ke,H.arg=Et;;){var It=H.delegate;if(It){var hn=lu(It,H);if(hn){if(hn===S)continue;return hn}}if(H.method==="next")H.sent=H._sent=H.arg;else if(H.method==="throw"){if(te===_)throw te=T,H.arg;H.dispatchException(H.arg)}else H.method==="return"&&H.abrupt("return",H.arg);te=E;var yt=m(B,D,H);if(yt.type==="normal"){if(te=H.done?T:w,yt.arg===S)continue;return{value:yt.arg,done:H.done}}else yt.type==="throw"&&(te=T,H.method="throw",H.arg=yt.arg)}}}function lu(B,D){var H=B.iterator[D.method];if(H===s){if(D.delegate=null,D.method==="throw"){if(B.iterator.return&&(D.method="return",D.arg=s,lu(B,D),D.method==="throw"))return S;D.method="throw",D.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}var te=m(H,B.iterator,D.arg);if(te.type==="throw")return D.method="throw",D.arg=te.arg,D.delegate=null,S;var ee=te.arg;if(!ee)return D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,S;if(ee.done)D[B.resultName]=ee.value,D.next=B.nextLoc,D.method!=="return"&&(D.method="next",D.arg=s);else return ee;return D.delegate=null,S}X(Je),d(Je,h,"Generator"),Je[c]=function(){return this},Je.toString=function(){return"[object Generator]"};function uo(B){var D={tryLoc:B[0]};1 in B&&(D.catchLoc=B[1]),2 in B&&(D.finallyLoc=B[2],D.afterLoc=B[3]),this.tryEntries.push(D)}function fu(B){var D=B.completion||{};D.type="normal",delete D.arg,B.completion=D}function co(B){this.tryEntries=[{tryLoc:"root"}],B.forEach(uo,this),this.reset(!0)}n.keys=function(B){var D=[];for(var H in B)D.push(H);return D.reverse(),function te(){for(;D.length;){var ee=D.pop();if(ee in B)return te.value=ee,te.done=!1,te}return te.done=!0,te}};function Kr(B){if(B){var D=B[c];if(D)return D.call(B);if(typeof B.next=="function")return B;if(!isNaN(B.length)){var H=-1,te=function ee(){for(;++H<B.length;)if(i.call(B,H))return ee.value=B[H],ee.done=!1,ee;return ee.value=s,ee.done=!0,ee};return te.next=te}}return{next:mi}}n.values=Kr;function mi(){return{value:s,done:!0}}return co.prototype={constructor:co,reset:function(B){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(fu),!B)for(var D in this)D.charAt(0)==="t"&&i.call(this,D)&&!isNaN(+D.slice(1))&&(this[D]=s)},stop:function(){this.done=!0;var B=this.tryEntries[0],D=B.completion;if(D.type==="throw")throw D.arg;return this.rval},dispatchException:function(B){if(this.done)throw B;var D=this;function H(hn,yt){return Ke.type="throw",Ke.arg=B,D.next=hn,yt&&(D.method="next",D.arg=s),!!yt}for(var te=this.tryEntries.length-1;te>=0;--te){var ee=this.tryEntries[te],Ke=ee.completion;if(ee.tryLoc==="root")return H("end");if(ee.tryLoc<=this.prev){var Et=i.call(ee,"catchLoc"),It=i.call(ee,"finallyLoc");if(Et&&It){if(this.prev<ee.catchLoc)return H(ee.catchLoc,!0);if(this.prev<ee.finallyLoc)return H(ee.finallyLoc)}else if(Et){if(this.prev<ee.catchLoc)return H(ee.catchLoc,!0)}else if(It){if(this.prev<ee.finallyLoc)return H(ee.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(B,D){for(var H=this.tryEntries.length-1;H>=0;--H){var te=this.tryEntries[H];if(te.tryLoc<=this.prev&&i.call(te,"finallyLoc")&&this.prev<te.finallyLoc){var ee=te;break}}ee&&(B==="break"||B==="continue")&&ee.tryLoc<=D&&D<=ee.finallyLoc&&(ee=null);var Ke=ee?ee.completion:{};return Ke.type=B,Ke.arg=D,ee?(this.method="next",this.next=ee.finallyLoc,S):this.complete(Ke)},complete:function(B,D){if(B.type==="throw")throw B.arg;return B.type==="break"||B.type==="continue"?this.next=B.arg:B.type==="return"?(this.rval=this.arg=B.arg,this.method="return",this.next="end"):B.type==="normal"&&D&&(this.next=D),S},finish:function(B){for(var D=this.tryEntries.length-1;D>=0;--D){var H=this.tryEntries[D];if(H.finallyLoc===B)return this.complete(H.completion,H.afterLoc),fu(H),S}},catch:function(B){for(var D=this.tryEntries.length-1;D>=0;--D){var H=this.tryEntries[D];if(H.tryLoc===B){var te=H.completion;if(te.type==="throw"){var ee=te.arg;fu(H)}return ee}}throw new Error("illegal catch attempt")},delegateYield:function(B,D,H){return this.delegate={iterator:Kr(B),resultName:D,nextLoc:H},this.method==="next"&&(this.arg=s),S}},n}(e.exports);try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}});function uY(e){switch(e){case"analytics":return Promise.resolve().then(()=>(cN(),uN));case"auth":return Promise.resolve().then(()=>(hN(),fN));case"database":return Promise.resolve().then(()=>(a_(),PR));case"firestore":return Promise.resolve().then(()=>(D1(),P1));case"functions":return Promise.resolve().then(()=>(B1(),V1));case"messaging":return Promise.resolve().then(()=>(eD(),Z1));case"performance":return Promise.resolve().then(()=>(AD(),CD));case"remoteConfig":return Promise.resolve().then(()=>(xD(),OD));case"storage":return Promise.resolve().then(()=>(cL(),uL))}}function di(e){var t,n=function(i,s){t=_L();var a=i||t,c=Pl(s);if(c){var l=gL(e,a);if(l.hasValue)return K[e];throw l.firstEmission}else{if(a[e])return K[e];throw new Error('ReactFire: "firebase/'+e+'" not found. Please import it in your component, or call preload'+(e.charAt(0).toUpperCase()+e.slice(1))+" and wait for it to resolve. ReactFire can only auto-import Firebase libraries if Suspense mode is enabled.")}};return new Proxy(n,{get:function(i,s){return i()[s]},apply:function(i,s,a){var c=i(a[0]).bind(s);return a[0]||(a[0]=t),c.apply(void 0,a)}})}var mL=di("auth"),ete=di("analytics"),tte=di("database"),nte=di("firestore"),rte=di("functions"),ite=di("messaging"),ote=di("performance"),cY=di("remoteConfig"),lY=di("storage");function vi(e){return function(t){return gL(e,t.firebaseApp,t.setup).toPromise()}}function gL(e,t,n){n===void 0&&(n=function(){});var r=t;return Wd(new me(function(i){uY(e).then(nY(vL.mark(function s(){var a;return vL.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return a=r[e].bind(r),l.next=3,Promise.resolve(n(a));case 3:i.next(a),i.complete();case 5:case"end":return l.stop()}},s)}))).catch(function(s){i.error(s),i.complete()})}),"firebase-sdk:"+e+":"+r.name)}var fY=vi("auth"),ste=vi("analytics"),ate=vi("database"),hY=vi("firestore"),ute=vi("functions"),cte=vi("messaging"),pY=vi("performance"),lte=vi("remoteConfig"),fte=vi("storage"),dY="[DEFAULT]",yL=lL(void 0),s0=lL(!1),vY="3.0.0",mY=function(t,n){return t===n||[].concat(Object.keys(t),Object.keys(n)).every(function(r){return t[r]===n[r]})};function hte(e){var t=e.firebaseConfig,n=e.appName,r=e.suspense,i=$5(function(){if(e.firebaseApp)return e.firebaseApp;var s=K.apps.find(function(c){return c.name===(n||dY)});if(s){if(t&&mY(s.options,t))return s;throw new Error("Does not match the options already provided to the "+(n||"default")+" firebase app instance, give this new instance a different appName.")}else{if(!t)throw new Error("No firebaseConfig provided");var a=J5||"unknown";return K.registerVersion("react",a),K.registerVersion("reactfire",vY),K.initializeApp(t,n)}},[e.firebaseApp,t,n]);return fn(yL.Provider,{value:i},fn(s0.Provider,Gr({value:r??!1},e)))}function pte(){var e=n0(s0);return e??!1}function Pl(e){var t=n0(s0);return e!==void 0?e:t}function _L(){var e=n0(yL);if(!e)throw new Error("Cannot call useFirebaseApp unless your component is within a FirebaseAppProvider");return e}function dte(e){var t=e.firebaseApp;return fY({firebaseApp:t}).then(function(n){var r=Wd(hh(n()),"auth:user:"+t.name);return Og(r)})}function gY(e){var t,n=mL(),r="auth:user:"+n.app.name,i=hh(n),s=n.currentUser;if(!s&&((t=e==null?void 0:e.initialData)!=null?t:e==null?void 0:e.startWithValue)){var a;s=(a=e.initialData)!=null?a:e.startWithValue}return Kt(r,i,Gr({},e,{initialData:s}))}function yY(e,t,n){if(t===void 0&&(t=!1),!e)throw new Error("you must provide a user");var r="auth:idTokenResult:"+e.uid+":forceRefresh="+t,i=ur(e.getIdTokenResult(t));return Kt(r,i,n)}function vte(e){if(e!=null&&e.hasOwnProperty("requiredClaims")&&e!=null&&e.hasOwnProperty("validateClaims"))throw new Error('Cannot have both "requiredClaims" and "validateClaims". Use one or the other.');var t=mL(),n="auth:signInCheck:"+t.app.name+"::forceRefresh:"+!!(e!=null&&e.forceRefresh);e!=null&&e.forceRefresh&&(n=n+":forceRefresh:"+e.forceRefresh),e!=null&&e.hasOwnProperty("requiredClaims")?n=n+":requiredClaims:"+JSON.stringify(e.requiredClaims):e!=null&&e.hasOwnProperty("validateCustomClaims")&&(n=n+":validateClaims:"+JSON.stringify(e.validateCustomClaims));var r=hh(t).pipe(tc(function(i){if(i)if(e&&(e.hasOwnProperty("requiredClaims")||e.hasOwnProperty("validateClaims"))){var s;return ur(i.getIdTokenResult((s=e==null?void 0:e.forceRefresh)!=null?s:!1)).pipe(Qt(function(a){var c;e.hasOwnProperty("requiredClaims")?c=_Y(e.requiredClaims):c=e.validateCustomClaims;var l=c(a.claims),h=l.hasRequiredClaims,d=l.errors;return{signedIn:!0,hasRequiredClaims:h,errors:d,user:i}}))}else return ki({signedIn:!0,hasRequiredClaims:!0,user:i});else return ki({signedIn:!1,hasRequiredClaims:!1})}));return Kt(n,r)}function _Y(e){return function(n){var r={};return Object.keys(e).forEach(function(i){e[i]!==n[i]&&(r[i]=[new DY("auth/missing-claim",'Expected "'+e[i]+'", but user has "'+n[i]+'" instead')])}),{hasRequiredClaims:Object.keys(r).length===0,errors:r}}}function bY(e){var t=e.user,n=e.fallback,r=e.children,i=e.requiredClaims,s=yY(t,!1),a=s.data,c=a.claims,l={},h=Pl();return h||console.warn("ClaimsCheck is deprecated and only works when ReactFire is in experimental Suspense Mode. Use useSigninCheck or set suspense={true} in FirebaseAppProvider if you want to use this component."),i&&Object.keys(i).forEach(function(d){i[d]!==c[d]&&(l[d]={expected:i[d],actual:c[d]})}),Object.keys(l).length===0?fn(cu,null,r):fn(cu,null,n)}function mte(e){var t=e.fallback,n=e.children,r=e.requiredClaims,i=gY(),s=i.data,a=Pl();return a||console.warn("AuthCheck is deprecated and only works when ReactFire is in experimental Suspense Mode. Use useSigninCheck or set suspense={true} in FirebaseAppProvider if you want to use this component."),s?r?fn(bY,{user:s,fallback:t,requiredClaims:r},n):fn(cu,null,n):fn(cu,null,t)}var a0=globalThis._reactFireDatabaseCachedQueries||[];globalThis._reactFireDatabaseCachedQueries||(globalThis._reactFireDatabaseCachedQueries=a0);function bL(e){var t=a0.findIndex(function(n){return n.isEqual(e)});return t>-1?t:a0.push(e)-1}function gte(e,t){var n="database:object:"+e.toString(),r=Yg(e);return Kt(n,r,t)}function wY(e,t){return Yg(e).pipe(Qt(function(n){return EY(n,t)}))}function EY(e,t){var n,r=e.snapshot.val();return typeof r!="object"?r:Gr({},e.snapshot.val(),t?(n={},n[t]=e.snapshot.key,n):null)}function yte(e,t){var n=t?Ml(t):"NO_ID_FIELD",r="database:objectVal:"+e.toString()+":idField="+n,i=wY(e,n);return Kt(r,i,t)}function _te(e,t){var n="database:list:"+bL(e),r=Xg(e);return Kt(n,r,t)}function bte(e,t){var n=t?Ml(t):"NO_ID_FIELD",r="database:listVal:"+bL(e)+":idField="+n,i=vA(e,n);return Kt(r,i,t)}var IY=function(e){pL(t,e);function t(r,i){var s;return s=e.call(this)||this,s._timeoutWindow=void 0,s._value=void 0,s._hasValue=!1,s._timeoutHandler=void 0,s._firstEmission=void 0,s._error=void 0,s._innerObservable=void 0,s._warmupSubscription=void 0,s._innerSubscriber=void 0,s._resolveFirstEmission=void 0,s._timeoutWindow=i,s._firstEmission=new Promise(function(a){return s._resolveFirstEmission=a}),s._innerObservable=r.pipe(Ug({next:function(c){s._next(c)},error:function(c){s._error=c,s._resolveFirstEmission()}}),uh(function(){return Rg()}),Fg(1)),s._warmupSubscription=s._innerObservable.subscribe(),s._timeoutHandler=setTimeout(s._reset.bind(dL(s)),s._timeoutWindow),s}var n=t.prototype;return n._next=function(i){this._hasValue=!0,this._value=i,this._resolveFirstEmission()},n._reset=function(){var i=this;this._warmupSubscription&&this._warmupSubscription.unsubscribe(),this._hasValue=!1,this._value=void 0,this._error=void 0,this._firstEmission=new Promise(function(s){return i._resolveFirstEmission=s})},n._subscribe=function(i){return this._timeoutHandler&&clearTimeout(this._timeoutHandler),this._innerSubscriber=this._innerObservable.subscribe(i),this._innerSubscriber},rY(t,[{key:"hasValue",get:function(){return this._hasValue||!!this._error}},{key:"value",get:function(){if(this._error)throw this._error;return this._value}},{key:"firstEmission",get:function(){return this._firstEmission}},{key:"ourError",get:function(){return this._error}}]),t}(Ai),TY=3e4,qd=globalThis._reactFirePreloadedObservables||new Map;globalThis._reactFirePreloadedObservables||(globalThis._reactFirePreloadedObservables=qd);function Wd(e,t){if(qd.has(t))return qd.get(t);var n=new IY(e,TY);return qd.set(t,n),n}function Kt(e,t,n){var r,i,s;if(n===void 0&&(n={}),!e)throw new Error("cannot call useObservable without an observableId");var a=Wd(t,e),c=n.hasOwnProperty("initialData")||n.hasOwnProperty("startWithValue"),l=Pl(n.suspense);if(l===!0&&!a.hasValue&&((r=!((i=n)!=null&&i.initialData))!=null?r:!((s=n)!=null&&s.startWithValue)))throw a.firstEmission;var h=r0(function(){var O;return a.hasValue?a.value:(O=n.initialData)!=null?O:n.startWithValue}),d=h[0],g=h[1],m=r0(!1),_=m[0],w=m[1],E=r0(!1),T=E[0],S=E[1];Z5(function(){var O=a.subscribe({next:function(L){g(function(){return L})},error:function(L){throw S(!0),L},complete:function(){w(!0)}});return function(){return O.unsubscribe()}},[a]);var R;return T?R="error":a.hasValue||c?R="success":R="loading",{status:R,hasEmitted:a.hasValue||c,isComplete:_,data:d,error:a.ourError,firstValuePromise:a.firstEmission}}var u0=globalThis._reactFireFirestoreQueryCache||[];globalThis._reactFireFirestoreQueryCache||(globalThis._reactFireFirestoreQueryCache=u0);function wL(e){var t=u0.findIndex(function(n){return n.isEqual(e)});return t>-1?t:u0.push(e)-1}function wte(e,t){var n=t.firebaseApp;return hY({firebaseApp:n}).then(function(r){var i=e(r());return Wd(lc(i),"firestore:doc:"+n.name+":"+i.path)})}function Ete(e,t){var n="firestore:doc:"+e.firestore.app.name+":"+e.path,r=lc(e);return Kt(n,r,t)}function Ite(e,t){var n="firestore:docOnce:"+e.firestore.app.name+":"+e.path,r=lc(e).pipe(lh());return Kt(n,r,t)}function Tte(e,t){var n=t?Ml(t):"NO_ID_FIELD",r="firestore:docData:"+e.firestore.app.name+":"+e.path+":idField="+n,i=Jg(e,n);return Kt(r,i,t)}function Ste(e,t){var n=t?Ml(t):"NO_ID_FIELD",r="firestore:docDataOnce:"+e.firestore.app.name+":"+e.path+":idField="+n,i=Jg(e,n).pipe(lh());return Kt(r,i,t)}function Cte(e,t){var n="firestore:collection:"+wL(e),r=$g(e);return Kt(n,r,t)}function Ate(e,t){var n=t?Ml(t):"NO_ID_FIELD",r="firestore:collectionData:"+wL(e)+":idField="+n,i=_A(e,n);return Kt(r,i,t)}function kte(e){var t,n=e.children,r=e.traceId,i=e.fallback,s=e.firePerf,a=_L();s||pY({firebaseApp:a}).then(function(g){return g()});var c=((t=performance)==null||t.getEntriesByName==null?void 0:t.getEntriesByName(r,"measure"))||[],l="_"+r+"Start["+c.length+"]",h="_"+r+"End["+c.length+"]",d=function(){return tY(function(){var m;return(m=performance)==null||m.mark==null||m.mark(l),function(){var _,w;(_=performance)==null||_.mark==null||_.mark(h),(w=performance)==null||w.measure==null||w.measure(r,l,h)}},[]),fn(cu,null,i)};return fn(eY,{fallback:fn(d,null)},n)}function Dl(e){var t=e.remoteConfig,n=e.key,r=e.getter;return new me(function(i){t.ensureInitialized().then(function(){i.next(r.bind(t)(n))})})}function SY(e,t){var n=e.getValue;return Dl({remoteConfig:e,key:t,getter:n})}function CY(e,t){var n=e.getString;return Dl({remoteConfig:e,key:t,getter:n})}function AY(e,t){var n=e.getNumber;return Dl({remoteConfig:e,key:t,getter:n})}function kY(e,t){var n=e.getBoolean;return Dl({remoteConfig:e,key:t,getter:n})}function RY(e){var t=e.getAll;return Dl({remoteConfig:e,key:"",getter:t})}function Ll(e,t){var n,r=cY(),i=(n=r._storage)==null?void 0:n.appName,s=t(r,e),a="remoteConfig:"+e+":"+t.name+":"+i;return Kt(a,s)}function Rte(e){return Ll(e,SY)}function Nte(e){return Ll(e,CY)}function Ote(e){return Ll(e,AY)}function xte(e){return Ll(e,kY)}function Pte(e){return Ll(e,RY)}var NY=["storage","storagePath","suspense","placeHolder"];function OY(e){return new me(function(t){var n=function(a){return t.next(a)},r=function(a){return t.error(a)},i=function(){return t.complete()};e.on("state_changed",n,r,i)})}function Dte(e,t,n){var r="storage:task:"+t.toString(),i=OY(e);return Kt(r,i,n)}function xY(e,t){var n="storage:downloadUrl:"+e.toString(),r=bA(e);return Kt(n,r,t)}function PY(e){var t=lY();return e=Gr({},e,{storage:t}),fn(EL,Gr({},e))}function EL(e){var t=e.storage,n=e.storagePath,r=e.suspense,i=e.placeHolder,s=sY(e,NY),a={suspense:Pl(r)};if(!t)throw new Error("Storage was not passed to component INTERNALStorageImage. This should not be possible");var c=xY(t.ref(n),a),l=c.status,h=c.data;return l==="success"?(s.alt||s.alt===""||console.warn('No alt prop provided for StorageImage with storagePath "'+n+'"',"img elements must have an alt prop, either with meaningful text, or an empty string for decorative images"),fn("img",Gr({src:h,alt:s.alt},s))):i??fn(cu,null,"''")}function Lte(e){var t=e.storage;return t?fn(EL,Gr({},e)):fn(PY,Gr({},e))}var DY=function(e){pL(t,e);function t(n,r,i){var s;return s=e.call(this,r)||this,s.code=void 0,s.customData=void 0,s.name="ReactFireError",s.code=n,s.customData=i,Object.setPrototypeOf(dL(s),t.prototype),s}return t}(o0(Error));function IL(e,t){if(t==="idField"||t==="initialData"||t==="suspense")return e?e[t]:void 0;throw new Error('Field "'+t+'" is not a valid key in ReactFireOptions')}function Mte(e){return IL(e,"initialData")}function Ml(e){return IL(e,"idField")}export{mte as AuthCheck,bY as ClaimsCheck,hte as FirebaseAppProvider,DY as ReactFireError,Lte as StorageImage,kte as SuspenseWithPerf,Ml as checkIdField,IL as checkOptions,Mte as checkinitialData,ste as preloadAnalytics,fY as preloadAuth,ate as preloadDatabase,hY as preloadFirestore,wte as preloadFirestoreDoc,ute as preloadFunctions,cte as preloadMessaging,Wd as preloadObservable,pY as preloadPerformance,lte as preloadRemoteConfig,fte as preloadStorage,dte as preloadUser,ete as useAnalytics,mL as useAuth,tte as useDatabase,_te as useDatabaseList,bte as useDatabaseListData,gte as useDatabaseObject,yte as useDatabaseObjectData,_L as useFirebaseApp,nte as useFirestore,Cte as useFirestoreCollection,Ate as useFirestoreCollectionData,Ete as useFirestoreDoc,Tte as useFirestoreDocData,Ste as useFirestoreDocDataOnce,Ite as useFirestoreDocOnce,rte as useFunctions,yY as useIdTokenResult,pte as useIsSuspenseEnabled,ite as useMessaging,Kt as useObservable,ote as usePerformance,cY as useRemoteConfig,Pte as useRemoteConfigAll,xte as useRemoteConfigBoolean,Ote as useRemoteConfigNumber,Nte as useRemoteConfigString,Rte as useRemoteConfigValue,vte as useSigninCheck,lY as useStorage,xY as useStorageDownloadURL,Dte as useStorageTask,Pl as useSuspenseEnabledFromConfigAndContext,gY as useUser,vY as version};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
